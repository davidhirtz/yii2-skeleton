import{a as zx,b as dX}from"../chunk-FW4363Y4.js";var oz=zx((EX,PL)=>{(function(){"use strict";var Oi=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},ol=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Di=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)},Ka=function(e,t){return vr(function(n,s){return e.eq(t(n),t(s))})},vr=function(e){return{eq:e}},Wn=vr(function(e,t){return e===t}),nr=Wn,Cs=function(e){return vr(function(t,n){if(t.length!==n.length)return!1;for(var s=t.length,a=0;a<s;a++)if(!e.eq(t[a],n[a]))return!1;return!0})},lr=function(e,t){return Ka(Cs(e),function(n){return Di(n,t)})},To=function(e){return vr(function(t,n){var s=Object.keys(t),a=Object.keys(n);if(!lr(nr).eq(s,a))return!1;for(var c=s.length,d=0;d<c;d++){var p=s[d];if(!e.eq(t[p],n[p]))return!1}return!0})},Ar=vr(function(e,t){if(e===t)return!0;var n=Oi(e),s=Oi(t);return n!==s?!1:ol(n)?e===t:n==="array"?Cs(Ar).eq(e,t):n==="object"?To(Ar).eq(e,t):!1});let Hr=Object.getPrototypeOf,Fs=(e,t,n)=>n(e,t.prototype)?!0:e.constructor?.name===t.name,$t=e=>{let t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Fs(e,String,(n,s)=>s.isPrototypeOf(n))?"string":t},jt=e=>t=>$t(t)===e,Yn=e=>t=>typeof t===e,Ss=e=>t=>e===t,Qe=(e,t)=>At(e)&&Fs(e,t,(n,s)=>Hr(n)===s),pt=jt("string"),At=jt("object"),ve=e=>Qe(e,Object),ht=jt("array"),me=Ss(null),ut=Yn("boolean"),ns=Ss(void 0),os=e=>e==null,Ve=e=>!os(e),zt=Yn("function"),vn=Yn("number"),_=(e,t)=>{if(ht(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},wt=()=>{},ls=(e,t)=>(...n)=>e(t.apply(null,n)),So=(e,t)=>n=>e(t(n)),lt=e=>()=>e,Ln=e=>e,Ho=(e,t)=>e===t;function _t(e,...t){return(...n)=>{let s=t.concat(n);return e.apply(null,s)}}let Ya=e=>t=>!e(t),it=e=>()=>{throw new Error(e)},Ot=e=>e(),Xa=e=>{e()},pn=lt(!1),so=lt(!0);class L{tag;value;static singletonNone=new L(!1);constructor(t,n){this.tag=t,this.value=n}static some(t){return new L(!0,t)}static none(){return L.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?L.some(t(this.value)):L.none()}bind(t){return this.tag?t(this.value):L.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:L.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return Ve(t)?L.some(t):L.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}let kn=Array.prototype.slice,Ja=Array.prototype.indexOf,Vs=Array.prototype.push,vo=(e,t)=>Ja.call(e,t),hi=(e,t)=>{let n=vo(e,t);return n===-1?L.none():L.some(n)},In=(e,t)=>vo(e,t)>-1,ro=(e,t)=>{for(let n=0,s=e.length;n<s;n++){let a=e[n];if(t(a,n))return!0}return!1},Kt=(e,t)=>{let n=e.length,s=new Array(n);for(let a=0;a<n;a++){let c=e[a];s[a]=t(c,a)}return s},Pe=(e,t)=>{for(let n=0,s=e.length;n<s;n++){let a=e[n];t(a,n)}},Ri=(e,t)=>{for(let n=e.length-1;n>=0;n--){let s=e[n];t(s,n)}},cs=(e,t)=>{let n=[],s=[];for(let a=0,c=e.length;a<c;a++){let d=e[a];(t(d,a)?n:s).push(d)}return{pass:n,fail:s}},Lt=(e,t)=>{let n=[];for(let s=0,a=e.length;s<a;s++){let c=e[s];t(c,s)&&n.push(c)}return n},Ge=(e,t)=>{if(e.length===0)return[];{let n=t(e[0]),s=[],a=[];for(let c=0,d=e.length;c<d;c++){let p=e[c],b=t(p);b!==n&&(s.push(a),a=[]),n=b,a.push(p)}return a.length!==0&&s.push(a),s}},dt=(e,t,n)=>(Ri(e,(s,a)=>{n=t(n,s,a)}),n),Mt=(e,t,n)=>(Pe(e,(s,a)=>{n=t(n,s,a)}),n),rn=(e,t,n)=>{for(let s=0,a=e.length;s<a;s++){let c=e[s];if(t(c,s))return L.some(c);if(n(c,s))break}return L.none()},xn=(e,t)=>rn(e,t,pn),Ao=(e,t)=>{for(let n=0,s=e.length;n<s;n++){let a=e[n];if(t(a,n))return L.some(n)}return L.none()},_s=(e,t)=>{for(let n=e.length-1;n>=0;n--)if(t(e[n],n))return L.some(n);return L.none()},lu=e=>{let t=[];for(let n=0,s=e.length;n<s;++n){if(!ht(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Vs.apply(t,e[n])}return t},cr=(e,t)=>lu(Kt(e,t)),Qa=(e,t)=>{for(let n=0,s=e.length;n<s;++n){let a=e[n];if(t(a,n)!==!0)return!1}return!0},kl=e=>{let t=kn.call(e,0);return t.reverse(),t},Ni=(e,t)=>Lt(e,n=>!In(t,n)),El=(e,t)=>{let n={};for(let s=0,a=e.length;s<a;s++){let c=e[s];n[String(c)]=t(c,s)}return n},Os=(e,t)=>{let n=kn.call(e,0);return n.sort(t),n},qt=(e,t)=>t>=0&&t<e.length?L.some(e[t]):L.none(),Sn=e=>qt(e,0),Ds=e=>qt(e,e.length-1),ks=zt(Array.from)?Array.from:e=>kn.call(e),Rt=(e,t)=>{for(let n=0;n<e.length;n++){let s=t(e[n],n);if(s.isSome())return s}return L.none()},na=(e,t)=>{let n=[],s=zt(t)?a=>ro(n,c=>t(c,a)):a=>In(n,a);for(let a=0,c=e.length;a<c;a++){let d=e[a];s(d)||n.push(d)}return n},zr=Object.keys,qu=Object.hasOwnProperty,An=(e,t)=>{let n=zr(e);for(let s=0,a=n.length;s<a;s++){let c=n[s],d=e[c];t(d,c)}},$r=(e,t)=>oa(e,(n,s)=>({k:s,v:t(n,s)})),oa=(e,t)=>{let n={};return An(e,(s,a)=>{let c=t(s,a);n[c.k]=c.v}),n},Tl=e=>(t,n)=>{e[n]=t},Al=(e,t,n,s)=>{An(e,(a,c)=>{(t(a,c)?n:s)(a,c)})},Nn=(e,t)=>{let n={},s={};return Al(e,t,Tl(n),Tl(s)),{t:n,f:s}},us=(e,t)=>{let n={};return Al(e,t,Tl(n),wt),n},Vr=(e,t)=>{let n=[];return An(e,(s,a)=>{n.push(t(s,a))}),n},eo=e=>Vr(e,Ln),_n=(e,t)=>Yt(e,t)?L.from(e[t]):L.none(),Yt=(e,t)=>qu.call(e,t),ei=(e,t)=>Yt(e,t)&&e[t]!==void 0&&e[t]!==null,we=(e,t,n=Ar)=>To(n).eq(e,t),Xn={generate:e=>{if(!ht(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");let t=[],n={};return Pe(e,(s,a)=>{let c=zr(s);if(c.length!==1)throw new Error("one and only one name per case");let d=c[0],p=s[d];if(n[d]!==void 0)throw new Error("duplicate key detected:"+d);if(d==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ht(p))throw new Error("case arguments must be an array");t.push(d),n[d]=(...b)=>{let S=b.length;if(S!==p.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+p.length+" ("+p+"), got "+S);return{fold:(...M)=>{if(M.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+M.length);return M[a].apply(null,b)},match:M=>{let P=zr(M);if(t.length!==P.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+P.join(","));if(!Qa(t,oe=>In(P,oe)))throw new Error("Not all branches were specified when using match. Specified: "+P.join(", ")+`
Required: `+t.join(", "));return M[d].apply(null,b)},log:M=>{console.log(M,{constructors:t,constructor:d,params:b})}}}}),n}},Us=e=>{let t=e;return{get:()=>t,set:a=>{t=a}}},Da=e=>{let t=c=>c(e),n=lt(e),s=()=>a,a={tag:!0,inner:e,fold:(c,d)=>d(e),isValue:so,isError:pn,map:c=>or.value(c(e)),mapError:s,bind:t,exists:t,forall:t,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:c=>{c(e)},toOptional:()=>L.some(e)};return a},Mi=e=>{let t=()=>n,n={tag:!1,inner:e,fold:(s,a)=>s(e),isValue:pn,isError:so,map:t,mapError:s=>or.error(s(e)),bind:t,exists:pn,forall:so,getOr:Ln,or:Ln,getOrThunk:Ot,orThunk:Ot,getOrDie:it(String(e)),each:wt,toOptional:L.none};return n},or={value:Da,error:Mi,fromOption:(e,t)=>e.fold(()=>Mi(t),Da)},Rs=typeof window<"u"?window:Function("return this;")(),gm=()=>{let e=window.crypto.getRandomValues(new Uint8Array(16));return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e},_l=()=>{let e=gm(),t=(n,s)=>{let a="";for(let c=n;c<=s;++c){let d=e[c].toString(16).padStart(2,"0");a+=d}return a};return`${t(0,3)}-${t(4,5)}-${t(6,7)}-${t(8,9)}-${t(10,15)}`},ur=(e,t,n)=>Math.min(Math.max(e,t),n),to=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295,cu=0,yo=e=>{let n=new Date().getTime(),s=Math.floor(to()*1e9);return cu++,e+"_"+s+cu+String(n)},_r=()=>window.isSecureContext?window.crypto.randomUUID():_l(),uu=(e,t)=>t,bc=(e,t)=>ve(e)&&ve(t)?ti(e,t):t,Gu=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");let n={};for(let s=0;s<t.length;s++){let a=t[s];for(let c in a)Yt(a,c)&&(n[c]=e(n[c],a[c]))}return n},ti=Gu(bc),Ur=Gu(uu),sl=(e,t,n=Ho)=>e.exists(s=>n(s,t)),dr=(e,t,n=Ho)=>sr(e,t,n).getOr(e.isNone()&&t.isNone()),Ol=e=>{let t=[],n=s=>{t.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return t},sr=(e,t,n)=>e.isSome()&&t.isSome()?L.some(n(e.getOrDie(),t.getOrDie())):L.none(),rl=(e,t,n,s)=>e.isSome()&&t.isSome()&&n.isSome()?L.some(s(e.getOrDie(),t.getOrDie(),n.getOrDie())):L.none(),fm=e=>e.bind(Ln),bt=(e,t)=>e?L.some(t):L.none(),pm=(e,t)=>{let n=t??Rs;for(let s=0;s<e.length&&n!==void 0&&n!==null;++s)n=n[e[s]];return n},Od=(e,t)=>{let n=e.split(".");return pm(n,t)};Xn.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);let du=e=>{let t=[],n=[];return Pe(e,s=>{s.fold(a=>{t.push(a)},a=>{n.push(a)})}),{errors:t,values:n}},mu=e=>{let t=Us(L.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(L.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:p=>{n(),t.set(L.some(p))}}},gg=e=>{let t=Us(L.none()),n=()=>t.get().each(p=>clearInterval(p));return{clear:()=>{n(),t.set(L.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:p=>{n(),t.set(L.some(setInterval(p,e)))}}},Ca=()=>{let e=mu(wt);return{...e,on:n=>e.get().each(n)}},Ku=(e,t)=>e.substring(t),Xl=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,Dd=(e,t)=>wn(e,t)?Ku(e,t.length):e,mr=(e,t,n=0,s)=>{let a=e.indexOf(t,n);return a!==-1?ns(s)?!0:a+t.length<=s:!1},wn=(e,t)=>Xl(e,t,0),vc=(e,t)=>Xl(e,t,e.length-t.length),yc=e=>t=>t.replace(e,""),wa=yc(/^\s+|\s+$/g),Jl=yc(/^\s+/g),fg=yc(/\s+$/g),Na=e=>e.length>0,xa=e=>!Na(e),Rd=(e,t)=>t<=0?"":new Array(t+1).join(e),Cc=(e,t=10)=>{let n=parseInt(e,t);return isNaN(n)?L.none():L.some(n)},Dl=(e,t)=>{let n=null;return{cancel:()=>{me(n)||(clearTimeout(n),n=null)},throttle:(...c)=>{me(n)&&(n=setTimeout(()=>{n=null,e.apply(null,c)},t))}}},ps=(e,t)=>{let n=null,s=()=>{me(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...c)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,c)},t)}}},ni=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},Rl="\uFEFF",ws="\xA0",Yu="\u2026",js=e=>e===Rl,Bi=e=>e.replace(/\uFEFF/g,""),pg=e=>{let t={};return Pe(e,n=>{t[n]={}}),zr(t)},Nd=e=>e.length!==void 0,yr=Array.isArray,Xu=e=>{if(yr(e))return e;{let t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t}},wc=(e,t,n)=>{if(!e)return!1;if(n=n||e,Nd(e)){for(let s=0,a=e.length;s<a;s++)if(t.call(n,e[s],s,e)===!1)return!1}else for(let s in e)if(Yt(e,s)&&t.call(n,e[s],s,e)===!1)return!1;return!0},al=(e,t)=>{let n=[];return wc(e,(s,a)=>{n.push(t(s,a,e))}),n},xc=(e,t)=>{let n=[];return wc(e,(s,a)=>{(!t||t(s,a,e))&&n.push(s)}),n},hg=(e,t)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n}return-1},Sc=(e,t,n,s)=>{let a=ns(n)?e[0]:n;for(let c=0;c<e.length;c++)a=t.call(s,a,e[c],c);return a},Ju=(e,t,n)=>{for(let s=0,a=e.length;s<a;s++)if(t.call(n,e[s],s,e))return s;return-1},Or=e=>e[e.length-1],kc=(e,t,n,s)=>{let a=e.isiOS()&&/ipad/i.test(n)===!0,c=e.isiOS()&&!a,d=e.isiOS()||e.isAndroid(),p=d||s("(pointer:coarse)"),b=a||!c&&d&&s("(min-device-width:768px)"),S=c||d&&!b,D=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,M=!S&&!b&&!D;return{isiPad:lt(a),isiPhone:lt(c),isTablet:lt(b),isPhone:lt(S),isTouch:lt(p),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:lt(D),isDesktop:lt(M)}},Qu=(e,t)=>{for(let n=0;n<e.length;n++){let s=e[n];if(s.test(t))return s}},bi=(e,t)=>{let n=Qu(e,t);if(!n)return{major:0,minor:0};let s=a=>Number(t.replace(n,"$"+a));return Ma(s(1),s(2))},Md=(e,t)=>{let n=String(t).toLowerCase();return e.length===0?Ql():bi(e,n)},Ql=()=>Ma(0,0),Ma=(e,t)=>({major:e,minor:t}),il={nu:Ma,detect:Md,unknown:Ql},Pi=(e,t)=>Rt(t.brands,n=>{let s=n.brand.toLowerCase();return xn(e,a=>s===a.brand?.toLowerCase()).map(a=>({current:a.name,version:il.nu(parseInt(n.version,10),0)}))}),Dr=(e,t)=>{let n=String(t).toLowerCase();return xn(e,s=>s.search(n))},oi=(e,t)=>Dr(e,t).map(n=>{let s=il.detect(n.versionRegexes,t);return{current:n.name,version:s}}),Ec=(e,t)=>Dr(e,t).map(n=>{let s=il.detect(n.versionRegexes,t);return{current:n.name,version:s}}),Tc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,_o=e=>t=>mr(t,e),sa=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>mr(e,"edge/")&&mr(e,"chrome")&&mr(e,"safari")&&mr(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Tc],search:e=>mr(e,"chrome")&&!mr(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>mr(e,"msie")||mr(e,"trident")},{name:"Opera",versionRegexes:[Tc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:_o("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:_o("firefox")},{name:"Safari",versionRegexes:[Tc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(mr(e,"safari")||mr(e,"mobile/"))&&mr(e,"applewebkit")}],ed=[{name:"Windows",search:_o("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>mr(e,"iphone")||mr(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:_o("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:_o("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:_o("linux"),versionRegexes:[]},{name:"Solaris",search:_o("sunos"),versionRegexes:[]},{name:"FreeBSD",search:_o("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:_o("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ba={browsers:lt(sa),oses:lt(ed)},Li="Edge",zo="Chromium",Rr="IE",ll="Opera",z="Firefox",te="Safari",fe=()=>Be({current:void 0,version:il.unknown()}),Be=e=>{let t=e.current,n=e.version,s=a=>()=>t===a;return{current:t,version:n,isEdge:s(Li),isChromium:s(zo),isIE:s(Rr),isOpera:s(ll),isFirefox:s(z),isSafari:s(te)}},ot={unknown:fe,nu:Be,edge:lt(Li),chromium:lt(zo),ie:lt(Rr),opera:lt(ll),firefox:lt(z),safari:lt(te)},Bt="Windows",Mn="iOS",mo="Android",yn="Linux",Ns="macOS",Go="Solaris",ma="FreeBSD",gu="ChromeOS",Ms=()=>Ac({current:void 0,version:il.unknown()}),Ac=e=>{let t=e.current,n=e.version,s=a=>()=>t===a;return{current:t,version:n,isWindows:s(Bt),isiOS:s(Mn),isAndroid:s(mo),isMacOS:s(Ns),isLinux:s(yn),isSolaris:s(Go),isFreeBSD:s(ma),isChromeOS:s(gu)}},ec={unknown:Ms,nu:Ac,windows:lt(Bt),ios:lt(Mn),android:lt(mo),linux:lt(yn),macos:lt(Ns),solaris:lt(Go),freebsd:lt(ma),chromeos:lt(gu)},se={detect:(e,t,n)=>{let s=Ba.browsers(),a=Ba.oses(),c=t.bind(b=>Pi(s,b)).orThunk(()=>oi(s,e)).fold(ot.unknown,ot.nu),d=Ec(a,e).fold(ec.unknown,ec.nu),p=kc(d,c,e,n);return{browser:c,os:d,deviceType:p}}},xe=e=>window.matchMedia(e).matches,je=ni(()=>se.detect(window.navigator.userAgent,L.from(window.navigator.userAgentData),xe)),ct=()=>je(),Gn=(e,t)=>Od(e,t),No=(e,t)=>{let n=Gn(e,t);if(n==null)throw new Error(e+" not available on this browser");return n},qs=Object.getPrototypeOf,Mo=e=>No("HTMLElement",e),Gs=e=>{let t=Od("ownerDocument.defaultView",e);return At(e)&&(Mo(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(qs(e).constructor.name))},Nl=window.navigator.userAgent,ra=ct(),Ks=ra.browser,Cr=ra.os,cl=ra.deviceType,en=Nl.indexOf("Windows Phone")!==-1,En={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ks.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ks.isIE(),windowsPhone:en,browser:{current:Ks.current,version:Ks.version,isChromium:Ks.isChromium,isEdge:Ks.isEdge,isFirefox:Ks.isFirefox,isIE:Ks.isIE,isOpera:Ks.isOpera,isSafari:Ks.isSafari},os:{current:Cr.current,version:Cr.version,isAndroid:Cr.isAndroid,isChromeOS:Cr.isChromeOS,isFreeBSD:Cr.isFreeBSD,isiOS:Cr.isiOS,isLinux:Cr.isLinux,isMacOS:Cr.isMacOS,isSolaris:Cr.isSolaris,isWindows:Cr.isWindows},deviceType:{isDesktop:cl.isDesktop,isiPad:cl.isiPad,isiPhone:cl.isiPhone,isPhone:cl.isPhone,isTablet:cl.isTablet,isTouch:cl.isTouch,isWebView:cl.isWebView}},ds=/^\s*|\s*$/g,Zs=e=>os(e)?"":(""+e).replace(ds,""),Oh=(e,t)=>t?t==="array"&&yr(e)?!0:typeof e===t:e!==void 0,Bs=(e,t,n={})=>{let s=pt(e)?e.split(t||","):e||[],a=s.length;for(;a--;)n[s[a]]={};return n},yp=Yt,_c=(e,...t)=>{for(let n=0;n<t.length;n++){let s=t[n];for(let a in s)if(Yt(s,a)){let c=s[a];c!==void 0&&(e[a]=c)}}return e},Dh=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),wc(e,(a,c)=>t.call(s,a,c,n)===!1?!1:(Dh(a,t,n,s),!0)))},et={trim:Zs,isArray:yr,is:Oh,toArray:Xu,makeMap:Bs,each:wc,map:al,grep:xc,inArray:hg,hasOwn:yp,extend:_c,walk:Dh,resolve:(e,t=window)=>{let n=e.split(".");for(let s=0,a=n.length;s<a&&(t=t[n[s]],!!t);s++);return t},explode:(e,t)=>ht(e)?e:e===""?[]:al(e.split(t||","),Zs),_addCacheSuffix:e=>{let t=En.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},gr=(e,t)=>{let s=(t||document).createElement("div");if(s.innerHTML=e,!s.hasChildNodes()||s.childNodes.length>1){let a="HTML does not have a single root node";throw console.error(a,e),new Error(a)}return hm(s.childNodes[0])},Ys=(e,t)=>{let s=(t||document).createElement(e);return hm(s)},m0=(e,t)=>{let s=(t||document).createTextNode(e);return hm(s)},hm=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},q={fromHtml:gr,fromTag:Ys,fromText:m0,fromDom:hm,fromPoint:(e,t,n)=>L.from(e.dom.elementFromPoint(t,n)).map(hm)},Bd=(e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},td=(e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},ga=(e,t,n)=>{let s=e.document.createRange();return Bd(s,t),td(s,n),s},ff=(e,t,n,s,a)=>{let c=e.document.createRange();return c.setStart(t.dom,n),c.setEnd(s.dom,a),c},Hs=Xn.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),bm=(e,t,n)=>t(q.fromDom(n.startContainer),n.startOffset,q.fromDom(n.endContainer),n.endOffset),Oc=(e,t)=>t.match({domRange:n=>({ltr:lt(n),rtl:L.none}),relative:(n,s)=>({ltr:ni(()=>ga(e,n,s)),rtl:ni(()=>L.some(ga(e,s,n)))}),exact:(n,s,a,c)=>({ltr:ni(()=>ff(e,n,s,a,c)),rtl:ni(()=>L.some(ff(e,a,c,n,s)))})}),Un=(e,t)=>{let n=t.ltr();return n.collapsed?t.rtl().filter(a=>a.collapsed===!1).map(a=>Hs.rtl(q.fromDom(a.endContainer),a.endOffset,q.fromDom(a.startContainer),a.startOffset)).getOrThunk(()=>bm(e,Hs.ltr,n)):bm(e,Hs.ltr,n)},pf=(e,t)=>{let n=Oc(e,t);return Un(e,n)};Hs.ltr,Hs.rtl;let Cg=8,wg=9,Nr=11,Ml=1,vm=3,Pa=(e,t)=>{let n=e.dom;if(n.nodeType!==Ml)return!1;{let s=n;if(s.matches!==void 0)return s.matches(t);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(t);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(t);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},hs=e=>e.nodeType!==Ml&&e.nodeType!==wg&&e.nodeType!==Nr||e.childElementCount===0,fu=(e,t)=>{let n=t===void 0?document:t.dom;return hs(n)?[]:Kt(n.querySelectorAll(e),q.fromDom)},Pd=(e,t)=>{let n=t===void 0?document:t.dom;return hs(n)?L.none():L.from(n.querySelector(e)).map(q.fromDom)},Qt=(e,t)=>e.dom===t.dom,La=(e,t)=>{let n=e.dom,s=t.dom;return n===s?!1:n.contains(s)},Ii=Pa,ym=(e,t)=>{let n=[],s=c=>(n.push(c),t(c)),a=t(e);do a=a.bind(s);while(a.isSome());return n},fn=e=>e.dom.nodeName.toLowerCase(),hf=e=>e.dom.nodeType,bf=e=>t=>hf(t)===e,xg=e=>hf(e)===Cg||fn(e)==="#comment",Cm=e=>Xs(e)&&Gs(e.dom),Xs=bf(Ml),Sa=bf(vm),g0=bf(wg),f0=bf(Nr),pu=e=>t=>Xs(t)&&fn(t)===e,Fi=e=>q.fromDom(e.dom.ownerDocument),hu=e=>g0(e)?e:Fi(e),Cp=e=>q.fromDom(hu(e).dom.documentElement),xo=e=>q.fromDom(hu(e).dom.defaultView),Mr=e=>L.from(e.dom.parentNode).map(q.fromDom),Ld=e=>L.from(e.dom.parentElement).map(q.fromDom),bu=(e,t)=>{let n=zt(t)?t:pn,s=e.dom,a=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){let c=s.parentNode,d=q.fromDom(c);if(a.push(d),n(d)===!0)break;s=c}return a},si=e=>{let t=n=>Lt(n,s=>!Qt(e,s));return Mr(e).map(rr).map(t).getOr([])},ul=e=>L.from(e.dom.previousSibling).map(q.fromDom),tc=e=>L.from(e.dom.nextSibling).map(q.fromDom),Sg=e=>kl(ym(e,ul)),bs=e=>ym(e,tc),rr=e=>Kt(e.dom.childNodes,q.fromDom),$o=(e,t)=>{let n=e.dom.childNodes;return L.from(n[t]).map(q.fromDom)},Js=e=>$o(e,0),dl=e=>$o(e,e.dom.childNodes.length-1),ka=e=>e.dom.childNodes.length,vf=e=>{let t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return q.fromDom(t)},Bo=e=>f0(e)&&Ve(e.dom.host),Hi=e=>q.fromDom(e.dom.getRootNode()),kg=e=>Bo(e)?e:vf(hu(e)),aa=e=>Bo(e)?e:q.fromDom(hu(e).dom.body),wm=e=>{let t=Hi(e);return Bo(t)?L.some(t):L.none()},xm=e=>q.fromDom(e.dom.host),Eg=e=>{if(Ve(e.target)){let t=q.fromDom(e.target);if(Xs(t)&&nd(t)&&e.composed&&e.composedPath){let n=e.composedPath();if(n)return Sn(n)}}return L.from(e.target)},nd=e=>Ve(e.dom.shadowRoot),yf=(e,t,n,s,a,c,d)=>({target:e,x:t,y:n,stop:s,prevent:a,kill:c,raw:d}),wp=e=>{let t=q.fromDom(Eg(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),a=ls(s,n);return yf(t,e.clientX,e.clientY,n,s,a,e)},vu=(e,t)=>n=>{e(n)&&t(wp(n))},Tg=(e,t,n,s,a)=>{let c=vu(n,s);return e.dom.addEventListener(t,c,a),{unbind:_t(Bl,e,t,c,a)}},xp=(e,t,n,s)=>Tg(e,t,n,s,!1),Bl=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},Sp=so,Cf=(e,t,n)=>xp(e,t,Sp,n),Ag=()=>q.fromDom(document),ia=(e,t=!1)=>e.dom.focus({preventScroll:t}),_g=e=>{let t=Hi(e).dom;return e.dom===t.activeElement},ri=(e=Ag())=>L.from(e.dom.activeElement).map(q.fromDom),Og=e=>ri(Hi(e)).filter(t=>e.dom.contains(t.dom)),Zr=(e,t)=>{Mr(e).each(s=>{s.dom.insertBefore(t.dom,e.dom)})},Pl=(e,t)=>{tc(e).fold(()=>{Mr(e).each(a=>{Oo(a,t)})},s=>{Zr(s,t)})},od=(e,t)=>{Js(e).fold(()=>{Oo(e,t)},s=>{e.dom.insertBefore(t.dom,s.dom)})},Oo=(e,t)=>{e.dom.appendChild(t.dom)},wr=(e,t)=>{Zr(e,t),Oo(t,e)},Br=(e,t)=>{Pe(t,n=>{Zr(e,n)})},yu=(e,t)=>{Pe(t,(n,s)=>{let a=s===0?e:t[s-1];Pl(a,n)})},ml=(e,t)=>{Pe(t,n=>{Oo(e,n)})},Wr=(e,t,n)=>{if(pt(n)||ut(n)||vn(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},Pr=(e,t,n)=>{Wr(e.dom,t,n)},Ea=(e,t)=>{let n=e.dom;An(t,(s,a)=>{Wr(n,a,s)})},ai=(e,t)=>{let n=e.dom.getAttribute(t);return n===null?void 0:n},xr=(e,t)=>L.from(ai(e,t)),Sm=(e,t)=>{let n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},Ws=(e,t)=>{e.dom.removeAttribute(t)},kp=e=>{let t=e.dom.attributes;return t==null||t.length===0},Ll=e=>Mt(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),vi=e=>{e.dom.textContent="",Pe(rr(e),t=>{Ko(t)})},Ko=e=>{let t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},yi=e=>{let t=rr(e);t.length>0&&yu(e,t),Ko(e)},km=(e,t)=>q.fromDom(e.dom.cloneNode(t)),ii=e=>km(e,!1),wf=e=>km(e,!0),gl=(e,t)=>{let n=q.fromTag(t),s=Ll(e);return Ea(n,s),n},Em=(e,t)=>{let n=gl(e,t);Pl(e,n);let s=rr(e);return ml(n,s),Ko(e),n},Ep=(e,t)=>{let s=(t||document).createElement("div");return s.innerHTML=e,rr(q.fromDom(s))},ms=e=>Kt(e,q.fromDom),sd=e=>e.dom.innerHTML,Cu=(e,t)=>{let s=Fi(e).dom,a=q.fromDom(s.createDocumentFragment()),c=Ep(t,s);ml(a,c),vi(e),Oo(e,a)},Tm=e=>{let t=q.fromTag("div"),n=q.fromDom(e.dom.cloneNode(!0));return Oo(t,n),sd(t)},Dg=e=>e.style!==void 0&&zt(e.style.getPropertyValue),wu=e=>{let t=Sa(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;let n=t.ownerDocument;return wm(q.fromDom(t)).fold(()=>n.body.contains(t),So(wu,xm))},Rg=(e,t,n)=>{if(!pt(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Dg(e)&&e.style.setProperty(t,n)},Tp=(e,t)=>{Dg(e)&&e.style.removeProperty(t)},Am=(e,t,n)=>{let s=e.dom;Rg(s,t,n)},_m=(e,t)=>{let n=e.dom;An(t,(s,a)=>{Rg(n,a,s)})},fl=(e,t)=>{let n=e.dom,a=window.getComputedStyle(n).getPropertyValue(t);return a===""&&!wu(e)?xf(n,t):a},xf=(e,t)=>Dg(e)?e.style.getPropertyValue(t):"",Id=(e,t)=>{let n=e.dom,s=xf(n,t);return L.from(s).filter(a=>a.length>0)},Om=e=>{let t={},n=e.dom;if(Dg(n))for(let s=0;s<n.style.length;s++){let a=n.style.item(s);t[a]=n.style[a]}return t},Dc=(e,t)=>{let n=e.dom;Tp(n,t),sl(xr(e,"style").map(wa),"")&&Ws(e,"style")},fa=e=>e.dom.offsetWidth,Il=((e,t)=>{let n=(p,b)=>{if(!vn(b)&&!b.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+b);let S=p.dom;Dg(S)&&(S.style[e]=b+"px")},s=p=>{let b=t(p);if(b<=0||b===null){let S=fl(p,e);return parseFloat(S)||0}return b},a=s,c=(p,b)=>Mt(b,(S,D)=>{let M=fl(p,D),P=M===void 0?0:parseInt(M,10);return isNaN(P)?S:S+P},0);return{set:n,get:s,getOuter:a,aggregate:c,max:(p,b,S)=>{let D=c(p,S);return b>D?b-D:0}}})("height",e=>{let t=e.dom;return wu(e)?t.getBoundingClientRect().height:t.offsetHeight}),rd=e=>Il.get(e),Ng=(e,t)=>({left:e,top:t,translate:(s,a)=>Ng(e+s,t+a)}),xu=Ng,Dm=e=>{let t=e.getBoundingClientRect();return xu(t.left,t.top)},Fd=(e,t)=>e!==void 0?e:t!==void 0?t:0,p0=e=>{let t=e.dom.ownerDocument,n=t.body,s=t.defaultView,a=t.documentElement;if(n===e.dom)return xu(n.offsetLeft,n.offsetTop);let c=Fd(s?.pageYOffset,a.scrollTop),d=Fd(s?.pageXOffset,a.scrollLeft),p=Fd(a.clientTop,n.clientTop),b=Fd(a.clientLeft,n.clientLeft);return ss(e).translate(d-b,c-p)},ss=e=>{let t=e.dom,s=t.ownerDocument.body;return s===t?xu(s.offsetLeft,s.offsetTop):wu(e)?Dm(t):xu(0,0)},Ia=e=>{let t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return xu(n,s)},li=(e,t,n)=>{let a=(n!==void 0?n.dom:document).defaultView;a&&a.scrollTo(e,t)},Rc=(e,t)=>{ct().browser.isSafari()&&zt(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},pa=(e,t)=>{let n=c=>{if(!e(c))throw new Error("Can only get "+t+" value of a "+t+" node");return s(c).getOr("")},s=c=>e(c)?L.from(c.dom.nodeValue):L.none();return{get:n,getOption:s,set:(c,d)=>{if(!e(c))throw new Error("Can only set raw "+t+" value of a "+t+" node");c.dom.nodeValue=d}}},Nc=(e,t)=>{let s=(t||document).createDocumentFragment();return Pe(e,a=>{s.appendChild(a.dom)}),q.fromDom(s)},Sr=pa(Sa,"text"),kr=e=>Sr.get(e),Hd=e=>Sr.getOption(e),Ke=(e,t)=>Sr.set(e,t),Ci=(e,t)=>{let n=ai(e,t);return n===void 0||n===""?[]:n.split(" ")},Mg=(e,t,n)=>{let a=Ci(e,t).concat([n]);return Pr(e,t,a.join(" ")),!0},fr=(e,t,n)=>{let s=Lt(Ci(e,t),a=>a!==n);return s.length>0?Pr(e,t,s.join(" ")):Ws(e,t),!1};var Fl=(e,t,n,s,a)=>e(n,s)?L.some(n):zt(a)&&a(n)?L.none():t(n,s,a);let jr=(e,t,n)=>{let s=e.dom,a=zt(n)?n:pn;for(;s.parentNode;){s=s.parentNode;let c=q.fromDom(s);if(t(c))return L.some(c);if(a(c))break}return L.none()},ha=(e,t,n)=>Fl((a,c)=>c(a),jr,e,t,n),Bg=(e,t)=>{let n=e.dom;return n.parentNode?Fa(q.fromDom(n.parentNode),s=>!Qt(e,s)&&t(s)):L.none()},Fa=(e,t)=>{let n=a=>t(q.fromDom(a));return xn(e.dom.childNodes,n).map(q.fromDom)},no=(e,t)=>{let n=s=>{for(let a=0;a<s.childNodes.length;a++){let c=q.fromDom(s.childNodes[a]);if(t(c))return L.some(c);let d=n(s.childNodes[a]);if(d.isSome())return d}return L.none()};return n(e.dom)},Ha=(e,t,n)=>jr(e,s=>Pa(s,t),n),Qs=(e,t)=>Pd(t,e),Po=(e,t,n)=>Fl((a,c)=>Pa(a,c),Ha,e,t,n),zd=e=>e.dom.classList!==void 0,qr=e=>Ci(e,"class"),ad=(e,t)=>Mg(e,"class",t),ci=(e,t)=>fr(e,"class",t),Te=(e,t)=>In(qr(e),t)?ci(e,t):ad(e,t),za=(e,t)=>{zd(e)?e.dom.classList.add(t):ad(e,t)},Mc=e=>{(zd(e)?e.dom.classList:qr(e)).length===0&&Ws(e,"class")},Yo=(e,t)=>{zd(e)?e.dom.classList.remove(t):ci(e,t),Mc(e)},nc=(e,t)=>{let n=zd(e)?e.dom.classList.toggle(t):Te(e,t);return Mc(e),n},Gr=(e,t)=>zd(e)&&e.dom.classList.contains(t),rs=(e,t)=>{Pe(t,n=>{za(e,n)})},Su=(e,t)=>{Pe(t,n=>{Yo(e,n)})},Ap=e=>Po(e,"[contenteditable]"),wi=(e,t=!1)=>wu(e)?e.dom.isContentEditable:Ap(e).fold(lt(t),n=>Rm(n)==="true"),Rm=e=>e.dom.contentEditable,Er=(e,t)=>{e.dom.contentEditable=t?"true":"false"},oc=(e,t,n)=>Lt(bu(e,n),t),Sf=(e,t)=>Lt(rr(e),t),Bc=(e,t)=>{let n=[];return Pe(rr(e),s=>{t(s)&&(n=n.concat([s])),n=n.concat(Bc(s,t))}),n},sc=(e,t,n)=>oc(e,s=>Pa(s,t),n),gs=(e,t)=>fu(t,e),Nm=(e,t,n)=>jr(e,t,n).isSome(),id=(e,t)=>Bg(e,t).isSome(),Pg=(e,t)=>no(e,t).isSome(),xi=(e,t)=>Nm(e,_t(Qt,t)),pl=(e,t,n)=>Ha(e,t,n).isSome(),Lg=(e,t,n)=>Po(e,t,n).isSome(),zi=e=>zt(e)?e:pn,h0=(e,t,n)=>{let s=e.dom,a=zi(n);for(;s.parentNode;){s=s.parentNode;let c=q.fromDom(s),d=t(c);if(d.isSome())return d;if(a(c))break}return L.none()},Pc=(e,t,n)=>{let s=t(e),a=zi(n);return s.orThunk(()=>a(e)?L.none():h0(e,t,a))},$d=e=>Hd(e).filter(t=>t.trim().length!==0||t.indexOf(ws)>-1).isSome(),ku=e=>Cm(e)&&ai(e,"contenteditable")==="false",b0=["img","br"],Ig=e=>$d(e)||In(b0,fn(e))||ku(e),rv=e=>no(e,Ig),T={create:(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s})},H=Xn.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),j=(e,t,n,s)=>e.fold(t,n,s),ie=e=>e.fold(Ln,Ln,Ln),Oe=H.before,Je=H.on,Xe=H.after,kt={before:Oe,on:Je,after:Xe,cata:j,getStart:ie},Zt=Xn.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),lo=e=>Zt.exact(e.start,e.soffset,e.finish,e.foffset),Do=e=>e.match({domRange:t=>q.fromDom(t.startContainer),relative:(t,n)=>kt.getStart(t),exact:(t,n,s,a)=>t}),Es=Zt.domRange,Si=Zt.relative,ld=Zt.exact,cd=e=>{let t=Do(e);return xo(t)},Eu=T.create,$i={domRange:Es,relative:Si,exact:ld,exactFromRange:lo,getWin:cd,range:Eu},Vi=(e,t,n)=>L.from(e.caretPositionFromPoint?.(t,n)).bind(s=>{if(s.offsetNode===null)return L.none();let a=e.createRange();return a.setStart(s.offsetNode,s.offset),a.collapse(),L.some(a)}),hl=(e,t,n)=>L.from(e.caretRangeFromPoint?.(t,n)),Lc=(e,t,n)=>e.caretPositionFromPoint?Vi(e,t,n):e.caretRangeFromPoint?hl(e,t,n):L.none(),_p=(e,t,n)=>{let s=e.document;return Lc(s,t,n).map(a=>T.create(q.fromDom(a.startContainer),a.startOffset,q.fromDom(a.endContainer),a.endOffset))},Tu=(e,t)=>{let n=fn(e);return n==="input"?kt.after(e):In(["br","img"],n)?t===0?kt.before(e):kt.after(e):kt.on(e,t)},Mm=(e,t)=>{let n=e.fold(kt.before,Tu,kt.after),s=t.fold(kt.before,Tu,kt.after);return $i.relative(n,s)},kf=(e,t,n,s)=>{let a=Tu(e,t),c=Tu(n,s);return $i.relative(a,c)},Op=e=>e.match({domRange:t=>{let n=q.fromDom(t.startContainer),s=q.fromDom(t.endContainer);return kf(n,t.startOffset,s,t.endOffset)},relative:Mm,exact:kf}),ao=e=>{let t=$i.getWin(e).dom,n=(a,c,d,p)=>ff(t,a,c,d,p),s=Op(e);return pf(t,s).match({ltr:n,rtl:n})},Ps=(e,t,n)=>_p(e,t,n),$a=e=>{let t=e===void 0?window:e;return ct().browser.isFirefox()?L.none():L.from(t.visualViewport)},pr=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),Ic=e=>{let t=e===void 0?window:e,n=t.document,s=Ia(q.fromDom(n));return $a(t).fold(()=>{let a=t.document.documentElement,c=a.clientWidth,d=a.clientHeight;return pr(s.left,s.top,c,d)},a=>pr(Math.max(a.pageLeft,s.left),Math.max(a.pageTop,s.top),a.width,a.height))};class er{rootNode;node;constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,s,a){if(t){if(!a&&t[n])return t[n];if(t!==this.rootNode){let c=t[s];if(c)return c;for(let d=t.parentNode;d&&d!==this.rootNode;d=d.parentNode)if(c=d[s],c)return c}}}findPreviousNode(t,n){if(t){let s=t.previousSibling;if(this.rootNode&&s===this.rootNode)return;if(s){if(!n){for(let c=s.lastChild;c;c=c.lastChild)if(!c.lastChild)return c}return s}let a=t.parentNode;if(a&&a!==this.rootNode)return a}}}let Ef=/^[ \t\r\n]*$/,Fc=e=>Ef.test(e),av=e=>{for(let t of e)if(!js(t))return!1;return!0},v0=e=>" \f	\v".indexOf(e)!==-1,Rh=e=>e===`
`||e==="\r",gy=(e,t)=>t<e.length&&t>=0?Rh(e[t]):!1,fy=(e,t=4,n=!0,s=!0)=>{let a=Rd(" ",t),c=e.replace(/\t/g,a);return Mt(c,(p,b)=>v0(b)||b===ws?p.pcIsSpace||p.str===""&&n||p.str.length===c.length-1&&s||gy(c,p.str.length+1)?{pcIsSpace:!1,str:p.str+ws}:{pcIsSpace:!0,str:p.str+" "}:{pcIsSpace:Rh(b),str:p.str+b},{pcIsSpace:!1,str:""}).str},Bm=e=>t=>!!t&&t.nodeType===e,Au=e=>!!e&&!Object.getPrototypeOf(e),It=Bm(1),Rn=e=>It(e)&&Cm(q.fromDom(e)),bl=e=>It(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",_u=e=>{let t=e.toLowerCase();return n=>Ve(n)&&n.nodeName.toLowerCase()===t},rc=e=>{let t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){let s=n.nodeName.toLowerCase();return In(t,s)}return!1}},Xo=(e,t)=>{let n=t.toLowerCase().split(" ");return s=>{if(It(s)){let a=s.ownerDocument.defaultView;if(a)for(let c=0;c<n.length;c++){let d=a.getComputedStyle(s,null);if((d?d.getPropertyValue(e):null)===n[c])return!0}}return!1}},py=e=>t=>It(t)&&t.hasAttribute(e),Fg=e=>It(e)&&e.hasAttribute("data-mce-bogus"),Tf=e=>It(e)&&e.getAttribute("data-mce-bogus")==="all",Ou=e=>It(e)&&e.tagName==="TABLE",y0=e=>t=>!!(Rn(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),Nh=rc(["textarea","input"]),tt=Bm(3),iv=Bm(4),Mh=Bm(7),ud=Bm(8),Af=Bm(9),Bh=Bm(11),zs=_u("br"),C0=_u("img"),Ph=_u("a"),Ui=y0("true"),Vo=y0("false"),_f=e=>Rn(e)&&e.isContentEditable&&Ve(e.parentElement)&&!e.parentElement.isContentEditable,Of=rc(["td","th"]),w0=rc(["td","th","caption"]),Va=_u("template"),Zi=rc(["video","audio","object","embed"]),x0=_u("li"),lv=_u("details"),$x=_u("summary"),hy="uc-video",S0=e=>e.nodeName.toLowerCase()===hy,cv={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},k0=(e,t,n)=>{let s=q.fromDom(t),a=q.fromDom(e),c=n.getWhitespaceElements();return Nm(a,p=>Yt(c,fn(p)),_t(Qt,s))},Wi=e=>It(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Hc=(e,t)=>It(e)&&Yt(t.getNonEmptyElements(),e.nodeName),Du=py("data-mce-bookmark"),E0=e=>Ld(q.fromDom(e)).exists(t=>!wi(t)),uv=(e,t,n)=>Fc(e.data)&&!k0(e,t,n),Vx=(e,t,n,s)=>tt(e)&&!uv(e,t,n)&&(!s.includeZwsp||!av(e.data)),Lh=(e,t,n,s)=>zt(s.isContent)&&s.isContent(t)||Hc(t,e)||Du(t)||Wi(t)||Vx(t,n,e,s)||Vo(t)||Ui(t)&&E0(t),dd=(e,t,n)=>{let s={...cv,...n};if(s.checkRootAsContent&&Lh(e,t,t,s))return!1;let a=t.firstChild,c=0;if(!a)return!0;let d=new er(a,t);do{if(s.skipBogus&&It(a)){let p=a.getAttribute("data-mce-bogus");if(p){a=d.next(p==="all");continue}}if(ud(a)){a=d.next(!0);continue}if(zs(a)){c++,a=d.next();continue}if(Lh(e,a,t,s))return!1;a=d.next()}while(a);return c<=1},ki=(e,t,n)=>dd(e,t.dom,{checkRootAsContent:!0,...n}),T0=(e,t,n)=>Lh(e,t,t,{includeZwsp:cv.includeZwsp,...n}),Dp=e=>{let t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},Hg=e=>Dp(e)!=="html",Ih=e=>Hg(e.nodeName),A0=e=>Dp(e.nodeName),fs=["svg","math"],zg=()=>{let e=Ca(),t=()=>e.get().map(A0).getOr("html");return{track:a=>(Ih(a)?e.set(a):e.get().exists(c=>!c.contains(a))&&e.clear(),t()),current:t,reset:()=>{e.clear()}}},Df="data-mce-block",dv=e=>Lt(zr(e),t=>!/[A-Z]/.test(t)),Fh=e=>Kt(dv(e),t=>{let n=CSS.escape(t);return`${n}:`+Kt(fs,s=>`not(${s} ${n})`).join(":")}).join(","),Hh=(e,t)=>Ve(t.querySelector(e))?(t.setAttribute(Df,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Df),!1),_0=(e,t)=>{let n=Fh(e.getTransparentElements()),s=Fh(e.getBlockElements());return Lt(t.querySelectorAll(n),a=>Hh(s,a))},O0=(e,t,n)=>{let s=n?"lastChild":"firstChild";for(let a=t[s];a;a=a[s])if(dd(e,a,{checkRootAsContent:!0})){a.parentNode?.removeChild(a);return}},by=(e,t,n)=>{let s=document.createRange(),a=t.parentNode;if(a){s.setStartBefore(t),s.setEndBefore(n);let c=s.extractContents();O0(e,c,!0),s.setStartAfter(n),s.setEndAfter(t);let d=s.extractContents();O0(e,d,!1),dd(e,c,{checkRootAsContent:!0})||a.insertBefore(c,t),dd(e,n,{checkRootAsContent:!0})||a.insertBefore(n,t),dd(e,d,{checkRootAsContent:!0})||a.insertBefore(d,t),a.removeChild(t)}},mv=(e,t,n)=>{let s=e.getBlockElements(),a=q.fromDom(t),c=p=>fn(p)in s,d=p=>Qt(p,a);Pe(ms(n),p=>{jr(p,c,d).each(b=>{let S=Sf(p,D=>c(D)&&!e.isValidChild(fn(b),fn(D)));if(S.length>0){let D=Ld(b);Pe(S,M=>{jr(M,c,d).each(P=>{by(e,P.dom,M.dom)})}),D.each(M=>_0(e,M.dom))}})})},Hl=(e,t,n)=>{Pe([...n,...Pm(e,t)?[t]:[]],s=>Pe(gs(q.fromDom(s),s.nodeName.toLowerCase()),a=>{vy(e,a.dom)&&yi(a)}))},Rp=(e,t)=>{let n=_0(e,t);mv(e,t,n),Hl(e,t,n)},Ua=(e,t)=>{if($h(e,t)){let n=Fh(e.getBlockElements());Hh(n,t)}},$g=(e,t,n)=>{let s=c=>Qt(c,q.fromDom(t)),a=bu(q.fromDom(n),s);qt(a,a.length-2).filter(Xs).fold(()=>Rp(e,t),c=>Rp(e,c.dom))},Np=e=>e.hasAttribute(Df),zh=(e,t)=>Yt(e.getTransparentElements(),t),$h=(e,t)=>It(t)&&zh(e,t.nodeName),Pm=(e,t)=>$h(e,t)&&Np(t),vy=(e,t)=>$h(e,t)&&!Np(t),D0=(e,t)=>t.type===1&&zh(e,t.name)&&pt(t.attr(Df)),yy=ct().browser,gv=e=>xn(e,Xs),Za=e=>yy.isFirefox()&&fn(e)==="table"?gv(rr(e)).filter(t=>fn(t)==="caption").bind(t=>gv(bs(t)).map(n=>{let s=n.dom.offsetTop,a=t.dom.offsetTop,c=t.dom.offsetHeight;return s<=a?-c:0})).getOr(0):0,Lm=(e,t)=>e.children&&In(e.children,t),Cy=(e,t,n)=>{let s=0,a=0,c=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&fl(q.fromDom(e),"position")==="static"){let p=t.getBoundingClientRect();return s=p.left+(c.documentElement.scrollLeft||e.scrollLeft)-c.documentElement.clientLeft,a=p.top+(c.documentElement.scrollTop||e.scrollTop)-c.documentElement.clientTop,{x:s,y:a}}let d=t;for(;d&&d!==n&&d.nodeType&&!Lm(d,n);){let p=d;s+=p.offsetLeft||0,a+=p.offsetTop||0,d=p.offsetParent}for(d=t.parentNode;d&&d!==n&&d.nodeType&&!Lm(d,n);)s-=d.scrollLeft||0,a-=d.scrollTop||0,d=d.parentNode;a+=Za(q.fromDom(t))}return{x:s,y:a}},wy=(e,t)=>{let n=t.crossOrigin;return t.contentCssCors?"anonymous":zt(n)?n(e):void 0},fv=(e,t={})=>{let n=0,s={},a=q.fromDom(e),c=hu(a),d=be=>{t.referrerPolicy=be},p=be=>{t.contentCssCors=be},b=be=>{t.crossOrigin=be},S=be=>{Oo(kg(a),be)},D=be=>{let Ce=kg(a);Qs(Ce,"#"+be).each(Ko)},M=be=>_n(s,be).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),P=be=>new Promise((Ce,He)=>{let qe,Ct=et._addCacheSuffix(be),Vt=M(Ct);s[Ct]=Vt,Vt.count++;let Ie=(gn,Qn)=>{Pe(gn,Xa),Vt.status=Qn,Vt.passed=[],Vt.failed=[],qe&&(qe.onload=null,qe.onerror=null,qe=null)},_e=()=>Ie(Vt.passed,2),ze=()=>Ie(Vt.failed,3);if(Ce&&Vt.passed.push(Ce),He&&Vt.failed.push(He),Vt.status===1)return;if(Vt.status===2){_e();return}if(Vt.status===3){ze();return}Vt.status=1;let yt=q.fromTag("link",c.dom);Ea(yt,{rel:"stylesheet",type:"text/css",id:Vt.id});let mn=wy(be,t);mn!==void 0&&Pr(yt,"crossOrigin",mn),t.referrerPolicy&&Pr(yt,"referrerpolicy",t.referrerPolicy),qe=yt.dom,qe.onload=_e,qe.onerror=ze,S(yt),Pr(yt,"href",Ct)}),Z=(be,Ce)=>{let He=M(be);s[be]=He,He.count++;let qe=q.fromTag("style",c.dom);Ea(qe,{rel:"stylesheet",type:"text/css",id:He.id,"data-mce-key":be}),qe.dom.innerHTML=Ce,S(qe)},oe=be=>Promise.allSettled(Kt(be,He=>P(He).then(lt(He)))).then(He=>{let qe=cs(He,Ct=>Ct.status==="fulfilled");return qe.fail.length>0?Promise.reject(Kt(qe.fail,Ct=>Ct.reason)):Kt(qe.pass,Ct=>Ct.value)}),Y=be=>{let Ce=et._addCacheSuffix(be);_n(s,Ce).each(He=>{--He.count===0&&(delete s[Ce],D(He.id))})};return{load:P,loadRawCss:Z,loadAll:oe,unload:Y,unloadRawCss:be=>{_n(s,be).each(Ce=>{--Ce.count===0&&(delete s[be],D(Ce.id))})},unloadAll:be=>{Pe(be,Ce=>{Y(Ce)})},_setReferrerPolicy:d,_setContentCssCors:p,_setCrossOrigin:b}},R0=(()=>{let e=new WeakMap;return{forElement:(n,s)=>{let c=Hi(n).dom;return L.from(e.get(c)).getOrThunk(()=>{let d=fv(c,s);return e.set(c,d),d})}}})(),Sy=e=>e.nodeName.toLowerCase()==="span",Lr=(e,t)=>Ve(e)&&(T0(t,e)||t.isInline(e.nodeName.toLowerCase())),Kr=(e,t,n)=>{let s=new er(e,t).prev(!1),a=new er(e,t).next(!1),c=ns(s)||Lr(s,n),d=ns(a)||Lr(a,n);return c&&d},Ta=e=>Sy(e)&&e.getAttribute("data-mce-type")==="bookmark",Wa=(e,t,n)=>tt(e)&&e.data.length>0&&Kr(e,t,n),ba=e=>It(e)?e.childNodes.length>0:!1,Yr=e=>Bh(e)||Af(e),Mp=(e,t,n,s)=>{let a=s||t;if(It(t)&&Ta(t))return t;let c=t.childNodes;for(let d=c.length-1;d>=0;d--)Mp(e,c[d],n,a);if(It(t)){let d=t.childNodes;d.length===1&&Ta(d[0])&&t.parentNode?.insertBefore(d[0],t)}return!Yr(t)&&!T0(n,t)&&!ba(t)&&!Wa(t,a,n)&&e.remove(t),t},N0=et.makeMap,Bp=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vh=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,M0=/[<>&\"\']/g,Uh=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,pv={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},Vd={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ac={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Vg=e=>{let t=q.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},Im=(e,t)=>{let n={};if(e){let s=e.split(",");t=t||10;for(let a=0;a<s.length;a+=2){let c=String.fromCharCode(parseInt(s[a],t));if(!Vd[c]){let d="&"+s[a+1]+";";n[c]=d,n[d]=c}}return n}else return},Zh=Im("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),hv=(e,t)=>e.replace(t?Bp:Vh,n=>Vd[n]||n),bv=e=>(""+e).replace(M0,t=>Vd[t]||t),Wh=(e,t)=>e.replace(t?Bp:Vh,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":Vd[n]||"&#"+n.charCodeAt(0)+";"),jh=(e,t,n)=>{let s=n||Zh;return e.replace(t?Bp:Vh,a=>Vd[a]||s[a]||a)},md={encodeRaw:hv,encodeAllRaw:bv,encodeNumeric:Wh,encodeNamed:jh,getEncodeFunc:(e,t)=>{let n=Im(t)||Zh,s=(d,p)=>d.replace(p?Bp:Vh,b=>Vd[b]!==void 0?Vd[b]:n[b]!==void 0?n[b]:b.length>1?"&#"+((b.charCodeAt(0)-55296)*1024+(b.charCodeAt(1)-56320)+65536)+";":"&#"+b.charCodeAt(0)+";"),a=(d,p)=>jh(d,p,n),c=N0(e.replace(/\+/g,","));return c.named&&c.numeric?s:c.named?t?a:jh:c.numeric?Wh:hv},decode:e=>e.replace(Uh,(t,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):pv[n]||String.fromCharCode(n)):ac[t]||Zh[t]||Vg(t))},Xr=(e,t)=>(e=et.trim(e),e?e.split(t||" "):[]),Ug=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),zc=e=>At(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",Gh=e=>{let t=n=>ht(n)?Kt(n,t):zc(n)?new RegExp(n.source,n.flags):At(n)?$r(n,t):n;return t(e)},P0=e=>{let t=/^(~)?(.+)$/;return cr(Xr(e,","),n=>{let s=t.exec(n);if(s){let c=s[1]==="~"?"span":"div",d=s[2];return[{cloneName:c,name:d}]}else return[]})},L0=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),ky=e=>{let t,n;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress template time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));let s=[t,n].join(" ");return{blockContent:t,phrasingContent:n,flowContent:s}},I0=e=>{let{blockContent:t,phrasingContent:n,flowContent:s}=ky(e),a=c=>Object.freeze(c.split(" "));return Object.freeze({blockContent:a(t),phrasingContent:a(n),flowContent:a(s)})},Ux={html4:ni(()=>I0("html4")),html5:ni(()=>I0("html5")),"html5-strict":ni(()=>I0("html5-strict"))},Ey=(e,t)=>{let{blockContent:n,phrasingContent:s,flowContent:a}=Ux[e]();return t==="blocks"?L.some(n):t==="phrasing"?L.some(s):t==="flow"?L.some(a):L.none()},Zg=e=>{let t=L0(e),{phrasingContent:n,flowContent:s}=ky(e),a={},c=(b,S,D)=>{a[b]={attributes:El(S,lt({})),attributesOrder:S,children:El(D,lt({}))}},d=(b,S="",D="")=>{let M=Xr(D),P=Xr(b),Z=P.length,oe=[...t,...Xr(S)];for(;Z--;)c(P[Z],oe.slice(),M)},p=(b,S)=>{let D=Xr(b),M=Xr(S),P=D.length;for(;P--;){let Z=a[D[P]];for(let oe=0,Y=M.length;oe<Y;oe++)Z.attributes[M[oe]]={},Z.attributesOrder.push(M[oe])}};return e!=="html5-strict"&&(Pe(Xr("acronym applet basefont big font strike tt"),D=>{d(D,"",n)}),Pe(Xr("center dir isindex noframes"),D=>{d(D,"",s)})),d("html","manifest","head body"),d("head","","base command link meta noscript script style title"),d("title hr noscript br"),d("base","href target"),d("link","href rel media hreflang type sizes hreflang"),d("meta","name http-equiv content charset property"),d("style","media type scoped"),d("script","src async defer type charset"),d("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",s),d("dd div","",s),d("address dt caption","",e==="html4"?n:s),d("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),d("blockquote","cite",s),d("ol","reversed start type","li"),d("ul","","li"),d("li","value",s),d("dl","","dt dd"),d("a","href target rel media hreflang type",e==="html4"?n:s),d("q","cite",n),d("ins del","cite datetime",s),d("img","src sizes srcset alt usemap ismap width height"),d("iframe","src name width height",s),d("embed","src type width height"),d("object","data type typemustmatch name usemap form width height",[s,"param"].join(" ")),d("param","name value"),d("map","name",[s,"area"].join(" ")),d("area","alt coords shape href target rel media hreflang type"),d("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),d("colgroup","span","col"),d("col","span"),d("tbody thead tfoot","","tr"),d("tr","","td th"),d("td","colspan rowspan headers",s),d("th","colspan rowspan headers scope abbr",s),d("form","accept-charset action autocomplete enctype method name novalidate target",s),d("fieldset","disabled form name",[s,"legend"].join(" ")),d("label","form for",n),d("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),d("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?s:n),d("select","disabled form multiple name required size","option optgroup"),d("optgroup","disabled label","option"),d("option","disabled label selected value"),d("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),d("menu","type label",[s,"li"].join(" ")),d("noscript","",s),e!=="html4"&&(d("wbr"),d("ruby","",[n,"rt rp"].join(" ")),d("figcaption","",s),d("mark rt rp bdi","",n),d("summary","",[n,"h1 h2 h3 h4 h5 h6"].join(" ")),d("canvas","width height",s),d("data","value",n),d("video","src crossorigin poster preload autoplay mediagroup loop controlslist disablepictureinpicture disableremoteplayback playsinline muted controls width height buffered",[s,"track source"].join(" ")),d("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[s,"track source"].join(" ")),d("picture","","img source"),d("source","src srcset type media sizes"),d("track","kind src srclang label default"),d("datalist","",[n,"option"].join(" ")),d("article section nav aside main header footer","",s),d("hgroup","","h1 h2 h3 h4 h5 h6"),d("figure","",[s,"figcaption"].join(" ")),d("time","datetime",n),d("dialog","open",s),d("command","type label icon disabled checked radiogroup command"),d("output","for form name",n),d("progress","value max",n),d("meter","value min max low high optimum",n),d("details","open",[s,"summary"].join(" ")),d("keygen","autofocus challenge disabled form keytype name"),c("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(p("script","language xml:space"),p("style","xml:space"),p("object","declare classid code codebase codetype archive standby align border hspace vspace"),p("embed","align name hspace vspace"),p("param","valuetype type"),p("a","charset name rev shape coords"),p("br","clear"),p("applet","codebase archive code object alt name width height align hspace vspace"),p("img","name longdesc align border hspace vspace"),p("iframe","longdesc frameborder marginwidth marginheight scrolling align"),p("font basefont","size color face"),p("input","usemap align"),p("select"),p("textarea"),p("h1 h2 h3 h4 h5 h6 div p legend caption","align"),p("ul","type compact"),p("li","type"),p("ol dl menu dir","compact"),p("pre","width xml:space"),p("hr","align noshade size width"),p("isindex","prompt"),p("table","summary width frame rules cellspacing cellpadding align bgcolor"),p("col","width align char charoff valign"),p("colgroup","width align char charoff valign"),p("thead","align char charoff valign"),p("tr","align char charoff valign bgcolor"),p("th","axis align char charoff valign nowrap bgcolor width height"),p("form","accept"),p("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),p("tfoot","align char charoff valign"),p("tbody","align char charoff valign"),p("area","nohref"),p("body","background bgcolor text link vlink alink")),e!=="html4"&&(p("input button select textarea","autofocus"),p("input textarea","placeholder"),p("a","download"),p("link script img","crossorigin"),p("img","loading"),p("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&Pe([a.video,a.audio],b=>{delete b.children.audio,delete b.children.video}),Pe(Xr("a form meter progress dfn"),b=>{a[b]&&delete a[b].children[b]}),delete a.caption.children.table,delete a.script,a},vv=e=>e==="-"?"remove":"add",Fm=e=>{let t=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return L.from(t.exec(e)).map(n=>({preset:n[1]==="@",name:n[2]}))},F0=e=>{let t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return cr(Xr(e,","),n=>{let s=t.exec(n);if(s){let a=s[1],c=a?vv(a):"replace",d=s[2],p=cr(Xr(s[3],"|"),b=>Fm(b).toArray());return[{operation:c,name:d,validChildren:p}]}else return[]})},Ud=(e,t)=>{let n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,s=/[*?+]/,{attributes:a,attributesOrder:c}=t;return Pe(Xr(e,"|"),d=>{let p=n.exec(d);if(p){let b={},S=p[1],D=p[2].replace(/[\\:]:/g,":"),M=p[3],P=p[4];if(S==="!"&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(D),b.required=!0),S==="-"){delete a[D],c.splice(et.inArray(c,D),1);return}if(M&&(M==="="?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:D,value:P}),b.defaultValue=P):M==="~"?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:D,value:P}),b.forcedValue=P):M==="<"&&(b.validValues=et.makeMap(P,"?"))),s.test(D)){let Z=b;t.attributePatterns=t.attributePatterns||[],Z.pattern=Ug(D),t.attributePatterns.push(Z)}else a[D]||c.push(D),a[D]=b}})},Kh=(e,t)=>{An(e.attributes,(n,s)=>{t.attributes[s]=n}),t.attributesOrder.push(...e.attributesOrder)},Ty=(e,t)=>{let n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return cr(Xr(t,","),s=>{let a=n.exec(s);if(a){let c=a[1],d=a[2],p=a[3],b=a[4],S=a[5],D={attributes:{},attributesOrder:[]};if(e.each(M=>Kh(M,D)),c==="#"?D.paddEmpty=!0:c==="-"&&(D.removeEmpty=!0),b==="!"&&(D.removeEmptyAttrs=!0),S&&Ud(S,D),p&&(D.outputName=d),d==="@")if(e.isNone())e=L.some(D);else return[];return[p?{name:d,element:D,aliasName:p}:{name:d,element:D}]}else return[]})},ja={},ji=et.makeMap,hr=et.each,Rf=et.extend,gd=et.explode,$n=(e,t={})=>{let n=ji(e," ",ji(e.toUpperCase()," "));return Rf(n,t)},Wt=e=>$n("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Nf=(e,t)=>{if(e){let n={};return pt(e)&&(e={"*":e}),hr(e,(s,a)=>{n[a]=n[a.toUpperCase()]=t==="map"?ji(s,/[, ]/):gd(s,/[, ]/)}),n}else return},Zd=(e={})=>{let t={},n={},s=[],a={},c={},d={},p=(an,oo,Fr)=>{let As=e[an];if(As)return ji(As,/[, ]/,ji(As.toUpperCase(),/[, ]/));{let ts=ja[an];return ts||(ts=$n(oo,Fr),ja[an]=ts),ts}},b=e.schema??"html5",S=Zg(b);e.verify_html===!1&&(e.valid_elements="*[*]");let D=Nf(e.valid_styles),M=Nf(e.invalid_styles,"map"),P=Nf(e.valid_classes,"map"),Z=p("whitespace_elements","pre script noscript style textarea video audio iframe object code"),oe=p("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),Y=p("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),ne=p("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),he="td th iframe video audio object script code",be=p("non_empty_elements",he+" pre svg textarea summary",Y),Ce=p("move_caret_before_on_enter_elements",he+" table",Y),He="h1 h2 h3 h4 h5 h6",qe=p("text_block_elements",He+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Ct=p("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing colgroup col",qe),Vt=p("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Ie=p("transparent_elements","a ins del canvas map"),_e=p("wrap_block_elements","pre "+He);hr("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),an=>{c[an]=new RegExp("</"+an+"[^>]*>","gi")});let ze=an=>{let oo=L.from(t["@"]),Fr=/[*?+]/;Pe(Ty(oo,an??""),({name:As,element:ts,aliasName:Tr})=>{if(Tr&&(t[Tr]=ts),Fr.test(As)){let iu=ts;iu.pattern=Ug(As),s.push(iu)}else t[As]=ts})},yt=an=>{s=[],Pe(zr(t),oo=>{delete t[oo]}),ze(an)},mn=(an,oo)=>{delete ja.text_block_elements,delete ja.block_elements;let Fr=oo.extends?!Sl(oo.extends):!1,As=oo.extends;if(n[an]=As?n[As]:{},a[an]=As??an,be[an.toUpperCase()]={},be[an]={},Fr||(Ct[an.toUpperCase()]={},Ct[an]={}),As&&!t[an]&&t[As]){let ts=Gh(t[As]);delete ts.removeEmptyAttrs,delete ts.removeEmpty,t[an]=ts}else t[an]={attributesOrder:[],attributes:{}};if(ht(oo.attributes)){let ts=iu=>{Tr.attributesOrder.push(iu),Tr.attributes[iu]={}},Tr=t[an]??{};delete Tr.attributesDefault,delete Tr.attributesForced,delete Tr.attributePatterns,delete Tr.attributesRequired,Tr.attributesOrder=[],Tr.attributes={},Pe(oo.attributes,iu=>{let Kl=L0(b);Fm(iu).each(({preset:_d,name:bp})=>{_d?bp==="global"&&Pe(Kl,ts):ts(bp)})}),t[an]=Tr}if(ut(oo.padEmpty)){let ts=t[an]??{};ts.paddEmpty=oo.padEmpty,t[an]=ts}if(ht(oo.children)){let ts={},Tr=Kl=>{ts[Kl]={}},iu=Kl=>{Ey(b,Kl).each(_d=>{Pe(_d,Tr)})};Pe(oo.children,Kl=>{Fm(Kl).each(({preset:_d,name:bp})=>{_d?iu(bp):Tr(bp)})}),n[an]=ts}As&&An(n,(ts,Tr)=>{ts[As]&&(n[Tr]=ts=Rf({},n[Tr]),ts[an]=ts[As])})},gn=an=>{Pe(P0(an??""),({name:oo,cloneName:Fr})=>{mn(oo,{extends:Fr})})},Qn=(an,oo)=>{d[an]=oo},Fo=an=>{At(an)?An(an,(oo,Fr)=>{let As=oo.componentUrl;pt(As)&&Qn(Fr,As),mn(Fr,oo)}):pt(an)&&gn(an)},ys=an=>{Pe(F0(an??""),({operation:oo,name:Fr,validChildren:As})=>{let ts=oo==="replace"?{"#comment":{}}:n[Fr],Tr=Kl=>{oo==="remove"?delete ts[Kl]:ts[Kl]={}},iu=Kl=>{Ey(b,Kl).each(_d=>{Pe(_d,Tr)})};Pe(As,({preset:Kl,name:_d})=>{Kl?iu(_d):Tr(_d)}),n[Fr]=ts})},Is=an=>{let oo=t[an];if(oo)return oo;let Fr=s.length;for(;Fr--;){let As=s[Fr];if(As.pattern.test(an))return As}},qa=()=>{e.valid_elements?(yt(e.valid_elements),hr(S,(an,oo)=>{n[oo]=an.children})):(hr(S,(an,oo)=>{t[oo]={attributes:an.attributes,attributesOrder:an.attributesOrder},n[oo]=an.children}),hr(Xr("strong/b em/i"),an=>{let oo=Xr(an,"/");t[oo[1]].outputName=oo[0]}),hr(Vt,(an,oo)=>{t[oo]&&(e.padd_empty_block_inline_children&&(t[oo].paddInEmptyBlock=!0),t[oo].removeEmpty=!0)}),hr(Xr("ol ul blockquote a table tbody"),an=>{t[an]&&(t[an].removeEmpty=!0)}),hr(Xr("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),an=>{t[an]&&(t[an].paddEmpty=!0)}),hr(Xr("span"),an=>{t[an].removeEmptyAttrs=!0})),delete t.svg,Fo(e.custom_elements),ys(e.valid_children),ze(e.extended_valid_elements),ys("+ol[ul|ol],+ul[ul|ol]"),hr({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(an,oo)=>{t[oo]&&(t[oo].parentsRequired=Xr(an))}),e.invalid_elements&&hr(gd(e.invalid_elements),an=>{t[an]&&delete t[an]}),Is("span")||ze("span[!data-mce-type|*]")},ru=lt(D),Et=lt(M),Gt=lt(P),Eo=lt(ne),bo=lt(Ct),pi=lt(qe),Ze=lt(Vt),gt=lt(Object.seal(Y)),Pt=lt(oe),qn=lt(be),Hn=lt(Ce),qo=lt(Z),au=lt(Ie),dm=lt(_e),Ad=lt(Object.seal(c)),Zu=(an,oo)=>{let Fr=n[an.toLowerCase()];return!!(Fr&&Fr[oo.toLowerCase()])},_h=(an,oo)=>{let Fr=Is(an);if(Fr)if(oo){if(Fr.attributes[oo])return!0;let As=Fr.attributePatterns;if(As){let ts=As.length;for(;ts--;)if(As[ts].pattern.test(oo))return!0}}else return!0;return!1},Sl=an=>Yt(bo(),an),hc=an=>!wn(an,"#")&&_h(an)&&!Sl(an),hp=an=>Yt(dm(),an)||hc(an),nv=lt(a),Bx=lt(d);return qa(),{type:b,children:n,elements:t,getValidStyles:ru,getValidClasses:Gt,getBlockElements:bo,getInvalidStyles:Et,getVoidElements:gt,getTextBlockElements:pi,getTextInlineElements:Ze,getBoolAttrs:Eo,getElementRule:Is,getSelfClosingElements:Pt,getNonEmptyElements:qn,getMoveCaretBeforeOnEnterElements:Hn,getWhitespaceElements:qo,getTransparentElements:au,getSpecialElements:Ad,getComponentUrls:Bx,isValidChild:Zu,isValid:_h,isBlock:Sl,isInline:hc,isWrapper:hp,getCustomElements:nv,addValidElements:ze,setValidElements:yt,addCustomElements:Fo,addValidChildren:ys}},yv=e=>({value:Yh(e)}),Yh=e=>Dd(e,"#").toUpperCase(),Lo=e=>{let t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},Wg=e=>{let t=Lo(e.red)+Lo(e.green)+Lo(e.blue);return yv(t)},Xh=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,$e=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,H0=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),Pp=(e,t,n,s)=>{let a=parseInt(e,10),c=parseInt(t,10),d=parseInt(n,10),p=parseFloat(s);return H0(a,c,d,p)},Lp=e=>Xh.test(e)?"rgb":$e.test(e)?"rgba":"other",z0=e=>{let t=Xh.exec(e);if(t!==null)return L.some(Pp(t[1],t[2],t[3],"1"));let n=$e.exec(e);return n!==null?L.some(Pp(n[1],n[2],n[3],n[4])):L.none()},Hm=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Mf=e=>z0(e).map(Wg).map(t=>"#"+t.value).getOr(e),fd=(e={},t)=>{let n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,c={},d,p,b=Rl;t&&(d=t.getValidStyles(),p=t.getInvalidStyles());let S=(`\\" \\' \\; \\: ; : `+b).split(" ");for(let M=0;M<S.length;M++)c[S[M]]=b+M,c[b+M]=S[M];let D={parse:M=>{let P={},Z=!1,oe=e.url_converter,Y=e.url_converter_scope||D,ne=(Ie,_e,ze)=>{let yt=P[Ie+"-top"+_e];if(!yt)return;let mn=P[Ie+"-right"+_e];if(!mn)return;let gn=P[Ie+"-bottom"+_e];if(!gn)return;let Qn=P[Ie+"-left"+_e];if(!Qn)return;let Fo=[yt,mn,gn,Qn],ys=Fo.length-1;for(;ys--&&Fo[ys]===Fo[ys+1];);ys>-1&&ze||(P[Ie+_e]=ys===-1?Fo[0]:Fo.join(" "),delete P[Ie+"-top"+_e],delete P[Ie+"-right"+_e],delete P[Ie+"-bottom"+_e],delete P[Ie+"-left"+_e])},he=Ie=>{let _e=P[Ie];if(!_e)return;let ze=_e.indexOf(",")>-1?[_e]:_e.split(" "),yt=ze.length;for(;yt--;)if(ze[yt]!==ze[0])return!1;return P[Ie]=ze[0],!0},be=(Ie,_e,ze,yt)=>{he(_e)&&he(ze)&&he(yt)&&(P[Ie]=P[_e]+" "+P[ze]+" "+P[yt],delete P[_e],delete P[ze],delete P[yt])},Ce=Ie=>(Z=!0,c[Ie]),He=(Ie,_e)=>(Z&&(Ie=Ie.replace(/\uFEFF[0-9]/g,ze=>c[ze])),_e||(Ie=Ie.replace(/\\([\'\";:])/g,"$1")),Ie),qe=Ie=>String.fromCharCode(parseInt(Ie.slice(1),16)),Ct=Ie=>Ie.replace(/\\[0-9a-f]+/gi,qe),Vt=(Ie,_e,ze,yt,mn,gn)=>{if(mn=mn||gn,mn)return mn=He(mn),"'"+mn.replace(/\'/g,"\\'")+"'";if(_e=He(_e||ze||yt||""),!e.allow_script_urls){let Qn=_e.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Qn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Qn))return""}return oe&&(_e=oe.call(Y,_e,"style")),"url('"+_e.replace(/\'/g,"\\'")+"')"};if(M){M=M.replace(/[\u0000-\u001F]/g,""),M=M.replace(/\\[\"\';:\uFEFF]/g,Ce).replace(/\"[^\"]+\"|\'[^\']+\'/g,_e=>_e.replace(/[;:]/g,Ce));let Ie;for(;Ie=s.exec(M);){s.lastIndex=Ie.index+Ie[0].length;let _e=Ie[1].replace(a,"").toLowerCase(),ze=Ie[2].replace(a,"");if(_e&&ze){if(_e=Ct(_e),ze=Ct(ze),_e.indexOf(b)!==-1||_e.indexOf('"')!==-1||!e.allow_script_urls&&(_e==="behavior"||/expression\s*\(|\/\*|\*\//.test(ze)))continue;_e==="font-weight"&&ze==="700"?ze="bold":(_e==="color"||_e==="background-color")&&(ze=ze.toLowerCase()),Lp(ze)==="rgb"&&z0(ze).each(yt=>{ze=Mf(Hm(yt)).toLowerCase()}),ze=ze.replace(n,Vt),P[_e]=Z?He(ze,!0):ze}}ne("border","",!0),ne("border","-width"),ne("border","-color"),ne("border","-style"),ne("padding",""),ne("margin",""),be("border","border-width","border-style","border-color"),P.border==="medium none"&&delete P.border,P["border-image"]==="none"&&delete P["border-image"]}return P},serialize:(M,P)=>{let Z="",oe=(ne,he)=>{let be=he[ne];if(be)for(let Ce=0,He=be.length;Ce<He;Ce++){let qe=be[Ce],Ct=M[qe];Ct&&(Z+=(Z.length>0?" ":"")+qe+": "+Ct+";")}},Y=(ne,he)=>{if(!p||!he)return!0;let be=p["*"];return be&&be[ne]?!1:(be=p[he],!(be&&be[ne]))};return P&&d?(oe("*",d),oe(P,d)):An(M,(ne,he)=>{ne&&Y(he,P)&&(Z+=(Z.length>0?" ":"")+he+": "+ne+";")}),Z}};return D},as={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Ru=e=>e instanceof Event||zt(e.initEvent),Ay=e=>e.isDefaultPrevented===so||e.isDefaultPrevented===pn,Wd=e=>os(e.preventDefault)||Ru(e),Nu=(e,t)=>{let n=t??{};for(let s in e)Yt(as,s)||(n[s]=e[s]);return Ve(e.composedPath)&&(n.composedPath=()=>e.composedPath()),Ve(e.getModifierState)&&(n.getModifierState=s=>e.getModifierState(s)),Ve(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},Ip=(e,t,n,s)=>{let a=Nu(t,s);return a.type=e,os(a.target)&&(a.target=a.srcElement??n),Wd(t)&&(a.preventDefault=()=>{a.defaultPrevented=!0,a.isDefaultPrevented=so,zt(t.preventDefault)&&t.preventDefault()},a.stopPropagation=()=>{a.cancelBubble=!0,a.isPropagationStopped=so,zt(t.stopPropagation)&&t.stopPropagation()},a.stopImmediatePropagation=()=>{a.isImmediatePropagationStopped=so,a.stopPropagation()},Ay(a)||(a.isDefaultPrevented=a.defaultPrevented===!0?so:pn,a.isPropagationStopped=a.cancelBubble===!0?so:pn,a.isImmediatePropagationStopped=pn)),a},Zx="mce-data-",_y=/^(?:mouse|contextmenu)|click/,st=(e,t,n,s)=>{e.addEventListener(t,n,s||!1)},$0=(e,t,n,s)=>{e.removeEventListener(t,n,s||!1)},Aa=e=>Ve(e)&&_y.test(e.type),Jh=(e,t)=>{let n=Ip(e.type,e,document,t);if(Aa(e)&&ns(e.pageX)&&!ns(e.clientX)){let s=n.target.ownerDocument||document,a=s.documentElement,c=s.body,d=n;d.pageX=e.clientX+(a&&a.scrollLeft||c&&c.scrollLeft||0)-(a&&a.clientLeft||c&&c.clientLeft||0),d.pageY=e.clientY+(a&&a.scrollTop||c&&c.scrollTop||0)-(a&&a.clientTop||c&&c.clientTop||0)}return n},Cv=(e,t,n)=>{let s=e.document,a={type:"ready"};if(n.domLoaded){t(a);return}let c=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,d=()=>{$0(e,"DOMContentLoaded",d),$0(e,"load",d),n.domLoaded||(n.domLoaded=!0,t(a)),e=null};c()?d():st(e,"DOMContentLoaded",d),n.domLoaded||st(e,"load",d)};class jg{static Event=new jg;domLoaded=!1;events={};expando;hasFocusIn;count=1;constructor(){this.expando=Zx+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,s,a){let c=this,d,p=window,b=P=>{c.executeHandlers(Jh(P||p.event),S)};if(!t||tt(t)||ud(t))return s;let S;t[c.expando]?S=t[c.expando]:(S=c.count++,t[c.expando]=S,c.events[S]={}),a=a||t;let D=n.split(" "),M=D.length;for(;M--;){let P=D[M],Z=b,oe=!1,Y=!1;if(P==="DOMContentLoaded"&&(P="ready"),c.domLoaded&&P==="ready"&&t.readyState==="complete"){s.call(a,Jh({type:P}));continue}!c.hasFocusIn&&(P==="focusin"||P==="focusout")&&(oe=!0,Y=P==="focusin"?"focus":"blur",Z=ne=>{let he=Jh(ne||p.event);he.type=he.type==="focus"?"focusin":"focusout",c.executeHandlers(he,S)}),d=c.events[S][P],d?P==="ready"&&c.domLoaded?s(Jh({type:P})):d.push({func:s,scope:a}):(c.events[S][P]=d=[{func:s,scope:a}],d.fakeName=Y,d.capture=oe,d.nativeHandler=Z,P==="ready"?Cv(t,Z,c):st(t,Y||P,Z,oe))}return t=d=null,s}unbind(t,n,s){if(!t||tt(t)||ud(t))return this;let a=t[this.expando];if(a){let c=this.events[a];if(n){let d=n.split(" "),p=d.length;for(;p--;){let b=d[p],S=c[b];if(S){if(s){let D=S.length;for(;D--;)if(S[D].func===s){let M=S.nativeHandler,P=S.fakeName,Z=S.capture,oe=S.slice(0,D).concat(S.slice(D+1));oe.nativeHandler=M,oe.fakeName=P,oe.capture=Z,c[b]=oe}}(!s||S.length===0)&&(delete c[b],$0(t,S.fakeName||b,S.nativeHandler,S.capture))}}}else An(c,(d,p)=>{$0(t,d.fakeName||p,d.nativeHandler,d.capture)}),c={};for(let d in c)if(Yt(c,d))return this;delete this.events[a];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,s){return this.dispatch(t,n,s)}dispatch(t,n,s){if(!t||tt(t)||ud(t))return this;let a=Jh({type:n,target:t},s);do{let c=t[this.expando];c&&this.executeHandlers(a,c),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!a.isPropagationStopped());return this}clean(t){if(!t||tt(t)||ud(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);let n=t.getElementsByTagName("*"),s=n.length;for(;s--;)t=n[s],t[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){let s=this.events[n],a=s&&s[t.type];if(a)for(let c=0,d=a.length;c<d;c++){let p=a[c];if(p&&p.func.call(p.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}let on=et.each,wv=et.grep,Fp="data-mce-style",Wx=et.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),jd=(e,t,n)=>{os(n)||n===""?Ws(e,t):Pr(e,t,n)},un=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),qg=(e,t)=>{let n=0;if(e)for(let s=e.nodeType,a=e.previousSibling;a;a=a.previousSibling){let c=a.nodeType;t&&tt(a)&&(c===s||!a.data.length)||(n++,s=c)}return n},qd=(e,t)=>{let n=ai(t,"style"),s=e.serialize(e.parse(n),fn(t));jd(t,Fp,s)},$c=(e,t)=>vn(e)?Yt(Wx,t)?e+"":e+"px":e,Gg=(e,t,n)=>{let s=un(t);os(n)||n===""?Dc(e,s):Am(e,s,$c(n,s))},vl=(e,t,n)=>{let s=t.keep_values,a={set:(d,p,b)=>{let S=q.fromDom(d);zt(t.url_converter)&&Ve(p)&&(p=t.url_converter.call(t.url_converter_scope||n(),String(p),b,d));let D="data-mce-"+b;jd(S,D,p),jd(S,b,p)},get:(d,p)=>{let b=q.fromDom(d);return ai(b,"data-mce-"+p)||ai(b,p)}},c={style:{set:(d,p)=>{let b=q.fromDom(d);s&&jd(b,Fp,p),Ws(b,"style"),pt(p)&&_m(b,e.parse(p))},get:d=>{let p=q.fromDom(d),b=ai(p,Fp)||ai(p,"style");return e.serialize(e.parse(b),fn(p))}}};return s&&(c.href=c.src=a),c},Co=(e,t={})=>{let n={},s=window,a={},c=0,d=!0,p=!0,b=R0.forElement(q.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy,crossOrigin:Ee=>{let De=t.crossOrigin;if(zt(De))return De(Ee,"stylesheet")}}),S=[],D=t.schema?t.schema:Zd({}),M=fd({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),P=t.ownEvents?new jg:jg.Event,Z=D.getBlockElements(),oe=Ee=>pt(Ee)?Yt(Z,Ee):It(Ee)&&(Yt(Z,Ee.nodeName)||Pm(D,Ee)),Y=Ee=>Ee&&e&&pt(Ee)?e.getElementById(Ee):Ee,ne=Ee=>{let De=Y(Ee);return Ve(De)?q.fromDom(De):null},he=(Ee,De,Tt="")=>{let ft,bn=ne(Ee);if(Ve(bn)&&Xs(bn)){let wo=LN[De];wo&&wo.get?ft=wo.get(bn.dom,De):ft=ai(bn,De)}return Ve(ft)?ft:Tt},be=Ee=>{let De=Y(Ee);return os(De)?[]:De.attributes},Ce=(Ee,De,Tt)=>{Gt(Ee,ft=>{if(It(ft)){let bn=q.fromDom(ft),wo=Tt===""?null:Tt,da=ai(bn,De),vp=LN[De];vp&&vp.set?vp.set(bn.dom,wo,De):jd(bn,De,wo),da!==wo&&t.onSetAttrib&&t.onSetAttrib({attrElm:bn.dom,attrName:De,attrValue:wo})}})},He=(Ee,De)=>Ee.cloneNode(De),qe=()=>t.root_element||e.body,Ct=Ee=>{let De=Ic(Ee);return{x:De.x,y:De.y,w:De.width,h:De.height}},Vt=(Ee,De)=>Cy(e.body,Y(Ee),De),Ie=(Ee,De,Tt)=>{Gt(Ee,ft=>{let bn=q.fromDom(ft);Gg(bn,De,Tt),t.update_styles&&qd(M,bn)})},_e=(Ee,De)=>{Gt(Ee,Tt=>{let ft=q.fromDom(Tt);An(De,(bn,wo)=>{Gg(ft,wo,bn)}),t.update_styles&&qd(M,ft)})},ze=(Ee,De,Tt)=>{let ft=Y(Ee);if(!(os(ft)||!Rn(ft)&&!bl(ft)))return Tt?fl(q.fromDom(ft),un(De)):(De=De.replace(/-(\D)/g,(bn,wo)=>wo.toUpperCase()),De==="float"&&(De="cssFloat"),ft.style?ft.style[De]:void 0)},yt=Ee=>{let De=Y(Ee);if(!De)return{w:0,h:0};let Tt=ze(De,"width"),ft=ze(De,"height");return(!Tt||Tt.indexOf("px")===-1)&&(Tt="0"),(!ft||ft.indexOf("px")===-1)&&(ft="0"),{w:parseInt(Tt,10)||De.offsetWidth||De.clientWidth,h:parseInt(ft,10)||De.offsetHeight||De.clientHeight}},mn=Ee=>{let De=Y(Ee),Tt=Vt(De),ft=yt(De);return{x:Tt.x,y:Tt.y,w:ft.w,h:ft.h}},gn=(Ee,De)=>{if(!Ee)return!1;let Tt=ht(Ee)?Ee:[Ee];return ro(Tt,ft=>Pa(q.fromDom(ft),De))},Qn=(Ee,De,Tt,ft)=>{let bn=[],wo=Y(Ee);ft=ft===void 0;let da=Tt||(qe().nodeName!=="BODY"?qe().parentNode:null);if(pt(De))if(De==="*")De=It;else{let vp=De;De=mf=>gn(mf,vp)}for(;wo&&!(wo===da||os(wo.nodeType)||Af(wo)||Bh(wo));){if(!De||De(wo))if(ft)bn.push(wo);else return[wo];wo=wo.parentNode}return ft?bn:null},Fo=(Ee,De,Tt)=>{let ft=Qn(Ee,De,Tt,!1);return ft&&ft.length>0?ft[0]:null},ys=(Ee,De,Tt)=>{let ft=De;if(Ee){pt(De)&&(ft=bn=>gn(bn,De));for(let bn=Ee[Tt];bn;bn=bn[Tt])if(zt(ft)&&ft(bn))return bn}return null},Is=(Ee,De)=>ys(Ee,De,"nextSibling"),qa=(Ee,De)=>ys(Ee,De,"previousSibling"),ru=Ee=>zt(Ee.querySelectorAll),Et=(Ee,De)=>{let Tt=Y(De)??t.root_element??e;return ru(Tt)?ks(Tt.querySelectorAll(Ee)):[]},Gt=function(Ee,De,Tt){let ft=Tt??this;if(ht(Ee)){let bn=[];return on(Ee,(wo,da)=>{let vp=Y(wo);vp&&bn.push(De.call(ft,vp,da))}),bn}else{let bn=Y(Ee);return bn?De.call(ft,bn):!1}},Eo=(Ee,De)=>{Gt(Ee,Tt=>{An(De,(ft,bn)=>{Ce(Tt,bn,ft)})})},bo=(Ee,De)=>{Gt(Ee,Tt=>{let ft=q.fromDom(Tt);Cu(ft,De)})},pi=(Ee,De,Tt,ft,bn)=>Gt(Ee,wo=>{let da=pt(De)?e.createElement(De):De;return Ve(Tt)&&Eo(da,Tt),ft&&(!pt(ft)&&ft.nodeType?da.appendChild(ft):pt(ft)&&bo(da,ft)),bn?da:wo.appendChild(da)}),Ze=(Ee,De,Tt)=>pi(e.createElement(Ee),Ee,De,Tt,!0),gt=md.decode,Pt=md.encodeAllRaw,qn=(Ee,De,Tt="")=>{let ft="<"+Ee;for(let bn in De)ei(De,bn)&&(ft+=" "+bn+'="'+Pt(De[bn])+'"');return xa(Tt)&&Yt(D.getVoidElements(),Ee)?ft+" />":ft+">"+Tt+"</"+Ee+">"},Hn=Ee=>{let De=e.createElement("div"),Tt=e.createDocumentFragment();Tt.appendChild(De),Ee&&(De.innerHTML=Ee);let ft;for(;ft=De.firstChild;)Tt.appendChild(ft);return Tt.removeChild(De),Tt},qo=(Ee,De)=>Gt(Ee,Tt=>{let ft=q.fromDom(Tt);return De&&Pe(rr(ft),bn=>{Sa(bn)&&bn.dom.length===0?Ko(bn):Zr(ft,bn)}),Ko(ft),ft.dom}),au=Ee=>Gt(Ee,De=>{let Tt=De.attributes;for(let ft=Tt.length-1;ft>=0;ft--)De.removeAttributeNode(Tt.item(ft))}),dm=Ee=>M.parse(Ee),Ad=(Ee,De)=>M.serialize(Ee,De),Zu=Ee=>{if(sv!==Co.DOM&&e===document){if(n[Ee])return;n[Ee]=!0}let De=e.getElementById("mceDefaultStyles");if(!De){De=e.createElement("style"),De.id="mceDefaultStyles",De.type="text/css";let Tt=e.head;Tt.firstChild?Tt.insertBefore(De,Tt.firstChild):Tt.appendChild(De)}De.styleSheet?De.styleSheet.cssText+=Ee:De.appendChild(e.createTextNode(Ee))},_h=Ee=>{Ee||(Ee=""),Pe(Ee.split(","),De=>{a[De]=!0,b.load(De).catch(wt)})},Sl=(Ee,De,Tt)=>{Gt(Ee,ft=>{if(It(ft)){let bn=q.fromDom(ft),wo=De.split(" ");Pe(wo,da=>{Ve(Tt)?(Tt?za:Yo)(bn,da):nc(bn,da)})}})},hc=(Ee,De)=>{Sl(Ee,De,!0)},hp=(Ee,De)=>{Sl(Ee,De,!1)},nv=(Ee,De)=>{let Tt=ne(Ee),ft=De.split(" ");return Ve(Tt)&&Qa(ft,bn=>Gr(Tt,bn))},Bx=Ee=>{Gt(Ee,De=>Dc(q.fromDom(De),"display"))},an=Ee=>{Gt(Ee,De=>Am(q.fromDom(De),"display","none"))},oo=Ee=>{let De=ne(Ee);return Ve(De)&&sl(Id(De,"display"),"none")},Fr=Ee=>(Ee||"mce_")+c++,As=Ee=>{let De=ne(Ee);return Ve(De)?It(De.dom)?De.dom.outerHTML:Tm(De):""},ts=(Ee,De)=>{Gt(Ee,Tt=>{It(Tt)&&(Tt.outerHTML=De)})},Tr=(Ee,De)=>{let Tt=Y(De);return Gt(Ee,ft=>{let bn=Tt?.parentNode,wo=Tt?.nextSibling;return bn&&(wo?bn.insertBefore(ft,wo):bn.appendChild(ft)),ft})},iu=(Ee,De,Tt)=>Gt(De,ft=>{let bn=ht(De)?Ee.cloneNode(!0):Ee;return Tt&&on(wv(ft.childNodes),wo=>{bn.appendChild(wo)}),ft.parentNode?.replaceChild(bn,ft),ft}),Kl=(Ee,De)=>{if(Ee.nodeName!==De.toUpperCase()){let Tt=Ze(De);return on(be(Ee),ft=>{Ce(Tt,ft.nodeName,he(Ee,ft.nodeName))}),iu(Tt,Ee,!0),Tt}else return Ee},_d=(Ee,De)=>{let Tt=Ee;for(;Tt;){let ft=De;for(;ft&&Tt!==ft;)ft=ft.parentNode;if(Tt===ft)break;Tt=Tt.parentNode}return!Tt&&Ee.ownerDocument?Ee.ownerDocument.documentElement:Tt},bp=(Ee,De,Tt)=>ve(De)?dd(D,Ee,{...Tt,isContent:bn=>{let wo=bn.nodeName.toLowerCase();return!!De[wo]}}):dd(D,Ee,Tt),Px=()=>e.createRange(),Lx=(Ee,De,Tt)=>{let ft=Px(),bn,wo;if(Ee&&De&&Ee.parentNode&&De.parentNode){let da=Ee.parentNode;return ft.setStart(da,qg(Ee)),ft.setEnd(De.parentNode,qg(De)),bn=ft.extractContents(),ft=Px(),ft.setStart(De.parentNode,qg(De)+1),ft.setEnd(da,qg(Ee)+1),wo=ft.extractContents(),da.insertBefore(Mp(sv,bn,D),Ee),Tt?da.insertBefore(Tt,Ee):da.insertBefore(De,Ee),da.insertBefore(Mp(sv,wo,D),Ee),qo(Ee),Tt||De}else return},my=(Ee,De,Tt,ft)=>{if(ht(Ee)){let bn=Ee.length,wo=[];for(;bn--;)wo[bn]=my(Ee[bn],De,Tt,ft);return wo}else return t.collect&&(Ee===e||Ee===s)&&S.push([Ee,De,Tt,ft]),P.bind(Ee,De,Tt,ft||sv)},df=(Ee,De,Tt)=>{if(ht(Ee)){let ft=Ee.length,bn=[];for(;ft--;)bn[ft]=df(Ee[ft],De,Tt);return bn}else{if(S.length>0&&(Ee===e||Ee===s)){let ft=S.length;for(;ft--;){let[bn,wo,da]=S[ft];Ee===bn&&(!De||De===wo)&&(!Tt||Tt===da)&&P.unbind(bn,wo,da)}}return P.unbind(Ee,De,Tt)}},ov=(Ee,De,Tt)=>P.dispatch(Ee,De,Tt),PE=(Ee,De,Tt)=>P.dispatch(Ee,De,Tt),Ix=Ee=>{if(Ee&&Rn(Ee)){let De=Ee.getAttribute("data-mce-contenteditable");return De&&De!=="inherit"?De:Ee.contentEditable!=="inherit"?Ee.contentEditable:null}else return null},sv={doc:e,settings:t,win:s,files:a,stdMode:d,boxModel:p,styleSheetLoader:b,boundEvents:S,styles:M,schema:D,events:P,isBlock:oe,root:null,clone:He,getRoot:qe,getViewPort:Ct,getRect:mn,getSize:yt,getParent:Fo,getParents:Qn,get:Y,getNext:Is,getPrev:qa,select:Et,is:gn,add:pi,create:Ze,createHTML:qn,createFragment:Hn,remove:qo,setStyle:Ie,getStyle:ze,setStyles:_e,removeAllAttribs:au,setAttrib:Ce,setAttribs:Eo,getAttrib:he,getPos:Vt,parseStyle:dm,serializeStyle:Ad,addStyle:Zu,loadCSS:_h,addClass:hc,removeClass:hp,hasClass:nv,toggleClass:Sl,show:Bx,hide:an,isHidden:oo,uniqueId:Fr,setHTML:bo,getOuterHTML:As,setOuterHTML:ts,decode:gt,encode:Pt,insertAfter:Tr,replace:iu,rename:Kl,findCommonAncestor:_d,run:Gt,getAttribs:be,isEmpty:bp,createRng:Px,nodeIndex:qg,split:Lx,bind:my,unbind:df,fire:PE,dispatch:ov,getContentEditable:Ix,getContentEditableParent:Ee=>{let De=qe(),Tt=null;for(let ft=Ee;ft&&ft!==De&&(Tt=Ix(ft),Tt===null);ft=ft.parentNode);return Tt},isEditable:Ee=>{if(Ve(Ee)){let De=It(Ee)?Ee:Ee.parentElement;return Ve(De)&&Rn(De)&&wi(q.fromDom(De))}else return!1},destroy:()=>{if(S.length>0){let Ee=S.length;for(;Ee--;){let[De,Tt,ft]=S[Ee];P.unbind(De,Tt,ft)}}An(a,(Ee,De)=>{b.unload(De),delete a[De]})},isChildOf:(Ee,De)=>Ee===De||De.contains(Ee),dumpRng:Ee=>"startContainer: "+Ee.startContainer.nodeName+", startOffset: "+Ee.startOffset+", endContainer: "+Ee.endContainer.nodeName+", endOffset: "+Ee.endOffset},LN=vl(M,t,lt(sv));return sv};Co.DOM=Co(document),Co.nodeIndex=qg;let Hp=Co.DOM,Qh=0,Bf=1,Vc=2,pd=3;class Ei{static ScriptLoader=new Ei;settings;states={};queue=[];scriptLoadedCallbacks={};queueLoadedCallbacks=[];loading=!1;constructor(t={}){this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}_setCrossOrigin(t){this.settings.crossOrigin=t}loadScript(t){return new Promise((n,s)=>{let a=Hp,c=document,d,p=()=>{a.remove(D),d&&(d.onerror=d.onload=d=null)},b=()=>{p(),n()},S=()=>{p(),s("Failed to load script: "+t)},D=a.uniqueId();d=c.createElement("script"),d.id=D,d.type="text/javascript",d.src=et._addCacheSuffix(t),this.settings.referrerPolicy&&a.setAttrib(d,"referrerpolicy",this.settings.referrerPolicy);let M=this.settings.crossOrigin;if(zt(M)){let P=M(t);P!==void 0&&a.setAttrib(d,"crossorigin",P)}d.onload=b,d.onerror=S,(c.head||c.body).appendChild(d)})}isDone(t){return this.states[t]===Vc}markDone(t){this.states[t]=Vc}add(t){let n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=Qh),new Promise((a,c)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:a,reject:c})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){let t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){let n=this,s=(b,S)=>{_n(n.scriptLoadedCallbacks,S).each(D=>{Pe(D,M=>M[b](S))}),delete n.scriptLoadedCallbacks[S]},a=b=>{let S=Lt(b,D=>D.status==="rejected");return S.length>0?Promise.reject(cr(S,({reason:D})=>ht(D)?D:[D])):Promise.resolve()},c=b=>Promise.allSettled(Kt(b,S=>n.states[S]===Vc?(s("resolve",S),Promise.resolve()):n.states[S]===pd?(s("reject",S),Promise.reject(S)):(n.states[S]=Bf,n.loadScript(S).then(()=>{n.states[S]=Vc,s("resolve",S);let D=n.queue;return D.length>0?(n.queue=[],c(D).then(a)):Promise.resolve()},()=>(n.states[S]=pd,s("reject",S),Promise.reject(S)))))),d=b=>(n.loading=!0,c(b).then(S=>{n.loading=!1;let D=n.queueLoadedCallbacks.shift();return L.from(D).each(Xa),a(S)})),p=pg(t);return n.loading?new Promise((b,S)=>{n.queueLoadedCallbacks.push(()=>{d(p).then(b,S)})}):d(p)}getScriptAttributes(t){let n={};this.settings.referrerPolicy&&(n.referrerpolicy=this.settings.referrerPolicy);let s=this.settings.crossOrigin;if(zt(s)){let a=s(t);pt(a)&&(n.crossorigin=a)}return n}}let e1=(e,t)=>{let n=e.indexOf(t);return n!==-1&&e.indexOf(t,n+1)>n},Oy=e=>At(e)&&Yt(e,"raw"),xv=e=>ht(e)&&e.length>1,t1={},n1=Us("en"),Kn=()=>_n(t1,n1.get()),ic={getData:()=>$r(t1,e=>({...e})),setCode:e=>{e&&n1.set(e)},getCode:()=>n1.get(),add:(e,t)=>{let n=t1[e];n||(t1[e]=n={});let s=Kt(zr(t),a=>a.toLowerCase());An(t,(a,c)=>{let d=c.toLowerCase();d!==c&&e1(s,d)?(Yt(t,d)||(n[d]=a),n[c]=a):n[d]=a})},translate:e=>{let t=Kn().getOr({}),n=p=>zt(p)?Object.prototype.toString.call(p):s(p)?"":""+p,s=p=>p===""||p===null||p===void 0,a=p=>{let b=n(p);return Yt(t,b)?n(t[b]):_n(t,b.toLowerCase()).map(n).getOr(b)},c=p=>p.replace(/{context:\w+}$/,""),d=p=>p.replaceAll("...",Yu);if(s(e))return"";if(Oy(e))return d(n(e.raw));if(xv(e)){let p=e.slice(1),b=a(e[0]).replace(/\{([0-9]+)\}/g,(S,D)=>Yt(p,D)?n(p[D]):S);return d(c(b))}return d(c(a(e)))},isRtl:()=>Kn().bind(e=>_n(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Yt(t1,e)},ui=()=>{let e=[],t={},n={},s=[],a=(Y,ne)=>{let he=Lt(s,be=>be.name===Y&&be.state===ne);Pe(he,be=>be.resolve())},c=Y=>Yt(t,Y),d=Y=>Yt(n,Y),p=Y=>{if(n[Y])return n[Y].instance},b=(Y,ne)=>{let he=ic.getCode(),be=","+(ne||"")+",";!he||ne&&be.indexOf(","+he+",")===-1||Ei.ScriptLoader.add(t[Y]+"/langs/"+he+".js")},S=(Y,ne)=>{ui.languageLoad!==!1&&(c(Y)?b(Y,ne):oe(Y,"loaded").then(()=>b(Y,ne)))},D=(Y,ne)=>(e.push(ne),n[Y]={instance:ne},a(Y,"added"),ne),M=Y=>{delete t[Y],delete n[Y]},P=(Y,ne)=>pt(ne)?pt(Y)?{prefix:"",resource:ne,suffix:""}:{prefix:Y.prefix,resource:ne,suffix:Y.suffix}:ne,Z=(Y,ne)=>{if(t[Y])return Promise.resolve();let he=pt(ne)?ne:ne.prefix+ne.resource+ne.suffix;he.indexOf("/")!==0&&he.indexOf("://")===-1&&(he=ui.baseURL+"/"+he),t[Y]=he.substring(0,he.lastIndexOf("/"));let be=()=>(a(Y,"loaded"),Promise.resolve());return n[Y]?be():Ei.ScriptLoader.add(he).then(be)},oe=(Y,ne="added")=>ne==="added"&&d(Y)||ne==="loaded"&&c(Y)?Promise.resolve():new Promise(he=>{s.push({name:Y,state:ne,resolve:he})});return{items:e,urls:t,lookup:n,get:p,requireLangPack:S,add:D,remove:M,createUrl:P,load:Z,waitFor:oe}};ui.languageLoad=!0,ui.baseURL="",ui.PluginManager=ui(),ui.ThemeManager=ui(),ui.ModelManager=ui();let Pf=lt("mce-annotation"),zm=lt("data-mce-annotation"),Mu=lt("data-mce-annotation-uid"),Lf=lt("data-mce-annotation-active"),Kg=lt("data-mce-annotation-classes"),Vn=lt("data-mce-annotation-attrs"),Sv=e=>t=>Qt(t,e),V0=(e,t)=>{let n=e.selection.getRng(),s=q.fromDom(n.startContainer),a=q.fromDom(e.getBody()),c=t.fold(()=>"."+Pf(),b=>`[${zm()}="${b}"]`),d=$o(s,n.startOffset).getOr(s);return Po(d,c,Sv(a)).bind(b=>xr(b,`${Mu()}`).bind(S=>xr(b,`${zm()}`).map(D=>{let M=U0(e,S);return{uid:S,name:D,elements:M}})))},kv=e=>Xs(e)&&Gr(e,Pf()),Uc=(e,t)=>Sm(e,"data-mce-bogus")||pl(e,'[data-mce-bogus="all"]',Sv(t)),U0=(e,t)=>{let n=q.fromDom(e.getBody()),s=gs(n,`[${Mu()}="${t}"]`);return Lt(s,a=>!Uc(a,n))},Z0=(e,t)=>{let n=q.fromDom(e.getBody()),s=gs(n,`[${zm()}="${t}"]`),a={};return Pe(s,c=>{if(!Uc(c,n)){let d=ai(c,Mu()),p=_n(a,d).getOr([]);a[d]=p.concat([c])}}),a},W0=(e,t)=>{let n=Us({}),s=()=>({listeners:[],previous:Ca()}),a=(M,P)=>{c(M,Z=>(P(Z),Z))},c=(M,P)=>{let Z=n.get(),oe=_n(Z,M).getOrThunk(s),Y=P(oe);Z[M]=Y,n.set(Z)},d=(M,P,Z)=>{a(M,oe=>{Pe(oe.listeners,Y=>Y(!0,M,{uid:P,nodes:Kt(Z,ne=>ne.dom)}))})},p=M=>{a(M,P=>{Pe(P.listeners,Z=>Z(!1,M))})},b=(M,P)=>{Pe(U0(e,M),Z=>{P?Pr(Z,Lf(),"true"):Ws(Z,Lf())})},S=ps(()=>{let M=Os(t.getNames());Pe(M,P=>{c(P,Z=>{let oe=Z.previous.get();return V0(e,L.some(P)).fold(()=>{oe.each(Y=>{p(P),Z.previous.clear(),b(Y,!1)})},({uid:Y,name:ne,elements:he})=>{sl(oe,Y)||(oe.each(be=>b(be,!1)),d(ne,Y,he),Z.previous.set(Y),b(Y,!0))}),{previous:Z.previous,listeners:Z.listeners}})})},30);return e.on("remove",()=>{S.cancel()}),e.on("NodeChange",()=>{S.throttle()}),{addListener:(M,P)=>{c(M,Z=>({previous:Z.previous,listeners:Z.listeners.concat([P])}))}}},Yg=(e,t)=>{let n=zm(),s=c=>L.from(c.attr(n)).bind(t.lookup),a=c=>{c.attr(Mu(),null),c.attr(zm(),null),c.attr(Lf(),null);let d=L.from(c.attr(Vn())).map(D=>D.split(",")).getOr([]),p=L.from(c.attr(Kg())).map(D=>D.split(",")).getOr([]);Pe(d,D=>c.attr(D,null));let b=c.attr("class")?.split(" ")??[],S=Ni(b,[Pf()].concat(p));c.attr("class",S.length>0?S.join(" "):null),c.attr(Kg(),null),c.attr(Vn(),null)};e.serializer.addTempAttr(Lf()),e.serializer.addAttributeFilter(n,c=>{for(let d of c)s(d).each(p=>{p.persistent===!1&&(d.name==="span"?d.unwrap():a(d))})})},If=()=>{let e={};return{register:(a,c)=>{e[a]={name:a,settings:c}},lookup:a=>_n(e,a).map(c=>c.settings),getNames:()=>zr(e)}},Ff=(e,t,n=pn)=>{let s=new er(e,t),a=c=>{let d;do d=s[c]();while(d&&!tt(d)&&!n(d));return L.from(d).filter(tt)};return{current:()=>L.from(s.current()).filter(tt),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},Zc=(e,t)=>{let n=t||(d=>e.isBlock(d)||zs(d)||Vo(d)),s=(d,p,b,S)=>{if(tt(d)){let D=S(d,p,d.data);if(D!==-1)return L.some({container:d,offset:D})}return b().bind(D=>s(D.container,D.offset,b,S))};return{backwards:(d,p,b,S)=>{let D=Ff(d,S??e.getRoot(),n);return s(d,p,()=>D.prev().map(M=>({container:M,offset:M.length})),b).getOrNull()},forwards:(d,p,b,S)=>{let D=Ff(d,S??e.getRoot(),n);return s(d,p,()=>D.next().map(M=>({container:M,offset:0})),b).getOrNull()}}},r1=["td","th"],Dy=["thead","tbody","tfoot"],Ry=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Ev=["li","dd","dt"],bd=["ul","ol","dl"],Tv=["pre","script","textarea","style"],$m=e=>{let t;return n=>(t=t||El(e,so),Yt(t,fn(n)))},j0=e=>fn(e)==="table",zl=e=>Xs(e)&&fn(e)==="br",$p=$m(Ry),Jr=$m(bd),Vm=$m(Ev),Av=$m(Dy),Vp=$m(r1),a1=$m(Tv),Ny=e=>{let t=[],n=e.dom;for(;n;)t.push(q.fromDom(n)),n=n.lastChild;return t},i1=e=>{let t=gs(e,"br"),n=Lt(Ny(e).slice(-1),zl);t.length===n.length&&Pe(n,Ko)},Hf=()=>{let e=q.fromTag("br");return Pr(e,"data-mce-bogus","1"),e},Gd=e=>{vi(e),Oo(e,Hf())},Up=(e,t)=>{dl(e).each(n=>{ul(n).each(s=>{t.isBlock(fn(e))&&zl(n)&&t.isBlock(fn(s))&&Ko(n)})})},Qr=Rl,zf=js,yl=Bi,My=e=>e.insertContent(Qr,{preserve_zwsp:!0}),By=It,Zp=tt,$f=e=>(Zp(e)&&(e=e.parentNode),By(e)&&e.hasAttribute("data-mce-caret")),Um=e=>Zp(e)&&zf(e.data),lc=e=>$f(e)||Um(e),l1=e=>e.firstChild!==e.lastChild||!zs(e.firstChild),q0=(e,t)=>{let s=(e.ownerDocument??document).createTextNode(Qr),a=e.parentNode;if(t){let c=e.previousSibling;if(Zp(c)){if(lc(c))return c;if(d1(c))return c.splitText(c.data.length-1)}a?.insertBefore(s,e)}else{let c=e.nextSibling;if(Zp(c)){if(lc(c))return c;if(Vf(c))return c.splitText(1),c}e.nextSibling?a?.insertBefore(s,e.nextSibling):a?.appendChild(s)}return s},c1=e=>{let t=e.container();return tt(t)?t.data.charAt(e.offset())===Qr||e.isAtStart()&&Um(t.previousSibling):!1},u1=e=>{let t=e.container();return tt(t)?t.data.charAt(e.offset()-1)===Qr||e.isAtEnd()&&Um(t.nextSibling):!1},Py=(e,t,n)=>{let a=(t.ownerDocument??document).createElement(e);a.setAttribute("data-mce-caret",n?"before":"after"),a.setAttribute("data-mce-bogus","all"),a.appendChild(Hf().dom);let c=t.parentNode;return n?c?.insertBefore(a,t):t.nextSibling?c?.insertBefore(a,t.nextSibling):c?.appendChild(a),a},Vf=e=>Zp(e)&&e.data[0]===Qr,d1=e=>Zp(e)&&e.data[e.data.length-1]===Qr,Ly=e=>{let t=e.getElementsByTagName("br"),n=t[t.length-1];Fg(n)&&n.parentNode?.removeChild(n)},_v=e=>e&&e.hasAttribute("data-mce-caret")?(Ly(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,g=e=>$f(e.startContainer),h=Math.round,C=e=>e?{left:h(e.left),top:h(e.top),bottom:h(e.bottom),right:h(e.right),width:h(e.width),height:h(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},k=(e,t)=>(e=C(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),R=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,N=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,F=(e,t)=>{let n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top?!0:e.top>t.bottom?!1:N(t.top-e.bottom,e,t)},$=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:N(t.bottom-e.top,e,t),Q=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,re=e=>Mt(e,(t,n)=>t.fold(()=>L.some(n),s=>{let a=Math.min(n.left,s.left),c=Math.min(n.top,s.top),d=Math.max(n.right,s.right),p=Math.max(n.bottom,s.bottom);return L.some({top:c,right:d,bottom:p,left:a,width:d-a,height:p-c})}),L.none()),pe=(e,t,n)=>{let s=Math.max(Math.min(t,e.left+e.width),e.left),a=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-a)*(n-a))},ae=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),de=e=>{let t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},le=(e,t)=>{if(It(e)&&e.hasChildNodes()){let n=e.childNodes,s=ur(t,0,n.length-1);return n[s]}else return e},Se=(e,t)=>{if(!(t<0&&It(e)&&e.hasChildNodes()))return le(e,t)},ye=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),Ue=e=>pt(e)&&e.charCodeAt(0)>=768&&ye.test(e),We=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},nt=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},rt=Ui,at=Vo,mt=zs,vt=tt,Ht=rc(["script","style","textarea"]),ln=rc(["img","input","textarea","hr","iframe","video","audio","object","embed"]),ho=rc(["table"]),Tn=lc,On=e=>Tn(e)?!1:vt(e)?!Ht(e.parentNode):ln(e)||mt(e)||ho(e)||Ro(e),Dn=e=>It(e)&&e.getAttribute("unselectable")==="true",Ro=e=>!Dn(e)&&at(e),Ir=(e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(Ro(n))return!1;if(rt(n))return!0}return!0},di=e=>Ro(e)?!Mt(ks(e.getElementsByTagName("*")),(t,n)=>t||rt(n),!1):!1,_a=e=>ln(e)||di(e),$l=(e,t)=>On(e)&&Ir(e,t),Ft=It,mi=On,Zm=Xo("display","block table"),m1=Xo("float","left right"),vd=nt(Ft,mi,Ya(m1)),g1=Ya(Xo("white-space","pre pre-line pre-wrap")),Bu=tt,Kd=zs,Gx=Co.nodeIndex,G0=Se,Iy=e=>e?e.createRange():Co.DOM.createRng(),Uf=e=>pt(e)&&/[\r\n\t ]/.test(e),Kx=e=>!!e.setStart&&!!e.setEnd,Fy=e=>{let t=e.startContainer,n=e.startOffset;if(Uf(e.toString())&&g1(t.parentNode)&&tt(t)){let s=t.data;if(Uf(s[n-1])||Uf(s[n+1]))return!0}return!1},Zf=e=>{let t=e.ownerDocument,n=Iy(t),s=t.createTextNode(ws),a=e.parentNode;a.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);let c=C(n.getBoundingClientRect());return a.removeChild(s),c},HE=e=>{let t=e.startContainer,n=e.endContainer,s=e.startOffset,a=e.endOffset;if(t===n&&tt(n)&&s===0&&a===1){let c=e.cloneRange();return c.setEndAfter(n),Wm(c)}else return null},Hy=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Wm=e=>{let t,n=e.getClientRects();return n.length>0?t=C(n[0]):t=C(e.getBoundingClientRect()),!Kx(e)&&Kd(e)&&Hy(t)?Zf(e):Hy(t)&&Kx(e)?HE(e)??t:t},Wp=(e,t)=>{let n=k(e,t);return n.width=1,n.right=n.left+1,n},IN=e=>{let t=[],n=d=>{d.height!==0&&(t.length>0&&R(d,t[t.length-1])||t.push(d))},s=(d,p)=>{let b=Iy(d.ownerDocument);if(p<d.data.length){if(Ue(d.data[p]))return;if(Ue(d.data[p-1])&&(b.setStart(d,p),b.setEnd(d,p+1),!Fy(b))){n(Wp(Wm(b),!1));return}}p>0&&(b.setStart(d,p-1),b.setEnd(d,p),Fy(b)||n(Wp(Wm(b),!1))),p<d.data.length&&(b.setStart(d,p),b.setEnd(d,p+1),Fy(b)||n(Wp(Wm(b),!0)))},a=e.container(),c=e.offset();if(Bu(a))return s(a,c),t;if(Ft(a))if(e.isAtEnd()){let d=G0(a,c);Bu(d)&&s(d,d.data.length),vd(d)&&!Kd(d)&&n(Wp(Wm(d),!1))}else{let d=G0(a,c);if(Bu(d)&&s(d,0),vd(d)&&e.isAtEnd())return n(Wp(Wm(d),!1)),t;let p=G0(e.container(),e.offset()-1);vd(p)&&!Kd(p)&&(Zm(p)||Zm(d)||!vd(d))&&n(Wp(Wm(p),!1)),vd(d)&&n(Wp(Wm(d),!0))}return t},Fe=(e,t,n)=>{let s=()=>(Bu(e),t===0),a=()=>Bu(e)?t>=e.data.length:t>=e.childNodes.length,c=()=>{let D=Iy(e.ownerDocument);return D.setStart(e,t),D.setEnd(e,t),D},d=()=>(n||(n=IN(Fe(e,t))),n),p=()=>d().length>0,b=D=>D&&e===D.container()&&t===D.offset(),S=D=>G0(e,D?t-1:t);return{container:lt(e),offset:lt(t),toRange:c,getClientRects:d,isVisible:p,isAtStart:s,isAtEnd:a,isEqual:b,getNode:S}};Fe.fromRangeStart=e=>Fe(e.startContainer,e.startOffset),Fe.fromRangeEnd=e=>Fe(e.endContainer,e.endOffset),Fe.after=e=>Fe(e.parentNode,Gx(e)+1),Fe.before=e=>Fe(e.parentNode,Gx(e)),Fe.isAbove=(e,t)=>sr(Sn(t.getClientRects()),Ds(e.getClientRects()),F).getOr(!1),Fe.isBelow=(e,t)=>sr(Ds(t.getClientRects()),Sn(e.getClientRects()),$).getOr(!1),Fe.isAtStart=e=>e?e.isAtStart():!1,Fe.isAtEnd=e=>e?e.isAtEnd():!1,Fe.isTextPosition=e=>e?tt(e.container()):!1,Fe.isElementPosition=e=>!Fe.isTextPosition(e);let Ov=(e,t)=>{tt(t)&&t.data.length===0&&e.remove(t)},zE=(e,t,n)=>{t.insertNode(n),Ov(e,n.previousSibling),Ov(e,n.nextSibling)},Yx=(e,t,n)=>{let s=L.from(n.firstChild),a=L.from(n.lastChild);t.insertNode(n),s.each(c=>Ov(e,c.previousSibling)),a.each(c=>Ov(e,c.nextSibling))},zy=(e,t,n)=>{Bh(n)?Yx(e,t,n):zE(e,t,n)},Yd=tt,$E=Fg,$y=Co.nodeIndex,VE=e=>{let t=e.parentNode;return $E(t)?VE(t):t},K0=e=>e?Sc(e.childNodes,(t,n)=>($E(n)&&n.nodeName!=="BR"?t=t.concat(K0(n)):t.push(n),t),[]):[],UE=(e,t)=>{let n=e;for(;(n=n.previousSibling)&&Yd(n);)t+=n.data.length;return t},ZE=e=>t=>e===t,Cn=e=>{let t,n;t=K0(VE(e)),n=Ju(t,ZE(e),e),t=t.slice(0,n+1);let s=Sc(t,(a,c,d)=>(Yd(c)&&Yd(t[d-1])&&a++,a),0);return t=xc(t,rc([e.nodeName])),n=Ju(t,ZE(e),e),n-s},WE=e=>(Yd(e)?"text()":e.nodeName.toLowerCase())+"["+Cn(e)+"]",FN=(e,t,n)=>{let s=[];for(let a=t.parentNode;a&&a!==e&&!(n&&n(a));a=a.parentNode)s.push(a);return s},jE=(e,t)=>{let n=[],s=t.container(),a=t.offset(),c;if(Yd(s))c=UE(s,a);else{let p=s.childNodes;a>=p.length?(c="after",a=p.length-1):c="before",s=p[a]}n.push(WE(s));let d=FN(e,s);return d=xc(d,Ya(Fg)),n=n.concat(al(d,p=>WE(p))),n.reverse().join("/")+","+c},HN=(e,t,n)=>{let s=K0(e);return s=xc(s,(a,c)=>!Yd(a)||!Yd(s[c-1])),s=xc(s,rc([t])),s[n]},zN=(e,t)=>{let n=e,s=0;for(;Yd(n);){let a=n.data.length;if(t>=s&&t<=s+a){e=n,t=t-s;break}if(!Yd(n.nextSibling)){e=n,t=a;break}s+=a,n=n.nextSibling}return Yd(e)&&t>e.data.length&&(t=e.data.length),Fe(e,t)},Xx=(e,t)=>{if(!t)return null;let n=t.split(","),s=n[0].split("/"),a=n.length>1?n[1]:"before",c=Sc(s,(d,p)=>{let b=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(p);return b?(b[1]==="text()"&&(b[1]="#text"),HN(d,b[1],parseInt(b[2],10))):null},e);if(!c)return null;if(!Yd(c)&&c.parentNode){let d;return a==="after"?d=$y(c)+1:d=$y(c),Fe(c.parentNode,d)}return zN(c,parseInt(a,10))},Y0=Vo,Dv=(e,t,n)=>{let s=e(t.data.slice(0,n)).length;for(let a=t.previousSibling;a&&tt(a);a=a.previousSibling)s+=e(a.data).length;return s},f1=(e,t,n,s,a)=>{let c=a?s.startContainer:s.endContainer,d=a?s.startOffset:s.endOffset,p=[],b=e.getRoot();if(tt(c))p.push(n?Dv(t,c,d):d);else{let S=0,D=c.childNodes;d>=D.length&&D.length&&(S=1,d=Math.max(0,D.length-1)),p.push(e.nodeIndex(D[d],n)+S)}for(let S=c;S&&S!==b;S=S.parentNode)p.push(e.nodeIndex(S,n));return p},$N=(e,t,n,s)=>{let a=t.dom,c=f1(a,e,n,s,!0),d=t.isForward(),p=g(s)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:c,forward:d,...p};{let b=f1(a,e,n,s,!1);return{start:c,end:b,forward:d,...p}}},X0=(e,t,n)=>{let s=0;return et.each(e.select(t),a=>{if(a.getAttribute("data-mce-bogus")!=="all"){if(a===n)return!1;s++;return}}),s},qE=(e,t)=>{let n=t?e.startContainer:e.endContainer,s=t?e.startOffset:e.endOffset;if(It(n)&&n.nodeName==="TR"){let a=n.childNodes;n=a[Math.min(t?s:s-1,a.length-1)],n&&(s=t?0:n.childNodes.length,t?e.setStart(n,s):e.setEnd(n,s))}},Jx=e=>(qE(e,!0),qE(e,!1),e),Vy=(e,t)=>{if(It(e)&&(e=le(e,t),Y0(e)))return e;if(lc(e)){tt(e)&&$f(e)&&(e=e.parentNode);let n=e.previousSibling;if(Y0(n)||(n=e.nextSibling,Y0(n)))return n}},VN=e=>Vy(e.startContainer,e.startOffset)||Vy(e.endContainer,e.endOffset),GE=(e,t,n)=>{let s=n.getNode(),a=n.getRng();if(s.nodeName==="IMG"||Y0(s)){let d=s.nodeName;return{name:d,index:X0(n.dom,d,s)}}let c=VN(a);if(c){let d=c.tagName;return{name:d,index:X0(n.dom,d,c)}}return $N(e,n,t,a)},UN=e=>{let t=e.getRng();return{start:jE(e.dom.getRoot(),Fe.fromRangeStart(t)),end:jE(e.dom.getRoot(),Fe.fromRangeEnd(t)),forward:e.isForward()}},ZN=e=>({rng:e.getRng(),forward:e.isForward()}),jp=(e,t,n)=>{let s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},KE=(e,t)=>{let n=e.dom,s=e.getRng(),a=n.uniqueId(),c=e.isCollapsed(),d=e.getNode(),p=d.nodeName,b=e.isForward();if(p==="IMG")return{name:p,index:X0(n,p,d)};let S=Jx(s.cloneRange());if(!c){S.collapse(!1);let M=jp(n,a+"_end",t);zy(n,S,M)}s=Jx(s),s.collapse(!0);let D=jp(n,a+"_start",t);return zy(n,s,D),e.moveToBookmark({id:a,keep:!0,forward:b}),{id:a,forward:b}},WN=(e,t,n=!1)=>t===2?GE(yl,n,e):t===3?UN(e):t?ZN(e):KE(e,!1),Uy=_t(GE,Ln,!0),J0=e=>e===1,p1=e=>e===-1;var jm;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(jm||(jm={}));let xs=(e,t,n)=>e.stype===jm.Error?t(e.serror):n(e.svalue),YE=e=>{let t=[],n=[];return Pe(e,s=>{xs(s,a=>n.push(a),a=>t.push(a))}),{values:t,errors:n}},jN=(e,t)=>e.stype===jm.Error?{stype:jm.Error,serror:t(e.serror)}:e,Qx=(e,t)=>e.stype===jm.Value?{stype:jm.Value,svalue:t(e.svalue)}:e,qi=(e,t)=>e.stype===jm.Value?t(e.svalue):e,Pu=(e,t)=>e.stype===jm.Error?t(e.serror):e,eS=e=>({stype:jm.Value,svalue:e}),XE=e=>({stype:jm.Error,serror:e}),Gi={fromResult:e=>e.fold(XE,eS),toResult:e=>xs(e,or.error,or.value),svalue:eS,partition:YE,serror:XE,bind:qi,bindError:Pu,map:Qx,mapError:jN,fold:xs},JE=e=>At(e)&&zr(e).length>100?" removed due to size":JSON.stringify(e,null,2),io=e=>{let t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:lt("... (only showing first ten failures)")}]):e;return Kt(t,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},QE=(e,t)=>Gi.serror([{path:e,getErrorInfo:t}]),qN=(e,t,n)=>QE(e,()=>'Could not find valid *required* value for "'+t+'" in '+JE(n)),GN=(e,t)=>QE(e,lt(t)),br=e=>{let t=(s,a)=>Gi.bindError(e(a),c=>GN(s,c)),n=lt("val");return{extract:t,toString:n}},KN=br(Gi.svalue),Zy=lt(KN),Rv=(e,t)=>br(n=>{let s=typeof n;return e(n)?Gi.svalue(n):Gi.serror(`Expected type: ${t} but got: ${s}`)}),YN=Rv(vn,"number"),tS=Rv(pt,"string"),eT=Rv(zt,"function"),nS=()=>({tag:"required",process:{}}),oS=e=>({tag:"defaultedThunk",process:e}),Wy=e=>oS(lt(e)),sS=()=>({tag:"option",process:{}}),XN=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),tT=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},JN=(e,t)=>Gi.svalue(ti(t,Ur.apply(void 0,e))),Ut=e=>ls(Gi.serror,lu)(e),e6={consolidateObj:(e,t)=>{let n=Gi.partition(e);return n.errors.length>0?Ut(n.errors):JN(n.values,t)},consolidateArr:e=>{let t=Gi.partition(e);return t.errors.length>0?Ut(t.errors):Gi.svalue(t.values)}},t6=(e,t,n,s)=>_n(t,n).fold(()=>qN(e,n,t),s),rS=(e,t,n,s)=>{let a=_n(e,t).getOrThunk(()=>n(e));return s(a)},nT=(e,t,n)=>n(_n(e,t)),aS=(e,t,n,s)=>{let a=_n(e,t).map(c=>c===!0?n(e):c);return s(a)},iS=(e,t,n,s,a)=>{let c=p=>a.extract(t.concat([s]),p),d=p=>p.fold(()=>Gi.svalue(L.none()),b=>{let S=a.extract(t.concat([s]),b);return Gi.map(S,L.some)});switch(e.tag){case"required":return t6(t,n,s,c);case"defaultedThunk":return rS(n,s,e.process,c);case"option":return nT(n,s,d);case"defaultedOptionThunk":return aS(n,s,e.process,d);case"mergeWithThunk":return rS(n,s,lt({}),p=>{let b=ti(e.process(n),p);return c(b)})}},lS=(e,t,n)=>{let s={},a=[];for(let c of n)tT(c,(d,p,b,S)=>{let D=iS(b,e,t,d,S);Gi.fold(D,M=>{a.push(...M)},M=>{s[p]=M})},(d,p)=>{s[d]=p(t)});return a.length>0?Gi.serror(a):Gi.svalue(s)},Nv=e=>({extract:(s,a)=>lS(s,a,e),toString:()=>`obj{
`+Kt(e,a=>tT(a,(c,d,p,b)=>c+" -> "+b.toString(),(c,d)=>"state("+c+")")).join(`
`)+"}"}),jy=e=>({extract:(s,a)=>{let c=Kt(a,(d,p)=>e.extract(s.concat(["["+p+"]"]),d));return e6.consolidateArr(c)},toString:()=>"array("+e.toString()+")"}),oT=ls(jy,Nv),cS=e=>br(t=>e(t).fold(Gi.serror,Gi.svalue)),n6=(e,t,n)=>{let s=t.extract([e],n);return Gi.mapError(s,a=>({input:n,errors:a}))},qy=(e,t,n)=>Gi.toResult(n6(e,t,n)),Gy=e=>`Errors: 
`+io(e.errors).join(`
`)+`

Input object: `+JE(e.input),qp=XN,sT=e=>qp(e,e,nS(),Zy()),Mv=(e,t)=>qp(e,e,nS(),t),Ky=e=>Mv(e,tS),uS=e=>Mv(e,eT),o6=(e,t)=>qp(e,e,nS(),jy(t)),s6=e=>qp(e,e,sS(),Zy()),rT=(e,t)=>qp(e,e,sS(),t),Gm=e=>rT(e,tS),r6=e=>rT(e,eT),$s=(e,t)=>qp(e,e,Wy(t),Zy()),Yy=(e,t,n)=>qp(e,e,Wy(t),n),Bv=(e,t)=>Yy(e,t,YN),Xy=(e,t,n)=>Yy(e,t,jy(n)),Wf=e=>e.type==="inline-command"||e.type==="inline-format",Jy=e=>e.type==="block-command"||e.type==="block-format",Q0=(e,t)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===t,aT=e=>{let t=s=>or.error({message:s,pattern:e}),n=(s,a,c)=>{if(e.format!==void 0){let d;if(ht(e.format)){if(!Qa(e.format,pt))return t(s+" pattern has non-string items in the `format` array");d=e.format}else if(pt(e.format))d=[e.format];else return t(s+" pattern has non-string `format` parameter");return or.value(a(d))}else return e.cmd!==void 0?pt(e.cmd)?or.value(c(e.cmd,e.value)):t(s+" pattern has non-string `cmd` parameter"):t(s+" pattern is missing both `format` and `cmd` parameters")};if(!At(e))return t("Raw pattern is not an object");if(!pt(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!pt(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let s=e.start,a=e.end;return a.length===0&&(a=s,s=""),n("Inline",c=>({type:"inline-format",start:s,end:a,format:c}),(c,d)=>({type:"inline-command",start:s,end:a,cmd:c,value:d}))}else{if(e.replacement!==void 0)return pt(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):or.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter");{let s=e.trigger??"space";return e.start.length===0?t("Block pattern has empty `start` parameter"):n("Block",a=>({type:"block-format",start:e.start,format:a[0],trigger:s}),(a,c)=>({type:"block-command",start:e.start,cmd:a,value:c,trigger:s}))}}},dS=e=>Lt(e,Jy),Qy=e=>Lt(e,Wf),eC=(e,t)=>({inlinePatterns:Qy(e),blockPatterns:dS(e),dynamicPatternsLookup:t}),Jg=(e,t)=>({...e,blockPatterns:Lt(e.blockPatterns,n=>Q0(n,t))}),Gp=e=>{let t=du(Kt(e,aT));return Pe(t.errors,n=>console.error(n.message,n.pattern)),t.values},iT=e=>t=>{let n=e(t);return Gp(n)},a6=(e,t)=>e.dispatch("PreProcess",t),lT=(e,t)=>e.dispatch("PostProcess",t),i6=e=>{e.dispatch("remove")},l6=e=>{e.dispatch("detach")},c6=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},gi=(e,t,n,s,a)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:a})},mS=(e,t,n,s,a)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:a})},Ti=e=>{e.dispatch("PreInit")},eb=e=>{e.dispatch("PostRender")},tb=e=>{e.dispatch("Init")},cT=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},tC=(e,t,n)=>{e.dispatch(t,n)},gS=(e,t,n,s)=>{e.dispatch("FormatApply",{format:t,node:n,vars:s})},uT=(e,t,n,s)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:s})},u6=(e,t)=>e.dispatch("BeforeSetContent",t),Wc=(e,t)=>e.dispatch("SetContent",t),Vl=(e,t)=>e.dispatch("BeforeGetContent",t),Xd=(e,t)=>e.dispatch("GetContent",t),fS=(e,t)=>{e.dispatch("AutocompleterStart",t)},dT=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},pS=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},mT=e=>{e.dispatch("AutocompleterEnd")},d6=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}),hS=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}),gT=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),fT=(e,t)=>e.dispatch("EditableRootStateChange",{state:t}),bS=(e,t)=>e.dispatch("DisabledStateChange",{state:t}),pT=e=>e.dispatch("CloseActiveTooltips"),Pv=ct().deviceType,m6=Pv.isTouch(),hT=Co.DOM,g6=e=>{let t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Mt(t,(n,s)=>{let a=s.split("="),c=a[0],d=a.length>1?a[1]:c;return n[wa(c)]=wa(d),n},{})},vS=e=>Qe(e,RegExp),Nt=e=>t=>t.options.get(e),nC=e=>pt(e)||At(e),bT=(e,t="")=>n=>{let s=pt(n);if(s)if(n.indexOf("=")!==-1){let a=g6(n);return{value:_n(a,e.id).getOr(t),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},f6=e=>{let t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("crossorigin",{processor:"function",default:lt(void 0)}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.editorManager.documentBaseURL}),t("body_id",{processor:bT(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:bT(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:s=>{let a=pt(s)&&Na(s);return a?{value:s,valid:a}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:s=>{let a=In(["block","linebreak","invert","default"],s);return a?{value:s,valid:a}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:s=>ut(s)?{valid:!0,value:s}:pt(s)?{valid:!0,value:s}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:s=>{let a=s===!1||pt(s)||_(s,pt);return a?pt(s)?{value:Kt(s.split(","),wa),valid:a}:ht(s)?{value:s,valid:a}:s===!1?{value:[],valid:a}:{value:s,valid:a}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:oC(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:s=>{let a=pt(s)||_(s,pt);return a?{value:ht(s)?s:Kt(s.split(","),wa),valid:a}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("extended_mathml_attributes",{processor:"string[]"}),t("extended_mathml_elements",{processor:"string[]"}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:s=>{let a=ut(s)||pt(s);return a?s===!1||Pv.isiPhone()||Pv.isiPad()?{value:"",valid:a}:{value:s===!0?"table,img,figure.image,div,video,iframe":s,valid:a}:{valid:!1,message:"Must be boolean or a string"}},default:!m6}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"string"}),t("service_message",{processor:"string"}),t("onboarding",{processor:"boolean",default:!0}),t("tiny_cloud_entry_url",{processor:"string"}),t("theme",{processor:s=>s===!1||pt(s)||zt(s),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:s=>{let a=s===!1||pt(s);return a?{value:s===!1?"":s,valid:a}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("disabled",{processor:s=>ut(s)?(e.initialized&&lC(e)!==s&&Promise.resolve().then(()=>{bS(e,s)}),{valid:!0,value:s}):{valid:!1,message:"The value must be a boolean."},default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_html_in_comments",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("allow_mathml_annotation_encodings",{processor:s=>{let a=_(s,pt);return a?{value:s,valid:a}:{valid:!1,message:"Must be an array of strings."}},default:[]}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:nC}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:nC}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:nC}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:nC}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:s=>pt(s)||s===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("license_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:s=>_(s,At)||s===!1?{value:Gp(s===!1?[]:s),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),t("text_patterns_lookup",{processor:s=>zt(s)?{value:iT(s),valid:!0}:{valid:!1,message:"Must be a single function"},default:s=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:s=>_(s,vS)?{value:s,valid:!0}:vS(s)?{value:[s],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!0}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:s=>{let a=In(["inherited","collapsed","expanded"],s);return a?{value:s,valid:a}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:s=>{let a=In(["inherited","collapsed","expanded"],s);return a?{value:s,valid:a}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("sandbox_iframes",{processor:"boolean",default:!0}),t("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),t("convert_unsafe_embeds",{processor:"boolean",default:!0}),t("user_id",{processor:"string",default:"Anonymous"}),t("fetch_users",{processor:s=>s===void 0?{valid:!0,value:void 0}:zt(s)?{valid:!0,value:s}:{valid:!1,message:"fetch_users must be a function that returns a Promise<ExpectedUser[]>"}});let n=oT([Ky("mimeType"),o6("extensions",cS(s=>pt(s)?or.value(s):or.error("Extensions must be an array of strings")))]);t("documents_file_types",{processor:s=>qy("documents_file_types",n,s).fold(a=>({valid:!1,message:"Must be a non-empty array of objects matching the configuration schema: https://www.tiny.cloud/docs/tinymce/latest/uploadcare-documents/#documents-file-types"}),a=>({valid:!0,value:a}))}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:ic.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:hT.getAttrib(e.getElement(),"placeholder")})}),t("lists_indent_on_tab",{processor:"boolean",default:!0}),t("list_max_depth",{processor:s=>{let a=vn(s);if(a){if(s<0)throw new Error("list_max_depth cannot be set to lower than 0");return{value:s,valid:a}}else return{valid:!1,message:"Must be a number"}}})},p6=Nt("iframe_attrs"),h6=Nt("doctype"),Kp=Nt("document_base_url"),b6=Nt("body_id"),vT=Nt("body_class"),yS=Nt("content_security_policy"),yT=Nt("br_in_pre"),fi=Nt("forced_root_block"),Yp=Nt("forced_root_block_attrs"),v6=Nt("newline_behavior"),y6=Nt("br_newline_selector"),C6=Nt("no_newline_selector"),CS=Nt("keep_styles"),CT=Nt("end_container_on_empty_block"),wT=Nt("automatic_uploads"),xT=Nt("images_reuse_filename"),ST=Nt("images_replace_blob_uris"),wS=Nt("icons"),w6=Nt("icons_url"),kT=Nt("images_upload_url"),x6=Nt("images_upload_base_path"),S6=Nt("images_upload_credentials"),k6=Nt("images_upload_handler"),E6=Nt("content_css_cors"),xt=Nt("referrer_policy"),Jd=Nt("crossorigin"),ET=Nt("language"),xS=Nt("language_url"),SS=Nt("indent_use_margin"),TT=Nt("indentation"),kS=Nt("content_css"),T6=Nt("content_style"),ES=Nt("font_css"),A6=Nt("directionality"),_6=Nt("inline_boundaries_selector"),Lv=Nt("object_resizing"),O6=Nt("resize_img_proportional"),AT=Nt("placeholder"),Iv=Nt("event_root"),D6=Nt("service_message"),h1=Nt("theme"),R6=Nt("theme_url"),nb=Nt("model"),b1=Nt("model_url"),Xp=Nt("inline_boundaries"),N6=Nt("formats"),M6=Nt("preview_styles"),_T=Nt("format_empty_lines"),B6=Nt("format_noneditable_selector"),P6=Nt("custom_ui_selector"),oC=Nt("inline"),OT=Nt("hidden_input"),L6=Nt("submit_patch"),I6=Nt("add_form_submit_trigger"),DT=Nt("add_unload_trigger"),TS=Nt("custom_undo_redo_levels"),RT=Nt("disable_nodechange"),NT=Nt("readonly"),sC=Nt("editable_root"),AS=Nt("content_css_cors"),v1=Nt("plugins"),rC=Nt("external_plugins"),F6=Nt("block_unsupported_drop"),aC=Nt("visual"),MT=Nt("visual_table_class"),_S=Nt("visual_anchor_class"),OS=Nt("iframe_aria_text"),BT=Nt("setup"),PT=Nt("init_instance_callback"),LT=Nt("urlconverter_callback"),IT=Nt("auto_focus"),FT=Nt("browser_spellcheck"),HT=Nt("protect"),zT=Nt("paste_block_drop"),iC=Nt("paste_data_images"),H6=Nt("paste_preprocess"),z6=Nt("paste_postprocess"),$6=Nt("newdocument_content"),V6=Nt("paste_webkit_styles"),$T=Nt("paste_remove_styles_if_webkit"),U6=Nt("paste_merge_formats"),Ki=Nt("smart_paste"),Z6=Nt("paste_as_text"),W6=Nt("paste_tab_spaces"),jc=Nt("allow_html_data_urls"),j6=Nt("text_patterns"),q6=Nt("text_patterns_lookup"),VT=Nt("noneditable_class"),qc=Nt("editable_class"),UT=Nt("noneditable_regexp"),ZT=Nt("preserve_cdata"),WT=Nt("highlight_on_focus"),DS=Nt("xss_sanitization"),jT=Nt("init_content_sync"),qT=e=>e.options.isSet("text_patterns_lookup"),G6=e=>et.explode(e.options.get("font_size_style_values")),K6=e=>et.explode(e.options.get("font_size_classes")),Y6=e=>e.options.get("encoding")==="xml",GT=e=>et.explode(e.options.get("images_file_types")),uo=Nt("table_tab_navigation"),Fv=Nt("details_initial_state"),jf=Nt("details_serialized_state"),Jp=Nt("sandbox_iframes"),ob=e=>e.options.get("sandbox_iframes_exclusions"),RS=Nt("convert_unsafe_embeds"),NS=Nt("license_key"),KT=Nt("api_key"),lC=Nt("disabled"),YT=Nt("user_id"),XT=Nt("fetch_users"),JT=Nt("lists_indent_on_tab"),MS=e=>L.from(e.options.get("list_max_depth")),X6=It,QT=tt,eA=e=>{let t=e.parentNode;t&&t.removeChild(e)},Ul=e=>{let t=yl(e);return{count:e.length-t.length,text:t}},tA=e=>{let t;for(;(t=e.data.lastIndexOf(Qr))!==-1;)e.deleteData(t,1)},BS=(e,t)=>(ko(e),t),J6=(e,t)=>{let n=Ul(e.data.substr(0,t.offset())),s=Ul(e.data.substr(t.offset()));return(n.text+s.text).length>0?(tA(e),Fe(e,t.offset()-n.count)):t},Q6=(e,t)=>{let n=t.container(),s=hi(ks(n.childNodes),e).map(a=>a<t.offset()?Fe(n,t.offset()-1):t).getOr(t);return ko(e),s},PS=(e,t)=>QT(e)&&t.container()===e?J6(e,t):BS(e,t),eM=(e,t)=>t.container()===e.parentNode?Q6(e,t):BS(e,t),tM=(e,t)=>Fe.isTextPosition(t)?PS(e,t):eM(e,t),ko=e=>{X6(e)&&lc(e)&&(l1(e)?e.removeAttribute("data-mce-caret"):eA(e)),QT(e)&&(tA(e),e.data.length===0&&eA(e))},Hv=Vo,nA=Zi,oA=Of,nM="*[contentEditable=false],video,audio,embed,object",sA=(e,t,n)=>{let s=k(t.getBoundingClientRect(),n),a,c;if(e.tagName==="BODY"){let p=e.ownerDocument.documentElement;a=e.scrollLeft||p.scrollLeft,c=e.scrollTop||p.scrollTop}else{let p=e.getBoundingClientRect();a=e.scrollLeft-p.left,c=e.scrollTop-p.top}s.left+=a,s.right+=a,s.top+=c,s.bottom+=c,s.width=1;let d=t.offsetWidth-t.clientWidth;return d>0&&(n&&(d*=-1),s.left+=d,s.right+=d),s},rA=e=>{let t=gs(q.fromDom(e),nM);for(let n=0;n<t.length;n++){let s=t[n].dom,a=s.previousSibling;if(d1(a)){let c=a.data;c.length===1?a.parentNode?.removeChild(a):a.deleteData(c.length-1,1)}a=s.nextSibling,Vf(a)&&(a.data.length===1?a.parentNode?.removeChild(a):a.deleteData(0,1))}},oM=(e,t,n,s)=>{let a=Ca(),c,d,p=fi(e),b=e.dom,S=(Y,ne)=>{let he;if(D(),oA(ne))return null;if(n(ne)){let be=Py(p,ne,Y),Ce=sA(t,ne,Y);b.setStyle(be,"top",Ce.top),b.setStyle(be,"caret-color","transparent"),d=be;let He=b.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});b.setStyles(He,{...Ce}),b.add(t,He),a.set({caret:He,element:ne,before:Y}),Y&&b.addClass(He,"mce-visual-caret-before"),M(),he=ne.ownerDocument.createRange(),he.setStart(be,0),he.setEnd(be,0)}else return d=q0(ne,Y),he=ne.ownerDocument.createRange(),y1(d.nextSibling)?(he.setStart(d,0),he.setEnd(d,0)):(he.setStart(d,1),he.setEnd(d,1)),he;return he},D=()=>{rA(t),d&&(ko(d),d=null),a.on(Y=>{b.remove(Y.caret),a.clear()}),c&&(clearInterval(c),c=void 0)},M=()=>{c=window.setInterval(()=>{a.on(Y=>{s()?b.toggleClass(Y.caret,"mce-visual-caret-hidden"):b.addClass(Y.caret,"mce-visual-caret-hidden")})},500)},P=()=>{a.on(Y=>{let ne=sA(t,Y.element,Y.before);b.setStyles(Y.caret,{...ne})})},Z=()=>clearInterval(c),oe=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{isShowing:a.isSet,show:S,hide:D,getCss:oe,reposition:P,destroy:Z}},Zn=()=>En.browser.isFirefox(),y1=e=>Hv(e)||nA(e),sb=e=>(y1(e)||Ou(e)&&Zn())&&Ld(q.fromDom(e)).exists(wi),zv=Ui,Qp=Vo,$v=Zi,rb=Xo("display","block table table-cell table-row table-caption list-item"),LS=lc,aA=$f,sM=It,rM=tt,aM=On,is=(e,t)=>{let n;for(;n=e(t);)if(!aA(n))return n;return null},qf=(e,t,n,s,a)=>{let c=new er(e,s),d=Qp(e)||aA(e),p;if(p1(t)){if(d&&(p=is(c.prev.bind(c),!0),n(p)))return p;for(;p=is(c.prev.bind(c),a);)if(n(p))return p}if(J0(t)){if(d&&(p=is(c.next.bind(c),!0),n(p)))return p;for(;p=is(c.next.bind(c),a);)if(n(p))return p}return null},Gf=(e,t)=>{let n=a=>zv(a.dom),s=a=>a.dom===t;return jr(q.fromDom(e),n,s).map(a=>a.dom).getOr(t)},go=e=>It(e)&&fl(q.fromDom(e),"position")==="absolute",Oa=(e,t)=>e.parentNode!==t,Qg=(e,t)=>Qp(e)&&go(e)&&Oa(e,t),eh=(e,t)=>{for(;e&&e!==t;){if(rb(e)&&!Qg(e,t))return e;e=e.parentNode}return null},Km=(e,t,n)=>eh(e.container(),n)===eh(t.container(),n),C1=(e,t)=>{if(!t)return L.none();let n=t.container(),s=t.offset();return sM(n)?L.from(n.childNodes[s+e]):L.none()},IS=(e,t)=>{let s=(t.ownerDocument??document).createRange();return e?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),s},iA=(e,t,n)=>eh(t,e)===eh(n,e),FS=(e,t,n)=>{let s=e?"previousSibling":"nextSibling",a=n;for(;a&&a!==t;){let c=a[s];if(c&&LS(c)&&(c=c[s]),Qp(c)||$v(c)){if(iA(t,c,a))return c;break}if(aM(c))break;a=a.parentNode}return null},Vv=_t(IS,!0),w1=_t(IS,!1),cC=(e,t,n)=>{let s,a=_t(FS,!0,t),c=_t(FS,!1,t),d=n.startContainer,p=n.startOffset;if($f(d)){let b=rM(d)?d.parentNode:d,S=b.getAttribute("data-mce-caret");if(S==="before"&&(s=b.nextSibling,sb(s)))return Vv(s);if(S==="after"&&(s=b.previousSibling,sb(s)))return w1(s)}if(!n.collapsed)return n;if(tt(d)){if(LS(d)){if(e===1){if(s=c(d),s)return Vv(s);if(s=a(d),s)return w1(s)}if(e===-1){if(s=a(d),s)return w1(s);if(s=c(d),s)return Vv(s)}return n}if(d1(d)&&p>=d.data.length-1)return e===1&&(s=c(d),s)?Vv(s):n;if(Vf(d)&&p<=1)return e===-1&&(s=a(d),s)?w1(s):n;if(p===d.data.length)return s=c(d),s?Vv(s):n;if(p===0)return s=a(d),s?w1(s):n}return n},uC=(e,t)=>C1(e?0:-1,t).filter(Qp),la=(e,t,n)=>{let s=cC(e,t,n);return e===-1?Fe.fromRangeStart(s):Fe.fromRangeEnd(s)},dC=e=>L.from(e.getNode()).map(q.fromDom),iM=e=>L.from(e.getNode(!0)).map(q.fromDom),HS=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Uv=(e,t)=>{let n=Km(e,t);return!n&&zs(e.getNode())?!0:n},Zv=Vo,Ym=tt,th=It,mC=zs,x1=On,zS=_a,Wv=$l,lA=(e,t)=>{let n=[],s=e;for(;s&&s!==t;)n.push(s),s=s.parentNode;return n},$S=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,cA=(e,t)=>{if(J0(e)){if(x1(t.previousSibling)&&!Ym(t.previousSibling))return Fe.before(t);if(Ym(t))return Fe(t,0)}if(p1(e)){if(x1(t.nextSibling)&&!Ym(t.nextSibling))return Fe.after(t);if(Ym(t))return Fe(t,t.data.length)}return p1(e)?mC(t)?Fe.before(t):Fe.after(t):Fe.before(t)},lM=(e,t)=>{let n=t.nextSibling;return n&&x1(n)?Ym(n)?Fe(n,0):Fe.before(n):VS(1,Fe.after(t),e)},VS=(e,t,n)=>{let s,a,c,d;if(!th(n)||!t)return null;if(t.isEqual(Fe.after(n))&&n.lastChild){if(d=Fe.after(n.lastChild),p1(e)&&x1(n.lastChild)&&th(n.lastChild))return mC(n.lastChild)?Fe.before(n.lastChild):d}else d=t;let p=d.container(),b=d.offset();if(Ym(p)){if(p1(e)&&b>0)return Fe(p,--b);if(J0(e)&&b<p.length)return Fe(p,++b);s=p}else{if(p1(e)&&b>0&&(a=$S(p,b-1),x1(a)))return!zS(a)&&(c=qf(a,e,Wv,a),c)?Ym(c)?Fe(c,c.data.length):Fe.after(c):Ym(a)?Fe(a,a.data.length):Fe.before(a);if(J0(e)&&b<p.childNodes.length&&(a=$S(p,b),x1(a)))return mC(a)?lM(n,a):!zS(a)&&(c=qf(a,e,Wv,a),c)?Ym(c)?Fe(c,0):Fe.before(c):Ym(a)?Fe(a,0):Fe.after(a);s=a||d.getNode()}if(s&&(J0(e)&&d.isAtEnd()||p1(e)&&d.isAtStart())&&(s=qf(s,e,so,n,!0),Wv(s,n)))return cA(e,s);a=s&&qf(s,e,Wv,n);let S=Or(Lt(lA(p,n),Zv));return S&&(!a||!S.contains(a))?(J0(e)?d=Fe.after(S):d=Fe.before(S),d):a?cA(e,a):null},ef=e=>({next:t=>VS(1,t,e),prev:t=>VS(-1,t,e)}),cM=(e,t,n)=>{let s=e?Fe.before(n):Fe.after(n);return Lu(e,t,s)},US=e=>zs(e)?Fe.before(e):Fe.after(e),gC=e=>Fe.isTextPosition(e)?e.offset()===0:On(e.getNode()),uA=e=>{if(Fe.isTextPosition(e)){let t=e.container();return e.offset()===t.data.length}else return On(e.getNode(!0))},dA=(e,t)=>!Fe.isTextPosition(e)&&!Fe.isTextPosition(t)&&e.getNode()===t.getNode(!0),uM=e=>!Fe.isTextPosition(e)&&zs(e.getNode()),dM=(e,t,n)=>e?!dA(t,n)&&!uM(t)&&uA(t)&&gC(n):!dA(n,t)&&gC(t)&&uA(n),Lu=(e,t,n)=>{let s=ef(t);return L.from(e?s.next(n):s.prev(n))},Iu=(e,t,n)=>Lu(e,t,n).bind(s=>Km(n,s,t)&&dM(e,n,s)?Lu(e,t,s):L.some(s)),ZS=(e,t,n,s)=>Iu(e,t,n).bind(a=>s(a)?ZS(e,t,a,s):L.some(a)),S1=(e,t)=>{let n=e?t.firstChild:t.lastChild;return tt(n)?L.some(Fe(n,e?0:n.data.length)):n?On(n)?L.some(e?Fe.before(n):US(n)):cM(e,t,n):L.none()},cc=_t(Lu,!0),Gc=_t(Lu,!1),Yi=_t(S1,!0),yd=_t(S1,!1),WS="_mce_caret",Xi=e=>It(e)&&e.id===WS,nh=(e,t)=>{let n=t;for(;n&&n!==e;){if(Xi(n))return n;n=n.parentNode}return null},mM=e=>pt(e.start),gM=e=>Yt(e,"rng"),jS=e=>Yt(e,"id"),mA=e=>Yt(e,"name"),fC=e=>et.isArray(e.start),jv=e=>!mA(e)&&ut(e.forward)?e.forward:!0,qv=(e,t)=>(It(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),fM=(e,t)=>{let n=L.from(Xx(e.getRoot(),t.start)),s=L.from(Xx(e.getRoot(),t.end));return sr(n,s,(a,c)=>{let d=e.createRng();return d.setStart(a.container(),a.offset()),d.setEnd(c.container(),c.offset()),{range:d,forward:jv(t)}})},gA=(e,t)=>{let s=(e.ownerDocument??document).createTextNode(Qr);e.appendChild(s),t.setStart(s,0),t.setEnd(s,0)},fA=e=>!e.hasChildNodes(),pA=(e,t)=>yd(e).fold(pn,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),qS=(e,t,n)=>fA(t)&&nh(e,t)?(gA(t,n),!0):!1,GS=(e,t,n,s)=>{let a=n[t?"start":"end"],c=e.getRoot();if(a){let d=c,p=a[0];for(let b=a.length-1;d&&b>=1;b--){let S=d.childNodes;if(qS(c,d,s))return!0;if(a[b]>S.length-1)return qS(c,d,s)?!0:pA(d,s);d=S[a[b]]}tt(d)&&(p=Math.min(a[0],d.data.length)),It(d)&&(p=Math.min(a[0],d.childNodes.length)),t?s.setStart(d,p):s.setEnd(d,p)}return!0},KS=e=>tt(e)&&e.data.length>0,hA=(e,t,n)=>{let s=e.get(n.id+"_"+t),a=s?.parentNode,c=n.keep;if(s&&a){let d,p;if(t==="start"?c?s.hasChildNodes()?(d=s.firstChild,p=1):KS(s.nextSibling)?(d=s.nextSibling,p=0):KS(s.previousSibling)?(d=s.previousSibling,p=s.previousSibling.data.length):(d=a,p=e.nodeIndex(s)+1):(d=a,p=e.nodeIndex(s)):c?s.hasChildNodes()?(d=s.firstChild,p=1):KS(s.previousSibling)?(d=s.previousSibling,p=s.previousSibling.data.length):(d=a,p=e.nodeIndex(s)):(d=a,p=e.nodeIndex(s)),!c){let b=s.previousSibling,S=s.nextSibling;et.each(et.grep(s.childNodes),M=>{tt(M)&&(M.data=M.data.replace(/\uFEFF/g,""))});let D;for(;D=e.get(n.id+"_"+t);)e.remove(D,!0);if(tt(S)&&tt(b)&&!En.browser.isOpera()){let M=b.data.length;b.appendData(S.data),e.remove(S),d=b,p=M}}return L.some(Fe(d,p))}else return L.none()},Kc=(e,t)=>{let n=e.createRng();return GS(e,!0,t,n)&&GS(e,!1,t,n)?L.some({range:n,forward:jv(t)}):L.none()},bA=(e,t)=>{let n=hA(e,"start",t),s=hA(e,"end",t);return sr(n,s.or(n),(a,c)=>{let d=e.createRng();return d.setStart(qv(e,a.container()),a.offset()),d.setEnd(qv(e,c.container()),c.offset()),{range:d,forward:jv(t)}})},pM=(e,t)=>L.from(e.select(t.name)[t.index]).map(n=>{let s=e.createRng();return s.selectNode(n),{range:s,forward:!0}}),vA=(e,t)=>{let n=e.dom;if(t){if(fC(t))return Kc(n,t);if(mM(t))return fM(n,t);if(jS(t))return bA(n,t);if(mA(t))return pM(n,t);if(gM(t))return L.some({range:t.rng,forward:jv(t)})}return L.none()},hM=(e,t,n)=>WN(e,t,n),ab=(e,t)=>{vA(e,t).each(({range:n,forward:s})=>{e.setRng(n,s)})},Cl=e=>It(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Fu=(e=>t=>e===t)(ws),k1=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,YS=e=>!k1(e)&&!Fu(e)&&!js(e),ib=e=>{let t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},XS=e=>cr(e,t=>{let n=de(t);return n?[q.fromDom(n)]:[]}),JS=e=>ib(e).length>1,yA=e=>Lt(XS(e),Vp),oh=e=>gs(e,"td[data-mce-selected],th[data-mce-selected]"),CA=(e,t)=>{let n=oh(t);return n.length>0?n:yA(e)},lb=e=>CA(ib(e.selection.getSel()),q.fromDom(e.getBody())),Bn=(e,t)=>Ha(e,"table",t),bM=e=>{let t=e.startContainer,n=e.startOffset;return tt(t)?n===0?L.some(q.fromDom(t)):L.none():L.from(t.childNodes[n]).map(q.fromDom)},wA=e=>{let t=e.endContainer,n=e.endOffset;return tt(t)?n===t.data.length?L.some(q.fromDom(t)):L.none():L.from(t.childNodes[n-1]).map(q.fromDom)},xA=e=>Js(e).fold(lt([e]),t=>[e].concat(xA(t))),ar=e=>dl(e).fold(lt([e]),t=>fn(t)==="br"?ul(t).map(n=>[e].concat(ar(n))).getOr([]):[e].concat(ar(t))),QS=(e,t)=>sr(bM(t),wA(t),(n,s)=>{let a=xn(xA(e),_t(Qt,n)),c=xn(ar(e),_t(Qt,s));return a.isSome()&&c.isSome()}).getOr(!1),Ls=(e,t,n,s)=>{let a=n,c=new er(n,a),d=us(e.schema.getMoveCaretBeforeOnEnterElements(),(b,S)=>!In(["td","th","table"],S.toLowerCase())),p=n;do{if(tt(p)&&et.trim(p.data).length!==0){s?t.setStart(p,0):t.setEnd(p,p.data.length);return}if(d[p.nodeName]){s?t.setStartBefore(p):p.nodeName==="BR"?t.setEndBefore(p):t.setEndAfter(p);return}}while(p=s?c.next():c.prev());a.nodeName==="BODY"&&(s?t.setStart(a,0):t.setEnd(a,a.childNodes.length))},Gv=e=>{let t=e.selection.getSel();return Ve(t)&&t.rangeCount>0},pC=(e,t)=>{let n=lb(e);n.length>0?Pe(n,s=>{let a=s.dom,c=e.dom.createRng();c.setStartBefore(a),c.setEndAfter(a),t(c,!0)}):t(e.selection.getRng(),!1)},SA=(e,t,n)=>{let s=KE(e,t);n(s),e.moveToBookmark(s)},hC=(e,t)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset===1&&t(e.startContainer.childNodes[e.startOffset]),Kf=e=>hC(e,Rn),e4=e=>hC(e,tt),vM=e=>hC(e,Ph),E1=e=>vn(e?.nodeType),t4=e=>It(e)&&!Cl(e)&&!Xi(e)&&!Fg(e),va=(e,t)=>{if(t4(t)&&!/^(TD|TH)$/.test(t.nodeName)){let n=e.getAttrib(t,"data-mce-selected"),s=parseInt(n,10);return!isNaN(s)&&s>0}else return!1},kA=(e,t,n)=>{let{selection:s,dom:a}=e,c=s.getNode(),d=Vo(c);SA(s,!0,()=>{t()}),d&&Vo(c)&&a.isChildOf(c,e.getBody())?e.selection.select(c):n(s.getStart())&&sh(a,s)},sh=(e,t)=>{let n=t.getRng(),{startContainer:s,startOffset:a}=n,c=t.getNode();if(!va(e,c)&&It(s)){let d=s.childNodes,p=e.getRoot(),b;if(a<d.length){let S=d[a];b=new er(S,e.getParent(S,e.isBlock)??p)}else{let S=d[d.length-1];b=new er(S,e.getParent(S,e.isBlock)??p),b.next(!0)}for(let S=b.current();S;S=b.next()){if(e.getContentEditable(S)==="false")return;if(tt(S)&&!o4(S)){n.setStart(S,0),t.setRng(n);return}}}},EA=(e,t,n)=>{if(e){let s=t?"nextSibling":"previousSibling";for(e=n?e:e[s];e;e=e[s])if(It(e)||!o4(e))return e}},n4=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Pm(e,t),cb=(e,t,n)=>e.schema.isValidChild(t,n),o4=(e,t=!1)=>{if(Ve(e)&&tt(e)){let n=t?e.data.replace(/ /g,"\xA0"):e.data;return Fc(n)}else return!1},yM=e=>Ve(e)&&tt(e)&&e.length===0,CM=(e,t)=>{let n="[data-mce-cef-wrappable]",s=B6(e),a=xa(s)?n:`${n},${s}`;return Pa(q.fromDom(t),a)},TA=(e,t)=>{let n=e.dom;return t4(t)&&n.getContentEditable(t)==="false"&&CM(e,t)&&n.select('[contenteditable="true"]',t).length===0},rh=(e,t)=>zt(e)?e(t):(Ve(t)&&(e=e.replace(/%(\w+)/g,(n,s)=>t[s]||n)),e),s4=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),ub=(e,t)=>{if(os(e))return null;{let n=String(e);return(t==="color"||t==="backgroundColor")&&(n=Mf(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},bC=(e,t,n)=>{let s=e.getStyle(t,n);return ub(s,n)},AA=(e,t)=>{let n;return e.getParent(t,s=>It(s)?(n=e.getStyle(s,"text-decoration"),!!n&&n!=="none"):!1),n},ah=(e,t,n)=>e.getParents(t,n,e.getRoot()),Kv=(e,t,n)=>{let s=e.formatter.get(t);return Ve(s)&&ro(s,n)},T1=(e,t)=>Kv(e,t,s=>{let a=c=>zt(c)||c.length>1&&c.charAt(0)==="%";return ro(["styles","attributes"],c=>_n(s,c).exists(d=>{let p=ht(d)?d:eo(d);return ro(p,a)}))}),A1=(e,t,n)=>{let s=["inline","block","selector","attributes","styles","classes"],a=c=>us(c,(d,p)=>ro(s,b=>b===p));return Kv(e,t,c=>{let d=a(c);return Kv(e,n,p=>{let b=a(p);return we(d,b)})})},Cd=e=>ei(e,"block"),vC=e=>Cd(e)&&e.wrapper===!0,_1=e=>Cd(e)&&e.wrapper!==!0,Ji=e=>ei(e,"selector"),ca=e=>ei(e,"inline"),yC=e=>Ji(e)&&ca(e)&&sl(_n(e,"mixed"),!0),CC=e=>Ji(e)&&e.expand!==!1&&!ca(e),r4=e=>{let t=[],n=e;for(;n;){if(tt(n)&&n.data!==Qr||n.childNodes.length>1)return[];It(n)&&t.push(n),n=n.firstChild}return t},wC=e=>r4(e).length>0,xC=e=>Xi(e.dom)&&wC(e.dom),O1=Cl,D1=ah,a4=o4,_A=n4,OA=e=>zs(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Yv=(e,t)=>{let n=t;for(;n;){if(It(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},i4=(e,t,n,s)=>{let a=t.data;if(e){for(let c=n;c>0;c--)if(s(a.charAt(c-1)))return c}else for(let c=n;c<a.length;c++)if(s(a.charAt(c)))return c;return-1},DA=(e,t,n)=>i4(e,t,n,s=>Fu(s)||k1(s)),RA=(e,t,n)=>i4(e,t,n,YS),l4=(e,t,n,s,a,c)=>{let d,p=e.getParent(n,M=>_f(M)||e.isBlock(M)),b=Ve(p)?p:t,S=(M,P,Z)=>{let oe=Zc(e),Y=a?oe.backwards:oe.forwards;return L.from(Y(M,P,(ne,he)=>O1(ne.parentNode)?-1:(d=ne,Z(a,ne,he)),b))};return S(n,s,DA).bind(M=>c?S(M.container,M.offset+(a?-1:0),RA):L.some(M)).orThunk(()=>d?L.some({container:d,offset:a?0:d.length}):L.none())},tf=(e,t,n,s,a)=>{let c=s[a];tt(s)&&xa(s.data)&&c&&(s=c);let d=D1(e,s);for(let p=0;p<d.length;p++)for(let b=0;b<t.length;b++){let S=t[b];if(!(Ve(S.collapsed)&&S.collapsed!==n.collapsed)&&Ji(S)&&e.is(d[p],S.selector))return d[p]}return s},Yf=(e,t,n,s)=>{let a=n,c=e.getRoot(),d=t[0];if(Cd(d)&&(a=d.wrapper?null:e.getParent(n,d.block,c)),!a){let p=e.getParent(n,"LI,TD,TH,SUMMARY")??c;a=e.getParent(tt(n)?n.parentNode:n,b=>b!==c&&_A(e.schema,b),p)}if(a&&Cd(d)&&d.wrapper&&(a=D1(e,a,"ul,ol").reverse()[0]||a),!a)for(a=n;a&&a[s]&&!e.isBlock(a[s])&&(a=a[s],!s4(a,"br")););return a||n},wd=(e,t,n,s)=>{let a=n.parentNode;return Ve(n[s])?!1:a===t||os(a)||e.isBlock(a)?!0:wd(e,t,a,s)},db=(e,t,n,s,a,c)=>{let d=n,p=a?"previousSibling":"nextSibling",b=e.getRoot();if(tt(n)&&!a4(n)&&(a?s>0:s<n.data.length))return n;for(;d;){if(_f(d))return n;if(!t[0].block_expand&&e.isBlock(d))return c?d:n;for(let S=d[p];S;S=S[p]){let D=tt(S)&&!wd(e,b,S,p);if(!O1(S)&&!OA(S)&&!a4(S,D))return d}if(d===b||d.parentNode===b){n=d;break}d=d.parentNode}return n},SC=e=>O1(e.parentNode)||O1(e),ih=(e,t,n,s={})=>{let{includeTrailingSpace:a=!1,expandToBlock:c=!0}=s,d=e.getParent(t.commonAncestorContainer,Z=>_f(Z)),p=Ve(d)?d:e.getRoot(),{startContainer:b,startOffset:S,endContainer:D,endOffset:M}=t,P=n[0];return It(b)&&b.hasChildNodes()&&(b=le(b,S),tt(b)&&(S=0)),It(D)&&D.hasChildNodes()&&(D=le(D,t.collapsed?M:M-1),tt(D)&&(M=D.data.length)),b=Yv(e,b),D=Yv(e,D),SC(b)&&(b=O1(b)?b:b.parentNode,t.collapsed?b=b.previousSibling||b:b=b.nextSibling||b,tt(b)&&(S=t.collapsed?b.length:0)),SC(D)&&(D=O1(D)?D:D.parentNode,t.collapsed?D=D.nextSibling||D:D=D.previousSibling||D,tt(D)&&(M=t.collapsed?0:D.length)),t.collapsed&&(l4(e,p,b,S,!0,a).each(({container:Y,offset:ne})=>{b=Y,S=ne}),l4(e,p,D,M,!1,a).each(({container:Y,offset:ne})=>{D=Y,M=ne})),(ca(P)||P.block_expand)&&((!ca(P)||!tt(b)||S===0)&&(b=db(e,n,b,S,!0,c)),(!ca(P)||!tt(D)||M===D.data.length)&&(D=db(e,n,D,M,!1,c))),CC(P)&&(b=tf(e,n,t,b,"previousSibling"),D=tf(e,n,t,D,"nextSibling")),(Cd(P)||Ji(P))&&(b=Yf(e,n,b,"previousSibling"),D=Yf(e,n,D,"nextSibling"),Cd(P)&&(e.isBlock(b)||(b=db(e,n,b,S,!0,c),tt(b)&&(S=0)),e.isBlock(D)||(D=db(e,n,D,M,!1,c),tt(D)&&(M=D.data.length)))),It(b)&&b.parentNode&&(S=e.nodeIndex(b),b=b.parentNode),It(D)&&D.parentNode&&(M=e.nodeIndex(D)+1,D=D.parentNode),{startContainer:b,startOffset:S,endContainer:D,endOffset:M}},mb=(e,t,n)=>{let s=t.startOffset,a=le(t.startContainer,s),c=t.endOffset,d=le(t.endContainer,c-1),p=Y=>{let ne=Y[0];tt(ne)&&ne===a&&s>=ne.data.length&&Y.splice(0,1);let he=Y[Y.length-1];return c===0&&Y.length>0&&he===d&&tt(he)&&Y.splice(Y.length-1,1),Y},b=(Y,ne,he)=>{let be=[];for(;Y&&Y!==he;Y=Y[ne])be.push(Y);return be},S=(Y,ne)=>e.getParent(Y,he=>he.parentNode===ne,ne),D=(Y,ne,he)=>{let be=he?"nextSibling":"previousSibling";for(let Ce=Y,He=Ce.parentNode;Ce&&Ce!==ne;Ce=He){He=Ce.parentNode;let qe=b(Ce===Y?Ce:Ce[be],be);qe.length&&(he||qe.reverse(),n(p(qe)))}};if(a===d)return n(p([a]));let M=e.findCommonAncestor(a,d)??e.getRoot();if(e.isChildOf(a,d))return D(a,M,!0);if(e.isChildOf(d,a))return D(d,M);let P=S(a,M)||a,Z=S(d,M)||d;D(a,P,!0);let oe=b(P===a?P:P.nextSibling,"nextSibling",Z===d?Z.nextSibling:Z);oe.length&&n(p(oe)),D(d,Z)},NA=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],c4=e=>Sa(e)&&kr(e)===Qr,MA=(e,t,n,s)=>Ld(t).fold(()=>"skipping",a=>s==="br"||c4(t)?"valid":kv(t)?"existing":Xi(t.dom)?"caret":ro(NA,c=>Pa(t,c))?"valid-block":!cb(e,n,s)||!cb(e,fn(a),n)?"invalid-child":"valid"),BA=(e,t)=>{let n=ih(e.dom,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},kC=(e,t,n,s,a,c)=>{let{uid:d=t,...p}=n;za(e,Pf()),Pr(e,`${Mu()}`,d),Pr(e,`${zm()}`,s);let{attributes:b={},classes:S=[]}=a(d,p);if(Ea(e,b),rs(e,S),c){S.length>0&&Pr(e,`${Kg()}`,S.join(","));let D=zr(b);D.length>0&&Pr(e,`${Vn()}`,D.join(","))}},nf=e=>{Yo(e,Pf()),Ws(e,`${Mu()}`),Ws(e,`${zm()}`),Ws(e,`${Lf()}`);let t=xr(e,`${Vn()}`).map(s=>s.split(",")).getOr([]),n=xr(e,`${Kg()}`).map(s=>s.split(",")).getOr([]);Pe(t,s=>Ws(e,s)),Su(e,n),Ws(e,`${Kg()}`),Ws(e,`${Vn()}`)},xd=(e,t,n,s,a)=>{let c=q.fromTag("span",e);return kC(c,t,n,s,a,!1),c},EC=(e,t,n,s,a,c)=>{let d=[],p=xd(e.getDoc(),n,c,s,a),b=Ca(),S=()=>{b.clear()},D=()=>b.get().getOrThunk(()=>{let oe=ii(p);return d.push(oe),b.set(oe),oe}),M=oe=>{Pe(oe,P)},P=oe=>{switch(MA(e,oe,"span",fn(oe))){case"invalid-child":{S();let ne=rr(oe);M(ne),S();break}case"valid-block":{S(),kC(oe,n,c,s,a,!0);break}case"valid":{let ne=D();wr(oe,ne);break}}},Z=oe=>{let Y=Kt(oe,q.fromDom);M(Y)};return mb(e.dom,t,oe=>{S(),Z(oe)}),d},PA=(e,t,n,s)=>{e.undoManager.transact(()=>{let a=e.selection,c=a.getRng(),d=lb(e).length>0,p=yo("mce-annotation");if(c.collapsed&&!d&&BA(e,c),a.getRng().collapsed&&!d){let b=xd(e.getDoc(),p,s,t,n.decorate);Cu(b,ws),a.getRng().insertNode(b.dom),a.select(b.dom)}else SA(a,!1,()=>{pC(e,b=>{EC(e,b,p,t,n.decorate,s)})})})},Xv=e=>{let t=If();Yg(e,t);let n=W0(e,t),s=pu("span"),a=c=>{Pe(c,d=>{s(d)?yi(d):nf(d)})};return{register:(c,d)=>{t.register(c,d)},annotate:(c,d)=>{t.lookup(c).each(p=>{PA(e,c,p,d)})},annotationChanged:(c,d)=>{n.addListener(c,d)},remove:c=>{V0(e,L.some(c)).each(({elements:d})=>{let p=e.selection.getBookmark();a(d),e.selection.moveToBookmark(p)})},removeAll:c=>{let d=e.selection.getBookmark();An(Z0(e,c),(p,b)=>{a(p)}),e.selection.moveToBookmark(d)},getAll:c=>{let d=Z0(e,c);return $r(d,p=>Kt(p,b=>b.dom))}}},R1=e=>({getBookmark:_t(hM,e),moveToBookmark:_t(ab,e)});R1.isBookmarkNode=Cl;let u4=(e,t,n)=>n.collapsed?!1:ro(n.getClientRects(),s=>Q(s,e,t)),d4=(e,t)=>{let n=Sa(t)?kr(t).length:rr(t).length+1;return e>n?n:e<0?0:e},LA=e=>$i.range(e.start,d4(e.soffset,e.start),e.finish,d4(e.foffset,e.finish)),m4=(e,t)=>!Au(t.dom)&&(La(e,t)||Qt(e,t)),g4=e=>t=>m4(e,t.start)&&m4(e,t.finish),TC=e=>e.inline||En.browser.isFirefox(),f4=e=>$i.range(q.fromDom(e.startContainer),e.startOffset,q.fromDom(e.endContainer),e.endOffset),IA=e=>{let t=e.getSelection();return(!t||t.rangeCount===0?L.none():L.from(t.getRangeAt(0))).map(f4)},p4=e=>{let t=xo(e);return IA(t.dom).filter(g4(e))},wM=(e,t)=>L.from(t).filter(g4(e)).map(LA),xM=e=>{let t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),L.some(t)}catch{return L.none()}},AC=e=>{let t=TC(e)?p4(q.fromDom(e.getBody())):L.none();e.bookmark=t.isSome()?t:e.bookmark},h4=e=>(e.bookmark?e.bookmark:L.none()).bind(n=>wM(q.fromDom(e.getBody()),n)).bind(xM),SM=e=>{h4(e).each(t=>e.selection.setRng(t))},Jv={isEditorUIElement:e=>{let t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},b4=(e,t)=>(vn(t)||(t=0),window.setTimeout(e,t)),FA=(e,t)=>(vn(t)||(t=0),window.setInterval(e,t)),Yc={setEditorTimeout:(e,t,n)=>b4(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{let s=FA(()=>{e.removed?window.clearInterval(s):t()},n);return s}},kM=e=>e.type==="nodechange"&&e.selectionChange,EM=(e,t)=>{let n=()=>{t.throttle()};Co.DOM.bind(document,"mouseup",n),e.on("remove",()=>{Co.DOM.unbind(document,"mouseup",n)})},TM=(e,t)=>{e.on("mouseup touchend",n=>{t.throttle()})},AM=(e,t)=>{TM(e,t),e.on("keyup NodeChange AfterSetSelectionRange",n=>{kM(n)||AC(e)})},_M=e=>{let t=Dl(()=>{AC(e)},0);e.on("init",()=>{e.inline&&EM(e,t),AM(e,t)}),e.on("remove",()=>{t.cancel()})},gb,fb=Co.DOM,_C=e=>It(e)&&Jv.isEditorUIElement(e),pb=e=>{let t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},OC=(e,t)=>{let n=P6(e);return fb.getParent(t,a=>_C(a)||(n?e.dom.is(a,n):!1))!==null},v4=e=>{try{let t=Hi(q.fromDom(e.getElement()));return ri(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},OM=(e,t)=>{let n=t.editor;_M(n);let s=(a,c)=>{if(WT(a)&&a.inline!==!0){let d=q.fromDom(a.getContainer());c(d,"tox-edit-focus")}};n.on("focusin",()=>{let a=e.focusedEditor;pb(v4(n))&&s(n,za),a!==n&&(a&&a.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:a}),n.focus(!0))}),n.on("focusout",()=>{Yc.setEditorTimeout(n,()=>{let a=e.focusedEditor;(!pb(v4(n))||a!==n)&&s(n,Yo),!OC(n,v4(n))&&a===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),gb||(gb=a=>{let c=e.activeEditor;c&&Eg(a).each(d=>{let p=d;p.ownerDocument===document&&p!==document.body&&!OC(c,p)&&e.focusedEditor===c&&(c.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},fb.bind(document,"focusin",gb))},DM=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&gb&&(fb.unbind(document,"focusin",gb),gb=null)},RM=e=>{e.on("AddEditor",_t(OM,e)),e.on("RemoveEditor",_t(DM,e))},NM=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="true"),Qd=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="false")!==null,HA=e=>e.collapsed?L.from(le(e.startContainer,e.startOffset)).map(q.fromDom):L.none(),MM=(e,t)=>HA(t).bind(n=>Av(n)?L.some(n):La(e,n)?L.none():L.some(e)),y4=(e,t)=>{MM(q.fromDom(e.getBody()),t).bind(n=>Yi(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},DC=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},BM=e=>_g(e)||Og(e).isSome(),Qi=e=>Ve(e.iframeElement)&&_g(q.fromDom(e.iframeElement)),C4=e=>{let t=e.getBody();return t&&BM(q.fromDom(t))},zA=e=>{let t=Hi(q.fromDom(e.getElement()));return ri(t).filter(n=>!pb(n.dom)&&OC(e,n.dom)).isSome()},Xf=e=>e.inline?C4(e):Qi(e),RC=e=>Xf(e)||zA(e),$A=e=>{let t=e.selection,n=e.getBody(),s=t.getRng();e.quirks.refreshContentEditable();let a=d=>{h4(d).each(p=>{d.selection.setRng(p),s=p})};!Xf(e)&&e.hasEditableRoot()&&a(e);let c=NM(e,t.getNode());if(c&&e.dom.isChildOf(c,n)){Qd(e,c)||DC(n),DC(c),e.hasEditableRoot()||a(e),y4(e,s),NC(e);return}e.inline||(En.browser.isOpera()||DC(n),e.getWin().focus()),(En.browser.isFirefox()||e.inline)&&(DC(n),y4(e,s)),NC(e)},NC=e=>e.editorManager.setActive(e),PM=(e,t)=>{e.removed||(t?NC(e):$A(e))},St={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||St.metaKeyPressed(e),metaKeyPressed:e=>En.os.isMacOS()||En.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},N1="data-mce-selected",LM=`table,img,figure.image,hr,video,span.mce-preview-object,details,${hy}`,Qv=Math.abs,e2=Math.round,MC={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},VA=e=>e.type==="longpress"||e.type.indexOf("touch")===0,UA=(e,t)=>{let n=t.dom,s=t.getDoc(),a=document,c=t.getBody(),d,p,b,S,D,M,P,Z,oe,Y,ne,he,be,Ce,He,qe=Ze=>Ve(Ze)&&(C0(Ze)||n.is(Ze,"figure.image")),Ct=Ze=>Zi(Ze)||n.hasClass(Ze,"mce-preview-object"),Vt=(Ze,gt)=>{if(VA(Ze)){let Pt=Ze.touches[0];return qe(Ze.target)&&!u4(Pt.clientX,Pt.clientY,gt)}else return qe(Ze.target)&&!u4(Ze.clientX,Ze.clientY,gt)},Ie=Ze=>{let gt=Ze.target;Vt(Ze,t.selection.getRng())&&!Ze.isDefaultPrevented()&&t.selection.select(gt)},_e=Ze=>n.hasClass(Ze,"mce-preview-object")&&Ve(Ze.firstElementChild)?[Ze,Ze.firstElementChild]:n.is(Ze,"figure.image")?[Ze.querySelector("img")]:[Ze],ze=Ze=>{let gt=Lv(t);return!gt||t.mode.isReadOnly()||Ze.getAttribute("data-mce-resize")==="false"||Ze===t.getBody()?!1:n.hasClass(Ze,"mce-preview-object")&&Ve(Ze.firstElementChild)?Pa(q.fromDom(Ze.firstElementChild),gt):Pa(q.fromDom(Ze),gt)},yt=(Ze,gt)=>{if(Ct(gt))return Ze.create("img",{src:En.transparentSrc});if(Ou(gt)){let qn=wn(S.name,"n")?Sn:Ds,Hn=gt.cloneNode(!0);return qn(Ze.select("tr",Hn)).each(qo=>{let au=Ze.select("td,th",qo);Ze.setStyle(qo,"height",null),Pe(au,dm=>Ze.setStyle(dm,"height",null))}),Hn}else return gt.cloneNode(!0)},mn=(Ze,gt,Pt)=>{Ze[gt]=Pt;let qn=400;if(Ze.width>qn&&!(gt==="width"&&Pt<qn))Ze[gt]=Pt,n.setStyle(Ze,gt,Pt);else{let Hn=gt==="height"?qn*(Y??1):qn;Ze[gt]=Hn,n.setStyle(Ze,gt,Hn)}},gn=(Ze,gt,Pt)=>{if(Ve(Pt)){let qn=_e(Ze);Pe(qn,Hn=>{S0(Hn)?mn(Hn,gt,Pt):Hn.style[gt]||!t.schema.isValid(Hn.nodeName.toLowerCase(),gt)?n.setStyle(Hn,gt,Pt):n.setAttrib(Hn,gt,""+Pt)})}},Qn=(Ze,gt,Pt)=>{gn(Ze,"width",gt),gn(Ze,"height",Pt)},Fo=Ze=>{let gt,Pt,qn,Hn,qo;gt=Ze.screenX-M,Pt=Ze.screenY-P,he=gt*S[2]+Z,be=Pt*S[3]+oe,he=he<5?5:he,be=be<5?5:be,(qe(d)||Ct(d)||S0(d))&&O6(t)!==!1?qn=!St.modifierPressed(Ze):qn=St.modifierPressed(Ze),qn&&(Qv(gt)>Qv(Pt)?(be=e2(he*Y),he=e2(be/Y)):(he=e2(be/Y),be=e2(he*Y))),Qn(p,he,be),Hn=S.startPos.x+gt,qo=S.startPos.y+Pt,Hn=Hn>0?Hn:0,qo=qo>0?qo:0,n.setStyles(b,{left:Hn,top:qo,display:"block"}),b.innerHTML=he+" &times; "+be,gt=c.scrollWidth-Ce,Pt=c.scrollHeight-He,gt+Pt!==0&&n.setStyles(b,{left:Hn-gt,top:qo-Pt}),ne||(gi(t,d,Z,oe,"corner-"+S.name),ne=!0)},ys=()=>{let Ze=ne;ne=!1,Ze&&(gn(d,"width",he),gn(d,"height",be)),n.unbind(s,"mousemove",Fo),n.unbind(s,"mouseup",ys),a!==s&&(n.unbind(a,"mousemove",Fo),n.unbind(a,"mouseup",ys)),n.remove(p),n.remove(b),n.remove(D),Is(d),Ze&&(mS(t,d,he,be,"corner-"+S.name),n.setAttrib(d,"style",n.getAttrib(d,"style"))),t.nodeChanged()},Is=Ze=>{Eo();let gt=n.getPos(Ze,c),Pt=gt.x,qn=gt.y,Hn=Ze.getBoundingClientRect(),qo=Hn.width||Hn.right-Hn.left,au=Hn.height||Hn.bottom-Hn.top;d!==Ze&&(ru(),d=Ze,he=be=0);let dm=t.dispatch("ObjectSelected",{target:Ze});ze(Ze)&&!dm.isDefaultPrevented()?An(MC,(Ad,Zu)=>{let _h=hc=>{let hp=_e(d)[0];M=hc.screenX,P=hc.screenY,Z=hp.clientWidth,oe=hp.clientHeight,Y=oe/Z,S=Ad,S.name=Zu,S.startPos={x:qo*Ad[0]+Pt,y:au*Ad[1]+qn},Ce=c.scrollWidth,He=c.scrollHeight,D=n.add(c,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(D,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),p=yt(n,d),n.addClass(p,"mce-clonedresizable"),n.setAttrib(p,"data-mce-bogus","all"),p.contentEditable="false",n.setStyles(p,{left:Pt,top:qn,margin:0}),Qn(p,qo,au),p.removeAttribute(N1),c.appendChild(p),n.bind(s,"mousemove",Fo),n.bind(s,"mouseup",ys),a!==s&&(n.bind(a,"mousemove",Fo),n.bind(a,"mouseup",ys)),b=n.add(c,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},Z+" &times; "+oe)},Sl=n.get("mceResizeHandle"+Zu);Sl&&n.remove(Sl),Sl=n.add(c,"div",{id:"mceResizeHandle"+Zu,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Zu+"-resize; margin:0; padding:0"}),n.bind(Sl,"mousedown",hc=>{hc.stopImmediatePropagation(),hc.preventDefault(),_h(hc)}),Ad.elm=Sl,n.setStyles(Sl,{left:qo*Ad[0]+Pt-Sl.offsetWidth/2,top:au*Ad[1]+qn-Sl.offsetHeight/2})}):ru(!1)},qa=Dl(Is,0),ru=(Ze=!0)=>{qa.cancel(),Eo(),d&&Ze&&d.removeAttribute(N1),An(MC,(gt,Pt)=>{let qn=n.get("mceResizeHandle"+Pt);qn&&(n.unbind(qn),n.remove(qn))})},Et=(Ze,gt)=>n.isChildOf(Ze,gt),Gt=Ze=>{if(ne||t.removed||t.composing)return;let gt=Ze.type==="mousedown"?Ze.target:e.getNode(),Pt=Po(q.fromDom(gt),LM).map(Hn=>Hn.dom).filter(Hn=>n.isEditable(Hn.parentElement)||Hn.nodeName==="IMG"&&n.isEditable(Hn)).getOrUndefined(),qn=Ve(Pt)?n.getAttrib(Pt,N1,"1"):"1";if(Pe(n.select(`img[${N1}],hr[${N1}]`),Hn=>{Hn.removeAttribute(N1)}),Ve(Pt)&&Et(Pt,c)&&RC(t)){bo();let Hn=e.getStart(!0);if(Et(Hn,Pt)&&Et(e.getEnd(!0),Pt)){n.setAttrib(Pt,N1,qn),qa.throttle(Pt);return}}ru()},Eo=()=>{An(MC,Ze=>{Ze.elm&&(n.unbind(Ze.elm),delete Ze.elm)})},bo=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{bo(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Gt),t.on("keyup compositionend",Ze=>{d&&d.nodeName==="TABLE"&&Gt(Ze)}),t.on("hide blur",ru),t.on("contextmenu longpress",Ie,!0)}),t.on("remove",Eo),{isResizable:ze,showResizeRect:Is,hideResizeRect:ru,updateResizeRect:Gt,destroy:()=>{qa.cancel(),d=p=D=null}}},ZA=(e,t,n)=>{let s=xo(q.fromDom(n));return Ps(s.dom,e,t).map(a=>{let c=n.createRange();return c.setStart(a.start.dom,a.soffset),c.setEnd(a.finish.dom,a.foffset),c}).getOrUndefined()},t2=(e,t)=>Ve(e)&&Ve(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,w4=(e,t,n)=>{let s=e;for(;s&&s!==t;){if(n(s))return s;s=s.parentNode}return null},BC=(e,t,n)=>w4(e,t,n)!==null,IM=(e,t,n)=>BC(e,t,s=>s.nodeName===n),FM=(e,t)=>lc(e)&&!BC(e,t,Xi),WA=(e,t,n)=>{let s=t.parentNode;if(s){let a=new er(t,e.getParent(s,e.isBlock)||e.getRoot()),c;for(;c=a[n?"prev":"next"]();)if(zs(c))return!0}return!1},HM=(e,t)=>e.previousSibling?.nodeName===t,jA=(e,t)=>{let n=t;for(;n&&n!==e;){if(Vo(n))return!0;n=n.parentNode}return!1},x4=(e,t,n,s,a)=>{let c=e.getRoot(),d=e.schema.getNonEmptyElements(),p=a.parentNode,b,S;if(!p)return L.none();let D=e.getParent(p,e.isBlock)||c;if(s&&zs(a)&&t&&e.isEmpty(D))return L.some(Fe(p,e.nodeIndex(a)));let M=new er(a,D);for(;S=M[s?"prev":"next"]();){if(e.getContentEditableParent(S)==="false"||FM(S,c))return L.none();if(tt(S)&&S.data.length>0)return IM(S,c,"A")?L.none():L.some(Fe(S,s?S.data.length:0));if(e.isBlock(S)||d[S.nodeName.toLowerCase()])return L.none();b=S}return ud(b)?L.none():n&&b?L.some(Fe(b,0)):L.none()},qA=(e,t,n,s)=>{let a=e.getRoot(),c,d=!1,p=n?s.startContainer:s.endContainer,b=n?s.startOffset:s.endOffset,S=It(p)&&b===p.childNodes.length,D=e.schema.getNonEmptyElements(),M=n;if(lc(p))return L.none();if(It(p)&&b>p.childNodes.length-1&&(M=!1),Af(p)&&(p=a,b=0),p===a){if(M&&(c=p.childNodes[b>0?b-1:0],c&&(lc(c)||D[c.nodeName]||Ou(c))))return L.none();if(p.hasChildNodes()){if(b=Math.min(!M&&b>0?b-1:b,p.childNodes.length-1),p=p.childNodes[b],b=tt(p)&&S?p.data.length:0,!t&&p===a.lastChild&&Ou(p)||jA(a,p)||lc(p)||lv(p))return L.none();if(p.hasChildNodes()&&!Ou(p)){c=p;let P=new er(p,a);do{if(Vo(c)||lc(c)){d=!1;break}if(tt(c)&&c.data.length>0){b=M?0:c.data.length,p=c,d=!0;break}if(D[c.nodeName.toLowerCase()]&&!w0(c)){b=e.nodeIndex(c),p=c.parentNode,M||b++,d=!0;break}}while(c=M?P.next():P.prev())}}}return t&&(tt(p)&&b===0&&x4(e,S,t,!0,p).each(P=>{p=P.container(),b=P.offset(),d=!0}),It(p)&&(c=p.childNodes[b],c||(c=p.childNodes[b-1]),c&&zs(c)&&!HM(c,"A")&&!WA(e,c,!1)&&!WA(e,c,!0)&&x4(e,S,t,!0,c).each(P=>{p=P.container(),b=P.offset(),d=!0}))),M&&!t&&tt(p)&&b===p.data.length&&x4(e,S,t,!1,p).each(P=>{p=P.container(),b=P.offset(),d=!0}),d&&p?L.some(Fe(p,b)):L.none()},PC=(e,t)=>{let n=t.collapsed,s=t.cloneRange(),a=Fe.fromRangeStart(t);return qA(e,n,!0,s).each(c=>{(!n||!Fe.isAbove(a,c))&&s.setStart(c.container(),c.offset())}),n||qA(e,n,!1,s).each(c=>{s.setEnd(c.container(),c.offset())}),n&&s.collapse(!0),t2(t,s)?L.none():L.some(s)},LC=(e,t)=>e.splitText(t),IC=e=>{let t=e.startContainer,n=e.startOffset,s=e.endContainer,a=e.endOffset;if(t===s&&tt(t)){if(n>0&&n<t.data.length)if(s=LC(t,n),t=s.previousSibling,a>n){a=a-n;let c=LC(s,a).previousSibling;t=s=c,a=c.data.length,n=0}else a=0}else if(tt(t)&&n>0&&n<t.data.length&&(t=LC(t,n),n=0),tt(s)&&a>0&&a<s.data.length){let c=LC(s,a).previousSibling;s=c,a=c.data.length}return{startContainer:t,startOffset:n,endContainer:s,endOffset:a}},Xc=e=>({walk:(c,d)=>mb(e,c,d),split:IC,expand:(c,d={type:"word"})=>{if(d.type==="word"){let p=ih(e,c,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),b=e.createRng();return b.setStart(p.startContainer,p.startOffset),b.setEnd(p.endContainer,p.endOffset),b}return c},normalize:c=>PC(e,c).fold(pn,d=>(c.setStart(d.startContainer,d.startOffset),c.setEnd(d.endContainer,d.endOffset),!0))});Xc.compareRanges=t2,Xc.getCaretRangeFromPoint=ZA,Xc.getSelectedNode=de,Xc.getNode=le;let n2=(e,t)=>e.view(t).fold(lt([]),s=>{let a=e.owner(s),c=n2(e,a);return[s].concat(c)}),GA=(e,t)=>{let n=t.owner(e);return n2(t,n)};var $M=Object.freeze({__proto__:null,view:e=>(e.dom===document?L.none():L.from(e.dom.defaultView?.frameElement)).map(q.fromDom),owner:e=>hu(e)});let VM=e=>{let t=Ag(),n=Ia(t),s=GA(e,$M),a=ss(e),c=dt(s,(d,p)=>{let b=ss(p);return{left:d.left+b.left,top:d.top+b.top}},{left:0,top:0});return xu(c.left+a.left+n.left,c.top+a.top+n.top)},S4=e=>fn(e)==="textarea",Hu=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),o2=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},UM=(e,t)=>{let n=rr(e);if(n.length===0||S4(e))return{element:e,offset:t};if(t<n.length&&!S4(n[t]))return{element:n[t],offset:0};{let s=n[n.length-1];return S4(s)?{element:e,offset:t}:fn(s)==="img"?{element:s,offset:1}:Sa(s)?{element:s,offset:kr(s).length}:{element:s,offset:rr(s).length}}},s2=(e,t)=>{let n=p0(e),s=rd(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},r2=(e,t)=>{let n=UM(e,t),s=q.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Qr+"</span>");return Zr(n.element,s),s2(s,()=>Ko(s))},ZM=e=>s2(q.fromDom(e),wt),M1=(e,t,n,s)=>{YA(e,(a,c)=>a2(e,t,n,s),n)},Uo=(e,t,n,s,a)=>{let c={elm:s.element.dom,alignToTop:a};if(Hu(e,c))return;let d=Ia(t).top;n(e,t,d,s,a),o2(e,c)},a2=(e,t,n,s)=>{let a=q.fromDom(e.getBody()),c=q.fromDom(e.getDoc());fa(a);let d=r2(q.fromDom(n.startContainer),n.startOffset);Uo(e,c,t,d,s),d.cleanup()},k4=(e,t,n,s)=>{let a=q.fromDom(e.getDoc());Uo(e,a,n,ZM(t),s)},YA=(e,t,n)=>{let s=n.startContainer,a=n.startOffset,c=n.endContainer,d=n.endOffset;t(q.fromDom(s),q.fromDom(c));let p=e.dom.createRng();p.setStart(s,a),p.setEnd(c,d),e.selection.setRng(n)},hb=(e,t,n,s,a)=>{let c=t.pos,d=30;if(s)li(c.left,Math.max(0,c.top-d),a);else{let p=c.top-n+t.height+d;li(-e.getBody().getBoundingClientRect().left,p,a)}},FC=(e,t,n,s,a,c)=>{let d=s+n,p=a.pos.top,b=a.bottom,S=b-p>=s;p<n?hb(e,a,s,c!==!1,t):p>d?hb(e,a,s,S?c!==!1:c===!0,t):b>d&&!S&&hb(e,a,s,c===!0,t)},HC=(e,t,n,s,a)=>{let c=xo(t).dom.innerHeight;FC(e,t,n,c,s,a)},zC=(e,t,n,s,a)=>{let c=xo(t).dom.innerHeight;FC(e,t,n,c,s,a);let d=VM(s.element),p=Ic(window);d.top<p.y?Rc(s.element,a!==!1):d.top>p.bottom&&Rc(s.element,a===!0)},E4=(e,t,n)=>M1(e,HC,t,n),$C=(e,t,n)=>k4(e,t,HC,n),T4=(e,t,n)=>M1(e,zC,t,n),XA=(e,t,n)=>k4(e,t,zC,n),JA=(e,t,n)=>{(e.inline?$C:XA)(e,t,n)},bb=(e,t,n)=>{(e.inline?E4:T4)(e,t,n)},A4=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),_4=(e,t,n,s,a)=>{let c=n?t.startContainer:t.endContainer,d=n?t.startOffset:t.endOffset;return L.from(c).map(q.fromDom).map(p=>!s||!t.collapsed?$o(p,a(p,d)).getOr(p):p).bind(p=>Xs(p)?L.some(p):Mr(p).filter(Xs)).map(p=>p.dom).getOr(e)},lh=(e,t,n=!1)=>_4(e,t,!0,n,(s,a)=>Math.min(ka(s),a)),O4=(e,t,n=!1)=>_4(e,t,!1,n,(s,a)=>a>0?a-1:a),VC=(e,t)=>{let n=e;for(;e&&tt(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},WM=(e,t)=>{if(!t)return e;let n=t.startContainer,s=t.endContainer,a=t.startOffset,c=t.endOffset,d=t.commonAncestorContainer;t.collapsed||(n===s&&c-a<2&&n.hasChildNodes()&&(d=n.childNodes[a]),tt(n)&&tt(s)&&(n.length===a?n=VC(n.nextSibling,!0):n=n.parentNode,c===0?s=VC(s.previousSibling,!1):s=s.parentNode,n&&n===s&&(d=n)));let p=tt(d)?d.parentNode:d;return Rn(p)?p:e},jM=(e,t,n,s)=>{let a=[],c=e.getRoot(),d=e.getParent(n||lh(c,t,t.collapsed),e.isBlock),p=e.getParent(s||O4(c,t,t.collapsed),e.isBlock);if(d&&d!==c&&a.push(d),d&&p&&d!==p){let b,S=new er(d,c);for(;(b=S.next())&&b!==p;)e.isBlock(b)&&a.push(b)}return p&&d!==p&&p!==c&&a.push(p),a},QA=(e,t,n)=>L.from(t).bind(s=>L.from(s.parentNode).map(a=>{let c=e.nodeIndex(s),d=e.createRng();return d.setStart(a,c),d.setEnd(a,c+1),n&&(Ls(e,d,s,!0),Ls(e,d,s,!1)),d})),UC=(e,t)=>Kt(t,n=>{let s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),e_={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},B1=(e,t,n)=>{let s=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[s])return e[s];if(e!==t){let c=e[a];if(c)return c;for(let d=e.parent;d&&d!==t;d=d.parent)if(c=d[a],c)return c}},t_=e=>{let t=e.value??"";if(!Fc(t))return!1;let n=e.parent;return!(n&&(n.name!=="span"||n.attr("style"))&&/^[ ]+$/.test(t))},D4=e=>{let t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Ai{static create(t,n){let s=new Ai(t,e_[t]||1);return n&&An(n,(a,c)=>{s.attr(c,a)}),s}name;type;attributes;value;parent;firstChild;lastChild;next;prev;raw;constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(t){let n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){let s=this;if(!pt(t))return Ve(t)&&An(t,(c,d)=>{s.attr(d,c)}),s;let a=s.attributes;if(a){if(n!==void 0){if(n===null){if(t in a.map){delete a.map[t];let c=a.length;for(;c--;)if(a[c].name===t)return a.splice(c,1),s}return s}if(t in a.map){let c=a.length;for(;c--;)if(a[c].name===t){a[c].value=n;break}}else a.push({name:t,value:n});return a.map[t]=n,s}return a.map[t]}}clone(){let t=this,n=new Ai(t.name,t.type),s=t.attributes;if(s){let a=[];a.map={};for(let c=0,d=s.length;c<d;c++){let p=s[c];p.name!=="id"&&(a[a.length]={name:p.name,value:p.value},a.map[p.name]=p.value)}n.attributes=a}return n.value=t.value,n}wrap(t){let n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){let t=this;for(let n=t.firstChild;n;){let s=n.next;t.insert(n,t,!0),n=s}t.remove()}remove(){let t=this,n=t.parent,s=t.next,a=t.prev;return n&&(n.firstChild===t?(n.firstChild=s,s&&(s.prev=null)):a&&(a.next=s),n.lastChild===t?(n.lastChild=a,a&&(a.next=null)):s&&(s.prev=a),t.parent=t.next=t.prev=null),t}append(t){let n=this;t.parent&&t.remove();let s=n.lastChild;return s?(s.next=t,t.prev=s,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,s){t.parent&&t.remove();let a=n.parent||this;return s?(n===a.firstChild?a.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===a.lastChild?a.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=a,t}getAll(t){let n=this,s=[];for(let a=n.firstChild;a;a=B1(a,n))a.name===t&&s.push(a);return s}children(){let t=this,n=[];for(let s=t.firstChild;s;s=s.next)n.push(s);return n}empty(){let t=this;if(t.firstChild){let n=[];for(let a=t.firstChild;a;a=B1(a,t))n.push(a);let s=n.length;for(;s--;){let a=n[s];a.parent=a.firstChild=a.lastChild=a.next=a.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},s){let a=this,c=a.firstChild;if(D4(a))return!1;if(c)do{if(c.type===1){if(c.attr("data-mce-bogus"))continue;if(t[c.name]||D4(c))return!1}if(c.type===8||c.type===3&&!t_(c)||c.type===3&&c.parent&&n[c.parent.name]&&Fc(c.value??"")||s&&s(c))return!1}while(c=B1(c,a));return!0}walk(t){return B1(this,null,t)}}let n_=et.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),R4=e=>pt(e.nodeValue)&&e.nodeValue.includes(Qr),N4=e=>`${e.length===0?"":`${Kt(e,t=>`[${t}]`).join(",")},`}[data-mce-bogus="all"]`,o_=(e,t)=>t.querySelectorAll(N4(e)),M4=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>R4(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),B4=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(R4(t)){let n=t.parentNode;return n&&Yt(n_,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),s_=e=>M4(e).nextNode()!==null,P4=e=>B4(e).nextNode()!==null,r_=(e,t)=>t.querySelector(N4(e))!==null,a_=(e,t)=>{Pe(o_(e,t),n=>{let s=q.fromDom(n);ai(s,"data-mce-bogus")==="all"?Ko(s):Pe(e,a=>{Sm(s,a)&&Ws(s,a)})})},L4=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},i_=ls(L4,M4),l_=ls(L4,B4),I4=(e,t)=>{let n=[{condition:_t(r_,t),action:_t(a_,t)},{condition:s_,action:i_},{condition:P4,action:l_}],s=e,a=!1;return Pe(n,({condition:c,action:d})=>{c(s)&&(a||(s=e.cloneNode(!0),a=!0),d(s))}),s},F4=e=>{let t=gs(e,"[data-mce-bogus]");Pe(t,n=>{ai(n,"data-mce-bogus")==="all"?Ko(n):zl(n)?(Zr(n,q.fromText(Rl)),Ko(n)):yi(n)})},ZC=e=>{let t=gs(e,"input");Pe(t,n=>{Ws(n,"name")})},WC=(e,t)=>{let n=fi(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(s,"")},c_=(e,t)=>{let n=e.getDoc(),s=Hi(q.fromDom(e.getBody())),a=q.fromTag("div",n);Pr(a,"data-mce-bogus","all"),_m(a,{position:"fixed",left:"-9999999px",top:"0"}),Cu(a,t.innerHTML),F4(a),ZC(a);let c=aa(s);Oo(c,a);let d=yl(a.dom.innerText);return Ko(a),d},u_=(e,t,n)=>{let s;return t.format==="raw"?s=et.trim(yl(I4(n,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?s=c_(e,n):t.format==="tree"?s=e.serializer.serialize(n,t):s=WC(e,e.serializer.serialize(n,t)),t.format!=="text"&&!a1(q.fromDom(n))&&pt(s)?et.trim(s):s},jC=(e,t)=>L.from(e.getBody()).fold(lt(t.format==="tree"?new Ai("body",11):""),n=>u_(e,t,n)),qC=et.makeMap,vb=e=>{let t=[];e=e||{};let n=e.indent,s=qC(e.indent_before||""),a=qC(e.indent_after||""),c=md.getEncodeFunc(e.entity_encoding||"raw",e.entities),d=e.element_format!=="xhtml";return{start:(p,b,S)=>{if(n&&s[p]&&t.length>0){let D=t[t.length-1];D.length>0&&D!==`
`&&t.push(`
`)}if(t.push("<",p),b)for(let D=0,M=b.length;D<M;D++){let P=b[D];t.push(" ",P.name,'="',c(P.value,!0),'"')}if(!S||d?t[t.length]=">":t[t.length]=" />",S&&n&&a[p]&&t.length>0){let D=t[t.length-1];D.length>0&&D!==`
`&&t.push(`
`)}},end:p=>{let b;t.push("</",p,">"),n&&a[p]&&t.length>0&&(b=t[t.length-1],b.length>0&&b!==`
`&&t.push(`
`))},text:(p,b)=>{p.length>0&&(t[t.length]=b?p:c(p))},cdata:p=>{t.push("<![CDATA[",p,"]]>")},comment:p=>{t.push("<!--",p,"-->")},pi:(p,b)=>{b?t.push("<?",p," ",c(b),"?>"):t.push("<?",p,"?>"),n&&t.push(`
`)},doctype:p=>{t.push("<!DOCTYPE",p,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},of=(e={},t=Zd())=>{let n=vb(e);return e.validate="validate"in e?e.validate:!0,{serialize:a=>{let c=e.validate,d={3:b=>{n.text(b.value??"",b.raw)},8:b=>{n.comment(b.value??"")},7:b=>{n.pi(b.name,b.value)},10:b=>{n.doctype(b.value??"")},4:b=>{n.cdata(b.value??"")},11:b=>{let S=b;if(S=S.firstChild)do p(S);while(S=S.next)}};n.reset();let p=b=>{let S=d[b.type];if(S)S(b);else{let D=b.name,M=D in t.getVoidElements(),P=b.attributes;if(c&&P&&P.length>1){let Z=[];Z.map={};let oe=t.getElementRule(b.name);if(oe){for(let Y=0,ne=oe.attributesOrder.length;Y<ne;Y++){let he=oe.attributesOrder[Y];if(he in P.map){let be=P.map[he];Z.map[he]=be,Z.push({name:he,value:be})}}for(let Y=0,ne=P.length;Y<ne;Y++){let he=P[Y].name;if(!(he in Z.map)){let be=P.map[he];Z.map[he]=be,Z.push({name:he,value:be})}}P=Z}}if(n.start(D,P,M),Hg(D))pt(b.value)&&n.text(b.value,!0),n.end(D);else if(!M){let Z=b.firstChild;if(Z){(D==="pre"||D==="textarea")&&Z.type===3&&Z.value?.[0]===`
`&&n.text(`
`,!0);do p(Z);while(Z=Z.next)}n.end(D)}}};return a.type===1&&!e.inner?p(a):a.type===3?d[3](a):d[11](a),n.getContent()}}},H4=new Set;Pe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{H4.add(t)});let P1=new Set;Pe(["background-color"],t=>{P1.add(t)});let GC=["font","text-decoration","text-emphasis"],z4=(e,t)=>e.parseStyle(e.getAttrib(t,"style")),Xm=(e,t)=>zr(z4(e,t)),ch=e=>H4.has(e),d_=e=>P1.has(e),m_=(e,t)=>ro(Xm(e,t),n=>ch(n)),qM=(e,t)=>m_(e,t)&&ro(Xm(e,t),n=>d_(n)),g_=e=>Lt(e,t=>ro(GC,n=>wn(t,n))),f_=(e,t,n)=>{let s=Xm(e,t),a=Xm(e,n),c=d=>{let p=e.getStyle(t,d)??"",b=e.getStyle(n,d)??"";return Na(p)&&Na(b)&&p!==b};return ro(s,d=>{let p=b=>ro(b,S=>S===d);if(!p(a)&&p(GC)){let b=g_(a);return ro(b,c)}else return c(d)})},$4=(e,t,n)=>L.from(n.container()).filter(tt).exists(s=>{let a=e?0:-1;return t(s.data.charAt(n.offset()+a))}),sf=_t($4,!0,k1),Jf=_t($4,!1,k1),p_=e=>{let t=e.container();return tt(t)&&(t.data.length===0||zf(t.data)&&R1.isBookmarkNode(t.parentNode))},Qf=(e,t)=>n=>C1(e?0:-1,n).filter(t).isSome(),h_=e=>C0(e)&&fl(q.fromDom(e),"display")==="block",b_=e=>Vo(e)&&!Tf(e),GM=Qf(!0,h_),Jc=Qf(!1,h_),uc=Qf(!0,Zi),yb=Qf(!1,Zi),KC=Qf(!0,Ou),i2=Qf(!1,Ou),Jm=Qf(!0,b_),uh=Qf(!1,b_),v_=e=>e.slice(0,-1),l2=(e,t,n)=>La(t,e)?v_(bu(e,s=>n(s)||Qt(s,t))):[],y_=(e,t)=>l2(e,t,pn),em=(e,t)=>[e].concat(y_(e,t)),c2=(e,t,n)=>ZS(e,t,n,p_),C_=e=>t=>e.isBlock(fn(t)),Cb=(e,t,n)=>xn(em(q.fromDom(t.container()),e),C_(n)),w_=(e,t,n,s)=>c2(e,t.dom,n).forall(a=>Cb(t,n,s).fold(()=>!Km(a,n,t.dom),c=>!Km(a,n,t.dom)&&La(c,q.fromDom(a.container())))),x_=(e,t,n,s)=>Cb(t,n,s).fold(()=>c2(e,t.dom,n).forall(a=>!Km(a,n,t.dom)),a=>c2(e,a.dom,n).isNone()),Sd=_t(x_,!1),dc=_t(x_,!0),u2=_t(w_,!1),S_=_t(w_,!0),Qc=e=>dC(e).exists(zl),Jo=(e,t,n,s)=>{let a=Lt(em(q.fromDom(n.container()),t),d=>s.isBlock(fn(d))),c=Sn(a).getOr(t);return Lu(e,c.dom,n).filter(Qc)},V4=(e,t,n)=>dC(t).exists(zl)||Jo(!0,e,t,n).isSome(),tm=(e,t,n)=>iM(t).exists(zl)||Jo(!1,e,t,n).isSome(),wb=_t(Jo,!1),k_=_t(Jo,!0),YC=e=>Fe.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),XC=(e,t,n)=>{let s=Lt(em(q.fromDom(t.container()),e),a=>n.isBlock(fn(a)));return Sn(s).getOr(e)},E_=(e,t,n)=>YC(t)?Jf(t):Jf(t)||Gc(XC(e,t,n).dom,t).exists(Jf),JC=(e,t,n)=>YC(t)?sf(t):sf(t)||cc(XC(e,t,n).dom,t).exists(sf),KM=e=>In(["pre","pre-wrap"],e),QC=e=>dC(e).bind(t=>ha(t,Xs)).exists(t=>KM(fl(t,"white-space"))),T_=(e,t)=>Gc(e.dom,t).isNone(),U4=(e,t)=>cc(e.dom,t).isNone(),A_=(e,t,n)=>T_(e,t)||U4(e,t)||Sd(e,t,n)||dc(e,t,n)||tm(e,t,n)||V4(e,t,n),ew=e=>Ve(e)&&Vo(e)&&rb(e),__=(e,t)=>n=>ew(new er(n,e)[t]()),YM=(e,t)=>{let n=cc(e.dom,t).getOr(t),s=__(e.dom,"next");return t.isAtEnd()&&(s(t.container())||s(n.container()))},XM=(e,t)=>{let n=Gc(e.dom,t).getOr(t),s=__(e.dom,"prev");return t.isAtStart()&&(s(t.container())||s(n.container()))},O_=(e,t,n)=>QC(t)?!1:A_(e,t,n)||E_(e,t,n)||JC(e,t,n),d2=(e,t,n)=>QC(t)?!1:Sd(e,t,n)||u2(e,t,n)||tm(e,t,n)||E_(e,t,n)||XM(e,t),D_=e=>{let t=e.container(),n=e.offset();return tt(t)&&n<t.data.length?Fe(t,n+1):e},m2=(e,t,n)=>QC(t)?!1:dc(e,t,n)||S_(e,t,n)||V4(e,t,n)||JC(e,t,n)||YM(e,t),Z4=(e,t,n)=>d2(e,t,n)||m2(e,D_(t),n),W4=(e,t)=>Fu(e.charAt(t)),R_=(e,t)=>k1(e.charAt(t)),N_=e=>{let t=e.container();return tt(t)&&mr(t.data,ws)},JM=e=>{let t=e.split("");return Kt(t,(n,s)=>Fu(n)&&s>0&&s<t.length-1&&YS(t[s-1])&&YS(t[s+1])?" ":n).join("")},M_=(e,t,n,s)=>{let a=t.data,c=Fe(t,0);return!n&&W4(a,0)&&!Z4(e,c,s)?(t.data=" "+a.slice(1),!0):n&&R_(a,0)&&d2(e,c,s)?(t.data=ws+a.slice(1),!0):!1},B_=e=>{let t=e.data,n=JM(t);return n!==t?(e.data=n,!0):!1},_i=(e,t,n,s)=>{let a=t.data,c=Fe(t,a.length-1);return!n&&W4(a,a.length-1)&&!Z4(e,c,s)?(t.data=a.slice(0,-1)+" ",!0):n&&R_(a,a.length-1)&&m2(e,c,s)?(t.data=a.slice(0,-1)+ws,!0):!1},QM=(e,t,n)=>{let s=t.container();if(!tt(s))return L.none();if(N_(t)){let a=M_(e,s,!1,n)||B_(s)||_i(e,s,!1,n);return bt(a,t)}else if(Z4(e,t,n)){let a=M_(e,s,!0,n)||_i(e,s,!0,n);return bt(a,t)}else return L.none()},P_=e=>{let t=q.fromDom(e.getBody());e.selection.isCollapsed()&&QM(t,Fe.fromRangeStart(e.selection.getRng()),e.schema).each(n=>{e.selection.setRng(n.toRange())})},tw=(e,t,n,s)=>{if(n===0)return;let a=q.fromDom(e),c=jr(a,S=>s.isBlock(fn(S))).getOr(a),d=e.data.slice(t,t+n),p=t+n>=e.data.length&&m2(c,Fe(e,e.data.length),s),b=t===0&&d2(c,Fe(e,0),s);e.replaceData(t,n,fy(d,4,b,p))},xb=(e,t,n)=>{let s=e.data.slice(t),a=s.length-Jl(s).length;tw(e,t,a,n)},nw=(e,t,n)=>{let s=e.data.slice(0,t),a=s.length-fg(s).length;tw(e,t-a,a,n)},ow=(e,t,n,s,a=!0)=>{let c=fg(e.data).length,d=a?e:t,p=a?t:e;return a?d.appendData(p.data):d.insertData(0,p.data),Ko(q.fromDom(p)),s&&xb(d,c,n),d},L_=(e,t)=>{let n=e.container(),s=e.offset();return!Fe.isTextPosition(e)&&n===t.parentNode&&s>Fe.before(t).offset()},I_=(e,t)=>L_(t,e)?Fe(t.container(),t.offset()-1):t,zu=e=>tt(e)?Fe(e,0):Fe.before(e),e8=e=>tt(e)?Fe(e,e.data.length):Fe.after(e),sw=e=>On(e.previousSibling)?L.some(e8(e.previousSibling)):e.previousSibling?yd(e.previousSibling):L.none(),F_=e=>On(e.nextSibling)?L.some(zu(e.nextSibling)):e.nextSibling?Yi(e.nextSibling):L.none(),j4=(e,t)=>L.from(t.previousSibling?t.previousSibling:t.parentNode).bind(n=>Gc(e,Fe.before(n))).orThunk(()=>cc(e,Fe.after(t))),nm=(e,t)=>cc(e,Fe.after(t)).orThunk(()=>Gc(e,Fe.before(t))),q4=(e,t)=>sw(t).orThunk(()=>F_(t)).orThunk(()=>j4(e,t)),rw=(e,t)=>F_(t).orThunk(()=>sw(t)).orThunk(()=>nm(e,t)),H_=(e,t,n)=>e?rw(t,n):q4(t,n),t8=(e,t,n)=>H_(e,t,n).map(_t(I_,n)),aw=(e,t,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),t)})},z_=e=>t=>t.dom===e,G4=(e,t)=>t&&Yt(e.schema.getBlockElements(),fn(t)),$_=(e,t,n)=>{if(ki(e,t)){let s=q.fromHtml('<br data-mce-bogus="1">');return n?Pe(rr(t),a=>{xC(a)||Ko(a)}):vi(t),Oo(t,s),L.some(Fe.before(s.dom))}else return L.none()},L1=(e,t,n,s)=>{let a=ul(e).filter(Sa),c=tc(e).filter(Sa);return Ko(e),rl(a,c,t,(d,p,b)=>{let S=d.dom,D=p.dom,M=S.data.length;return ow(S,D,n,s),b.container()===D?Fe(S,M):b}).orThunk(()=>(s&&(a.each(d=>nw(d.dom,d.dom.length,n)),c.each(d=>xb(d.dom,0,n))),t))},V_=(e,t)=>Yt(e.schema.getTextInlineElements(),fn(t)),ep=(e,t,n,s=!0,a=!1)=>{let c=t8(t,e.getBody(),n.dom),d=jr(n,_t(G4,e),z_(e.getBody())),p=L1(n,c,e.schema,V_(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):d.bind(b=>$_(e.schema,b,a)).fold(()=>{s&&aw(e,t,p)},b=>{s&&aw(e,t,L.some(b))})},U_=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,n8=e=>U_.test(e),tp=(e,t)=>Pa(q.fromDom(t),_6(e))&&!Pm(e.schema,t)&&e.dom.isEditable(t),np=e=>Co.DOM.getStyle(e,"direction",!0)==="rtl"||n8(e.textContent??""),o8=(e,t,n)=>Lt(Co.DOM.getParents(n.container(),"*",t),e),dh=(e,t,n)=>{let s=o8(e,t,n);return L.from(s[s.length-1])},g2=(e,t,n)=>{let s=eh(t,e),a=eh(n,e);return Ve(s)&&s===a},Z_=e=>c1(e)||u1(e),$u=(e,t)=>{let n=t.container(),s=t.offset();return e?Um(n)?tt(n.nextSibling)?Fe(n.nextSibling,0):Fe.after(n):c1(t)?Fe(n,s+1):t:Um(n)?tt(n.previousSibling)?Fe(n.previousSibling,n.previousSibling.data.length):Fe.before(n):u1(t)?Fe(n,s-1):t},K4=_t($u,!0),f2=_t($u,!1),Y4=(e,t)=>{let n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},W_=e=>{e.execCommand("delete")},iw=e=>Y4(e,"Delete"),p2=e=>Y4(e,"ForwardDelete"),j_=e=>t=>sl(Mr(t),e,Qt),q_=e=>$p(e)||Vm(e),I1=(e,t)=>La(e,t)?ha(t,q_,j_(e)):L.none(),lw=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},cw=(e,t,n)=>sr(Yi(n),yd(n),(s,a)=>{let c=$u(!0,s),d=$u(!1,a),p=$u(!1,t);return e?cc(n,p).exists(b=>b.isEqual(d)&&t.isEqual(c)):Gc(n,p).exists(b=>b.isEqual(c)&&t.isEqual(d))}).getOr(!0),X4=e=>(xg(e)?ul(e):dl(e)).bind(X4).orThunk(()=>L.some(e)),Sb=(e,t,n,s=!0)=>{t.deleteContents();let a=X4(n).getOr(n),c=q.fromDom(e.dom.getParent(a.dom,e.dom.isBlock)??n.dom);if(c.dom===e.getBody()?lw(e,s):ki(e.schema,c,{checkRootAsContent:!1})&&(Gd(c),s&&e.selection.setCursorLocation(c.dom,0)),!Qt(n,c)){let d=sl(Mr(c),n)?[]:si(c);Pe(d.concat(rr(n)),p=>{!Qt(p,c)&&!La(p,c)&&ki(e.schema,p)&&Ko(p)})}},Qm=e=>t=>Qt(e,t),J4=e=>gs(e,"td,th"),uw=(e,t)=>Bn(q.fromDom(e),t),ir=e=>sr(e.startTable,e.endTable,(t,n)=>{let s=Pg(t,c=>Qt(c,n)),a=Pg(n,c=>Qt(c,t));return!s&&!a?e:{...e,startTable:s?L.none():e.startTable,endTable:a?L.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),Q4=e=>ir(e),dw=(e,t)=>{let n=uw(e.startContainer,t),s=uw(e.endContainer,t),a=n.isSome(),c=s.isSome(),d=sr(n,s,Qt).getOr(!1);return Q4({startTable:n,endTable:s,isStartInTable:a,isEndInTable:c,isSameTable:d,isMultiTable:!d&&a&&c})},eg=(e,t)=>({start:e,end:t}),G_=(e,t,n)=>({rng:e,table:t,cells:n}),F1=Xn.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),mw=(e,t)=>Po(q.fromDom(e),"td,th",t),H1=e=>!Qt(e.start,e.end),ek=(e,t)=>Bn(e.start,t).bind(n=>Bn(e.end,t).bind(s=>bt(Qt(n,s),n))),s8=(e,t)=>!H1(e)&&ek(e,t).exists(n=>{let s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),z1=(e,t)=>{let n=mw(e.startContainer,t),s=mw(e.endContainer,t);return sr(n,s,eg)},r8=e=>t=>Bn(t,e).bind(n=>Ds(J4(n)).map(s=>eg(t,s))),$1=e=>t=>Bn(t,e).bind(n=>Sn(J4(n)).map(s=>eg(s,t))),tk=e=>t=>ek(t,e).map(n=>G_(t,n,J4(n))),op=(e,t,n,s)=>{if(n.collapsed||!e.forall(H1))return L.none();if(t.isSameTable){let a=e.bind(tk(s));return L.some({start:a,end:a})}else{let a=mw(n.startContainer,s),c=mw(n.endContainer,s),d=a.bind(r8(s)).bind(tk(s)),p=c.bind($1(s)).bind(tk(s));return L.some({start:d,end:p})}},K_=(e,t)=>Ao(e,n=>Qt(n,t)),eu=e=>sr(K_(e.cells,e.rng.start),K_(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),V1=(e,t,n)=>e.exists(s=>s8(s,n)&&QS(s.start,t)),Y_=(e,t)=>{let{startTable:n,endTable:s}=t,a=e.cloneRange();return n.each(c=>a.setStartAfter(c.dom)),s.each(c=>a.setEndBefore(c.dom)),a},h2=(e,t,n,s)=>op(e,t,n,s).bind(({start:a,end:c})=>a.or(c)).bind(a=>{let{isSameTable:c}=t,d=eu(a).getOr([]);if(c&&a.cells.length===d.length)return L.some(F1.fullTable(a.table));if(d.length>0){if(c)return L.some(F1.partialTable(d,L.none()));{let p=Y_(n,t);return L.some(F1.partialTable(d,L.some({...t,rng:p})))}}else return L.none()}),nk=(e,t,n,s)=>op(e,t,n,s).bind(({start:a,end:c})=>{let d=a.bind(eu).getOr([]),p=c.bind(eu).getOr([]);if(d.length>0&&p.length>0){let b=Y_(n,t);return L.some(F1.multiTable(d,p,b))}else return L.none()}),a8=(e,t)=>{let n=Qm(e),s=z1(t,n),a=dw(t,n);return V1(s,t,n)?s.map(c=>F1.singleCellTable(t,c.start)):a.isMultiTable?nk(s,a,t,n):h2(s,a,t,n)},U1=e=>Pe(e,t=>{Ws(t,"contenteditable"),Gd(t)}),i8=(e,t)=>L.from(e.dom.getParent(t,e.dom.isBlock)).map(q.fromDom),om=(e,t,n)=>{n.each(s=>{t?Ko(s):(Gd(s),e.selection.setCursorLocation(s.dom,0))})},kb=(e,t,n,s)=>{let a=n.cloneRange();s?(a.setStart(n.startContainer,n.startOffset),a.setEndAfter(t.dom.lastChild)):(a.setStartBefore(t.dom.firstChild),a.setEnd(n.endContainer,n.endOffset)),sp(e,a,t,!1).each(c=>c())},gw=e=>{let t=lb(e),n=q.fromDom(e.selection.getNode());Of(n.dom)&&ki(e.schema,n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&ro(t,s=>Qt(s,n))&&Pr(n,"data-mce-selected","1")},fw=(e,t,n)=>L.some(()=>{let s=e.selection.getRng(),a=n.bind(({rng:c,isStartInTable:d})=>{let p=i8(e,d?c.endContainer:c.startContainer);c.deleteContents(),om(e,d,p.filter(_t(ki,e.schema)));let b=d?t[0]:t[t.length-1];return kb(e,b,s,d),ki(e.schema,b)?L.none():L.some(d?t.slice(1):t.slice(0,-1))}).getOr(t);U1(a),gw(e)}),ok=(e,t,n,s)=>L.some(()=>{let a=e.selection.getRng(),c=t[0],d=n[n.length-1];kb(e,c,a,!0),kb(e,d,a,!1);let p=ki(e.schema,c)?t:t.slice(1),b=ki(e.schema,d)?n:n.slice(0,-1);U1(p.concat(b)),s.deleteContents(),gw(e)}),sp=(e,t,n,s=!0)=>L.some(()=>{Sb(e,t,n,s)}),sk=(e,t)=>L.some(()=>ep(e,!1,t)),l8=(e,t,n)=>a8(t,n).bind(s=>s.fold(_t(sp,e),_t(sk,e),_t(fw,e),_t(ok,e))),c8=(e,t)=>pw(e,t),u8=(e,t,n,s)=>kd(t,s).fold(()=>l8(e,t,n),a=>c8(e,a)),d8=(e,t,n)=>{let s=q.fromDom(e.getBody()),a=e.selection.getRng();return n.length!==0?fw(e,n,L.none()):u8(e,s,a,t)},Z1=(e,t)=>xn(em(t,e),Vp),kd=(e,t)=>xn(em(t,e),pu("caption")),m8=(e,t,n,s,a)=>Iu(n,e.getBody(),a).bind(c=>Z1(t,q.fromDom(c.getNode())).bind(d=>Qt(d,s)?L.none():L.some(wt))),pw=(e,t)=>L.some(()=>{Gd(t),e.selection.setCursorLocation(t.dom,0)}),g8=(e,t,n,s)=>Yi(e.dom).bind(a=>yd(e.dom).map(c=>t?n.isEqual(a)&&s.isEqual(c):n.isEqual(c)&&s.isEqual(a))).getOr(!0),f8=(e,t)=>pw(e,t),p8=(e,t,n)=>kd(e,q.fromDom(n.getNode())).fold(()=>L.some(wt),s=>bt(!Qt(s,t),wt)),h8=(e,t,n,s,a)=>Iu(n,e.getBody(),a).fold(()=>L.some(wt),c=>g8(s,n,a,c)?f8(e,s):p8(t,s,c)),b8=(e,t,n,s)=>{let a=Fe.fromRangeStart(e.selection.getRng());return Z1(n,s).bind(c=>ki(e.schema,c,{checkRootAsContent:!1})?pw(e,c):m8(e,n,t,c,a))},v8=(e,t,n,s)=>{let a=Fe.fromRangeStart(e.selection.getRng());return ki(e.schema,s)?pw(e,s):h8(e,n,t,s,a)},X_=(e,t)=>e?KC(t):i2(t),y8=(e,t)=>{let n=Fe.fromRangeStart(e.selection.getRng());return X_(t,n)||Lu(t,e.getBody(),n).exists(s=>X_(t,s))},C8=(e,t,n)=>{let s=q.fromDom(e.getBody());return kd(s,n).fold(()=>b8(e,t,s,n).orThunk(()=>bt(y8(e,t),wt)),a=>v8(e,t,s,a))},rk=(e,t)=>{let n=q.fromDom(e.selection.getStart(!0)),s=lb(e);return e.selection.isCollapsed()&&s.length===0?C8(e,t,n):d8(e,n,s)},W1=(e,t)=>{let n=t;for(;n&&n!==e;){if(Ui(n)||Vo(n))return n;n=n.parentNode}return null},w8=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],x8=et.each,rf=e=>{let t=e.dom,n=new Set(e.serializer.getTempAttrs()),s=(c,d)=>{if(c.nodeName!==d.nodeName||c.nodeType!==d.nodeType)return!1;let p=S=>{let D={};return x8(t.getAttribs(S),M=>{let P=M.nodeName.toLowerCase();P!=="style"&&!a(P)&&(D[P]=t.getAttrib(S,P))}),D},b=(S,D)=>{for(let M in S)if(Yt(S,M)){let P=D[M];if(ns(P)||S[M]!==P)return!1;delete D[M]}for(let M in D)if(Yt(D,M))return!1;return!0};return It(c)&&It(d)&&(!b(p(c),p(d))||!b(t.parseStyle(t.getAttrib(c,"style")),t.parseStyle(t.getAttrib(d,"style"))))?!1:!Cl(c)&&!Cl(d)},a=c=>ro(w8,d=>wn(c,d))||n.has(c);return{compare:s,isAttributeInternal:a}},J_=(e,t)=>{if(tt(e))return{container:e,offset:t};let n=Xc.getNode(e,t);return tt(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&tt(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&tt(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},S8=e=>{let t=e.cloneRange(),n=J_(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);let s=J_(e.endContainer,e.endOffset);return t.setEnd(s.container,s.offset),t},j1=Co.DOM,Q_=()=>j1.create("span",{"data-mce-type":"bookmark"}),hw=(e,t,n)=>{if(It(e)){let s=n();return e.hasChildNodes()?t===e.childNodes.length?e.appendChild(s):e.insertBefore(s,e.childNodes[t]):e.appendChild(s),{container:s,offset:0}}else return{container:e,offset:t}},eO=(e,t)=>{let n=s=>{let a=s.parentNode?.firstChild,c=0;for(;a;){if(a===s)return c;(!It(a)||a.getAttribute("data-mce-type")!=="bookmark")&&c++,a=a.nextSibling}return-1};if(It(e)&&Ve(e.parentNode)){let s=e;t=n(e),e=e.parentNode,j1.remove(s),!e.hasChildNodes()&&j1.isBlock(e)&&e.appendChild(j1.create("br"))}return{container:e,offset:t}},tO=(e,t,n,s)=>{let a=j1.createRng();return a.setStart(e,t),a.setEnd(n,s),S8(a)},rp=(e,t=Q_)=>{let{container:n,offset:s}=hw(e.startContainer,e.startOffset,t);if(e.collapsed)return{startContainer:n,startOffset:s};{let{container:a,offset:c}=hw(e.endContainer,e.endOffset,t);return{startContainer:n,startOffset:s,endContainer:a,endOffset:c}}},ap=e=>{let{container:t,offset:n}=eO(e.startContainer,e.startOffset);if(!ns(e.endContainer)&&!ns(e.endOffset)){let{container:s,offset:a}=eO(e.endContainer,e.endOffset);return tO(t,n,s,a)}else return tO(t,n,t,n)},nO=(e,t,n,s)=>{if(et.each(n.styles,(a,c)=>{e.setStyle(t,c,rh(a,s))}),n.styles){let a=e.getAttrib(t,"style");a&&e.setAttrib(t,"data-mce-style",a)}},Eb=(e,t,n,s,a)=>{let c=e.dom;zt(n.onformat)&&n.onformat(t,n,s,a),nO(c,t,n,s),et.each(n.attributes,(d,p)=>{c.setAttrib(t,p,rh(d,s))}),et.each(n.classes,d=>{let p=rh(d,s);c.hasClass(t,p)||c.addClass(t,p)})},k8=e=>!ht(e.attributes)&&!ht(e.styles),ak=s4,oO=(e,t,n)=>{let s=e.formatter.get(n);if(s)for(let a=0;a<s.length;a++){let c=s[a];if(Ji(c)&&c.inherit===!1&&e.dom.is(t,c.selector))return!0}return!1},ik=(e,t,n,s,a)=>{let c=e.dom.getRoot();if(t===c)return!1;let d=e.dom.getParent(t,p=>oO(e,p,n)?!0:p.parentNode===c||!!Ed(e,p,n,s,!0));return!!Ed(e,d,n,s,a)},bw=(e,t,n)=>ca(n)&&ak(t,n.inline)||Cd(n)&&ak(t,n.block)?!0:Ji(n)?It(t)&&e.is(t,n.selector):!1,sO=(e,t,n,s,a,c)=>{let d=n[s],p=s==="attributes";if(zt(n.onmatch))return n.onmatch(t,n,s);if(d){if(Nd(d)){for(let b=0;b<d.length;b++)if(p?e.getAttrib(t,d[b]):bC(e,t,d[b]))return!0}else for(let b in d)if(Yt(d,b)){let S=p?e.getAttrib(t,b):bC(e,t,b),D=rh(d[b],c),M=os(S)||xa(S);if(M&&os(D))continue;if(a&&M&&!n.exact||(!a||n.exact)&&!ak(S,ub(D,b)))return!1}}return!0},Ed=(e,t,n,s,a)=>{let c=e.formatter.get(n),d=e.dom;if(c&&It(t))for(let p=0;p<c.length;p++){let b=c[p];if(bw(e.dom,t,b)&&sO(d,t,b,"attributes",a,s)&&sO(d,t,b,"styles",a,s)){let S=b.classes;if(S){for(let D=0;D<S.length;D++)if(!e.dom.hasClass(t,rh(S[D],s)))return}return b}}},lk=(e,t,n,s,a)=>{if(s)return ik(e,s,t,n,a);if(s=e.selection.getNode(),ik(e,s,t,n,a))return!0;let c=e.selection.getStart();return!!(c!==s&&ik(e,c,t,n,a))},E8=(e,t,n)=>{let s=[],a={},c=e.selection.getStart();return e.dom.getParent(c,d=>{for(let p=0;p<t.length;p++){let b=t[p];!a[b]&&Ed(e,d,b,n)&&(a[b]=!0,s.push(b))}},e.dom.getRoot()),s},T8=(e,t)=>{let n=a=>Qt(a,q.fromDom(e.getBody())),s=(a,c)=>Ed(e,a.dom,c)?L.some(c):L.none();return L.from(e.selection.getStart(!0)).bind(a=>Pc(q.fromDom(a),c=>Rt(t,d=>s(c,d)),n)).getOrNull()},A8=(e,t)=>{let n=e.formatter.get(t),s=e.dom;if(n&&e.selection.isEditable()){let a=e.selection.getStart(),c=ah(s,a);for(let d=n.length-1;d>=0;d--){let p=n[d];if(!Ji(p))return!0;for(let b=c.length-1;b>=0;b--)if(s.is(c[b],p.selector))return!0}}return!1},_8=(e,t,n)=>Mt(n,(s,a)=>{let c=T1(e,a);return e.formatter.matchNode(t,a,{},c)?s.concat([a]):s},[]),b2=Qr,O8=(e,t)=>e.importNode(t,!0),ck=e=>{if(e){let t=new er(e,e);for(let n=t.current();n;n=t.next())if(tt(n))return n}return null},uk=e=>{let t=q.fromTag("span");return Ea(t,{id:WS,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Oo(t,q.fromText(b2)),t},D8=e=>{let t=ck(e);return t&&t.data.charAt(0)===b2&&t.deleteData(0,1),t},dk=(e,t,n)=>{let s=e.dom,a=e.selection;if(wC(t))ep(e,!1,q.fromDom(t),n,!0);else{let c=a.getRng(),d=s.getParent(t,s.isBlock),p=c.startContainer,b=c.startOffset,S=c.endContainer,D=c.endOffset,M=D8(t);s.remove(t,!0),p===M&&b>0&&c.setStart(M,b-1),S===M&&D>0&&c.setEnd(M,D-1),d&&s.isEmpty(d)&&Gd(q.fromDom(d)),a.setRng(c)}},mk=(e,t,n)=>{let s=e.dom,a=e.selection;if(t)dk(e,t,n);else if(t=nh(e.getBody(),a.getStart()),!t)for(;t=s.get(WS);)dk(e,t,n)},R8=(e,t,n)=>{let s=e.dom,a=s.getParent(n,_t(n4,e.schema));a&&s.isEmpty(a)?n.parentNode?.replaceChild(t,n):(i1(q.fromDom(n)),s.isEmpty(n)?n.parentNode?.replaceChild(t,n):s.insertAfter(t,n))},rO=(e,t)=>(e.appendChild(t),t),aO=(e,t)=>{let n=dt(e,(a,c)=>rO(a,c.cloneNode(!1)),t),s=n.ownerDocument??document;return rO(n,s.createTextNode(b2))},N8=(e,t,n,s,a,c)=>{let d=e.formatter,p=e.dom,b=Lt(zr(d.get()),M=>M!==s&&!mr(M,"removeformat")),S=_8(e,n,b);if(Lt(S,M=>!A1(e,M,s)).length>0){let M=n.cloneNode(!1);return p.add(t,M),d.remove(s,a,M,c),p.remove(M),L.some(M)}else return L.none()},gk=e=>Ke(e,kr(e).replace(new RegExp(`${ws}$`)," ")),iO=(e,t)=>{let n=()=>{t!==null&&!e.dom.isEmpty(t)&&ul(q.fromDom(t)).each(s=>{Sa(s)?gk(s):no(s,a=>Sa(a)).each(a=>{Sa(a)&&gk(a)})})};e.once("input",s=>{s.data&&!k1(s.data)&&(s.isComposing?e.once("compositionend",()=>{n()}):n())})},M8=(e,t,n)=>{let s,a=e.selection,c=e.formatter.get(t);if(!c)return;let d=a.getRng(),p=d.startOffset,S=d.startContainer.nodeValue;s=nh(e.getBody(),a.getStart());let D=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(S&&p>0&&p<S.length&&D.test(S.charAt(p))&&D.test(S.charAt(p-1))){let M=a.getBookmark();d.collapse(!0);let P=ih(e.dom,d,c);P=IC(P),e.formatter.apply(t,n,P),a.moveToBookmark(M)}else{let M=s?ck(s):null;(!s||M?.data!==b2)&&(s=O8(e.getDoc(),uk(!0).dom),M=s.firstChild,d.insertNode(s),p=1,iO(e,s)),e.formatter.apply(t,n,s),a.setCursorLocation(M,p)}},B8=(e,t,n,s)=>{let a=e.dom,c=e.selection,d=!1,p=e.formatter.get(t);if(!p)return;let b=c.getRng(),S=b.startContainer,D=b.startOffset,M=S;tt(S)&&(D!==S.data.length&&(d=!0),M=M.parentNode);let P=[],Z;for(;M;){if(Ed(e,M,t,n,s)){Z=M;break}M.nextSibling&&(d=!0),P.push(M),M=M.parentNode}if(Z)if(d){let oe=c.getBookmark();b.collapse(!0);let Y=ih(a,b,p,{includeTrailingSpace:!0});Y=IC(Y),e.formatter.remove(t,n,Y,s),c.moveToBookmark(oe)}else{let oe=nh(e.getBody(),Z),Y=Ve(oe)?a.getParents(Z.parentNode,so,oe):[],ne=uk(!1).dom;R8(e,ne,oe??Z);let he=N8(e,ne,Z,t,n,s),be=aO([...P,...he.toArray(),...Y],ne);oe&&dk(e,oe,Ve(oe)),c.setCursorLocation(be,1),iO(e,ne),a.isEmpty(Z)&&a.remove(Z)}},P8=(e,t,n)=>{let s=e.selection,a=e.getBody();mk(e,null,n),(t===8||t===46)&&s.isCollapsed()&&s.getStart().innerHTML===b2&&mk(e,nh(a,s.getStart()),!0),(t===37||t===39)&&mk(e,nh(a,s.getStart()),!0)},L8=e=>tt(e)&&vc(e.data,ws),I8=e=>{e.on("mouseup keydown",t=>{P8(e,t.keyCode,L8(e.selection.getRng().endContainer))})},lO=e=>{let t=uk(!1),n=aO(e,t.dom);return{caretContainer:t,caretPosition:Fe(n,0)}},cO=(e,t)=>{let{caretContainer:n,caretPosition:s}=lO(t);return Zr(q.fromDom(e),n),Ko(q.fromDom(e)),s},F8=(e,t)=>{let{caretContainer:n,caretPosition:s}=lO(t);return e.insertNode(n.dom),s},fk=(e,t)=>{if(Xi(t.dom))return!1;let n=e.schema.getTextInlineElements();return Yt(n,fn(t))&&!Xi(t.dom)&&!Fg(t.dom)},pk=["fontWeight","fontStyle","color","fontSize","fontFamily"],uO=e=>At(e.styles)&&ro(zr(e.styles),t=>In(pk,t)),dO=e=>xn(e,t=>ca(t)&&t.inline==="span"&&uO(t)),mO=(e,t)=>{let n=e.get(t);return ht(n)?dO(n):L.none()},vw=(e,t)=>Gc(t,Fe.fromRangeStart(e)).isNone(),gO=(e,t)=>cc(t,Fe.fromRangeEnd(e)).exists(n=>!zs(n.getNode())||cc(t,n).isSome())===!1,fO=e=>t=>x0(t)&&e.isEditable(t),pO=(e,t)=>Kt(e.getSelectedBlocks(),(n,s)=>s===0&&t(n)?e.dom.getParent(n,x0)??n:n),H8=e=>{if(e.isCollapsed())return[];let t=e.getRng(),n=pO(e,s=>vw(t,s)&&!x0(s));if(n.length===1)return vw(t,n[0])&&gO(t,n[0])?n:[];{let s=Sn(n).filter(d=>vw(t,d)).toArray(),a=Ds(n).filter(d=>gO(t,d)).toArray(),c=n.slice(1,-1);return s.concat(c).concat(a)}},z8=e=>Lt(H8(e),fO(e.dom)),hO=e=>Lt(pO(e,t=>!x0(t)),fO(e.dom)),v2=et.each,y2=e=>It(e)&&!Cl(e)&&!Xi(e)&&!Fg(e),bO=(e,t)=>{for(let n=e;n;n=n[t]){if(tt(n)&&Na(n.data))return e;if(It(n)&&!Cl(n))return n}return e},hk=(e,t,n)=>{let s=rf(e),a=Rn(t)&&e.dom.isEditable(t),c=Rn(n)&&e.dom.isEditable(n);if(a&&c){let d=bO(t,"previousSibling"),p=bO(n,"nextSibling");if(s.compare(d,p)){for(let b=d.nextSibling;b&&b!==p;){let S=b;b=b.nextSibling,d.appendChild(S)}return e.dom.remove(p),et.each(et.grep(p.childNodes),b=>{d.appendChild(b)}),d}}return n},vO=(e,t,n,s)=>{if(s&&t.merge_siblings!==!1){let a=hk(e,EA(s),s)??s;hk(e,a,EA(a,!0))}},$8=(e,t,n)=>{if(t.clear_child_styles){let s=t.links?"*:not(a)":"*";v2(e.select(s,n),a=>{y2(a)&&e.isEditable(a)&&v2(t.styles,(c,d)=>{e.setStyle(a,d,"")})})}},bk=(e,t,n)=>{v2(e.childNodes,s=>{y2(s)&&(t(s)&&n(s),s.hasChildNodes()&&bk(s,t,n))})},V8=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},yO=(e,t)=>n=>!!(n&&bC(e,n,t)),CO=(e,t,n)=>s=>{e.setStyle(s,t,n),s.getAttribute("style")===""&&s.removeAttribute("style"),V8(e,s)},q1=Xn.generate([{keep:[]},{rename:["name"]},{removed:[]}]),U8=/^(src|href|style)$/,C2=et.each,yw=s4,Z8=e=>/^(TR|TH|TD)$/.test(e.nodeName),wO=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),vk=(e,t,n)=>{let s=t[n?"startContainer":"endContainer"],a=t[n?"startOffset":"endOffset"];if(It(s)){let c=s.childNodes.length-1;!n&&a&&a--,s=s.childNodes[a>c?c:a]}return tt(s)&&n&&a>=s.data.length&&(s=new er(s,e.getBody()).next()||s),tt(s)&&!n&&a===0&&(s=new er(s,e.getBody()).prev()||s),s},mh=(e,t)=>{let n=t?"firstChild":"lastChild",s=e[n];return Z8(e)&&s?e.nodeName==="TR"&&s[n]||s:e},Cw=(e,t,n,s)=>{let a=e.create(n,s);return t.parentNode?.insertBefore(a,t),a.appendChild(t),a},xO=(e,t,n,s,a)=>{let c=q.fromDom(t),d=q.fromDom(e.create(s,a)),p=n?bs(c):Sg(c);return ml(d,p),n?(Zr(c,d),od(d,c)):(Pl(c,d),Oo(d,c)),d.dom},Tb=(e,t)=>t.links&&e.nodeName==="A",SO=(e,t,n)=>{let s=t.parentNode,a,c=e.dom,d=fi(e);Cd(n)&&s===c.getRoot()&&(!n.list_block||!yw(t,n.list_block))&&Pe(ks(t.childNodes),p=>{cb(e,d,p.nodeName.toLowerCase())?a?a.appendChild(p):(a=Cw(c,p,d),c.setAttribs(a,Yp(e))):a=null}),!(yC(n)&&!yw(n.inline,t))&&c.remove(t,!0)},ww=(e,t,n)=>vn(e)?{name:t,value:null}:{name:e,value:rh(t,n)},xw=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},kO=(e,t,n,s,a)=>{let c=!1;C2(n.styles,(d,p)=>{let{name:b,value:S}=ww(p,d,s),D=ub(S,b);(n.remove_similar||me(S)||!It(a)||yw(bC(e,a,b),D))&&e.setStyle(t,b,""),c=!0}),c&&xw(e,t)},EO=(e,t,n)=>{t==="removeformat"?Pe(hO(e.selection),s=>{Pe(pk,a=>e.dom.setStyle(s,a,"")),xw(e.dom,s)}):mO(e.formatter,t).each(s=>{Pe(hO(e.selection),a=>kO(e.dom,a,s,n,null))})},Ab=(e,t,n,s,a)=>{let c=e.dom,d=rf(e),p=e.schema;if(ca(t)&&zh(p,t.inline)&&Pm(p,s)&&s.parentElement===e.getBody())return SO(e,s,t),q1.removed();if(!t.ceFalseOverride&&s&&c.getContentEditableParent(s)==="false"||s&&!bw(c,s,t)&&!Tb(s,t))return q1.keep();let b=s,S=t.preserve_attributes;if(ca(t)&&t.remove==="all"&&ht(S)){let D=Lt(c.getAttribs(b),M=>In(S,M.name.toLowerCase()));if(c.removeAllAttribs(b),Pe(D,M=>c.setAttrib(b,M.name,M.value)),D.length>0)return q1.rename("span")}if(t.remove!=="all"){kO(c,b,t,n,a),C2(t.attributes,(M,P)=>{let{name:Z,value:oe}=ww(P,M,n);if(t.remove_similar||me(oe)||!It(a)||yw(c.getAttrib(a,Z),oe)){if(Z==="class"){let Y=c.getAttrib(b,Z);if(Y){let ne="";if(Pe(Y.split(/\s+/),he=>{/mce\-\w+/.test(he)&&(ne+=(ne?" ":"")+he)}),ne){c.setAttrib(b,Z,ne);return}}}if(U8.test(Z)&&b.removeAttribute("data-mce-"+Z),Z==="style"&&rc(["li"])(b)&&c.getStyle(b,"list-style-type")==="none"){b.removeAttribute(Z),c.setStyle(b,"list-style-type","none");return}Z==="class"&&b.removeAttribute("className"),b.removeAttribute(Z)}}),C2(t.classes,M=>{M=rh(M,n),(!It(a)||c.hasClass(a,M))&&c.removeClass(b,M)});let D=c.getAttribs(b);for(let M=0;M<D.length;M++){let P=D[M].nodeName;if(!d.isAttributeInternal(P))return q1.keep()}}return t.remove!=="none"?(SO(e,b,t),q1.removed()):q1.keep()},W8=(e,t,n,s,a)=>{let c;return t.parentNode&&Pe(ah(e.dom,t.parentNode).reverse(),d=>{if(!c&&It(d)&&d.id!=="_start"&&d.id!=="_end"){let p=Ed(e,d,n,s,a);p&&p.split!==!1&&(c=d)}}),c},j8=(e,t,n,s)=>Ab(e,t,n,s,s).fold(lt(s),a=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,a)),lt(null)),q8=(e,t,n,s,a,c,d,p)=>{let b,S,D=e.dom;if(n){let M=n.parentNode;for(let P=s.parentNode;P&&P!==M;P=P.parentNode){let Z=D.clone(P,!1);for(let oe=0;oe<t.length&&(Z=j8(e,t[oe],p,Z),Z!==null);oe++);Z&&(b&&Z.appendChild(b),S||(S=Z),b=Z)}c&&(!d.mixed||!D.isBlock(n))&&(s=D.split(n,s)??s),b&&S&&(a.parentNode?.insertBefore(b,a),S.appendChild(a),ca(d)&&vO(e,d,p,b))}return s},G8=(e,t,n,s,a)=>{let c=e.formatter.get(t),d=c[0],p=e.dom,b=e.selection,S=Y=>{let ne=W8(e,Y,t,n,a);return q8(e,c,ne,Y,Y,!0,d,n)},D=Y=>Cl(Y)&&It(Y)&&(Y.id==="_start"||Y.id==="_end"),M=Y=>ro(c,ne=>w2(e,ne,n,Y,Y)),P=Y=>{let ne=ks(Y.childNodes),be=M(Y)||ro(c,qe=>bw(p,Y,qe)),Ce=Y.parentNode;if(!be&&Ve(Ce)&&CC(d)&&M(Ce),d.deep&&ne.length)for(let qe=0;qe<ne.length;qe++)P(ne[qe]);Pe(["underline","line-through","overline"],qe=>{It(Y)&&e.dom.getStyle(Y,"text-decoration")===qe&&Y.parentNode&&AA(p,Y.parentNode)===qe&&w2(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:qe}},void 0,Y)})},Z=Y=>{let ne=p.get(Y?"_start":"_end");if(ne){let he=ne[Y?"firstChild":"lastChild"];return D(he)&&(he=he[Y?"firstChild":"lastChild"]),tt(he)&&he.data.length===0&&(he=Y?ne.previousSibling||ne.nextSibling:ne.nextSibling||ne.previousSibling),p.remove(ne,!0),he}else return null},oe=Y=>{let ne,he,be=ih(p,Y,c,{includeTrailingSpace:Y.collapsed});if(d.split){if(be=IC(be),ne=vk(e,be,!0),he=vk(e,be),ne!==he){if(ne=mh(ne,!0),he=mh(he,!1),wO(p,ne,he)){let He=L.from(ne.firstChild).getOr(ne);S(xO(p,He,!0,"span",{id:"_start","data-mce-type":"bookmark"})),Z(!0);return}if(wO(p,he,ne)){let He=L.from(he.lastChild).getOr(he);S(xO(p,He,!1,"span",{id:"_end","data-mce-type":"bookmark"})),Z(!1);return}ne=Cw(p,ne,"span",{id:"_start","data-mce-type":"bookmark"}),he=Cw(p,he,"span",{id:"_end","data-mce-type":"bookmark"});let Ce=p.createRng();Ce.setStartAfter(ne),Ce.setEndBefore(he),mb(p,Ce,He=>{Pe(He,qe=>{!Cl(qe)&&!Cl(qe.parentNode)&&S(qe)})}),S(ne),S(he),ne=Z(!0),he=Z()}else ne=he=S(ne);be.startContainer=ne.parentNode?ne.parentNode:ne,be.startOffset=p.nodeIndex(ne),be.endContainer=he.parentNode?he.parentNode:he,be.endOffset=p.nodeIndex(he)+1}mb(p,be,Ce=>{Pe(Ce,P)})};if(s){if(E1(s)){let Y=p.createRng();Y.setStartBefore(s),Y.setEndAfter(s),oe(Y)}else oe(s);uT(e,t,s,n);return}!b.isCollapsed()||!ca(d)||lb(e).length?(kA(e,()=>pC(e,oe),Y=>ca(d)&&lk(e,t,n,Y)),e.nodeChanged()):B8(e,t,n,a),EO(e,t,n),uT(e,t,s,n)},Sw=(e,t,n,s,a)=>{(s||e.selection.isEditable())&&G8(e,t,n,s,a)},K8=(e,t,n,s)=>Ab(e,t,n,s).fold(()=>L.some(s),a=>L.some(e.dom.rename(s,a)),L.none),w2=(e,t,n,s,a)=>Ab(e,t,n,s,a).fold(pn,c=>(e.dom.rename(s,c),!0),so),TO=["fontsize","subscript","superscript"],Y8=["strikethrough",...TO],X8=(e,t,n)=>Ve(e.matchNode(t.dom,n,{},n==="fontsize")),yk=(e,t)=>ro(TO,n=>X8(e,t,n)),J8=e=>In(Y8,e),Q8=(e,t,n,s,a)=>{let c=bu(t,e).filter(Xs);return _s(c,n).map(d=>{let p=c[d],b=s(p),S=[...a(ii(p)).toArray(),...cr(c.slice(0,d),D=>n(D)?a(D).toArray():[ii(D)])];return{container:p,innerWrapper:b,outerWrappers:S}})},eB=(e,t,n,s)=>{Pe(rr(e),a=>{Xs(a)&&n(a)&&s(a).isNone()&&yi(a)}),Pe(rr(e),a=>Oo(t,a)),od(e,t)},tB=(e,t)=>{if(t.length>0){let n=t[t.length-1];Zr(e,n);let s=Mt(t.slice(0,t.length-1),(a,c)=>(Oo(a,c),c),n);Oo(s,e)}},nB=(e,t,n,s,a)=>{let c=d=>Qt(q.fromDom(e.getRoot()),d)||e.isBlock(d.dom);Pe(t,d=>{Q8(c,d,n,s,a).each(({container:p,innerWrapper:b,outerWrappers:S})=>{e.split(p.dom,d.dom),eB(d,b,n,a),tB(d,S)})})},Ck=(e,t,n)=>{let s=p=>Ve(Ed(e,p.dom,t)),a=p=>{let b=q.fromTag(fn(p)),S=Ed(e,p.dom,t,{});return Ve(S)&&k8(S)&&Eb(e,b.dom,S),b},c=p=>{let b=Ed(e,p.dom,t,{});return Ve(b)?K8(e,b,{},p.dom).map(q.fromDom):L.some(p)},d=rp(e.selection.getRng());nB(e.dom,n,s,a,c),e.selection.setRng(ap(d))},oB=(e,t)=>cr(t,n=>{let s=Bc(n,a=>yk(e,a));return yk(e,n)?[n,...s]:s}),sB=(e,t,n)=>{if(J8(t)){let s=oB(e.formatter,n);Ck(e,"strikethrough",s)}},rB=(e,t)=>{let n=Lt(t,s=>yk(e.formatter,s));Ck(e,"strikethrough",n)},kw=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),aB=e=>e.name==="summary",iB=(e,t)=>{let n=e;for(;n=n.walk();)t(n)},AO=(e,t,n,s)=>{let a=n.name;for(let c=0,d=e.length;c<d;c++){let p=e[c];if(p.name===a){let b=s.nodes[a];b?b.nodes.push(n):s.nodes[a]={filter:p,nodes:[n]}}}if(n.attributes)for(let c=0,d=t.length;c<d;c++){let p=t[c],b=p.name;if(b in n.attributes.map){let S=s.attributes[b];S?S.nodes.push(n):s.attributes[b]={filter:p,nodes:[n]}}}},lB=(e,t,n)=>{let s={nodes:{},attributes:{}};return n.firstChild&&iB(n,a=>{AO(e,t,a,s)}),s},_O=(e,t)=>{let n=(s,a)=>{An(s,c=>{let d=ks(c.nodes);Pe(c.filter.callbacks,p=>{for(let b=d.length-1;b>=0;b--){let S=d[b];(!(a?S.attr(c.filter.name)!==void 0:S.name===c.filter.name)||os(S.parent))&&d.splice(b,1)}d.length>0&&p(d,c.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},OO=(e,t,n,s={})=>{let a=lB(e,t,n);_O(a,s)},wk=(e,t,n,s)=>{if((e.pad_empty_with_br||t.insert)&&n(s)){let c=new Ai("br",1);t.insert&&c.attr("data-mce-bogus","1"),s.empty().append(c)}else s.empty().append(new Ai("#text",3)).value=ws},cB=e=>DO(e,"#text")&&e?.firstChild?.value===ws,DO=(e,t)=>{let n=e?.firstChild;return Ve(n)&&n===e.lastChild&&n.name===t},uB=(e,t)=>e.getElementRule(t.name)?.paddEmpty===!0,x2=(e,t,n,s)=>s.isEmpty(t,n,a=>uB(e,a)),dB=(e,t)=>Ve(e)&&(t(e)||e.name==="br"),RO=e=>{let t;for(let n=e;n;n=n.parent){let s=n.attr("contenteditable");if(s==="false")break;s==="true"&&(t=n)}return L.from(t)},NO=e=>{let t=[];for(let n=e.firstChild;Ve(n);n=n.walk())t.push(n);return t},xk=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{let s=e.children();for(let a of s)n&&!t.isValidChild(n.name,a.name)&&xk(a,t,n);e.unwrap()}},MO=(e,t,n,s=wt)=>{let a=t.getTextBlockElements(),c=t.getNonEmptyElements(),d=t.getWhitespaceElements(),p=et.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),b=new Set,S=D=>D!==n&&!p[D.name];for(let D=0;D<e.length;D++){let M=e[D],P,Z,oe;if(!M.parent||b.has(M))continue;if(a[M.name]&&M.parent.name==="li"){let ne=M.next;for(;ne&&a[ne.name];){ne.name="li",b.add(ne),M.parent.insert(ne,M.parent);ne=ne.next}M.unwrap();continue}let Y=[M];for(P=M.parent;P&&!t.isValidChild(P.name,M.name)&&S(P);P=P.parent)Y.push(P);if(P&&Y.length>1)if(S2(t,M,P))xk(M,t);else{Y.reverse(),Z=Y[0].clone(),s(Z);let ne=Z;for(let he=0;he<Y.length-1;he++){t.isValidChild(ne.name,Y[he].name)&&he>0?(oe=Y[he].clone(),s(oe),ne.append(oe)):oe=ne;for(let be=Y[he].firstChild;be&&be!==Y[he+1];){let Ce=be.next;oe.append(be),be=Ce}ne=oe}x2(t,c,d,Z)?P.insert(M,Y[0],!0):(P.insert(Z,Y[0],!0),P.insert(M,Z)),P=Y[0],(x2(t,c,d,P)||DO(P,"br"))&&P.empty().remove()}else if(M.parent){if(M.name==="li"){let ne=M.prev;if(ne&&(ne.name==="ul"||ne.name==="ol")){ne.append(M);continue}if(ne=M.next,ne&&(ne.name==="ul"||ne.name==="ol")&&ne.firstChild){ne.insert(M,ne.firstChild,!0);continue}let he=new Ai("ul",1);s(he),M.wrap(he);continue}if(t.isValidChild(M.parent.name,"div")&&t.isValidChild("div",M.name)){let ne=new Ai("div",1);s(ne),M.wrap(ne)}else xk(M,t)}}},mB=(e,t)=>{let n=e;for(;n;){if(n.name===t)return!0;n=n.parent}return!1},S2=(e,t,n=t.parent)=>n?e.children[t.name]&&!e.isValidChild(n.name,t.name)||t.name==="a"&&mB(n,"a")?!0:aB(n)&&kw(t)?!(n?.firstChild===t&&n?.lastChild===t):!1:!1,k2=(e,t,n,s)=>{let a=document.createRange();return a.setStart(e,t),a.setEnd(n,s),a},BO=e=>{let t=Fe.fromRangeStart(e),n=Fe.fromRangeEnd(e),s=e.commonAncestorContainer;return Lu(!1,s,n).map(a=>!Km(t,n,s)&&Km(t,a,s)?k2(t.container(),t.offset(),a.container(),a.offset()):e).getOr(e)},gh=e=>e.collapsed?e:BO(e),E2=et.explode,_b=()=>{let e={};return{addFilter:(a,c)=>{Pe(E2(a),d=>{Yt(e,d)||(e[d]={name:d,callbacks:[]}),e[d].callbacks.push(c)})},getFilters:()=>eo(e),removeFilter:(a,c)=>{Pe(E2(a),d=>{if(Yt(e,d))if(Ve(c)){let p=e[d],b=Lt(p.callbacks,S=>S!==c);b.length>0?p.callbacks=b:delete e[d]}else delete e[d]})}}},tg=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),G1=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),Sk=(e,t)=>{Pe(t,n=>{e.attr(n,null)})},PO=(e,t,n)=>{e.addNodeFilter("font",s=>{Pe(s,a=>{let c=t.parse(a.attr("style")),d=a.attr("color"),p=a.attr("face"),b=a.attr("size");d&&(c.color=d),p&&(c["font-family"]=p),b&&Cc(b).each(S=>{c["font-size"]=n[S-1]}),a.name="span",a.attr("style",t.serialize(c)),Sk(a,["color","face","size"])})})},T2=(e,t,n)=>{e.addNodeFilter("strike",s=>{let a=t.type!=="html4";Pe(s,c=>{if(a)c.name="s";else{let d=n.parse(c.attr("style"));d["text-decoration"]="line-through",c.name="span",c.attr("style",n.serialize(d))}})})},LO=(e,t,n)=>{let s=fd();t.convert_fonts_to_spans&&PO(e,s,et.explode(t.font_size_legacy_values??"")),T2(e,n,s)},gB=(e,t,n)=>{t.inline_styles&&LO(e,t,n)},A2=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),IO=e=>{let t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},ea=e=>{try{return decodeURIComponent(e)}catch{return e}},kk=e=>{let[t,...n]=e.split(","),s=n.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(a){let c=a[2]===";base64",d=ea(s),p=c?IO(d):d;return L.some({type:a[1],data:p,base64Encoded:c})}else return L.none()},FO=(e,t,n=!0)=>{let s=t;if(n)try{s=atob(t)}catch{return L.none()}let a=new Uint8Array(s.length);for(let c=0;c<a.length;c++)a[c]=s.charCodeAt(c);return L.some(new Blob([a],{type:e}))},Ob=e=>new Promise((t,n)=>{kk(e).bind(({type:s,data:a,base64Encoded:c})=>FO(s,a,c)).fold(()=>n("Invalid data URI"),t)}),K1=e=>wn(e,"blob:")?A2(e):wn(e,"data:")?Ob(e):Promise.reject("Unknown URI format"),fh=e=>new Promise((t,n)=>{let s=new FileReader;s.onloadend=()=>{t(s.result)},s.onerror=()=>{n(s.error?.message)},s.readAsDataURL(e)}),fB=0,Ek=e=>(e||"blobid")+fB++,Ew=(e,t,n)=>kk(e).bind(({data:s,type:a,base64Encoded:c})=>{if(t&&!c)return L.none();{let d=c?s:btoa(s);return n(d,a)}}),Tk=(e,t,n)=>{let s=e.create(Ek(),t,n);return e.add(s),s},Ak=(e,t,n=!1)=>Ew(t,n,(s,a)=>L.from(e.getByData(s,a)).orThunk(()=>FO(a,s).map(c=>Tk(e,c,s)))),pB=(e,t)=>{let n=()=>Promise.reject("Invalid data URI");if(wn(t,"blob:")){let s=e.getByUri(t);return Ve(s)?Promise.resolve(s):K1(t).then(a=>fh(a).then(c=>Ew(c,!1,d=>L.some(Tk(e,a,d))).getOrThunk(n)))}else return wn(t,"data:")?Ak(e,t).fold(n,s=>Promise.resolve(s)):Promise.reject("Unknown image data format")},hB=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,_k=e=>L.from(e.match(hB)).bind(t=>qt(t,1)).map(t=>wn(t,"www.")?t.substring(4):t),Tw=(e,t)=>{L.from(e.attr("src")).bind(_k).forall(n=>!In(t,n))&&e.attr("sandbox","")},Aw=(e,t)=>wn(e,`${t}/`),Db=e=>ns(e)?"iframe":Aw(e,"image")?"img":Aw(e,"video")?"video":Aw(e,"audio")?"audio":"iframe",HO=({type:e,src:t,width:n,height:s}={},a,c)=>{let d=Db(e),p=new Ai(d,1);return p.attr(d==="audio"?{src:t}:{src:t,width:n,height:s}),(d==="audio"||d==="video")&&p.attr("controls",""),d==="iframe"&&a&&Tw(p,c),p},zO=e=>Ve(e.attr("data-mce-bogus")),$O=e=>e.attr("src")===En.transparentSrc||Ve(e.attr("data-mce-placeholder")),VO=(e,t)=>{let{blob_cache:n}=t;if(n){let s=a=>{let c=a.attr("src");$O(a)||zO(a)||os(c)||Ak(n,c,!0).each(d=>{a.attr("src",d.blobUri())})};e.addAttributeFilter("src",a=>Pe(a,s))}},UO=(e,t)=>{let n=e.schema;e.addAttributeFilter("href",d=>{let p=d.length,b=D=>D.split(" ").filter(P=>P.length>0).concat(["noopener"]).sort().join(" "),S=D=>{let M=D?et.trim(D):"";return/\b(noopener)\b/g.test(M)?M:b(M)};if(!t.allow_unsafe_link_target)for(;p--;){let D=d[p];D.name==="a"&&D.attr("target")==="_blank"&&D.attr("rel",S(D.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",d=>{let p=d.length,b,S,D,M;for(;p--;)if(M=d[p],M.name==="a"&&M.firstChild&&!M.attr("href"))for(D=M.parent,b=M.lastChild;b&&D;)S=b.prev,D.insert(b,M),b=S}),t.fix_list_elements&&e.addNodeFilter("ul,ol",d=>{let p=d.length,b,S;for(;p--;)if(b=d[p],S=b.parent,S&&(S.name==="ul"||S.name==="ol"))if(b.prev&&b.prev.name==="li")b.prev.append(b);else{let D=new Ai("li",1);D.attr("style","list-style-type: none"),b.wrap(D)}});let s=n.getValidClasses();t.validate&&s&&e.addAttributeFilter("class",d=>{let p=d.length;for(;p--;){let b=d[p],S=b.attr("class")??"",D=et.explode(S," "),M="";for(let P=0;P<D.length;P++){let Z=D[P],oe=!1,Y=s["*"];Y&&Y[Z]&&(oe=!0),Y=s[b.name],!oe&&Y&&Y[Z]&&(oe=!0),oe&&(M&&(M+=" "),M+=Z)}M.length||(M=null),b.attr("class",M)}}),VO(e,t);let a=t.sandbox_iframes??!1,c=na(t.sandbox_iframes_exclusions??[]);t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",d=>Pe(d,p=>{p.replace(HO({type:p.attr("type"),src:p.name==="object"?p.attr("data"):p.attr("src"),width:p.attr("width"),height:p.attr("height")},a,c))})),a&&e.addNodeFilter("iframe",d=>Pe(d,p=>Tw(p,c)))};let{entries:Ok,setPrototypeOf:Dk,isFrozen:ZO,getPrototypeOf:WO,getOwnPropertyDescriptor:Rk}=Object,{freeze:el,seal:mc,create:_w}=Object,{apply:Ow,construct:Dw}=typeof Reflect<"u"&&Reflect;el||(el=function(t){return t}),mc||(mc=function(t){return t}),Ow||(Ow=function(t,n,s){return t.apply(n,s)}),Dw||(Dw=function(t,n){return new t(...n)});let Y1=tu(Array.prototype.forEach),bB=tu(Array.prototype.lastIndexOf),jO=tu(Array.prototype.pop),ng=tu(Array.prototype.push),Nk=tu(Array.prototype.splice),_2=tu(String.prototype.toLowerCase),X1=tu(String.prototype.toString),Mk=tu(String.prototype.match),J1=tu(String.prototype.replace),qO=tu(String.prototype.indexOf),GO=tu(String.prototype.trim),sm=tu(Object.prototype.hasOwnProperty),Zl=tu(RegExp.prototype.test),Rb=KO(TypeError);function tu(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return Ow(e,t,s)}}function KO(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return Dw(e,n)}}function Qo(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_2;Dk&&Dk(e,null);let s=t.length;for(;s--;){let a=t[s];if(typeof a=="string"){let c=n(a);c!==a&&(ZO(t)||(t[s]=c),a=c)}e[a]=!0}return e}function wl(e){for(let t=0;t<e.length;t++)sm(e,t)||(e[t]=null);return e}function rm(e){let t=_w(null);for(let[n,s]of Ok(e))sm(e,n)&&(Array.isArray(s)?t[n]=wl(s):s&&typeof s=="object"&&s.constructor===Object?t[n]=rm(s):t[n]=s);return t}function og(e,t){for(;e!==null;){let s=Rk(e,t);if(s){if(s.get)return tu(s.get);if(typeof s.value=="function")return tu(s.value)}e=WO(e)}function n(){return null}return n}let Bk=el(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Wl=el(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ip=el(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),YO=el(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Rw=el(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),XO=el(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Nw=el(["#text"]),Mw=el(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Bw=el(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),am=el(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Nb=el(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Pw=mc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Pk=mc(/<%[\w\W]*|[\w\W]*%>/gm),JO=mc(/\$\{[\w\W]*/gm),QO=mc(/^data-[\-\w.\u00B7-\uFFFF]+$/),e5=mc(/^aria-[\-\w]+$/),t5=mc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),vB=mc(/^(?:\w+script|data):/i),n5=mc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Lk=mc(/^html$/i),Ik=mc(/^[a-z][.\w]*(-[.\w]+)+$/i);var Lw=Object.freeze({__proto__:null,ARIA_ATTR:e5,ATTR_WHITESPACE:n5,CUSTOM_ELEMENT:Ik,DATA_ATTR:QO,DOCTYPE_NAME:Lk,ERB_EXPR:Pk,IS_ALLOWED_URI:t5,IS_SCRIPT_OR_DATA:vB,MUSTACHE_EXPR:Pw,TMPLIT_EXPR:JO});let Mb={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Fk=function(){return typeof window>"u"?null:window},o5=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let s=null,a="data-tt-policy-suffix";n&&n.hasAttribute(a)&&(s=n.getAttribute(a));let c="dompurify"+(s?"#"+s:"");try{return t.createPolicy(c,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+c+" could not be created."),null}},Hk=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Iw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fk(),t=Jn=>Iw(Jn);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==Mb.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e,s=n,a=s.currentScript,{DocumentFragment:c,HTMLTemplateElement:d,Node:p,Element:b,NodeFilter:S,NamedNodeMap:D=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:M,DOMParser:P,trustedTypes:Z}=e,oe=b.prototype,Y=og(oe,"cloneNode"),ne=og(oe,"remove"),he=og(oe,"nextSibling"),be=og(oe,"childNodes"),Ce=og(oe,"parentNode");if(typeof d=="function"){let Jn=n.createElement("template");Jn.content&&Jn.content.ownerDocument&&(n=Jn.content.ownerDocument)}let He,qe="",{implementation:Ct,createNodeIterator:Vt,createDocumentFragment:Ie,getElementsByTagName:_e}=n,{importNode:ze}=s,yt=Hk();t.isSupported=typeof Ok=="function"&&typeof Ce=="function"&&Ct&&Ct.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:mn,ERB_EXPR:gn,TMPLIT_EXPR:Qn,DATA_ATTR:Fo,ARIA_ATTR:ys,IS_SCRIPT_OR_DATA:Is,ATTR_WHITESPACE:qa,CUSTOM_ELEMENT:ru}=Lw,{IS_ALLOWED_URI:Et}=Lw,Gt=null,Eo=Qo({},[...Bk,...Wl,...ip,...Rw,...Nw]),bo=null,pi=Qo({},[...Mw,...Bw,...am,...Nb]),Ze=Object.seal(_w(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),gt=null,Pt=null,qn=!0,Hn=!0,qo=!1,au=!0,dm=!1,Ad=!0,Zu=!1,_h=!1,Sl=!1,hc=!1,hp=!1,nv=!1,Bx=!0,an=!1,oo="user-content-",Fr=!0,As=!1,ts={},Tr=null,iu=Qo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Kl=null,_d=Qo({},["audio","video","img","source","image","track"]),bp=null,Px=Qo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Lx="http://www.w3.org/1998/Math/MathML",my="http://www.w3.org/2000/svg",df="http://www.w3.org/1999/xhtml",ov=df,PE=!1,Ix=null,j9=Qo({},[Lx,my,df],X1),LE=Qo({},["mi","mo","mn","ms","mtext"]),IE=Qo({},["annotation-xml"]),q9=Qo({},["title","style","font","a","script"]),Fx=null,sv=["application/xhtml+xml","text/html"],LN="text/html",Ee=null,De=null,Tt=n.createElement("form"),ft=function(Me){return Me instanceof RegExp||Me instanceof Function},bn=function(){let Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(De&&De===Me)){if((!Me||typeof Me!="object")&&(Me={}),Me=rm(Me),Fx=sv.indexOf(Me.PARSER_MEDIA_TYPE)===-1?LN:Me.PARSER_MEDIA_TYPE,Ee=Fx==="application/xhtml+xml"?X1:_2,Gt=sm(Me,"ALLOWED_TAGS")?Qo({},Me.ALLOWED_TAGS,Ee):Eo,bo=sm(Me,"ALLOWED_ATTR")?Qo({},Me.ALLOWED_ATTR,Ee):pi,Ix=sm(Me,"ALLOWED_NAMESPACES")?Qo({},Me.ALLOWED_NAMESPACES,X1):j9,bp=sm(Me,"ADD_URI_SAFE_ATTR")?Qo(rm(Px),Me.ADD_URI_SAFE_ATTR,Ee):Px,Kl=sm(Me,"ADD_DATA_URI_TAGS")?Qo(rm(_d),Me.ADD_DATA_URI_TAGS,Ee):_d,Tr=sm(Me,"FORBID_CONTENTS")?Qo({},Me.FORBID_CONTENTS,Ee):iu,gt=sm(Me,"FORBID_TAGS")?Qo({},Me.FORBID_TAGS,Ee):rm({}),Pt=sm(Me,"FORBID_ATTR")?Qo({},Me.FORBID_ATTR,Ee):rm({}),ts=sm(Me,"USE_PROFILES")?Me.USE_PROFILES:!1,qn=Me.ALLOW_ARIA_ATTR!==!1,Hn=Me.ALLOW_DATA_ATTR!==!1,qo=Me.ALLOW_UNKNOWN_PROTOCOLS||!1,au=Me.ALLOW_SELF_CLOSE_IN_ATTR!==!1,dm=Me.SAFE_FOR_TEMPLATES||!1,Ad=Me.SAFE_FOR_XML!==!1,Zu=Me.WHOLE_DOCUMENT||!1,hc=Me.RETURN_DOM||!1,hp=Me.RETURN_DOM_FRAGMENT||!1,nv=Me.RETURN_TRUSTED_TYPE||!1,Sl=Me.FORCE_BODY||!1,Bx=Me.SANITIZE_DOM!==!1,an=Me.SANITIZE_NAMED_PROPS||!1,Fr=Me.KEEP_CONTENT!==!1,As=Me.IN_PLACE||!1,Et=Me.ALLOWED_URI_REGEXP||t5,ov=Me.NAMESPACE||df,LE=Me.MATHML_TEXT_INTEGRATION_POINTS||LE,IE=Me.HTML_INTEGRATION_POINTS||IE,Ze=Me.CUSTOM_ELEMENT_HANDLING||{},Me.CUSTOM_ELEMENT_HANDLING&&ft(Me.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ze.tagNameCheck=Me.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Me.CUSTOM_ELEMENT_HANDLING&&ft(Me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ze.attributeNameCheck=Me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Me.CUSTOM_ELEMENT_HANDLING&&typeof Me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ze.allowCustomizedBuiltInElements=Me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),dm&&(Hn=!1),hp&&(hc=!0),ts&&(Gt=Qo({},Nw),bo=[],ts.html===!0&&(Qo(Gt,Bk),Qo(bo,Mw)),ts.svg===!0&&(Qo(Gt,Wl),Qo(bo,Bw),Qo(bo,Nb)),ts.svgFilters===!0&&(Qo(Gt,ip),Qo(bo,Bw),Qo(bo,Nb)),ts.mathMl===!0&&(Qo(Gt,Rw),Qo(bo,am),Qo(bo,Nb))),Me.ADD_TAGS&&(Gt===Eo&&(Gt=rm(Gt)),Qo(Gt,Me.ADD_TAGS,Ee)),Me.ADD_ATTR&&(bo===pi&&(bo=rm(bo)),Qo(bo,Me.ADD_ATTR,Ee)),Me.ADD_URI_SAFE_ATTR&&Qo(bp,Me.ADD_URI_SAFE_ATTR,Ee),Me.FORBID_CONTENTS&&(Tr===iu&&(Tr=rm(Tr)),Qo(Tr,Me.FORBID_CONTENTS,Ee)),Fr&&(Gt["#text"]=!0),Zu&&Qo(Gt,["html","head","body"]),Gt.table&&(Qo(Gt,["tbody"]),delete gt.tbody),Me.TRUSTED_TYPES_POLICY){if(typeof Me.TRUSTED_TYPES_POLICY.createHTML!="function")throw Rb('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Me.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Rb('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');He=Me.TRUSTED_TYPES_POLICY,qe=He.createHTML("")}else He===void 0&&(He=o5(Z,a)),He!==null&&typeof qe=="string"&&(qe=He.createHTML(""));el&&el(Me),De=Me}},wo=Qo({},[...Wl,...ip,...YO]),da=Qo({},[...Rw,...XO]),vp=function(Me){let Xt=Ce(Me);(!Xt||!Xt.tagName)&&(Xt={namespaceURI:ov,tagName:"template"});let zn=_2(Me.tagName),Ga=_2(Xt.tagName);return Ix[Me.namespaceURI]?Me.namespaceURI===my?Xt.namespaceURI===df?zn==="svg":Xt.namespaceURI===Lx?zn==="svg"&&(Ga==="annotation-xml"||LE[Ga]):!!wo[zn]:Me.namespaceURI===Lx?Xt.namespaceURI===df?zn==="math":Xt.namespaceURI===my?zn==="math"&&IE[Ga]:!!da[zn]:Me.namespaceURI===df?Xt.namespaceURI===my&&!IE[Ga]||Xt.namespaceURI===Lx&&!LE[Ga]?!1:!da[zn]&&(q9[zn]||!wo[zn]):!!(Fx==="application/xhtml+xml"&&Ix[Me.namespaceURI]):!1},mf=function(Me){ng(t.removed,{element:Me});try{Ce(Me).removeChild(Me)}catch{ne(Me)}},Hx=function(Me,Xt){try{ng(t.removed,{attribute:Xt.getAttributeNode(Me),from:Xt})}catch{ng(t.removed,{attribute:null,from:Xt})}if(Xt.removeAttribute(Me),Me==="is")if(hc||hp)try{mf(Xt)}catch{}else try{Xt.setAttribute(Me,"")}catch{}},G9=function(Me){let Xt=null,zn=null;if(Sl)Me="<remove></remove>"+Me;else{let Yl=Mk(Me,/^[\r\n\t ]+/);zn=Yl&&Yl[0]}Fx==="application/xhtml+xml"&&ov===df&&(Me='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Me+"</body></html>");let Ga=He?He.createHTML(Me):Me;if(ov===df)try{Xt=new P().parseFromString(Ga,Fx)}catch{}if(!Xt||!Xt.documentElement){Xt=Ct.createDocument(ov,"template",null);try{Xt.documentElement.innerHTML=PE?qe:Ga}catch{}}let Wu=Xt.body||Xt.documentElement;return Me&&zn&&Wu.insertBefore(n.createTextNode(zn),Wu.childNodes[0]||null),ov===df?_e.call(Xt,Zu?"html":"body")[0]:Zu?Xt.documentElement:Wu},K9=function(Me){return Vt.call(Me.ownerDocument||Me,Me,S.SHOW_ELEMENT|S.SHOW_COMMENT|S.SHOW_TEXT|S.SHOW_PROCESSING_INSTRUCTION|S.SHOW_CDATA_SECTION,null)},ML=function(Me){return Me instanceof M&&(typeof Me.nodeName!="string"||typeof Me.textContent!="string"||typeof Me.removeChild!="function"||!(Me.attributes instanceof D)||typeof Me.removeAttribute!="function"||typeof Me.setAttribute!="function"||typeof Me.namespaceURI!="string"||typeof Me.insertBefore!="function"||typeof Me.hasChildNodes!="function")},Y9=function(Me){return typeof p=="function"&&Me instanceof p};function u0(Jn,Me,Xt){Y1(Jn,zn=>{zn.call(t,Me,Xt,De)})}let X9=function(Me){let Xt=null;if(u0(yt.beforeSanitizeElements,Me,null),ML(Me))return mf(Me),!0;let zn=Ee(Me.nodeName);if(u0(yt.uponSanitizeElement,Me,{tagName:zn,allowedTags:Gt}),Ad&&Me.hasChildNodes()&&!Y9(Me.firstElementChild)&&Zl(/<[/\w!]/g,Me.innerHTML)&&Zl(/<[/\w!]/g,Me.textContent)||Me.nodeType===Mb.progressingInstruction||Ad&&Me.nodeType===Mb.comment&&Zl(/<[/\w]/g,Me.data))return mf(Me),!0;if(!Gt[zn]||gt[zn]){if(!gt[zn]&&Q9(zn)&&(Ze.tagNameCheck instanceof RegExp&&Zl(Ze.tagNameCheck,zn)||Ze.tagNameCheck instanceof Function&&Ze.tagNameCheck(zn)))return!1;if(Fr&&!Tr[zn]){let Ga=Ce(Me)||Me.parentNode,Wu=be(Me)||Me.childNodes;if(Wu&&Ga){let Yl=Wu.length;for(let mm=Yl-1;mm>=0;--mm){let d0=Y(Wu[mm],!0);d0.__removalCount=(Me.__removalCount||0)+1,Ga.insertBefore(d0,he(Me))}}}return mf(Me),!0}return Me instanceof b&&!vp(Me)||(zn==="noscript"||zn==="noembed"||zn==="noframes")&&Zl(/<\/no(script|embed|frames)/i,Me.innerHTML)?(mf(Me),!0):(dm&&Me.nodeType===Mb.text&&(Xt=Me.textContent,Y1([mn,gn,Qn],Ga=>{Xt=J1(Xt,Ga," ")}),Me.textContent!==Xt&&(ng(t.removed,{element:Me.cloneNode()}),Me.textContent=Xt)),u0(yt.afterSanitizeElements,Me,null),!1)},J9=function(Me,Xt,zn){if(Bx&&(Xt==="id"||Xt==="name")&&(zn in n||zn in Tt))return!1;if(!(Hn&&!Pt[Xt]&&Zl(Fo,Xt))){if(!(qn&&Zl(ys,Xt))){if(!bo[Xt]||Pt[Xt]){if(!(Q9(Me)&&(Ze.tagNameCheck instanceof RegExp&&Zl(Ze.tagNameCheck,Me)||Ze.tagNameCheck instanceof Function&&Ze.tagNameCheck(Me))&&(Ze.attributeNameCheck instanceof RegExp&&Zl(Ze.attributeNameCheck,Xt)||Ze.attributeNameCheck instanceof Function&&Ze.attributeNameCheck(Xt))||Xt==="is"&&Ze.allowCustomizedBuiltInElements&&(Ze.tagNameCheck instanceof RegExp&&Zl(Ze.tagNameCheck,zn)||Ze.tagNameCheck instanceof Function&&Ze.tagNameCheck(zn))))return!1}else if(!bp[Xt]){if(!Zl(Et,J1(zn,qa,""))){if(!((Xt==="src"||Xt==="xlink:href"||Xt==="href")&&Me!=="script"&&qO(zn,"data:")===0&&Kl[Me])){if(!(qo&&!Zl(Is,J1(zn,qa,"")))){if(zn)return!1}}}}}}return!0},Q9=function(Me){return Me!=="annotation-xml"&&Mk(Me,ru)},ez=function(Me){u0(yt.beforeSanitizeAttributes,Me,null);let{attributes:Xt}=Me;if(!Xt||ML(Me))return;let zn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:bo,forceKeepAttr:void 0},Ga=Xt.length;for(;Ga--;){let Wu=Xt[Ga],{name:Yl,namespaceURI:mm,value:d0}=Wu,FE=Ee(Yl),BL=d0,ju=Yl==="value"?BL:GO(BL);if(zn.attrName=FE,zn.attrValue=ju,zn.keepAttr=!0,zn.forceKeepAttr=void 0,u0(yt.uponSanitizeAttribute,Me,zn),ju=zn.attrValue,an&&(FE==="id"||FE==="name")&&(Hx(Yl,Me),ju=oo+ju),Ad&&Zl(/((--!?|])>)|<\/(style|title)/i,ju)){Hx(Yl,Me);continue}if(zn.forceKeepAttr)continue;if(!zn.keepAttr){Hx(Yl,Me);continue}if(!au&&Zl(/\/>/i,ju)){Hx(Yl,Me);continue}dm&&Y1([mn,gn,Qn],nz=>{ju=J1(ju,nz," ")});let tz=Ee(Me.nodeName);if(!J9(tz,FE,ju)){Hx(Yl,Me);continue}if(He&&typeof Z=="object"&&typeof Z.getAttributeType=="function"&&!mm)switch(Z.getAttributeType(tz,FE)){case"TrustedHTML":{ju=He.createHTML(ju);break}case"TrustedScriptURL":{ju=He.createScriptURL(ju);break}}if(ju!==BL)try{mm?Me.setAttributeNS(mm,Yl,ju):Me.setAttribute(Yl,ju),ML(Me)?mf(Me):jO(t.removed)}catch{Hx(Yl,Me)}}u0(yt.afterSanitizeAttributes,Me,null)},uX=function Jn(Me){let Xt=null,zn=K9(Me);for(u0(yt.beforeSanitizeShadowDOM,Me,null);Xt=zn.nextNode();)u0(yt.uponSanitizeShadowNode,Xt,null),X9(Xt),ez(Xt),Xt.content instanceof c&&Jn(Xt.content);u0(yt.afterSanitizeShadowDOM,Me,null)};return t.sanitize=function(Jn){let Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Xt=null,zn=null,Ga=null,Wu=null;if(PE=!Jn,PE&&(Jn="<!-->"),typeof Jn!="string"&&!Y9(Jn))if(typeof Jn.toString=="function"){if(Jn=Jn.toString(),typeof Jn!="string")throw Rb("dirty is not a string, aborting")}else throw Rb("toString is not a function");if(!t.isSupported)return Jn;if(_h||bn(Me),t.removed=[],typeof Jn=="string"&&(As=!1),As){if(Jn.nodeName){let d0=Ee(Jn.nodeName);if(!Gt[d0]||gt[d0])throw Rb("root node is forbidden and cannot be sanitized in-place")}}else if(Jn instanceof p)Xt=G9("<!---->"),zn=Xt.ownerDocument.importNode(Jn,!0),zn.nodeType===Mb.element&&zn.nodeName==="BODY"||zn.nodeName==="HTML"?Xt=zn:Xt.appendChild(zn);else{if(!hc&&!dm&&!Zu&&Jn.indexOf("<")===-1)return He&&nv?He.createHTML(Jn):Jn;if(Xt=G9(Jn),!Xt)return hc?null:nv?qe:""}Xt&&Sl&&mf(Xt.firstChild);let Yl=K9(As?Jn:Xt);for(;Ga=Yl.nextNode();)X9(Ga),ez(Ga),Ga.content instanceof c&&uX(Ga.content);if(As)return Jn;if(hc){if(hp)for(Wu=Ie.call(Xt.ownerDocument);Xt.firstChild;)Wu.appendChild(Xt.firstChild);else Wu=Xt;return(bo.shadowroot||bo.shadowrootmode)&&(Wu=ze.call(s,Wu,!0)),Wu}let mm=Zu?Xt.outerHTML:Xt.innerHTML;return Zu&&Gt["!doctype"]&&Xt.ownerDocument&&Xt.ownerDocument.doctype&&Xt.ownerDocument.doctype.name&&Zl(Lk,Xt.ownerDocument.doctype.name)&&(mm="<!DOCTYPE "+Xt.ownerDocument.doctype.name+`>
`+mm),dm&&Y1([mn,gn,Qn],d0=>{mm=J1(mm,d0," ")}),He&&nv?He.createHTML(mm):mm},t.setConfig=function(){let Jn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};bn(Jn),_h=!0},t.clearConfig=function(){De=null,_h=!1},t.isValidAttribute=function(Jn,Me,Xt){De||bn({});let zn=Ee(Jn),Ga=Ee(Me);return J9(zn,Ga,Xt)},t.addHook=function(Jn,Me){typeof Me=="function"&&ng(yt[Jn],Me)},t.removeHook=function(Jn,Me){if(Me!==void 0){let Xt=bB(yt[Jn],Me);return Xt===-1?void 0:Nk(yt[Jn],Xt,1)[0]}return jO(yt[Jn])},t.removeHooks=function(Jn){yt[Jn]=[]},t.removeAllHooks=function(){yt=Hk()},t}var Fw=Iw();let zk=et.each,s5=et.trim,Hw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],yB={ftp:21,http:80,https:443,mailto:25},O2=["img","video"],r5=(e,t)=>Ve(e)?!e:Ve(t)?!In(O2,t):!0,a5=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},i5=(e,t,n)=>{let s=a5(t).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?r5(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class im{static parseDataUri(t){let n,s=decodeURIComponent(t).split(","),a=/data:([^;]+)/.exec(s[0]);return a&&(n=a[1]),{type:n,data:s[1]}}static isDomSafe(t,n,s={}){if(s.allow_script_urls)return!0;{let a=md.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!i5(s,a,n)}}static getDocumentBaseUrl(t){let n;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?n=t.href??"":n=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}source;protocol;authority;userInfo;user;password;host;port;relative;path="";directory="";file;query;anchor;settings;constructor(t,n={}){t=s5(t),this.settings=n;let s=n.base_uri,a=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){a.source=t;return}let c=t.indexOf("//")===0;if(t.indexOf("/")===0&&!c&&(t=(s&&s.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){let p=s?s.path:new im(document.location.href).directory;if(s?.protocol==="")t="//mce_host"+a.toAbsPath(p,t);else{let b=/([^#?]*)([#?]?.*)/.exec(t);b&&(t=(s&&s.protocol||"http")+"://mce_host"+a.toAbsPath(p,b[1])+b[2])}}t=t.replace(/@@/g,"(mce_at)");let d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);d&&zk(Hw,(p,b)=>{let S=d[b];S&&(S=S.replace(/\(mce_at\)/g,"@@")),a[p]=S}),s&&(a.protocol||(a.protocol=s.protocol),a.userInfo||(a.userInfo=s.userInfo),!a.port&&a.host==="mce_host"&&(a.port=s.port),(!a.host||a.host==="mce_host")&&(a.host=s.host),a.source=""),c&&(a.protocol="")}setPath(t){let n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;let n=new im(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();let s=this.getURI(),a=n.getURI();if(s===a||s.charAt(s.length-1)==="/"&&s.substr(0,s.length-1)===a)return s;let c=this.toRelPath(this.path,n.path);return n.query&&(c+="?"+n.query),n.anchor&&(c+="#"+n.anchor),c}toAbsolute(t,n){let s=new im(t,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;let n=this.protocol?yB[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let s=0,a="",c,d,p=t.substring(0,t.lastIndexOf("/")).split("/"),b=n.split("/");if(p.length>=b.length){for(c=0,d=p.length;c<d;c++)if(c>=b.length||p[c]!==b[c]){s=c+1;break}}if(p.length<b.length){for(c=0,d=b.length;c<d;c++)if(c>=p.length||p[c]!==b[c]){s=c+1;break}}if(s===1)return n;for(c=0,d=p.length-(s-1);c<d;c++)a+="../";for(c=s-1,d=b.length;c<d;c++)c!==s-1?a+="/"+b[c]:a+=b[c];return a}toAbsPath(t,n){let s=0,a=/\/$/.test(n)?"/":"",c=t.split("/"),d=n.split("/"),p=[];zk(c,M=>{M&&p.push(M)});let b=[];for(let M=d.length-1;M>=0;M--)if(!(d[M].length===0||d[M]===".")){if(d[M]===".."){s++;continue}if(s>0){s--;continue}b.push(d[M])}let S=p.length-s,D;return S<=0?D=kl(b).join("/"):D=p.slice(0,S).join("/")+"/"+kl(b).join("/"),D.indexOf("/")!==0&&(D="/"+D),a&&D.lastIndexOf("/")!==D.length-1&&(D+=a),D}getURI(t=!1){let n;return(!this.source||t)&&(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}let l5=et.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),$k="data-mce-type",Vk=0,Uk=(e,t,n,s,a)=>{let c=t.validate,d=n.getSpecialElements();e.nodeType===Cg&&(!t.allow_conditional_comments&&/^\[if/i.test(e.nodeValue??"")&&(e.nodeValue=" "+e.nodeValue),t.sanitize&&t.allow_html_in_comments&&pt(e.nodeValue)&&(e.nodeValue=tg(e.nodeValue)));let p=a?.tagName??e.nodeName.toLowerCase();if(s!=="html"&&n.isValid(s)){Ve(a)&&(a.allowedTags[p]=!0);return}if(e.nodeType!==Ml||p==="body")return;let b=q.fromDom(e),S=Sm(b,$k),D=ai(b,"data-mce-bogus");if(!S&&pt(D)){D==="all"?Ko(b):yi(b);return}let M=n.getElementRule(p);if(c&&!M){Yt(d,p)?Ko(b):yi(b);return}else Ve(a)&&(a.allowedTags[p]=!0);if(c&&M&&!S){if(Pe(M.attributesForced??[],P=>{Pr(b,P.name,P.value==="{$uid}"?`mce_${Vk++}`:P.value)}),Pe(M.attributesDefault??[],P=>{Sm(b,P.name)||Pr(b,P.name,P.value==="{$uid}"?`mce_${Vk++}`:P.value)}),M.attributesRequired&&!ro(M.attributesRequired,P=>Sm(b,P))){yi(b);return}if(M.removeEmptyAttrs&&kp(b)){yi(b);return}M.outputName&&M.outputName!==p&&Em(b,M.outputName)}},CB=(e,t,n,s,a)=>{let c=e.tagName.toLowerCase(),{attrName:d,attrValue:p}=a;a.keepAttr=c5(t,n,s,c,d,p),a.keepAttr?(a.allowedAttributes[d]=!0,u5(d,n,e.nodeName)&&(a.attrValue=d),t.allow_svg_data_urls&&wn(p,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):D2(e,d)&&(a.forceKeepAttr=!0)},c5=(e,t,n,s,a,c)=>n!=="html"&&!Hg(s)?!0:!(a in l5&&i5(e,c,s))&&(!e.validate||t.isValid(s,a)||wn(a,"data-")||wn(a,"aria-")),D2=(e,t)=>e.hasAttribute($k)&&(t==="id"||t==="class"||t==="style"),u5=(e,t,n)=>e in t.getBoolAttrs()&&!Yt(t.getCustomElements(),n.toLowerCase()),wB=(e,t,n,s)=>{let{attributes:a}=e;for(let c=a.length-1;c>=0;c--){let d=a[c],p=d.name,b=d.value;!c5(t,n,s,e.tagName.toLowerCase(),p,b)&&!D2(e,p)?e.removeAttribute(p):u5(p,n,e.nodeName)&&e.setAttribute(p,p)}},d5=(e,t,n)=>{let s=Fw();return s.addHook("uponSanitizeElement",(a,c)=>{Uk(a,e,t,n.track(a),c)}),s.addHook("uponSanitizeAttribute",(a,c)=>{CB(a,e,t,n.current(),c)}),s},Zk=(e,t)=>{let s={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body","html"],ALLOWED_ATTR:[]}};return s.PARSER_MEDIA_TYPE=t,e.allow_script_urls?s.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(s.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),s},xB=e=>{let t=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(s=>`xlink:${s}`),n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:t};Fw().sanitize(e,n)},SB=(e,t)=>{let n={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},s=Fw(),a=t.allow_mathml_annotation_encodings,c=ht(a)&&a.length>0,d=b=>{let S=b.getAttribute("encoding");return c&&pt(S)&&In(a,S)},p=(b,S)=>c&&S==="semantics"?L.some(!0):S==="annotation"?L.some(It(b)&&d(b)):ht(t.extended_mathml_elements)&&t.extended_mathml_elements.includes(S)?L.from(!0):L.none();s.addHook("uponSanitizeElement",(b,S)=>{let D=S.tagName??b.nodeName.toLowerCase();p(b,D).each(P=>{S.allowedTags[D]=P,!P&&t.sanitize&&It(b)&&b.remove()})}),s.addHook("uponSanitizeAttribute",(b,S)=>{ht(t.extended_mathml_attributes)&&t.extended_mathml_attributes.includes(S.attrName)&&(S.forceKeepAttr=!0)}),s.sanitize(e,n)},kB=e=>t=>{let n=A0(t);if(n==="svg")xB(t);else if(n==="math")SB(t,e);else throw new Error("Not a namespace element")},R2=(e,t)=>{let n=zg();if(e.sanitize){let s=d5(e,t,n);return{sanitizeHtmlElement:(c,d)=>{s.sanitize(c,Zk(e,d)),s.removed=[],n.reset()},sanitizeNamespaceElement:kB(e)}}else return{sanitizeHtmlElement:(c,d)=>{let p=document.createNodeIterator(c,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT),b;for(;b=p.nextNode();){let S=n.track(b);Uk(b,e,t,S),It(b)&&wB(b,e,t,S)}n.reset()},sanitizeNamespaceElement:wt}},m5=["script","style","template","param","meta","title","link"],Wk=et.makeMap,lp=et.extend,jl=(e,t,n,s,a)=>{let c=e.name,d=c in n&&c!=="title"&&c!=="textarea"&&c!=="noscript",p=t.childNodes;for(let b=0,S=p.length;b<S;b++){let D=p[b],M=new Ai(D.nodeName.toLowerCase(),D.nodeType);if(It(D)){let P=D.attributes;for(let Z=0,oe=P.length;Z<oe;Z++){let Y=P[Z];M.attr(Y.name,Y.value)}Hg(M.name)&&(s(D),M.value=D.innerHTML)}else tt(D)?(M.value=D.data,d&&(M.raw=!0)):ud(D)?M.value=a?G1(D.data):D.data:(iv(D)||Mh(D))&&(M.value=D.data);if(Va(D)){let P=Ai.create("#text");P.value=D.innerHTML,P.raw=!0,M.append(P)}else Hg(M.name)||jl(M,D,n,s,a);e.append(M)}},g5=(e,t,n)=>{let s=[];for(let a=e,c=a;a;c=a,a=a.walk()){let d=a;Pe(t,p=>p(d)),os(d.parent)&&d!==e?a=c:s.push(d)}for(let a=s.length-1;a>=0;a--){let c=s[a];Pe(n,d=>d(c))}},N2=(e,t,n,s)=>{let a=n.validate,c=t.getNonEmptyElements(),d=t.getWhitespaceElements(),p=lp(Wk(m5),t.getBlockElements()),b=Wt(t),S=/[ \t\r\n]+/g,D=/^[ \t\r\n]+/,M=/[ \t\r\n]+$/,P=be=>{let Ce=be.parent;for(;Ve(Ce);){if(Ce.name in d)return!0;Ce=Ce.parent}return!1},Z=be=>{let Ce=be;for(;Ve(Ce);){if(Ce.name in b)return x2(t,c,d,Ce);Ce=Ce.parent}return!1},oe=be=>be.name in p||D0(t,be)||Hg(be.name)&&be.parent===e,Y=(be,Ce)=>{let He=Ce?be.prev:be.next;return Ve(He)||os(be.parent)?!1:oe(be.parent)&&(be.parent!==e||s.isRootContent===!0)};return[be=>{if(be.type===3&&!P(be)){let Ce=be.value??"";Ce=Ce.replace(S," "),(dB(be.prev,oe)||Y(be,!0))&&(Ce=Ce.replace(D,"")),Ce.length===0||Ce===" "&&be.prev&&be.prev.type===Cg&&be.next&&be.next.type===Cg?be.remove():be.value=Ce}},be=>{if(be.type===1){let Ce=t.getElementRule(be.name);if(a&&Ce){let He=x2(t,c,d,be);Ce.paddInEmptyBlock&&He&&Z(be)?wk(n,s,oe,be):Ce.removeEmpty&&He?oe(be)?be.remove():be.unwrap():Ce.paddEmpty&&(He||cB(be))&&wk(n,s,oe,be)}}else if(be.type===3&&!P(be)){let Ce=be.value??"";(be.next&&oe(be.next)||Y(be,!1))&&(Ce=Ce.replace(M,"")),Ce.length===0?be.remove():be.value=Ce}}]},ph=(e,t)=>{let n=t.forced_root_block??e.forced_root_block;return n===!1?"":n===!0?"p":n},sg=' xmlns="http://www.w3.org/1999/xhtml"',af=(e={},t=Zd())=>{let n=_b(),s=_b(),a={validate:!0,root_name:"body",sanitize:!0,allow_html_in_comments:!1,...e},c=new DOMParser,d=R2(a,t),p=(Ce,He,qe="html",Ct=!1)=>{let Vt=qe==="xhtml",Ie=Vt?"application/xhtml+xml":"text/html",_e=Yt(t.getSpecialElements(),He.toLowerCase()),ze=_e?`<${He}>${Ce}</${He}>`:Ce,yt=()=>/^[\s]*<head/i.test(Ce)||/^[\s]*<html/i.test(Ce)||/^[\s]*<!DOCTYPE/i.test(Ce)?`<html${Vt?sg:""}>${ze}</html>`:Vt?`<html${sg}><head></head><body>${ze}</body></html>`:`<body>${ze}</body>`,mn=c.parseFromString(yt(),Ie),gn=Ct?mn.documentElement:mn.body;return d.sanitizeHtmlElement(gn,Ie),_e?gn.firstChild:gn},b=n.addFilter,S=n.getFilters,D=n.removeFilter,M=s.addFilter,P=s.getFilters,Z=s.removeFilter,oe=(Ce,He)=>{S2(t,Ce)&&He.push(Ce)},Y=(Ce,He)=>{let qe=pt(He.attr($k)),Ct=He.type===1&&!Yt(Ce,He.name)&&!D0(t,He)&&!Hg(He.name);return He.type===3||Ct&&!qe},ne=(Ce,He)=>{let qe=lp(Wk(m5),t.getBlockElements()),Ct=/^[ \t\r\n]+/,Vt=/[ \t\r\n]+$/,Ie=Ce.firstChild,_e=null,ze=yt=>{yt&&(Ie=yt.firstChild,Ie&&Ie.type===3&&(Ie.value=Ie.value?.replace(Ct,"")),Ie=yt.lastChild,Ie&&Ie.type===3&&(Ie.value=Ie.value?.replace(Vt,"")))};if(t.isValidChild(Ce.name,He.toLowerCase())){for(;Ie;){let yt=Ie.next;Y(qe,Ie)?(_e||(_e=new Ai(He,1),_e.attr(a.forced_root_block_attrs),Ce.insert(_e,Ie)),_e.append(Ie)):(ze(_e),_e=null),Ie=yt}ze(_e)}},be={schema:t,addAttributeFilter:M,getAttributeFilters:P,removeAttributeFilter:Z,addNodeFilter:b,getNodeFilters:S,removeNodeFilter:D,parse:(Ce,He={})=>{let qe=a.validate,Ct=(He.context??a.root_name)==="#document",Vt=He.context??(Ct?"html":a.root_name),Ie=p(Ce,Vt,He.format,Ct);Rp(t,Ie);let _e=new Ai(Vt,11);jl(_e,Ie,t.getSpecialElements(),d.sanitizeNamespaceElement,a.sanitize&&a.allow_html_in_comments),Ie.innerHTML="";let[ze,yt]=N2(_e,t,a,He),mn=[],gn=qe?Is=>oe(Is,mn):wt,Qn={nodes:{},attributes:{}},Fo=Is=>AO(S(),P(),Is,Qn);g5(_e,[ze,Fo],[yt,gn]),mn.reverse(),qe&&mn.length>0&&(He.context?He.invalid=!0:MO(mn,t,_e,Fo));let ys=ph(a,He);return ys&&(_e.name==="body"||He.isRootContent)&&ne(_e,ys),He.invalid||_O(Qn,He),_e}};return UO(be,a),gB(be,a,t),be},Bb=e=>e instanceof Ai,jk=e=>Bb(e)?of({validate:!1}).serialize(e):e,qk=(e,t,n)=>{let s=jk(e),a=t(s);if(a.isDefaultPrevented())return a;if(Bb(e))if(a.content!==s){let c=af({validate:!1,forced_root_block:!1,...n}).parse(a.content,{context:e.name});return{...a,content:c}}else return{...a,content:e};else return a},Gk=e=>({sanitize:DS(e),sandbox_iframes:Jp(e),sandbox_iframes_exclusions:ob(e)}),f5=(e,t)=>{if(t.no_events)return or.value(t);{let n=Vl(e,t);return n.isDefaultPrevented()?or.error(Xd(e,{content:"",...n}).content):or.value(n)}},Kk=(e,t,n)=>n.no_events?t:qk(t,a=>Xd(e,{...n,content:a}),Gk(e)).content,zw=(e,t)=>{if(t.no_events)return or.value(t);{let n=qk(t.content,s=>u6(e,{...t,content:s}),Gk(e));return n.isDefaultPrevented()?(Wc(e,n),or.error(void 0)):or.value(n)}},$w=(e,t,n)=>{n.no_events||Wc(e,{...n,content:t})},hh="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),Yk=["content_css_cors"],EB="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),p5=[{name:"export",replacedWith:"Export to PDF"}],bh=(e,t)=>{let n=Lt(t,s=>Yt(e,s));return Os(n)},h5=e=>{let t=bh(e,hh),n=e.forced_root_block;return(n===!1||n==="")&&t.push("forced_root_block (false only)"),Os(t)},Vw=e=>bh(e,Yk),Uw=(e,t)=>{let n=et.makeMap(e.plugins," "),a=Lt(t,c=>Yt(n,c));return Os(a)},b5=e=>Uw(e,EB),v5=e=>Uw(e,p5.map(t=>t.name)),y5=(e,t)=>{let n=h5(e),s=b5(t),a=s.length>0,c=n.length>0,d=t.theme==="mobile";if(a||c||d){let b=d?`

Themes:
- mobile`:"",S=a?`

Plugins:
- ${s.join(`
- `)}`:"",D=c?`

Options:
- ${n.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 8.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/8/migration-from-7x/ for more information."+b+S+D)}},C5=e=>xn(p5,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),w5=(e,t)=>{let n=Vw(e),s=v5(t),a=s.length>0,c=n.length>0;if(a||c){let p=a?`

Plugins:
- ${s.map(C5).join(`
- `)}`:"",b=c?`

Options:
- ${n.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+p+b)}},Xk=(e,t)=>{y5(e,t),w5(e,t)},TB={fire:'The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',selectionSetContent:'The "editor.selection.setContent" method has been deprecated and will be removed in TinyMCE 9. Use "editor.insertContent" instead.'},x5=e=>{console.warn(TB[e],new Error().stack)},S5=e=>e.dom.length===0?(Ko(e),L.none()):L.some(e),AB=(e,t)=>e.filter(n=>R1.isBookmarkNode(n.dom)).bind(t?tc:ul),_B=(e,t,n,s,a)=>{let c=e.dom,d=t.dom,p=s?c.length:d.length;s?(ow(c,d,a,!1,!s),n.setStart(d,p)):(ow(d,c,a,!1,!s),n.setEnd(d,p))},k5=(e,t,n)=>{Mr(e).each(s=>{let a=e.dom;t&&d2(s,Fe(a,0),n)?xb(a,0,n):!t&&m2(s,Fe(a,a.length),n)&&nw(a,a.length,n)})},lf=(e,t,n,s,a)=>{e.bind(c=>((s?nw:xb)(c.dom,s?c.dom.length:0,a),t.filter(Sa).map(p=>_B(c,p,n,s,a)))).orThunk(()=>AB(t,s).or(t).filter(Sa).map(d=>k5(d,s,a)))},Jk=(e,t,n)=>{let s=L.from(t.firstChild).map(q.fromDom),a=L.from(t.lastChild).map(q.fromDom);e.deleteContents(),e.insertNode(t);let c=s.bind(ul).filter(Sa).bind(S5),d=a.bind(tc).filter(Sa).bind(S5);lf(c,s,e,!0,n),lf(d,a,e,!1,n),e.collapse(!1)},OB=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),Qk=(e,t)=>{if(t.format!=="raw"){let n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),a=s?{context:s.nodeName.toLowerCase()}:{},c=e.parser.parse(t.content,{forced_root_block:!1,...a,...t});return of({validate:!1},e.schema).serialize(c)}else return t.content},Pb=(e,t,n={})=>{let s=OB(n,t);zw(e,s).each(a=>{let c=Qk(e,a),d=e.selection.getRng();Jk(d,d.createContextualFragment(c),e.schema),e.selection.setRng(d),bb(e,d),$w(e,c,a)})},E5=(e,t,n={})=>{x5("selectionSetContent"),Pb(e,t,n)},T5=e=>Ve(e.firstChild)&&e.firstChild===e.lastChild,A5=e=>e.name==="br"||e.value===ws,DB=(e,t)=>e.getBlockElements()[t.name]&&T5(t)&&A5(t.firstChild),M2=(e,t)=>{let n=e.getNonEmptyElements();return Ve(t)&&(t.isEmpty(n)||DB(e,t))},Zw=(e,t)=>{let n=t.firstChild,s=t.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),M2(e,s)&&(s=s?.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},_5=e=>{let t=e.firstChild,n=e.lastChild;return t&&t.nodeName==="META"&&t.parentNode?.removeChild(t),n&&n.id==="mce_marker"&&n.parentNode?.removeChild(n),e},O5=(e,t,n)=>{let s=t.serialize(n),a=e.createFragment(s);return _5(a)},D5=e=>Lt(e?.childNodes??[],t=>t.nodeName==="LI"),R5=e=>e.data===ws||zs(e),Ww=e=>Ve(e?.firstChild)&&e.firstChild===e.lastChild&&R5(e.firstChild),e3=e=>!e.firstChild||Ww(e),B2=e=>e.length>0&&e3(e[e.length-1])?e.slice(0,-1):e,t3=(e,t)=>{let n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},N5=(e,t)=>!!t3(e,t),RB=(e,t)=>{let n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},NB=(e,t)=>{let n=Fe.before(e),a=ef(t).next(n);return a?a.toRange():null},n3=(e,t)=>{let n=Fe.after(e),a=ef(t).prev(n);return a?a.toRange():null},M5=(e,t,n,s)=>{let a=RB(e,s),c=e.parentNode;return c&&(c.insertBefore(a[0],e),et.each(t,d=>{c.insertBefore(d,e)}),c.insertBefore(a[1],e),c.removeChild(e)),n3(t[t.length-1],n)},MB=(e,t,n)=>{let s=e.parentNode;return s&&et.each(t,a=>{s.insertBefore(a,e)}),NB(e,n)},o3=(e,t,n,s)=>(s.insertAfter(t.reverse(),e),n3(t[0],n)),vh=(e,t,n,s)=>{let a=O5(t,e,s),c=t3(t,n.startContainer),d=B2(D5(a.firstChild)),p=1,b=2,S=t.getRoot(),D=M=>{let P=Fe.fromRangeStart(n),Z=ef(t.getRoot()),Y=(M===p?Z.prev(P):Z.next(P))?.getNode();return Y?t3(t,Y)!==c:!0};return c?D(p)?MB(c,d,S):D(b)?o3(c,d,S,t):M5(c,d,S,n):null},B5=["pre"],s3=(e,t,n,s)=>{let a=t.firstChild,c=t.lastChild,d=c.attr("data-mce-type")==="bookmark"?c.prev:c,p=a===d,b=In(B5,a.name);if(p&&b){let S=a.attr("contenteditable")!=="false",D=e.getParent(n,e.isBlock)?.nodeName.toLowerCase()===a.name,M=L.from(W1(s,n)).forall(Ui);return S&&D&&M}else return!1},jw=Of,r3=(e,t,n)=>{if(Ve(n)){let s=e.getParent(t.endContainer,jw);return n===s&&QS(q.fromDom(n),t)}else return!1},yh=(e,t)=>{if(e.isBlock(t)&&e.isEditable(t)){let n=t.childNodes;return n.length===1&&zs(n[0])||n.length===0}else return!1},P5=(e,t,n)=>{n.getAttribute("data-mce-bogus")==="all"?n.parentNode?.insertBefore(e.dom.createFragment(t),n):yh(e.dom,n)?e.dom.setHTML(n,t):Pb(e,t,{no_events:!0})},Td=(e,t,n)=>{L.from(e.getParent(t,"td,th")).map(q.fromDom).each(s=>Up(s,n))},Q1=(e,t)=>{let n=e.schema.getTextInlineElements(),s=e.dom;if(t){let a=e.getBody(),c=rf(e),d="*[data-mce-fragment]",p=s.select(d);et.each(p,b=>{let S=P=>Ve(n[P.nodeName.toLowerCase()]),D=P=>P.childNodes.length===1;if((P=>!(m_(s,P)||qM(s,P)))(b)&&S(b)&&D(b)){let P=Xm(s,b),Z=(he,be)=>Qa(he,Ce=>In(be,Ce)),oe=he=>D(b)&&s.is(he,d)&&S(he)&&(he.nodeName===b.nodeName&&Z(P,Xm(s,he))||oe(he.children[0])),Y=he=>Ve(he)&&he!==a&&(c.compare(b,he)||Y(he.parentElement)),ne=he=>Ve(he)&&he!==a&&s.is(he,d)&&(f_(s,b,he)||ne(he.parentElement));(oe(b.children[0])||Y(b.parentElement)&&!ne(b.parentElement))&&s.remove(b,!0)}}),rB(e,ms(p))}},L5=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},a3=e=>{et.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},I5=e=>!!e.getAttribute("data-mce-fragment"),BB=(e,t)=>Ve(t)&&!e.schema.getVoidElements()[t.nodeName],F5=(e,t)=>{let n,s=e.dom,a=e.selection;if(!t)return;a.scrollIntoView(t);let c=W1(e.getBody(),t);if(c&&s.getContentEditable(c)==="false"){s.remove(t),a.select(c);return}let d=s.createRng(),p=t.previousSibling;if(tt(p)){d.setStart(p,p.nodeValue?.length??0);let D=t.nextSibling;tt(D)&&(p.appendData(D.data),D.parentNode?.removeChild(D))}else d.setStartBefore(t),d.setEndBefore(t);let b=D=>{let M=Fe.fromRangeStart(D);return M=ef(e.getBody()).next(M),M?.toRange()},S=s.getParent(t,s.isBlock);if(s.remove(t),S&&s.isEmpty(S)){let D=jw(S);vi(q.fromDom(S)),d.setStart(S,0),d.setEnd(S,0),!D&&!I5(S)&&(n=b(d))?(d=n,s.remove(S)):s.add(S,s.create("br",D?{}:{"data-mce-bogus":"1"}))}a.setRng(d)},Lb=e=>{let t=e.dom,n=gh(e.selection.getRng());e.selection.setRng(n);let s=t.getParent(n.startContainer,jw);r3(t,n,s)?sp(e,n,q.fromDom(s)):vM(n)||e4(n)?n.deleteContents():e.getDoc().execCommand("Delete",!1)},qw=e=>{for(let t=e;t;t=t.walk())if(t.attr("id")==="mce_marker")return L.some(t);return L.none()},H5=(e,t,n)=>ro(n.children(),kw)&&e.getParent(t,e.isBlock)?.nodeName==="SUMMARY",z5=(e,t,n)=>{let s=e.selection,a=e.dom,c=e.parser,d=n.merge,p=of({validate:!0},e.schema),b='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=yl(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,b);let S=s.getRng(),D=S.startContainer,M=e.getBody();D===M&&s.isCollapsed()&&a.isBlock(M.firstChild)&&BB(e,M.firstChild)&&a.isEmpty(M.firstChild)&&(S=a.createRng(),S.setStart(M.firstChild,0),S.setEnd(M.firstChild,0),s.setRng(S)),s.isCollapsed()||Lb(e);let P=s.getNode(),Z={context:P.nodeName.toLowerCase(),data:n.data,insert:!0},oe=c.parse(t,Z);if(n.paste===!0&&Zw(e.schema,oe)&&N5(a,P))return S=vh(p,a,s.getRng(),oe),S&&s.setRng(S),t;n.paste===!0&&s3(a,oe,P,e.getBody())&&oe.firstChild?.unwrap(),L5(oe);let Y=oe.lastChild;if(Y&&Y.attr("id")==="mce_marker"){let ne=Y;for(Y=Y.prev;Y&&Y.name!=="table";Y=Y.walk(!0))if(Y.type===3||!a.isBlock(Y.name)){Y.parent&&e.schema.isValidChild(Y.parent.name,"span")&&Y.parent.insert(ne,Y,Y.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(P),!Z.invalid&&!H5(a,P,oe))t=p.serialize(oe),P5(e,t,P);else{Pb(e,b);let ne=s.getNode(),he,be=e.getBody();for(Af(ne)?ne=he=be:he=ne;he&&he!==be;)ne=he,he=he.parentNode;t=ne===be?be.innerHTML:a.getOuterHTML(ne);let Ce=c.parse(t),He=qw(Ce),qe=He.bind(RO).getOr(Ce);He.each(Ie=>Ie.replace(oe));let Ct=NO(oe);oe.unwrap();let Vt=Lt(Ct,Ie=>S2(e.schema,Ie));MO(Vt,e.schema,qe),OO(c.getNodeFilters(),c.getAttributeFilters(),Ce),t=p.serialize(Ce),ne===be?a.setHTML(be,t):a.setOuterHTML(ne,t)}return Q1(e,d),F5(e,a.get("mce_marker")),a3(e.getBody()),Td(a,s.getStart(),e.schema),$g(e.schema,e.getBody(),s.getStart()),t},i3=e=>{Xf(e)&&Yi(e.getBody()).each(t=>{let n=t.getNode(),s=Ou(n)?Yi(n).getOr(t):t;e.selection.setRng(s.toRange())})},Gw=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&i3(e)},Kw=(e,t,n,s)=>{if(n=yl(n),n.length===0||/^\s+$/.test(n)){let a='<br data-mce-bogus="1">';t.nodeName==="TABLE"?n="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+a+"</li>");let c=fi(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),c.toLowerCase())?(n=a,n=e.dom.createHTML(c,Yp(e),n)):n||(n=a),Gw(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=of({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));let a=a1(q.fromDom(t))?n:et.trim(n);return Gw(e,a,s.no_selection),{content:a,html:a}}},$5=(e,t,n,s)=>{OO(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);let a=of({validate:!1},e.schema).serialize(n),c=yl(a1(q.fromDom(t))?a:et.trim(a));return Gw(e,c,s.no_selection),{content:n,html:c}},Yw=(e,t,n)=>L.from(e.getBody()).map(s=>Bb(t)?$5(e,s,t,n):Kw(e,s,t,n)).getOr({content:t,html:Bb(n.content)?"":n.content}),Ib={},l3=rc(["pre"]),V5=(e,t)=>{Ib[e]||(Ib[e]=[]),Ib[e].push(t)},P2=(e,t)=>{Yt(Ib,e)&&Pe(Ib[e],n=>{n(t)})};V5("pre",e=>{let t=e.selection.getRng(),n=a=>c=>{let d=c.previousSibling;return l3(d)&&In(a,d)},s=(a,c)=>{let d=q.fromDom(c),p=hu(d).dom;Ko(d),ml(q.fromDom(a),[q.fromTag("br",p),q.fromTag("br",p),...rr(d)])};if(!t.collapsed){let a=e.selection.getSelectedBlocks(),c=Lt(Lt(a,l3),n(a));Pe(c,d=>{s(d.previousSibling,d)})}});let U5=et.each,Z5=(e,t,n,s)=>{let a=c=>{if(Rn(c)&&It(c.parentNode)&&e.isEditable(c)){let d=AA(e,c.parentNode);e.getStyle(c,"color")&&d?e.setStyle(c,"text-decoration",d):e.getStyle(c,"text-decoration")===d&&e.setStyle(c,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(et.walk(s,a,"childNodes"),a(s))},W5=(e,t,n,s)=>{if(t.styles&&t.styles.backgroundColor){let a=yO(e,"fontSize");bk(s,c=>a(c)&&e.isEditable(c),CO(e,"backgroundColor",rh(t.styles.backgroundColor,n)))}},j5=(e,t,n,s)=>{if(ca(t)&&(t.inline==="sub"||t.inline==="sup")){let a=yO(e,"fontSize");bk(s,d=>a(d)&&e.isEditable(d),CO(e,"fontSize",""));let c=Lt(e.select(t.inline==="sup"?"sub":"sup",s),e.isEditable);e.remove(c,!0)}},c3=(e,t,n,s)=>{U5(t,a=>{ca(a)&&U5(e.dom.select(a.inline,s),c=>{y2(c)&&w2(e,a,n,c,a.exact?c:null)}),$8(e.dom,a,s)})},q5=(e,t,n,s,a)=>{let c=a.parentNode;Ed(e,c,n,s)&&w2(e,t,s,a)||t.merge_with_parents&&c&&e.dom.getParent(c,d=>Ed(e,d,n,s)?(w2(e,t,s,a),!0):!1)},G5=et.each,PB=(e,t,n,s)=>{if(_T(e)&&ca(t)&&n.parentNode){let a=Wt(e.schema),c=id(q.fromDom(n),d=>Xi(d.dom));return ei(a,s)&&dd(e.schema,n.parentNode,{skipBogus:!1,includeZwsp:!0})&&!c}else return!1},LB=(e,t,n,s)=>{let a=e.formatter.get(t),c=a[0],d=!s&&e.selection.isCollapsed(),p=e.dom,b=e.selection,S=(Z,oe)=>{let Y=!1;return G5(Z,ne=>Ji(ne)?p.getContentEditable(oe)==="false"&&!ne.ceFalseOverride||Ve(ne.collapsed)&&ne.collapsed!==d?!0:p.is(oe,ne.selector)&&!Xi(oe)?(Eb(e,oe,ne,n,oe),Y=!0,!1):!0:!1),Y},D=Z=>{if(pt(Z)){let oe=p.create(Z);return Eb(e,oe,c,n,s),oe}else return null},M=(Z,oe,Y)=>{let ne=[],he=!0,be=c.inline||c.block,Ce=D(be),He=Vt=>vC(c)&&Ed(e,Vt,t,n),qe=(Vt,Ie,_e)=>{let ze=_1(c)&&n4(e.schema,Vt)&&cb(e,Ie,be);return _e&&ze},Ct=(Vt,Ie,_e,ze)=>{let yt=Vt.nodeName.toLowerCase(),mn=cb(e,be,yt)&&cb(e,Ie,be),gn=!Y&&tt(Vt)&&zf(Vt.data),Qn=Xi(Vt),Fo=!ca(c)||!Z.isBlock(Vt);return(_e||ze)&&mn&&!gn&&!Qn&&Fo};mb(Z,oe,Vt=>{let Ie,_e=ze=>{let yt=!1,mn=he,gn=!1,Qn=ze.parentNode,Fo=Qn.nodeName.toLowerCase(),ys=Z.getContentEditable(ze);Ve(ys)&&(mn=he,he=ys==="true",yt=!0,gn=TA(e,ze));let Is=he&&!yt;if(zs(ze)&&!PB(e,c,ze,Fo)){Ie=null,Cd(c)&&Z.remove(ze);return}if(He(ze)){Ie=null;return}if(qe(ze,Fo,Is)){let qa=Z.rename(ze,be);Eb(e,qa,c,n,ze),ne.push(qa),Ie=null;return}if(Ji(c)){let qa=S(a,ze);if(!qa&&Ve(Qn)&&CC(c)&&(qa=S(a,Qn)),!ca(c)||qa){Ie=null;return}}Ve(Ce)&&Ct(ze,Fo,Is,gn)?(Ie||(Ie=Z.clone(Ce,!1),Qn.insertBefore(Ie,ze),ne.push(Ie)),gn&&yt&&(he=mn),Ie.appendChild(ze)):(Ie=null,Pe(ks(ze.childNodes),_e),yt&&(he=mn),Ie=null)};Pe(Vt,_e)}),c.links===!0&&Pe(ne,Vt=>{let Ie=_e=>{_e.nodeName==="A"&&Eb(e,_e,c,n,s),Pe(ks(_e.childNodes),Ie)};Ie(Vt)}),sB(e,t,ms(ne)),Pe(ne,Vt=>{let Ie=yt=>{let mn=0;return Pe(yt.childNodes,gn=>{!yM(gn)&&!Cl(gn)&&mn++}),mn},_e=yt=>xn(yt.childNodes,t4).filter(gn=>Z.getContentEditable(gn)!=="false"&&bw(Z,gn,c)).map(gn=>{let Qn=Z.clone(gn,!1);return Eb(e,Qn,c,n,yt),Z.replace(Qn,yt,!0),Z.remove(gn,!0),Qn}).getOr(yt),ze=Ie(Vt);if((ne.length>1||!Z.isBlock(Vt))&&ze===0){Z.remove(Vt,!0);return}(ca(c)||Cd(c)&&c.wrapper)&&(!c.exact&&ze===1&&(Vt=_e(Vt)),c3(e,a,n,Vt),q5(e,c,t,n,Vt),W5(Z,c,n,Vt),Z5(Z,c,n,Vt),j5(Z,c,n,Vt),vO(e,c,n,Vt))})},P=E1(s)?s:b.getNode();if(p.getContentEditable(P)==="false"&&!TA(e,P)){s=P,S(a,s),gS(e,t,s,n);return}if(c){if(s)if(E1(s)){if(!S(a,s)){let Z=p.createRng();Z.setStartBefore(s),Z.setEndAfter(s),M(p,ih(p,Z,a),!0)}}else M(p,s,!0);else!d||!ca(c)||lb(e).length?(b.setRng(gh(b.getRng())),kA(e,()=>{pC(e,(Z,oe)=>{let Y=oe?Z:ih(p,Z,a);M(p,Y,!1)})},so),e.nodeChanged()):M8(e,t,n),mO(e.formatter,t).each(Z=>{let oe=z8(e.selection);Pe(oe,Y=>nO(p,Y,Z,n))});P2(t,e)}gS(e,t,s,n)},K5=(e,t,n,s)=>{(s||e.selection.isEditable())&&LB(e,t,n,s)},Xw=e=>Yt(e,"vars"),IB=(e,t)=>{e.set({}),t.on("NodeChange",n=>{u3(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{let s=L.from(n.node).map(a=>E1(a)?a:a.startContainer).bind(a=>It(a)?L.some(a):L.from(a.parentElement)).getOrThunk(()=>L2(t));u3(t,s,e.get())})},L2=e=>e.selection.getStart(),Y5=(e,t,n,s,a)=>rn(t,p=>{let b=e.formatter.matchNode(p,n,a??{},s);return!ns(b)},p=>oO(e,p,n)?!0:s?!1:Ve(e.formatter.matchNode(p,n,a,!0))),Jw=(e,t)=>{let n=t??L2(e);return Lt(ah(e.dom,n),s=>It(s)&&!Fg(s))},u3=(e,t,n)=>{let s=Jw(e,t);An(n,(a,c)=>{let d=p=>{let b=Y5(e,s,c,p.similar,Xw(p)?p.vars:void 0),S=b.isSome();if(p.state.get()!==S){p.state.set(S);let D=b.getOr(t);Xw(p)?p.callback(S,{node:D,format:c,parents:s}):Pe(p.callbacks,M=>M(S,{node:D,format:c,parents:s}))}};Pe([a.withSimilar,a.withoutSimilar],d),Pe(a.withVars,d)})},X5=(e,t,n,s,a,c)=>{let d=t.get();Pe(n.split(","),p=>{let b=_n(d,p).getOrThunk(()=>{let D={withSimilar:{state:Us(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Us(!1),similar:!1,callbacks:[]},withVars:[]};return d[p]=D,D}),S=()=>{let D=Jw(e);return Y5(e,D,p,a,c).isSome()};if(ns(c)){let D=a?b.withSimilar:b.withoutSimilar;D.callbacks.push(s),D.callbacks.length===1&&D.state.set(S())}else b.withVars.push({state:Us(S()),similar:a,vars:c,callback:s})}),t.set(d)},J5=(e,t,n)=>{let s=e.get();Pe(t.split(","),a=>_n(s,a).each(c=>{s[a]={withSimilar:{...c.withSimilar,callbacks:Lt(c.withSimilar.callbacks,d=>d!==n)},withoutSimilar:{...c.withoutSimilar,callbacks:Lt(c.withoutSimilar.callbacks,d=>d!==n)},withVars:Lt(c.withVars,d=>d.callback!==n)}})),e.set(s)},Qw=(e,t,n,s,a,c)=>(X5(e,t,n,s,a,c),{unbind:()=>J5(t,n,s)}),FB=(e,t,n,s)=>{let a=e.formatter.get(t);a&&(lk(e,t,n,s)&&(!("toggle"in a[0])||a[0].toggle)?Sw(e,t,n,s):K5(e,t,n,s))},d3=(e,t,n)=>({element:e,width:t,rows:n}),ex=(e,t)=>({element:e,cells:t}),Q5=(e,t)=>({x:e,y:t}),eD=(e,t)=>xr(e,t).bind(Cc).getOr(1),HB=(e,t,n,s,a)=>{let c=eD(a,"rowspan"),d=eD(a,"colspan"),p=e.rows;for(let b=n;b<n+c;b++){p[b]||(p[b]=ex(wf(s),[]));for(let S=t;S<t+d;S++){let D=p[b].cells;D[S]=b===n&&S===t?a:ii(a)}}},zB=(e,t,n)=>{let s=e.rows;return!!(s[n]?s[n].cells:[])[t]},$B=(e,t,n)=>{for(;zB(e,t,n);)t++;return t},tx=e=>Mt(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),m3=(e,t)=>{let n=e.rows;for(let s=0;s<n.length;s++){let a=n[s].cells;for(let c=0;c<a.length;c++)if(Qt(a[c],t))return L.some(Q5(c,s))}return L.none()},ua=(e,t,n,s,a)=>{let c=[],d=e.rows;for(let p=n;p<=a;p++){let b=d[p].cells,S=t<s?b.slice(t,s+1):b.slice(s,t+1);c.push(ex(d[p].element,S))}return c},VB=(e,t,n)=>{let s=t.x,a=t.y,c=n.x,d=n.y,p=a<d?ua(e,s,a,c,d):ua(e,s,d,c,a);return d3(e.element,tx(p),p)},UB=(e,t)=>{let n=ii(e.element),s=q.fromTag("tbody");return ml(s,t),Oo(n,s),n},tD=e=>Kt(e.rows,t=>{let n=Kt(t.cells,a=>{let c=wf(a);return Ws(c,"colspan"),Ws(c,"rowspan"),c}),s=ii(t.element);return ml(s,n),s}),g3=e=>{let t=d3(ii(e),0,[]);return Pe(gs(e,"tr"),(n,s)=>{Pe(gs(n,"td,th"),(a,c)=>{HB(t,$B(t,c,s),s,n,a)})}),d3(t.element,tx(t.rows),t.rows)},nD=e=>UB(e,tD(e)),I2=(e,t,n)=>m3(e,t).bind(s=>m3(e,n).map(a=>VB(e,s,a))),ZB=e=>xn(e,t=>fn(t)==="ul"||fn(t)==="ol"),WB=(e,t)=>xn(e,n=>fn(n)==="li"&&QS(n,t)).fold(lt([]),n=>ZB(e).map(s=>{let a=q.fromTag(fn(s)),c=us(Om(s),(d,p)=>wn(p,"list-style"));return _m(a,c),[q.fromTag("li"),a]}).getOr([])),jB=(e,t)=>{let n=Mt(t,(s,a)=>(Oo(a,s),a),e);return t.length>0?Nc([n]):n},qB=e=>Vm(e)?Mr(e).filter(Jr).fold(lt([]),t=>[e,t]):Jr(e)?[e]:[],GB=(e,t,n)=>{let s=q.fromDom(t.commonAncestorContainer),a=em(s,e),c=Lt(a,b=>n.isWrapper(fn(b))),d=WB(a,t),p=c.concat(d.length?d:qB(s));return Kt(p,ii)},oD=()=>Nc([]),KB=(e,t,n)=>jB(q.fromDom(t.cloneContents()),GB(e,t,n)),YB=(e,t)=>Ha(t,"table",_t(Qt,e)),XB=(e,t)=>YB(e,t[0]).bind(n=>{let s=t[0],a=t[t.length-1],c=g3(n);return I2(c,s,a).map(d=>Nc([nD(d)]))}).getOrThunk(oD),JB=(e,t,n)=>t.length>0&&t[0].collapsed?oD():KB(e,t[0],n),QB=(e,t,n)=>{let s=CA(t,e);return s.length>0?XB(e,s):JB(e,t,n)},F2=(e,t)=>t>=0&&t<e.length&&k1(e.charAt(t)),f3=e=>yl(e.innerText),sD=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),rD=e=>L.from(e.selection.getRng()).map(t=>{let n=L.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),s=e.getBody(),a=sD(n),c=q.fromDom(t.cloneContents());F4(c),ZC(c);let d=e.dom.add(s,a,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},c.dom),p=f3(d),b=yl(d.textContent??"");if(e.dom.remove(d),F2(b,0)||F2(b,b.length-1)){let S=n.getOr(s),D=f3(S),M=D.indexOf(p);if(M===-1)return p;{let P=F2(D,M-1),Z=F2(D,M+p.length);return(P?" ":"")+p+(Z?" ":"")}}else return p}).getOr(""),aD=(e,t)=>{let n=e.selection.getRng(),s=e.dom.create("body"),a=e.selection.getSel(),c=UC(e,ib(a)),d=t.contextual?QB(q.fromDom(e.getBody()),c,e.schema).dom:n.cloneContents();return d&&s.appendChild(d),e.selection.serializer.serialize(s,t)},iD=(e,t)=>{if(t.format==="text")return rD(e);{let n=aD(e,t);return t.format==="tree"?n:e.selection.isCollapsed()?"":n}},lD=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),e7=(e,t,n={})=>{let s=lD(n,t);return f5(e,s).fold(Ln,a=>{let c=iD(e,a);return Kk(e,c,a)})},p3=0,h3=1,cD=2,t7=(e,t)=>{let n=e.length+t.length+2,s=new Array(n),a=new Array(n),c=(D,M,P)=>({start:D,end:M,diag:P}),d=(D,M,P,Z,oe)=>{let Y=b(D,M,P,Z);if(Y===null||Y.start===M&&Y.diag===M-Z||Y.end===D&&Y.diag===D-P){let ne=D,he=P;for(;ne<M||he<Z;)ne<M&&he<Z&&e[ne]===t[he]?(oe.push([p3,e[ne]]),++ne,++he):M-D>Z-P?(oe.push([cD,e[ne]]),++ne):(oe.push([h3,t[he]]),++he)}else{d(D,Y.start,P,Y.start-Y.diag,oe);for(let ne=Y.start;ne<Y.end;++ne)oe.push([p3,e[ne]]);d(Y.end,M,Y.end-Y.diag,Z,oe)}},p=(D,M,P,Z)=>{let oe=D;for(;oe-M<Z&&oe<P&&e[oe]===t[oe-M];)++oe;return c(D,oe,M)},b=(D,M,P,Z)=>{let oe=M-D,Y=Z-P;if(oe===0||Y===0)return null;let ne=oe-Y,he=Y+oe,be=(he%2===0?he:he+1)/2;s[1+be]=D,a[1+be]=M+1;let Ce,He,qe,Ct,Vt;for(Ce=0;Ce<=be;++Ce){for(He=-Ce;He<=Ce;He+=2){for(qe=He+be,He===-Ce||He!==Ce&&s[qe-1]<s[qe+1]?s[qe]=s[qe+1]:s[qe]=s[qe-1]+1,Ct=s[qe],Vt=Ct-D+P-He;Ct<M&&Vt<Z&&e[Ct]===t[Vt];)s[qe]=++Ct,++Vt;if(ne%2!==0&&ne-Ce<=He&&He<=ne+Ce&&a[qe-ne]<=s[qe])return p(a[qe-ne],He+D-P,M,Z)}for(He=ne-Ce;He<=ne+Ce;He+=2){for(qe=He+be-ne,He===ne-Ce||He!==ne+Ce&&a[qe+1]<=a[qe-1]?a[qe]=a[qe+1]-1:a[qe]=a[qe-1],Ct=a[qe]-1,Vt=Ct-D+P-He;Ct>=D&&Vt>=P&&e[Ct]===t[Vt];)a[qe]=Ct--,Vt--;if(ne%2===0&&-Ce<=He&&He<=Ce&&a[qe]<=s[qe+ne])return p(a[qe],He+D-P,M,Z)}}return null},S=[];return d(0,e.length,0,t.length,S),S},nx=e=>It(e)?e.outerHTML:tt(e)?md.encodeRaw(e.data,!1):ud(e)?"<!--"+e.data+"-->":"",uD=e=>{let t,n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s},n7=(e,t,n)=>{let s=uD(t);if(e.hasChildNodes()&&n<e.childNodes.length){let a=e.childNodes[n];e.insertBefore(s,a)}else e.appendChild(s)},dD=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){let n=e.childNodes[t];e.removeChild(n)}},mD=(e,t)=>{let n=0;Pe(e,s=>{s[0]===p3?n++:s[0]===h3?(n7(t,s[1],n),n++):s[0]===cD&&dD(t,n)})},o7=(e,t)=>Lt(Kt(ks(e.childNodes),t?ls(yl,nx):nx),n=>n.length>0),s7=(e,t)=>{let n=Kt(ks(t.childNodes),nx);return mD(t7(n,e),t),t},r7=ni(()=>document.implementation.createHTMLDocument("undo")),a7=e=>e.querySelector("iframe")!==null,i7=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),ox=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),H2=e=>{let t=e.serializer.getTempAttrs(),n=I4(e.getBody(),t);return a7(n)?i7(o7(n,!0)):ox(yl(n.innerHTML))},sx=(e,t,n)=>{let s=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?s7(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:Ve(s)&&fC(s)?!s.isFakeCaret:!0}),s&&(e.selection.moveToBookmark(s),e.selection.scrollIntoView())},rx=e=>e.type==="fragmented"?e.fragments.join(""):e.content,gD=(e,t)=>{let n=q.fromTag("body",r7());return Cu(n,rx(t)),Pe(gs(n,"*[data-mce-bogus]"),yi),e&&Pe(gs(n,"details[open]"),s=>Ws(s,"open")),sd(n)},l7=(e,t)=>rx(e)===rx(t),fD=(e,t,n)=>gD(e,t)===gD(e,n),b3=(e,t,n)=>!t||!n?!1:l7(t,n)?!0:fD(e,t,n),z2=e=>e.get()===0,$2=(e,t,n)=>{z2(n)&&(e.typing=t)},pD=(e,t)=>{e.typing&&($2(e,!1,t),e.add())},c7=e=>{e.typing&&(e.typing=!1,e.add())},u7=(e,t,n)=>{z2(t)&&n.set(Uy(e.selection))},d7=(e,t,n,s,a,c,d)=>{let p=H2(e),b=et.extend(c||{},p);if(!z2(s)||e.removed)return null;let S=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:b,lastLevel:S,originalEvent:d}).isDefaultPrevented()||S&&b3(e.readonly,S,b))return null;t.data[n.get()]&&a.get().each(P=>{t.data[n.get()].beforeBookmark=P});let D=TS(e);if(D&&t.data.length>D){for(let P=0;P<t.data.length-1;P++)t.data[P]=t.data[P+1];t.data.length--,n.set(t.data.length)}b.bookmark=Uy(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(b),n.set(t.data.length-1);let M={level:b,lastLevel:S,originalEvent:d};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",M),e.dispatch("change",M)):e.dispatch("AddUndo",M),b},hD=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")},bD=(e,t,n,s,a)=>{if(t.transact(s)){let c=t.data[n.get()].bookmark,d=t.data[n.get()-1];sx(e,d,!0),t.transact(a)&&(t.data[n.get()-1].beforeBookmark=c)}},m7=(e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],sx(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},v3=(e,t,n,s)=>{let a;return t.typing&&(t.add(),t.typing=!1,$2(t,!1,n)),s.get()>0&&(s.set(s.get()-1),a=t.data[s.get()],sx(e,a,!0),e.setDirty(!0),e.dispatch("Undo",{level:a})),a},cf=e=>{e.clear(),e.add()},vD=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!b3(e.readonly,H2(e),t.data[0]),yD=(e,t)=>t.get()<e.data.length-1&&!e.typing,ax=(e,t,n)=>(pD(e,t),e.beforeChange(),e.ignore(n),e.add()),y3=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},CD=(e,t)=>{let n=e.dom,s=Ve(t)?t:e.getBody();Pe(n.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":let c=MT(e),d=n.getAttrib(a,"border");(!d||d==="0")&&e.hasVisual?n.addClass(a,c):n.removeClass(a,c);break;case"A":if(!n.getAttrib(a,"href")){let p=n.getAttrib(a,"name")||a.id,b=_S(e);p&&e.hasVisual?n.addClass(a,b):n.removeClass(a,b)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},C3=e=>({init:{bindEvents:wt},undoManager:{beforeChange:(t,n)=>u7(e,t,n),add:(t,n,s,a,c,d)=>d7(e,t,n,s,a,c,d),undo:(t,n,s)=>v3(e,t,n,s),redo:(t,n)=>m7(e,t,n),clear:(t,n)=>hD(e,t,n),reset:t=>cf(t),hasUndo:(t,n)=>vD(e,t,n),hasRedo:(t,n)=>yD(t,n),transact:(t,n,s)=>ax(t,n,s),ignore:(t,n)=>y3(t,n),extra:(t,n,s,a)=>bD(e,t,n,s,a)},formatter:{match:(t,n,s,a)=>lk(e,t,n,s,a),matchAll:(t,n)=>E8(e,t,n),matchNode:(t,n,s,a)=>Ed(e,t,n,s,a),canApply:t=>A8(e,t),closest:t=>T8(e,t),apply:(t,n,s)=>K5(e,t,n,s),remove:(t,n,s,a)=>Sw(e,t,n,s,a),toggle:(t,n,s)=>FB(e,t,n,s),formatChanged:(t,n,s,a,c)=>Qw(e,t,n,s,a,c)},editor:{getContent:t=>jC(e,t),setContent:(t,n)=>Yw(e,t,n),insertContent:(t,n)=>z5(e,t,n),addVisual:t=>CD(e,t)},selection:{getContent:(t,n)=>e7(e,t,n)},autocompleter:{addDecoration:wt,removeDecoration:wt},raw:{getModel:()=>L.none()}}),wD=e=>{let t=S=>At(S)?S:{},{init:n,undoManager:s,formatter:a,editor:c,selection:d,autocompleter:p,raw:b}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(S,D,M)=>s.transact(M),ignore:(S,D)=>s.ignore(D),extra:(S,D,M,P)=>s.extra(M,P)},formatter:{match:(S,D,M,P)=>a.match(S,t(D),P),matchAll:a.matchAll,matchNode:a.matchNode,canApply:S=>a.canApply(S),closest:S=>a.closest(S),apply:(S,D,M)=>a.apply(S,t(D)),remove:(S,D,M,P)=>a.remove(S,t(D)),toggle:(S,D,M)=>a.toggle(S,t(D)),formatChanged:(S,D,M,P,Z)=>a.formatChanged(D,M,P,Z)},editor:{getContent:S=>c.getContent(S),setContent:(S,D)=>({content:c.setContent(S,D),html:""}),insertContent:(S,D)=>(c.insertContent(S),""),addVisual:c.addVisual},selection:{getContent:(S,D)=>d.getContent(D)},autocompleter:{addDecoration:p.addDecoration,removeDecoration:p.removeDecoration},raw:{getModel:()=>L.some(b.getRawModel())}}},g7=()=>{let e=lt(null),t=lt("");return{init:{bindEvents:wt},undoManager:{beforeChange:wt,add:e,undo:e,redo:e,clear:wt,reset:wt,hasUndo:pn,hasRedo:pn,transact:e,ignore:wt,extra:wt},formatter:{match:pn,matchAll:lt([]),matchNode:lt(void 0),canApply:pn,closest:t,apply:wt,remove:wt,toggle:wt,formatChanged:lt({unbind:wt})},editor:{getContent:t,setContent:lt({content:"",html:""}),insertContent:lt(""),addVisual:wt},selection:{getContent:t},autocompleter:{addDecoration:wt,removeDecoration:wt},raw:{getModel:lt(L.none())}}},lm=e=>Yt(e.plugins,"rtc"),f7=e=>_n(e.plugins,"rtc").bind(t=>L.from(t.setup)),p7=e=>{let t=e;return f7(e).fold(()=>(t.rtcInstance=C3(e),L.none()),n=>(t.rtcInstance=g7(),L.some(()=>n().then(s=>(t.rtcInstance=wD(s),s.rtc.isRemote)))))},w3=e=>e.rtcInstance?e.rtcInstance:C3(e),ta=e=>{let t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},h7=(e,t,n)=>{ta(e).undoManager.beforeChange(t,n)},x3=(e,t,n,s,a,c,d)=>ta(e).undoManager.add(t,n,s,a,c,d),S3=(e,t,n,s)=>ta(e).undoManager.undo(t,n,s),xD=(e,t,n)=>ta(e).undoManager.redo(t,n),b7=(e,t,n)=>{ta(e).undoManager.clear(t,n)},SD=(e,t)=>{ta(e).undoManager.reset(t)},ix=(e,t,n)=>ta(e).undoManager.hasUndo(t,n),kD=(e,t,n)=>ta(e).undoManager.hasRedo(t,n),ED=(e,t,n,s)=>ta(e).undoManager.transact(t,n,s),v7=(e,t,n)=>{ta(e).undoManager.ignore(t,n)},y7=(e,t,n,s,a)=>{ta(e).undoManager.extra(t,n,s,a)},k3=(e,t,n,s,a)=>ta(e).formatter.match(t,n,s,a),TD=(e,t,n)=>ta(e).formatter.matchAll(t,n),AD=(e,t,n,s,a)=>ta(e).formatter.matchNode(t,n,s,a),C7=(e,t)=>ta(e).formatter.canApply(t),w7=(e,t)=>ta(e).formatter.closest(t),Fb=(e,t,n,s)=>{ta(e).formatter.apply(t,n,s)},x7=(e,t,n,s,a)=>{ta(e).formatter.remove(t,n,s,a)},S7=(e,t,n,s)=>{ta(e).formatter.toggle(t,n,s)},_D=(e,t,n,s,a,c)=>ta(e).formatter.formatChanged(t,n,s,a,c),OD=(e,t)=>w3(e).editor.getContent(t),lx=(e,t,n)=>w3(e).editor.setContent(t,n),k7=(e,t,n)=>w3(e).editor.insertContent(t,n),E7=(e,t,n)=>ta(e).selection.getContent(t,n),T7=(e,t)=>ta(e).editor.addVisual(t),DD=e=>ta(e).init.bindEvents(),A7=(e,t={})=>{let n=t.format?t.format:"html";return E7(e,n,t)},RD=(e,t,n)=>{if(Yt(e,t)){let s=Lt(e[t],a=>a!==n);s.length===0?delete e[t]:e[t]=s}};var _7=(e,t)=>{let n,s,a=(p,b)=>xn(b,S=>e.is(S,p)),c=p=>e.getParents(p,void 0,e.getRoot()),d=()=>{n={},s={},t.on("NodeChange",p=>{let b=p.element,S=c(b),D={};An(n,(M,P)=>{a(P,S).each(Z=>{s[P]||(Pe(M,oe=>{oe(!0,{node:Z,selector:P,parents:S})}),s[P]=M),D[P]=M})}),An(s,(M,P)=>{D[P]||(delete s[P],Pe(M,Z=>{Z(!1,{node:b,selector:P,parents:S})}))})})};return{selectorChangedWithUnbind:(p,b)=>(n||d(),n[p]||(n[p]=[]),n[p].push(b),a(p,c(t.selection.getStart())).each(()=>{s[p]=n[p]}),{unbind:()=>{RD(n,p,b),RD(s,p,b)}})}};let ND=e=>!!(e&&e.ownerDocument)&&La(q.fromDom(e.ownerDocument),q.fromDom(e)),O7=e=>e?ND(e.startContainer)&&ND(e.endContainer):!1,MD=(e,t,n,s)=>{let a,c,{selectorChangedWithUnbind:d}=_7(e,s),p=(Et,Gt)=>{let Eo=e.createRng();Ve(Et)&&Ve(Gt)?(Eo.setStart(Et,Gt),Eo.setEnd(Et,Gt),He(Eo),he(!1)):(Ls(e,Eo,s.getBody(),!0),He(Eo))},b=Et=>A7(s,Et),S=(Et,Gt)=>E5(s,Et,Gt),D=Et=>lh(s.getBody(),Ce(),Et),M=Et=>O4(s.getBody(),Ce(),Et),P=(Et,Gt)=>qa.getBookmark(Et,Gt),Z=Et=>qa.moveToBookmark(Et),oe=(Et,Gt)=>(QA(e,Et,Gt).each(He),Et),Y=()=>{let Et=Ce(),Gt=be();return!Et||Et.item?!1:Et.compareEndPoints?Et.compareEndPoints("StartToEnd",Et)===0:!Gt||Et.collapsed},ne=()=>{if(s.mode.isReadOnly())return!1;let Et=Ce(),Gt=s.getBody().querySelectorAll('[data-mce-selected="1"]');return Gt.length>0?Qa(Gt,Eo=>e.isEditable(Eo.parentElement)):A4(e,Et)},he=Et=>{let Gt=Ce();Gt.collapse(!!Et),He(Gt)},be=()=>t.getSelection?t.getSelection():t.document.selection,Ce=()=>{let Et,Gt=(bo,pi,Ze)=>{try{return pi.compareBoundaryPoints(bo,Ze)}catch{return-1}},Eo=t.document;if(Ve(s.bookmark)&&!Xf(s)){let bo=h4(s);if(bo.isSome())return bo.map(pi=>UC(s,[pi])[0]).getOr(Eo.createRange())}try{let bo=be();bo&&!Au(bo.anchorNode)&&(bo.rangeCount>0?Et=bo.getRangeAt(0):Et=Eo.createRange(),Et=UC(s,[Et])[0])}catch{}if(Et||(Et=Eo.createRange()),Af(Et.startContainer)&&Et.collapsed){let bo=e.getRoot();Et.setStart(bo,0),Et.setEnd(bo,0)}return a&&c&&(Gt(Et.START_TO_START,Et,a)===0&&Gt(Et.END_TO_END,Et,a)===0?Et=c:(a=null,c=null)),Et},He=(Et,Gt)=>{if(!O7(Et))return;let Eo=be();if(Et=s.dispatch("SetSelectionRange",{range:Et,forward:Gt}).range,Eo){c=Et;try{Eo.removeAllRanges(),Eo.addRange(Et)}catch{}Gt===!1&&Eo.extend&&(Eo.collapse(Et.endContainer,Et.endOffset),Eo.extend(Et.startContainer,Et.startOffset)),a=Eo.rangeCount>0?Eo.getRangeAt(0):null}if(!Et.collapsed&&Et.startContainer===Et.endContainer&&Eo?.setBaseAndExtent&&Et.endOffset-Et.startOffset<2&&Et.startContainer.hasChildNodes()){let pi=Et.startContainer.childNodes[Et.startOffset];pi&&pi.nodeName==="IMG"&&(Eo.setBaseAndExtent(Et.startContainer,Et.startOffset,Et.endContainer,Et.endOffset),(Eo.anchorNode!==Et.startContainer||Eo.focusNode!==Et.endContainer)&&Eo.setBaseAndExtent(pi,0,pi,1))}s.dispatch("AfterSetSelectionRange",{range:Et,forward:Gt})},qe=Et=>(Pb(s,e.getOuterHTML(Et)),Et),Ct=()=>WM(s.getBody(),Ce()),Vt=(Et,Gt)=>jM(e,Ce(),Et,Gt),Ie=()=>{let Et=be(),Gt=Et?.anchorNode,Eo=Et?.focusNode;if(!Et||!Gt||!Eo||Au(Gt)||Au(Eo))return!0;let bo=e.createRng(),pi=e.createRng();try{bo.setStart(Gt,Et.anchorOffset),bo.collapse(!0),pi.setStart(Eo,Et.focusOffset),pi.collapse(!0)}catch{return!0}return bo.compareBoundaryPoints(bo.START_TO_START,pi)<=0},Is={dom:e,win:t,serializer:n,editor:s,expand:(Et={type:"word"})=>He(Xc(e).expand(Ce(),Et)),collapse:he,setCursorLocation:p,getContent:b,setContent:S,getBookmark:P,moveToBookmark:Z,select:oe,isCollapsed:Y,isEditable:ne,isForward:Ie,setNode:qe,getNode:Ct,getSel:be,setRng:He,getRng:Ce,getStart:D,getEnd:M,getSelectedBlocks:Vt,normalize:()=>{let Et=Ce(),Gt=be();if(!JS(Gt)&&Gv(s)){let Eo=PC(e,Et);return Eo.each(bo=>{He(bo,Ie())}),Eo.getOr(Et)}return Et},selectorChanged:(Et,Gt)=>(d(Et,Gt),Is),selectorChangedWithUnbind:d,getScrollContainer:()=>{let Et,Gt=e.getRoot();for(;Gt&&Gt.nodeName!=="BODY";){if(Gt.scrollHeight>Gt.clientHeight){Et=Gt;break}Gt=Gt.parentNode}return Et},scrollIntoView:(Et,Gt)=>{Ve(Et)?JA(s,Et,Gt):bb(s,Ce(),Gt)},placeCaretAt:(Et,Gt)=>He(ZA(Et,Gt,s.getDoc())),getBoundingClientRect:()=>{let Et=Ce();return Et.collapsed?Fe.fromRangeStart(Et).getClientRects()[0]:Et.getBoundingClientRect()},destroy:()=>{t=a=c=null,ru.destroy()}},qa=R1(Is),ru=UA(Is,s);return Is.bookmarkManager=qa,Is.controlSelection=ru,Is},es=(e,t,n)=>{t.addNodeFilter("br",(s,a,c)=>{let d=et.extend({},n.getBlockElements()),p=n.getNonEmptyElements(),b=n.getWhitespaceElements();d.body=1;let S=D=>D.name in d||D0(n,D);for(let D=0,M=s.length;D<M;D++){let P=s[D],Z=P.parent;if(Z&&S(Z)&&P===Z.lastChild){let oe=P.prev;for(;oe;){let Y=oe.name;if(Y!=="span"||oe.attr("data-mce-type")!=="bookmark"){Y==="br"&&(P=null);break}oe=oe.prev}if(P&&(P.remove(),x2(n,p,b,Z))){let Y=n.getElementRule(Z.name);Y&&(Y.removeEmpty?Z.remove():Y.paddEmpty&&wk(e,c,S,Z))}}else{let oe=P;for(;Z&&Z.firstChild===oe&&Z.lastChild===oe&&(oe=Z,!d[Z.name]);)Z=Z.parent;if(oe===Z){let Y=new Ai("#text",3);Y.value=ws,P.replace(Y)}}}})},BD=(e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,a)=>{let c=s.length;for(;c--;){let d=s[c];d.attr("tabindex",d.attr("data-mce-tabindex")),d.attr(a,null)}}),e.addAttributeFilter("src,href,style",(s,a)=>{let c="data-mce-"+a,d=t.url_converter,p=t.url_converter_scope,b=s.length;for(;b--;){let S=s[b],D=S.attr(c);D!==void 0?(S.attr(a,D.length>0?D:null),S.attr(c,null)):(D=S.attr(a),a==="style"?D=n.serializeStyle(n.parseStyle(D),S.name):d&&(D=d.call(p,D,a,S.name)),S.attr(a,D.length>0?D:null))}}),e.addAttributeFilter("class",s=>{let a=s.length;for(;a--;){let c=s[a],d=c.attr("class");d&&(d=d.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),c.attr("class",d.length>0?d:null))}}),e.addAttributeFilter("data-mce-type",(s,a,c)=>{let d=s.length;for(;d--;){let p=s[d];p.attr("data-mce-type")==="bookmark"&&!c.cleanup&&(L.from(p.firstChild).exists(S=>!zf(S.value??""))?p.unwrap():p.remove())}}),e.addNodeFilter("script,style",(s,a)=>{let c=p=>p.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,""),d=s.length;for(;d--;){let p=s[d],b=p.firstChild,S=b?.value??"";if(a==="script"){let D=p.attr("type");D&&p.attr("type",D==="mce-no/type"?null:D.replace(/^mce\-/,"")),t.element_format==="xhtml"&&b&&S.length>0&&(b.value=`// <![CDATA[
`+c(S)+`
// ]]>`)}else t.element_format==="xhtml"&&b&&S.length>0&&(b.value=`<!--
`+c(S)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let a=s.length;for(;a--;){let c=s[a],d=c.value;t.preserve_cdata&&d?.indexOf("[CDATA[")===0?(c.name="#cdata",c.type=4,c.value=n.decode(d.replace(/^\[CDATA\[|\]\]$/g,""))):d?.indexOf("mce:protected ")===0&&(c.name="#text",c.type=3,c.raw=!0,c.value=unescape(d).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,a)=>{let c=s.length;for(;c--;){let d=s[c];d.type===7?d.remove():d.type===1&&a==="input"&&!d.attr("type")&&d.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{Pe(s,a=>{a.attr("data-mce-type")==="format-caret"&&(a.isEmpty(e.schema.getNonEmptyElements())?a.remove():a.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(s,a)=>{let c=s.length;for(;c--;)s[c].attr(a,null)}),t.remove_trailing_brs&&es(t,e,e.schema)},E3=e=>{let t=s=>s?.name==="br",n=e.lastChild;if(t(n)){let s=n.prev;t(s)&&(n.remove(),s.remove())}},PD=(e,t,n)=>{let s,a=e.dom,c=t.cloneNode(!0),d=document.implementation;if(d.createHTMLDocument){let p=d.createHTMLDocument("");et.each(c.nodeName==="BODY"?c.childNodes:[c],b=>{p.body.appendChild(p.importNode(b,!0))}),c.nodeName!=="BODY"?c=p.body.firstChild:c=p.body,s=a.doc,a.doc=p}return a6(e,{...n,node:c}),s&&(a.doc=s),c},LD=(e,t)=>Ve(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,cx=(e,t,n)=>LD(e,n)?PD(e,t,n):t,D7=(e,t,n)=>{et.inArray(t,n)===-1&&(e.addAttributeFilter(n,(s,a)=>{let c=s.length;for(;c--;)s[c].attr(a,null)}),t.push(n))},T3=(e,t,n)=>!t.no_events&&e?lT(e,{...t,content:n}).content:n,R7=(e,t,n)=>{let s=yl(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||a1(q.fromDom(t))?s:et.trim(s)},N7=(e,t,n)=>{let s=n.selection?{forced_root_block:!1,...n}:n,a=e.parse(t,s);return E3(a),a},ID=(e,t,n)=>of(e,t).serialize(n),M7=(e,t,n,s,a)=>{let c=ID(t,n,s);return T3(e,a,c)},B7=(e,t)=>{let n=["data-mce-selected"],s={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},a=t&&t.dom?t.dom:Co.DOM,c=t&&t.schema?t.schema:Zd(s),d=af(s,c);BD(d,s,a);let p=(b,S={})=>{let{indent:D,entity_encoding:M,...P}=S,Z={format:"html",...P},oe=cx(t,b,Z),Y=R7(a,oe,Z),ne=N7(d,Y,Z);if(Z.format==="tree")return ne;let he={...s,...Ve(D)?{indent:D}:{},...Ve(M)?{entity_encoding:M}:{}};return M7(t,he,c,ne,Z)};return{schema:c,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:p,addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:_t(D7,d,n),getTempAttrs:lt(n),getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters,removeNodeFilter:d.removeNodeFilter,removeAttributeFilter:d.removeAttributeFilter}},A3=(e,t)=>{let n=B7(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},P7="html",L7=(e,t)=>({...e,format:t,get:!0,getInner:!0}),I7=(e,t={})=>{let n=t.format?t.format:P7,s=L7(t,n);return f5(e,s).fold(Ln,a=>{let c=OD(e,a);return Kk(e,c,a)})},_3="html",FD=(e,t)=>({format:_3,...e,set:!0,content:t}),V2=(e,t,n={})=>{let s=FD(n,t);zw(e,s).each(a=>{let c=lx(e,a.content,a);$w(e,c.html,a)})},U2=Co.DOM,F7=e=>{U2.setStyle(e.id,"display",e.orgDisplay)},Z2=e=>L.from(e).each(t=>t.destroy()),HD=e=>{let t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;let n=e.selection;if(n){let s=n.dom;t.selection=n.win=n.dom=s.doc=null}},ux=e=>{let t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),U2.unbind(t,"submit reset",e.formEventDelegate))},O3=e=>{if(!e.removed){let{_selectionOverrides:t,editorUpload:n}=e,s=e.getBody(),a=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Ve(a?.nextSibling)&&U2.remove(a.nextSibling),i6(e),e.editorManager.remove(e),!e.inline&&s&&F7(e),l6(e),U2.remove(e.getContainer()),Z2(t),Z2(n),e.destroy()}},D3=(e,t)=>{let{selection:n,dom:s}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Z2(n),Z2(s)),ux(e),HD(e),e.destroyed=!0}},dx=(()=>{let e={};return{add:(a,c)=>{e[a]=c},get:a=>e[a]?e[a]:{icons:{}},has:a=>Yt(e,a)}})(),rg=ui.ModelManager,Hb=(e,t)=>t.dom[e],e0=(e,t)=>parseInt(fl(t,e),10),R3=_t(Hb,"clientWidth"),zD=_t(Hb,"clientHeight"),$D=_t(e0,"margin-top"),N3=_t(e0,"margin-left"),VD=e=>e.dom.getBoundingClientRect(),UD=(e,t,n)=>{let s=R3(e),a=zD(e);return t>=0&&n>=0&&t<=s&&n<=a},ZD=(e,t,n,s)=>{let a=VD(t),c=e?a.left+t.dom.clientLeft+N3(t):0,d=e?a.top+t.dom.clientTop+$D(t):0,p=n-c,b=s-d;return{x:p,y:b}},M3=(e,t,n)=>{let s=q.fromDom(e.getBody()),a=e.inline?s:Cp(s),c=ZD(e.inline,a,t,n);return UD(a,c.x,c.y)},WD=e=>L.from(e).map(q.fromDom),jD=e=>{let t=e.inline?e.getBody():e.getContentAreaContainer();return WD(t).map(wu).getOr(!1)};var B3=()=>{let e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};let qD=e=>{let t=[],n=()=>{let P=e.theme;return P&&P.getNotificationManagerImpl?P.getNotificationManagerImpl():B3()},s=()=>L.from(t[0]),a=(P,Z)=>P.type===Z.type&&P.text===Z.text&&!P.progressBar&&!P.timeout&&!Z.progressBar&&!Z.timeout,c=()=>{s().each(P=>{P.reposition()})},d=P=>{t.push(P)},p=P=>{Ao(t,Z=>Z===P).each(Z=>{t.splice(Z,1)})},b=(P,Z=!0)=>e.removed||!jD(e)?{}:(Z&&e.dispatch("BeforeOpenNotification",{notification:P}),xn(t,oe=>a(n().getArgs(oe),P)).getOrThunk(()=>{e.editorManager.setActive(e);let oe=n().open(P,()=>{p(oe)},()=>RC(e));return d(oe),c(),e.dispatch("OpenNotification",{notification:{...oe}}),oe})),S=()=>{s().each(P=>{n().close(P),p(P),c()})},D=lt(t);return(P=>{P.on("SkinLoaded",()=>{let Z=D6(P);Z&&b({text:Z,type:"warning",timeout:0},!1),c()}),P.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(c)}),P.on("remove",()=>{Pe(t.slice(),Z=>{n().close(Z)})}),P.on("keydown",Z=>{let oe=Z.key?.toLowerCase()==="f12"||Z.keyCode===123;Z.altKey&&oe&&(Z.preventDefault(),s().map(Y=>q.fromDom(Y.getEl())).each(Y=>ia(Y)))})})(e),{open:b,close:S,getNotifications:D}},t0=ui.PluginManager,Ch=ui.ThemeManager;var GD=()=>{let e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};let j2=e=>{let t=[],n=()=>{let ne=e.theme;return ne&&ne.getWindowManagerImpl?ne.getWindowManagerImpl():GD()},s=(ne,he)=>(...be)=>he?he.apply(ne,be):void 0,a=ne=>{e.dispatch("OpenWindow",{dialog:ne})},c=ne=>{e.dispatch("CloseWindow",{dialog:ne})},d=(ne,he)=>{t.push({instanceApi:ne,triggerElement:he}),a(ne)},p=ne=>{c(ne);let he=Rt(t,({instanceApi:be,triggerElement:Ce})=>be===ne?Ce:L.none());t=Lt(t,({instanceApi:be})=>be!==ne),t.length===0?e.focus():he.filter(wu).each(ia)},b=()=>L.from(t[t.length-1]),S=ne=>{e.editorManager.setActive(e),AC(e);let he=ri();e.ui.show();let be=ne();return d(be,he),be},D=(ne,he)=>S(()=>n().open(ne,he,p)),M=ne=>S(()=>n().openUrl(ne,p)),P=ne=>{t.length!==0&&ne.each(he=>ia(he))},Z=(ne,he,be)=>{let Ce=ri(),He=n();He.alert(ne,s(be||He,()=>{P(Ce),he?.()}))},oe=(ne,he,be)=>{let Ce=ri(),He=n();He.confirm(ne,s(be||He,qe=>{P(Ce),he?.(qe)}))},Y=()=>{b().each(({instanceApi:ne})=>{n().close(ne),p(ne)})};return e.on("remove",()=>{Pe(t,({instanceApi:ne})=>{n().close(ne)})}),{open:D,openUrl:M,alert:Z,confirm:oe,close:Y}},P3=(e,t)=>{e.notificationManager.open({type:"error",text:t})},q2=(e,t)=>{e._skinLoaded?P3(e,t):e.on("SkinLoaded",()=>{P3(e,t)})},H7=(e,t)=>{q2(e,ic.translate(["Failed to upload image: {0}",t]))},n0=(e,t,n)=>{tC(e,t,{message:n}),console.error(n)},o0=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,z7=(e,t,n)=>{n0(e,"PluginLoadError",o0("plugin",t,n))},KD=(e,t,n)=>{n0(e,"IconsLoadError",o0("icons",t,n))},YD=(e,t,n)=>{n0(e,"LanguageLoadError",o0("language",t,n))},XD=(e,t,n)=>{n0(e,"ThemeLoadError",o0("theme",t,n))},$7=(e,t,n)=>{n0(e,"ModelLoadError",o0("model",t,n))},G2=(e,t)=>{n0(e,"LicenseKeyManagerLoadError",o0("license key manager",t))},V7=(e,t)=>{n0(e,"ComponentLoadError",o0("component",t))},JD=(e,t,n)=>{let s=ic.translate(["Failed to initialize plugin: {0}",t]);tC(e,"PluginLoadError",{message:s}),s0(s,n),q2(e,s)},s0=(e,...t)=>{let n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},L3=new WeakMap,QD=e=>{if(L3.has(e))return;L3.set(e,!0);let t=()=>{e.on("SwitchMode",s=>{let{mode:a}=s;a!=="readonly"&&e.mode.set("readonly")})},n=()=>{e.on("DisabledStateChange",s=>{let{state:a}=s;a||s.preventDefault()},!0)};e.initialized?(e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)):e.on("init",()=>{e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)}),n(),t()},eR=(e,t)=>{let{type:n,message:s}=t;e.notificationManager.open({type:n,text:s})},U7=e=>{switch(e){case"error":return console.error;case"info":return console.info;case"warn":return console.warn;case"log":default:return console.log}},I3=e=>{U7(e.type)(e.message)},zb=(e,t)=>{let{console:n,editor:s}=t;Ve(s)&&(e._skinLoaded?eR(e,s):e.on("SkinLoaded",()=>{eR(e,s)})),Ve(n)&&I3(n)},K2="Read more: https://www.tiny.cloud/docs/tinymce/latest/license-key/",tR="Make sure to provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms.",W7=e=>{let t="The editor is disabled because a TinyMCE license key has not been provided.";zb(e,{console:{type:"error",message:[`${t}`,tR,K2].join(" ")},editor:{type:"warning",message:`${t}`}})},nR=(e,t)=>{let n=`${t==="online"?"API":"license"} key`,s=`The editor is disabled because the TinyMCE ${n} could not be validated.`;zb(e,{console:{type:"error",message:[`${s}`,`The TinyMCE Commercial License Key Manager plugin is required for the provided ${n} to be validated but could not be loaded.`,K2].join(" ")},editor:{type:"warning",message:`${s}`}})},j7=(e,t,n)=>{let s=`The "${t}" plugin requires a valid TinyMCE license key.`;zb(e,{console:{type:"error",message:[`${s}`,K2].join(" ")},...n?{}:{editor:{type:"warning",message:"One or more premium plugins are disabled due to license key restrictions."}}})},F3="licensekeymanager",H3=e=>pt(KT(e))?"online":"offline",mx=e=>{let t=NS(e)?.toLowerCase();return t==="gpl"?"gpl":os(t)?"no_key":"non_gpl"},z3=e=>{let t=H3(e),n=mx(e),s=new Set([...v1(e),...zr(rC(e))]).has(F3);return n!=="gpl"||t==="online"||s?{type:"use_plugin",onlineStatus:t,licenseKeyType:n,forcePlugin:s}:{type:"use_gpl",onlineStatus:t,licenseKeyType:n,forcePlugin:s}},$3=e=>t=>{let n=!1;return{validate:s=>{let{plugin:a}=s,c=pt(a);return c&&(j7(t,a,n),n=!0),Promise.resolve(e&&!c)}}},q7=$3(!1),oR=$3(!0),gx="manager",sR=F3,V3=(()=>{let e=ui();return{load:(a,c)=>{if(z3(a).type==="use_plugin"){let b=_n(rC(a),sR).map(wa).filter(Na).getOr(`plugins/${sR}/plugin${c}.js`);e.load(gx,b).catch(()=>{G2(a,b)})}},add:a=>{e.add(gx,a)},init:a=>{let c=b=>{Object.defineProperty(a,"licenseKeyManager",{value:b,writable:!1,configurable:!1,enumerable:!0})},d=z3(a),p=e.get(gx);if(Ve(p)){let b=p(a,e.urls[gx]);c(b)}else switch(d.type){case"use_gpl":{c(oR(a));break}case"use_plugin":{QD(a),c(q7(a)),d.onlineStatus==="offline"&&d.licenseKeyType==="no_key"?W7(a):nR(a,d.onlineStatus);break}}a.licenseKeyManager.validate({})}}})(),aR=e=>{L.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},Y2=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},iR=(e,t)=>{Y2(e,"StyleWithCSS",t),Y2(e,"enableInlineTableEditing",t),Y2(e,"enableObjectResizing",t)},lR=e=>{e.selection.setRng(e.selection.getRng())},U3=(e,t,n)=>{Gr(e,t)&&!n?Yo(e,t):n&&za(e,t)},Z3=e=>{let t=q.fromDom(e.getBody());U3(t,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),aR(e)},cR=e=>{let t=q.fromDom(e.getBody());U3(t,"mce-content-readonly",!1),e.hasEditableRoot()&&Er(t,!0),iR(e,!1),RC(e)&&e.focus(),lR(e),e.nodeChanged()},cp=e=>lC(e),up="data-mce-contenteditable",G7=e=>{Pe(gs(e,'*[contenteditable="true"]'),t=>{Pr(t,up,"true"),Er(t,!1)})},W3=e=>{Pe(gs(e,`*[${up}="true"]`),t=>{Ws(t,up),Er(t,!0)})},uR=(e,t)=>{let n=q.fromDom(e.getBody());t?(Z3(e),Er(n,!1),G7(n)):(W3(n),cR(e))},dR=e=>{e.serializer?mR(e):e.on("PreInit",()=>{mR(e)})},mR=e=>{e.parser.addAttributeFilter("contenteditable",t=>{cp(e)&&Pe(t,n=>{n.attr(up,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(up,t=>{cp(e)&&Pe(t,n=>{n.attr("contenteditable",n.attr(up))})}),e.serializer.addTempAttr(up)},K7=e=>e.type==="click",gR=["copy"],j3=e=>In(gR,e.type),Y7=(e,t)=>Po(t,"a",s=>Qt(s,q.fromDom(e.getBody()))).bind(s=>xr(s,"href")),fx=(e,t)=>Lg(t,"details",s=>Qt(s,q.fromDom(e.getBody()))),X7=(e,t)=>{if(K7(t)&&!St.metaKeyPressed(t)){let n=q.fromDom(t.target);Y7(e,n).fold(()=>{fx(e,n)&&t.preventDefault()},s=>{if(t.preventDefault(),/^#/.test(s)){let a=e.dom.select(`${s},[name="${Dd(s,"#")}"]`);a.length&&e.selection.scrollIntoView(a[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else j3(t)&&e.dispatch(t.type,t)},J7=e=>{e.on("ShowCaret ObjectSelected",t=>{cp(e)&&t.preventDefault()}),e.on("DisabledStateChange",t=>{t.isDefaultPrevented()||uR(e,t.state)})},Q7=e=>{dR(e),J7(e)},fR=e=>/^[a-z0-9\-]+$/i.test(e),px=e=>"content/"+e+"/content.css",eP=e=>tinymce.Resource.has(px(e)),pR=e=>q3(e,kS(e)),X2=e=>q3(e,ES(e)),q3=(e,t)=>{let n=e.editorManager.baseURL+"/skins/content",a=`content${e.editorManager.suffix}.css`;return Kt(t,c=>eP(c)?c:fR(c)&&!e.inline?`${n}/${c}/${a}`:e.documentBaseURI.toAbsolute(c))},tP=e=>{e.contentCSS=e.contentCSS.concat(pR(e),X2(e))},hR=e=>e?ks(e.getElementsByTagName("img")):[],bR=(e,t)=>{let n={};return{findAll:(a,c=so)=>{let d=Lt(hR(a),b=>{let S=b.src;return b.hasAttribute("data-mce-bogus")||b.hasAttribute("data-mce-placeholder")||!S||S===En.transparentSrc?!1:wn(S,"blob:")?!e.isUploaded(S)&&c(b):wn(S,"data:")?c(b):!1}),p=Kt(d,b=>{let S=b.src;if(Yt(n,S))return n[S].then(D=>pt(D)?D:{image:b,blobInfo:D.blobInfo});{let D=pB(t,S).then(M=>(delete n[S],{image:b,blobInfo:M})).catch(M=>(delete n[S],M));return n[S]=D,D}});return Promise.all(p)}}},vR=()=>{let n={},s=(P,Z)=>({status:P,resultUri:Z}),a=P=>P in n;return{hasBlobUri:a,getResultUri:P=>{let Z=n[P];return Z?Z.resultUri:null},isPending:P=>a(P)?n[P].status===1:!1,isUploaded:P=>a(P)?n[P].status===2:!1,markPending:P=>{n[P]=s(1,null)},markUploaded:(P,Z)=>{n[P]=s(2,Z)},removeFailed:P=>{delete n[P]},destroy:()=>{n={}}}},nP=0,oP=()=>{let e=()=>Math.round(to()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},sP=e=>e+nP+++oP(),yR=()=>{let e=[],t=M=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[M.toLowerCase()]||"dat",n=(M,P,Z,oe,Y)=>{if(pt(M))return s({id:M,name:oe,filename:Y,blob:P,base64:Z});if(At(M))return s(M);throw new Error("Unknown input type")},s=M=>{if(!M.blob||!M.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");let P=M.id||sP("blobid"),Z=M.name||P,oe=M.blob;return{id:lt(P),name:lt(Z),filename:lt(M.filename||Z+"."+t(oe.type)),blob:lt(oe),base64:lt(M.base64),blobUri:lt(M.blobUri||URL.createObjectURL(oe)),uri:lt(M.uri)}},a=M=>{d(M.id())||e.push(M)},c=M=>xn(e,M).getOrUndefined(),d=M=>c(P=>P.id()===M);return{create:n,add:a,get:d,getByUri:M=>c(P=>P.blobUri()===M),getByData:(M,P)=>c(Z=>Z.base64()===M&&Z.blob().type===P),findFirst:c,removeByUri:M=>{e=Lt(e,P=>P.blobUri()===M?(URL.revokeObjectURL(P.blobUri()),!1):!0)},destroy:()=>{Pe(e,M=>{URL.revokeObjectURL(M.blobUri())}),e=[]}}},G3=(e,t)=>{let n={},s=(Y,ne)=>Y?Y.replace(/\/$/,"")+"/"+ne.replace(/^\//,""):ne,a=(Y,ne)=>new Promise((he,be)=>{let Ce=new XMLHttpRequest;Ce.open("POST",t.url),Ce.withCredentials=t.credentials,Ce.upload.onprogress=qe=>{ne(qe.loaded/qe.total*100)},Ce.onerror=()=>{be("Image upload failed due to a XHR Transport error. Code: "+Ce.status)},Ce.onload=()=>{if(Ce.status<200||Ce.status>=300){be("HTTP Error: "+Ce.status);return}let qe=JSON.parse(Ce.responseText);if(!qe||!pt(qe.location)){be("Invalid JSON: "+Ce.responseText);return}he(s(t.basePath,qe.location))};let He=new FormData;He.append("file",Y.blob(),Y.filename()),Ce.send(He)}),c=zt(t.handler)?t.handler:a,d=()=>new Promise(Y=>{Y([])}),p=(Y,ne)=>({url:ne,blobInfo:Y,status:!0}),b=(Y,ne)=>({url:"",blobInfo:Y,status:!1,error:ne}),S=(Y,ne)=>{et.each(n[Y],he=>{he(ne)}),delete n[Y]},D=(Y,ne,he)=>(e.markPending(Y.blobUri()),new Promise(be=>{let Ce,He;try{let qe=()=>{Ce&&(Ce.close(),He=wt)},Ct=Ie=>{qe();let _e=pt(Ie)?Ie:Ie.url;e.markUploaded(Y.blobUri(),_e),S(Y.blobUri(),p(Y,_e)),be(p(Y,_e))},Vt=Ie=>{qe(),e.removeFailed(Y.blobUri()),S(Y.blobUri(),b(Y,Ie)),be(b(Y,Ie))};He=Ie=>{Ie<0||Ie>100||L.from(Ce).orThunk(()=>L.from(he).map(Ot)).each(_e=>{Ce=_e,_e.progressBar.value(Ie)})},ne(Y,He).then(Ct,Ie=>{Vt(pt(Ie)?{message:Ie}:Ie)})}catch(qe){be(b(Y,qe))}})),M=Y=>Y===a,P=Y=>{let ne=Y.blobUri();return new Promise(he=>{n[ne]=n[ne]||[],n[ne].push(he)})},Z=(Y,ne)=>(Y=et.grep(Y,he=>!e.isUploaded(he.blobUri())),Promise.all(et.map(Y,he=>e.isPending(he.blobUri())?P(he):D(he,c,ne))));return{upload:(Y,ne)=>!t.url&&M(c)?d():Z(Y,ne)}},K3=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Y3=(e,t)=>G3(t,{url:kT(e),basePath:x6(e),credentials:S6(e),handler:k6(e)}),CR=e=>{let t=vR(),n=Y3(e,t);return{upload:(s,a=!0)=>n.upload(s,a?K3(e):void 0)}},wR=(e,t)=>e.dom.isEmpty(t.dom)&&Ve(e.schema.getTextBlockElements()[fn(t)]),rP=e=>t=>{wR(e,t)&&Oo(t,q.fromHtml('<br data-mce-bogus="1" />'))},xR=e=>{let t=yR(),n,s,a=vR(),c=[],d=Ce=>He=>e.selection?Ce(He):[],p=Ce=>Ce+(Ce.indexOf("?")===-1?"?":"&")+new Date().getTime(),b=(Ce,He,qe)=>{let Ct=0;do Ct=Ce.indexOf(He,Ct),Ct!==-1&&(Ce=Ce.substring(0,Ct)+qe+Ce.substr(Ct+He.length),Ct+=qe.length-He.length+1);while(Ct!==-1);return Ce},S=(Ce,He,qe)=>{let Ct=`src="${qe}"${qe===En.transparentSrc?' data-mce-placeholder="1"':""}`;return Ce=b(Ce,`src="${He}"`,Ct),Ce=b(Ce,'data-mce-src="'+He+'"','data-mce-src="'+qe+'"'),Ce},D=(Ce,He)=>{Pe(e.undoManager.data,qe=>{qe.type==="fragmented"?qe.fragments=Kt(qe.fragments,Ct=>S(Ct,Ce,He)):qe.content=S(qe.content,Ce,He)})},M=(Ce,He)=>{let qe=e.convertURL(He,"src");D(Ce.src,He),Ea(q.fromDom(Ce),{src:xT(e)?p(He):He,"data-mce-src":qe})},P=()=>(n||(n=Y3(e,a)),ne().then(d(Ce=>{let He=Kt(Ce,qe=>qe.blobInfo);return n.upload(He,K3(e)).then(d(qe=>{let Ct=[],Vt=!1,Ie=Kt(qe,(_e,ze)=>{let{blobInfo:yt,image:mn}=Ce[ze],gn=!1;return _e.status&&ST(e)?(_e.url&&!mr(mn.src,_e.url)&&(Vt=!0),t.removeByUri(mn.src),lm(e)||M(mn,_e.url)):_e.error&&(_e.error.remove&&(D(mn.src,En.transparentSrc),Ct.push(mn),gn=!0),H7(e,_e.error.message)),{element:mn,status:_e.status,uploadUri:_e.url,blobInfo:yt,removed:gn}});return Ct.length>0&&!lm(e)?e.undoManager.transact(()=>{Pe(ms(Ct),_e=>{let ze=Mr(_e);Ko(_e),ze.each(rP(e)),t.removeByUri(_e.dom.src)})}):Vt&&e.undoManager.dispatchChange(),Ie}))}))),Z=()=>wT(e)?P():Promise.resolve([]),oe=Ce=>Qa(c,He=>He(Ce)),Y=Ce=>{c.push(Ce)},ne=()=>(s||(s=bR(a,t)),s.findAll(e.getBody(),oe).then(d(Ce=>{let He=Lt(Ce,qe=>pt(qe)?(q2(e,qe),!1):qe.uriType!=="blob");return lm(e)||Pe(He,qe=>{D(qe.image.src,qe.blobInfo.blobUri()),qe.image.src=qe.blobInfo.blobUri(),qe.image.removeAttribute("data-mce-src")}),He}))),he=()=>{t.destroy(),a.destroy(),s=n=null},be=Ce=>Ce.replace(/src="(blob:[^"]+)"/g,(He,qe)=>{let Ct=a.getResultUri(qe);if(Ct)return'src="'+Ct+'"';let Vt=t.getByUri(qe);return Vt||(Vt=Mt(e.editorManager.get(),(Ie,_e)=>Ie||_e.editorUpload&&_e.editorUpload.blobCache.getByUri(qe),void 0)),Vt?'src="data:'+Vt.blob().type+";base64,"+Vt.base64()+'"':He});return e.on("SetContent",()=>{wT(e)?Z():ne()}),e.on("RawSaveContent",Ce=>{Ce.content=be(Ce.content)}),e.on("GetContent",Ce=>{Ce.source_view||Ce.format==="raw"||Ce.format==="tree"||(Ce.content=be(Ce.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Ce=>{Pe(Ce,He=>{let qe=He.attr("src");if(!qe||t.getByUri(qe))return;let Ct=a.getResultUri(qe);Ct&&He.attr("src",Ct)})})}),{blobCache:t,addFilter:Y,uploadImages:P,uploadImagesAuto:Z,scanForImages:ne,destroy:he}},SR=e=>{let t=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:a=>{t.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:a=>{t.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{let a={inline:"span",styles:{textDecoration:"line-through"},exact:!0},c={inline:"strike",remove:"all",preserve_attributes:["class","style"]},d={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[d,a,c]:[a,d,c]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"},remove_similar:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(a,c,d)=>It(a)&&a.hasAttribute("href"),onformat:(a,c,d)=>{et.each(d,(p,b)=>{t.setAttrib(a,b,p)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":a=>a?.customValue??null}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return et.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),a=>{s[a]={block:a,remove:"all"}}),s},X3={remove_similar:!0,inherit:!1},$b={selector:"td,th",...X3},aP={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...$b},tablecellverticalalign:{styles:{"vertical-align":"%value"},...$b},tablecellbordercolor:{styles:{borderColor:"%value"},...$b},tablecellclass:{classes:["%value"],...$b},tableclass:{selector:"table",classes:["%value"],...X3},tablecellborderstyle:{styles:{borderStyle:"%value"},...$b},tablecellborderwidth:{styles:{borderWidth:"%value"},...$b}},uf=lt(aP),kR=e=>{let t={},n=d=>Ve(d)?t[d]:t,s=d=>Yt(t,d),a=(d,p)=>{d&&(pt(d)?(ht(p)||(p=[p]),Pe(p,b=>{ns(b.deep)&&(b.deep=!Ji(b)),ns(b.split)&&(b.split=!Ji(b)||ca(b)),ns(b.remove)&&Ji(b)&&!ca(b)&&(b.remove="none"),Ji(b)&&ca(b)&&(b.mixed=!0,b.block_expand=!0),pt(b.classes)&&(b.classes=b.classes.split(/\s+/))}),t[d]=p):An(d,(b,S)=>{a(S,b)}))},c=d=>(d&&t[d]&&delete t[d],t);return a(SR(e)),a(uf()),a(N6(e)),{get:n,has:s,register:a,unregister:c}},J2=et.each,nu=Co.DOM,Vb=e=>Ve(e)&&At(e),ER=(e,t)=>{let n=t&&t.schema||Zd({}),s=(b,S)=>{S.classes.length>0&&nu.addClass(b,S.classes.join(" ")),nu.setAttribs(b,S.attrs)},a=b=>{let S=pt(b)?{name:b,classes:[],attrs:{}}:b,D=nu.create(S.name);return s(D,S),D},c=(b,S)=>{let M=n.getElementRule(b.nodeName.toLowerCase())?.parentsRequired;return M&&M.length?S&&In(M,S)?S:M[0]:!1},d=(b,S,D)=>{let M,P=S[0],Z=Vb(P)?P.name:void 0,oe=c(b,Z);if(oe)Z===oe?(M=P,S=S.slice(1)):M=oe;else if(P)M=P,S=S.slice(1);else if(!D)return b;let Y=M?a(M):nu.create("div");Y.appendChild(b),D&&et.each(D,he=>{let be=a(he);Y.insertBefore(be,b)});let ne=Vb(M)?M.siblings:void 0;return d(Y,S,ne)},p=nu.create("div");if(e.length>0){let b=e[0],S=a(b),D=Vb(b)?b.siblings:void 0;p.appendChild(d(S,e.slice(1),D))}return p},TR=e=>{e=et.trim(e);let t="div",n={name:t,classes:[],attrs:{},selector:e};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,a,c,d,p)=>{switch(a){case"#":n.attrs.id=c;break;case".":n.classes.push(c);break;case":":et.inArray("checked disabled enabled read-only required".split(" "),c)!==-1&&(n.attrs[c]=c);break}if(d==="["){let b=p.match(/([\w\-]+)(?:\=\"([^\"]+))?/);b&&(n.attrs[b[1]]=b[2])}return""})),n.name=t||"div",n},iP=e=>pt(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),et.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{let n=et.map(t.split(/(?:~\+|~|\+)/),TR),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()):[],AR=(e,t)=>{let n="",s=M6(e);if(s==="")return"";let a=P=>pt(P)?P.replace(/%(\w+)/g,""):"",c=(P,Z)=>nu.getStyle(Z??e.getBody(),P,!0);if(pt(t)){let P=e.formatter.get(t);if(!P)return"";t=P[0]}if("preview"in t){let P=t.preview;if(P===!1)return"";s=P||s}let d=t.block||t.inline||"span",p,b=iP(t.selector);b.length>0?(b[0].name||(b[0].name=d),d=t.selector,p=ER(b,e)):p=ER([d],e);let S=nu.select(d,p)[0]||p.firstChild;J2(t.styles,(P,Z)=>{let oe=a(P);oe&&nu.setStyle(S,Z,oe)}),J2(t.attributes,(P,Z)=>{let oe=a(P);oe&&nu.setAttrib(S,Z,oe)}),J2(t.classes,P=>{let Z=a(P);nu.hasClass(S,Z)||nu.addClass(S,Z)}),e.dispatch("PreviewFormats"),nu.setStyles(p,{position:"absolute",left:-65535}),e.getBody().appendChild(p);let D=c("fontSize"),M=/px$/.test(D)?parseInt(D,10):0;return J2(s.split(" "),P=>{let Z=c(P,S);if(!(P==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(Z)&&(Z=c(P),Mf(Z).toLowerCase()==="#ffffff"))&&!(P==="color"&&Mf(Z).toLowerCase()==="#000000")){if(P==="font-size"&&/em|%$/.test(Z)){if(M===0)return;Z=parseFloat(Z)/(/%$/.test(Z)?100:1)*M+"px"}P==="border"&&Z&&(n+="padding:0 2px;"),n+=P+":"+Z+";"}}),e.dispatch("AfterPreviewFormats"),nu.remove(p),n},lP=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},J3=e=>{let t=kR(e),n=Us({});return lP(e),I8(e),lm(e)||IB(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(s,a,c)=>{Fb(e,s,a,c)},remove:(s,a,c,d)=>{x7(e,s,a,c,d)},toggle:(s,a,c)=>{S7(e,s,a,c)},match:(s,a,c,d)=>k3(e,s,a,c,d),closest:s=>w7(e,s),matchAll:(s,a)=>TD(e,s,a),matchNode:(s,a,c,d)=>AD(e,s,a,c,d),canApply:s=>C7(e,s),formatChanged:(s,a,c,d)=>_D(e,n,s,a,c,d),getCssText:_t(AR,e)}},Q2=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Q3=(e,t,n)=>{let s=Us(!1),a=b=>{$2(t,!1,n),t.add({},b)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",b=>{let S=b.command;Q2(S)||(pD(t,n),t.beforeChange())}),e.on("ExecCommand",b=>{let S=b.command;Q2(S)||a(b)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",a),e.on("dragend",a),e.on("keyup",b=>{let S=b.keyCode;if(b.isDefaultPrevented())return;let D=En.os.isMacOS()&&b.key==="Meta";(S>=33&&S<=36||S>=37&&S<=40||S===45||b.ctrlKey||D)&&(a(),e.nodeChanged()),(S===46||S===8)&&e.nodeChanged(),s.get()&&t.typing&&!b3(e.readonly,H2(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged())}),e.on("keydown",b=>{let S=b.keyCode;if(b.isDefaultPrevented())return;if(S>=33&&S<=36||S>=37&&S<=40||S===45){t.typing&&a(b);return}let D=b.ctrlKey&&!b.altKey||b.metaKey;if((S<16||S>20)&&S!==224&&S!==91&&!t.typing&&!D){t.beforeChange(),$2(t,!0,n),t.add({},b),s.set(!0);return}(En.os.isMacOS()?b.metaKey:b.ctrlKey&&!b.altKey)&&t.beforeChange()}),e.on("mousedown",b=>{t.typing&&a(b)});let c=b=>b.inputType==="insertReplacementText",d=b=>b.inputType==="insertText"&&b.data===null,p=b=>b.inputType==="insertFromPaste"||b.inputType==="insertFromDrop";e.on("input",b=>{b.inputType&&(c(b)||d(b)||p(b))&&a(b)}),e.on("AddUndo Undo Redo ClearUndos",b=>{b.isDefaultPrevented()||e.nodeChanged()})},_R=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},eE=e=>{let t=Ca(),n=Us(0),s=Us(0),a={data:[],typing:!1,beforeChange:()=>{h7(e,n,t)},add:(c,d)=>x3(e,a,s,n,t,c,d),dispatchChange:()=>{e.setDirty(!0);let c=H2(e);c.bookmark=Uy(e.selection),e.dispatch("change",{level:c,lastLevel:qt(a.data,s.get()).getOrUndefined()})},undo:()=>S3(e,a,n,s),redo:()=>xD(e,s,a.data),clear:()=>{b7(e,a,s)},reset:()=>{SD(e,a)},hasUndo:()=>ix(e,a,s),hasRedo:()=>kD(e,a,s),transact:c=>ED(e,a,n,c),ignore:c=>{v7(e,n,c)},extra:(c,d)=>{y7(e,a,s,c,d)}};return lm(e)||Q3(e,a,n),_R(e),a},cP=[9,27,St.HOME,St.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,St.DOWN,St.UP,St.LEFT,St.RIGHT].concat(En.browser.isFirefox()?[224]:[]),tE="data-mce-placeholder",OR=e=>e.type==="keydown"||e.type==="keyup",nE=e=>{let t=e.keyCode;return t===St.BACKSPACE||t===St.DELETE},DR=e=>{if(OR(e)){let t=e.keyCode;return!nE(e)&&(St.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||In(cP,t))}else return!1},RR=e=>OR(e)&&!(nE(e)||e.type==="keyup"&&e.keyCode===229),NR=(e,t,n)=>{if(e.isEmpty(t,void 0,{skipBogus:!1,includeZwsp:!0})){let s=t.firstElementChild;return s?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},MR=e=>{let t=e.dom,n=fi(e),s=AT(e)??"",a=(c,d)=>{if(DR(c))return;let p=e.getBody(),b=RR(c)?!1:NR(t,p,n);(t.getAttrib(p,tE)!==""!==b||d)&&(t.setAttrib(p,tE,b?s:null),cT(e,b),e.on(b?"keydown":"keyup",a),e.off(b?"keyup":"keydown",a))};Na(s)&&e.on("init",c=>{a(c,!0),e.on("change SetContent ExecCommand",a),e.on("paste",d=>Yc.setEditorTimeout(e,()=>a(d)))})},BR=e=>t=>Ve(t)&&t.nodeName.toLowerCase()===e,Ub=e=>t=>Ve(t)&&e.test(t.nodeName),ag=e=>Ve(e)&&e.nodeType===3,oE=e=>Ve(e)&&e.nodeType===1,Vu=Ub(/^(OL|UL|DL)$/),PR=Ub(/^(OL|UL)$/),ey=Ub(/^(LI|DT|DD)$/),LR=Ub(/^(DT|DD)$/),wh=BR("br"),sE=e=>e.parentNode?.firstChild===e,ty=(e,t)=>Ve(t)&&t.nodeName in e.schema.getTextBlockElements(),Zb=(e,t)=>Ve(e)&&e.nodeName in t,IR=(e,t)=>Ve(t)&&t.nodeName in e.schema.getVoidElements(),FR=(e,t)=>wh(t)?e.isBlock(t.nextSibling)&&!wh(t.previousSibling):!1,xh=(e,t,n)=>{let s=e.isEmpty(t);return n&&e.select("span[data-mce-type=bookmark]",t).length>0?!1:s},hx=(e,t)=>e.isChildOf(t,e.getRoot()),rE=Co.DOM,HR=(e,t)=>{let n=t.parentElement;if(n&&n.nodeName==="LI"&&n.firstChild===t){let s=n.previousSibling;s&&s.nodeName==="LI"?(s.appendChild(t),xh(e,n)&&rE.remove(n)):rE.setStyle(n,"listStyleType","none")}if(Vu(n)){let s=n.previousSibling;s&&s.nodeName==="LI"&&s.appendChild(t)}},bx=(e,t)=>{let n=et.grep(e.select("ol,ul",t));et.each(n,s=>{HR(e,s)})},zR=(e,t)=>{if(ag(e))return{container:e,offset:t};let n=Xc.getNode(e,t);return ag(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&ag(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&ag(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},vx=e=>{let t=e.cloneRange(),n=zR(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);let s=zR(e.endContainer,e.endOffset);return t.setEnd(s.container,s.offset),t},aE=["OL","UL","DL"],ny=aE.join(","),Wb=(e,t)=>{let n=t||e.selection.getStart(!0);return e.dom.getParent(n,ny,oy(e,n))},$R=(e,t)=>Ve(e)&&t.length===1&&t[0]===e,iE=e=>Lt(e.querySelectorAll(ny),Vu),uP=e=>{let t=Wb(e),n=e.selection.getSelectedBlocks();return $R(t,n)?iE(t):Lt(n,s=>Vu(s)&&t!==s)},VR=(e,t)=>{let n=et.map(t,s=>{let a=e.dom.getParent(s,"li,dd,dt",oy(e,s));return a||s});return na(n)},lE=e=>{let t=e.selection.getSelectedBlocks();return Lt(VR(e,t),ey)},UR=e=>Lt(lE(e),LR),yx=(e,t)=>{let n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},dP=(e,t)=>!Vu(t)&&!ey(t)&&ro(aE,n=>e.isValidChild(t.nodeName,n)),oy=(e,t)=>{let n=e.dom.getParents(t,e.dom.isBlock),s=c=>c.nodeName.toLowerCase()!==fi(e);return xn(n,c=>s(c)&&dP(e.schema,c)).getOr(e.getBody())},mP=e=>Mr(e).exists(t=>ey(t.dom)&&Js(t).exists(n=>!Vu(n.dom))&&dl(t).exists(n=>!Vu(n.dom))),o=(e,t)=>{let n=e.dom.getParents(t,"ol,ul",oy(e,t));return Ds(n)},r=e=>{let t=o(e,e.selection.getStart()),n=Lt(e.selection.getSelectedBlocks(),PR);return t.toArray().concat(n)},i=e=>{let t=e.selection.getStart();return e.dom.getParents(t,"ol,ul",oy(e,t))},l=e=>{let t=r(e),n=i(e);return xn(n,s=>mP(q.fromDom(s))).fold(()=>u(e,t),s=>[s])},u=(e,t)=>{let n=Kt(t,s=>o(e,s).getOr(s));return na(n)},m=e=>/\btox\-/.test(e.className),f=(e,t)=>t!==null&&!e.dom.isEditable(t),v=e=>{let t=Wb(e);return f(e,t)||!e.selection.isEditable()},y=(e,t)=>{let n=e.dom.getParent(t,"ol,ul,dl");return f(e,n)||!e.selection.isEditable()},x=(e,t,n)=>e.dispatch("ListMutation",{action:t,element:n}),A=(e,t,n={})=>{let s=e.dom,a=e.schema.getBlockElements(),c=s.createFragment(),d=fi(e),p=Yp(e),b,S,D=!1;for(S=s.create(d,{...p,...n.style?{style:n.style}:{}}),Zb(t.firstChild,a)||c.appendChild(S);b=t.firstChild;){let M=b.nodeName;!D&&(M!=="SPAN"||b.getAttribute("data-mce-type")!=="bookmark")&&(D=!0),Zb(b,a)?(c.appendChild(b),S=null):(S||(S=s.create(d,p),c.appendChild(S)),S.appendChild(b))}return!D&&S&&S.appendChild(s.create("br",{"data-mce-bogus":"1"})),c},E=e=>Ii(e,"OL,UL"),O=e=>Ii(e,"LI"),B=e=>Js(e).exists(E),I=e=>dl(e).exists(E),X=(e,t)=>MS(e).map(n=>n>=t).getOr(!0),W=e=>"listAttributes"in e,K=e=>"isComment"in e,V=e=>"isFragment"in e,U=e=>e.depth>0,J=e=>e.isSelected,ee=e=>{let t=rr(e),n=I(e)?t.slice(0,-1):t;return Kt(n,wf)},ue=(e,t,n)=>Mr(e).filter(Xs).map(s=>({depth:t,dirty:!1,isSelected:n,content:ee(e),itemAttributes:Ll(e),listAttributes:Ll(s),listType:fn(s),isInPreviousLi:!1})),ce=(e,t)=>{Oo(e.item,t.list)},ge=e=>{for(let t=1;t<e.length;t++)ce(e[t-1],e[t])},Re=(e,t)=>{sr(Ds(e),Sn(t),ce)},Ne=(e,t)=>{let n={list:q.fromTag(t,e),item:q.fromTag("li",e)};return Oo(n.list,n.item),n},Ae=(e,t,n)=>{let s=[];for(let a=0;a<n;a++)s.push(Ne(e,W(t)?t.listType:t.parentListType));return s},Le=(e,t)=>{for(let n=0;n<e.length-1;n++)Am(e[n].item,"list-style-type","none");Ds(e).each(n=>{W(t)&&(Ea(n.list,t.listAttributes),Ea(n.item,t.itemAttributes)),ml(n.item,t.content)})},Ye=(e,t)=>{fn(e.list)!==t.listType&&(e.list=Em(e.list,t.listType)),Ea(e.list,t.listAttributes)},Dt=(e,t,n)=>{let s=q.fromTag("li",e);return Ea(s,t),ml(s,n),s},nn=(e,t)=>{Oo(e.list,t),e.item=t},sn=(e,t,n)=>{let s=t.slice(0,n.depth);return Ds(s).each(a=>{if(W(n)){let c=Dt(e,n.itemAttributes,n.content);nn(a,c),Ye(a,n)}else if(V(n))ml(a.item,n.content);else{let c=q.fromHtml(`<!--${n.content}-->`);Oo(a.list,c)}}),s},Fn=(e,t,n)=>{let s=Ae(e,n,n.depth-t.length);return ge(s),Le(s,n),Re(t,s),t.concat(s)},fo=(e,t)=>{let n=L.none(),s=Mt(t,(a,c,d)=>K(c)?d===0?(n=L.some(c),a):sn(e,a,c):c.depth>a.length?Fn(e,a,c):sn(e,a,c),[]);return n.each(a=>{let c=q.fromHtml(`<!--${a.content}-->`);Sn(s).each(d=>{od(d.list,c)})}),Sn(s).map(a=>a.list)},Zo=(e,t,n)=>{switch(t){case"Indent":if(X(e,n.depth))n.depth++;else return;break;case"Outdent":n.depth--;break;case"Flatten":n.depth=0}n.dirty=!0},tn=(e,t)=>{W(e)&&W(t)&&(e.listType=t.listType,e.listAttributes={...t.listAttributes})},Wo=e=>{e.listAttributes=us(e.listAttributes,(t,n)=>n!=="start")},cn=(e,t)=>{let n=e[t].depth,s=c=>c.depth===n&&!c.dirty,a=c=>c.depth<n;return rn(kl(e.slice(0,t)),s,a).orThunk(()=>rn(e.slice(t+1),s,a))},vs=e=>(Pe(e,(t,n)=>{cn(e,n).fold(()=>{t.dirty&&W(t)&&Wo(t)},s=>tn(t,s))}),e),po=(e,t,n,s)=>{if(xg(s))return[{depth:e+1,content:s.dom.nodeValue??"",dirty:!1,isSelected:!1,isComment:!0}];t.each(d=>{Qt(d.start,s)&&n.set(!0)});let a=ue(s,e,n.get());t.each(d=>{Qt(d.end,s)&&n.set(!1)});let c=dl(s).filter(E).map(d=>Io(e,t,n,d)).getOr([]);return a.toArray().concat(c)},ya=(e,t,n,s)=>Js(s).filter(E).fold(()=>po(e,t,n,s),a=>{let c=Mt(rr(s),(d,p,b)=>{if(b===0)return d;if(O(p))return d.concat(po(e,t,n,p));{let S={isFragment:!0,depth:e,content:[p],isSelected:!1,dirty:!1,parentListType:fn(a)};return d.concat(S)}},[]);return Io(e,t,n,a).concat(c)}),Io=(e,t,n,s)=>cr(rr(s),a=>{let c=E(a)?Io:ya,d=e+1;return c(d,t,n,a)}),gc=(e,t)=>{let n=Us(!1),s=0;return Kt(e,a=>({sourceList:a,entries:Io(s,t,n,a)}))},tl=(e,t)=>{let n=vs(t);return Kt(n,s=>{let a=K(s)?Nc([q.fromHtml(`<!--${s.content}-->`)]):Nc(s.content),c=W(s)?s.itemAttributes:{};return q.fromDom(A(e,a.dom,c))})},ql=(e,t)=>{let n=vs(t);return fo(e.contentDocument,n).toArray()},dp=(e,t)=>cr(Ge(t,U),n=>Sn(n).exists(U)?ql(e,n):tl(e,n)),jb=(e,t,n)=>{Pe(Lt(t,J),s=>Zo(e,n,s))},Cx=e=>{let t=Kt(lE(e),q.fromDom);return sr(xn(t,Ya(B)),xn(kl(t),Ya(B)),(n,s)=>({start:n,end:s}))},ig=(e,t,n)=>{let s=gc(t,Cx(e));Pe(s,a=>{jb(e,a.entries,n);let c=dp(e,a.entries);Pe(c,d=>{x(e,n==="Indent"?"IndentList":"OutdentList",d.dom)}),Br(a.sourceList,c),Ko(a.sourceList)})},r0=e=>MS(e).forall(t=>{let n=e.selection.getSelectedBlocks();return ro(n,s=>Po(q.fromDom(s),"li").forall(a=>sc(a,"ol,ul").length<=t))}),Gl=Co.DOM,qb=(e,t,n)=>{let s=S=>{let D=S.parentNode;D&&et.each(a,M=>{D.insertBefore(M,n.parentNode)}),Gl.remove(S)},a=Gl.select('span[data-mce-type="bookmark"]',t),c=A(e,n),d=Gl.createRng();d.setStartAfter(n),d.setEndAfter(t);let p=d.extractContents();for(let S=p.firstChild;S;S=S.firstChild)if(S.nodeName==="LI"&&e.dom.isEmpty(S)){Gl.remove(S);break}e.dom.isEmpty(p)||Gl.insertAfter(p,t),Gl.insertAfter(c,t);let b=n.parentElement;b&&xh(e.dom,b)&&s(b),Gl.remove(n),xh(e.dom,t)&&Gl.remove(t)},Gb=pu("dd"),mp=pu("dt"),Kb=(e,t)=>{Gb(t)?Em(t,"dt"):mp(t)&&Ld(t).each(n=>qb(e,n.dom,t.dom))},a0=e=>{mp(e)&&Em(e,"dd")},sy=(e,t,n)=>{t==="Indent"?Pe(n,a0):Pe(n,s=>Kb(e,s))},ry=(e,t)=>{let n=ms(l(e)),s=ms(UR(e)),a=!1;if(n.length||s.length){let c=e.selection.getBookmark();ig(e,n,t),sy(e,t,s),e.selection.moveToBookmark(c),e.selection.setRng(vx(e.selection.getRng())),e.nodeChanged(),a=!0}return a},Sh=(e,t)=>!v(e)&&ry(e,t),gp=e=>Sh(e,"Indent"),jn=e=>Sh(e,"Outdent"),ou=e=>Sh(e,"Flatten"),fc=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},ZR=(e,t,n)=>{let s=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",s)},cE=(e,t)=>{et.each(t,(n,s)=>{e.setAttribute(s,n)})},uE=(e,t,n)=>{cE(t,n["list-attributes"]),et.each(e.select("li",t),s=>{cE(s,n["list-item-attributes"])})},i0=(e,t,n)=>{ZR(e,t,n),uE(e,t,n)},wx=(e,t,n)=>{et.each(n,s=>e.setStyle(t,s,""))},l0=(e,t)=>Ve(t)&&!Zb(t,e.schema.getBlockElements()),lg=(e,t,n,s)=>{let a=t[n?"startContainer":"endContainer"],c=t[n?"startOffset":"endOffset"];oE(a)&&(a=a.childNodes[Math.min(c,a.childNodes.length-1)]||a),!n&&wh(a.nextSibling)&&(a=a.nextSibling);let d=b=>{for(;!e.dom.isBlock(b)&&b.parentNode&&s!==b;)b=b.parentNode;return b},p=(b,S)=>{let D=new er(b,d(b)),M=S?"next":"prev",P;for(;P=D[M]();)if(!(IR(e,P)||js(P.textContent)||P.textContent?.length===0))return L.some(P);return L.none()};if(n&&ag(a))if(js(a.textContent))a=p(a,!1).getOr(a);else for(a.parentNode!==null&&l0(e,a.parentNode)&&(a=a.parentNode);a.previousSibling!==null&&(l0(e,a.previousSibling)||ag(a.previousSibling));)a=a.previousSibling;if(!n&&ag(a))if(js(a.textContent))a=p(a,!0).getOr(a);else for(a.parentNode!==null&&l0(e,a.parentNode)&&(a=a.parentNode);a.nextSibling!==null&&(l0(e,a.nextSibling)||ag(a.nextSibling));)a=a.nextSibling;for(;a.parentNode!==s;){let b=a.parentNode;if(ty(e,a)||/^(TD|TH)$/.test(b.nodeName))return a;a=b}return a},Yb=(e,t,n)=>{let s=[],a=e.dom,c=lg(e,t,!0,n),d=lg(e,t,!1,n),p,b=[];for(let S=c;S&&(b.push(S),S!==d);S=S.nextSibling);return et.each(b,S=>{if(ty(e,S)){s.push(S),p=null;return}if(a.isBlock(S)||wh(S)){wh(S)&&a.remove(S),p=null;return}let D=S.nextSibling;if(R1.isBookmarkNode(S)&&(Vu(D)||ty(e,D)||!D&&S.parentNode===n)){p=null;return}p||(p=a.create("p"),S.parentNode?.insertBefore(p,S),s.push(p)),p.appendChild(S)}),s},dE=(e,t,n)=>{let s=e.getStyle(t,"list-style-type"),a=n?n["list-style-type"]:"";return a=a===null?"":a,s===a},mE=(e,t)=>{let n=e.selection.getStart(!0),s=lg(e,t,!0,e.getBody());return xi(q.fromDom(s),q.fromDom(t.commonAncestorContainer))?t.commonAncestorContainer:n},gE=(e,t,n)=>{let s=e.selection.getRng(),a="LI",c=oy(e,mE(e,s)),d=e.dom;if(d.getContentEditable(e.selection.getNode())==="false")return;t=t.toUpperCase(),t==="DL"&&(a="DT");let p=rp(s),b=Lt(Yb(e,s,c),e.dom.isEditable);et.each(b,S=>{let D,M=S.previousSibling,P=S.parentNode;ey(P)||(M&&Vu(M)&&M.nodeName===t&&dE(d,M,n)?(D=M,S=d.rename(S,a),M.appendChild(S)):(D=d.create(t),P.insertBefore(D,S),D.appendChild(S),S=d.rename(S,a)),wx(d,S,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),i0(d,D,n),fE(e.dom,D))}),e.selection.setRng(ap(p))},xx=(e,t)=>Vu(e)&&e.nodeName===t?.nodeName,Sx=(e,t,n)=>{let s=e.getStyle(t,"list-style-type",!0),a=e.getStyle(n,"list-style-type",!0);return s===a},gP=(e,t)=>e.className===t.className,Xb=(e,t,n)=>xx(t,n)&&Sx(e,t,n)&&gP(t,n),fE=(e,t)=>{let n,s=t.nextSibling;if(Xb(e,t,s)){let a=s;for(;n=a.firstChild;)t.appendChild(n);e.remove(a)}if(s=t.previousSibling,Xb(e,t,s)){let a=s;for(;n=a.lastChild;)t.insertBefore(n,t.firstChild);e.remove(a)}},xl=(e,t,n,s)=>{if(t.nodeName!==n){let a=e.dom.rename(t,n);i0(e.dom,a,s),x(e,fc(n),a)}else i0(e.dom,t,s),x(e,fc(n),t)},Jb=(e,t,n,s)=>{if(t.classList.forEach((a,c,d)=>{a.startsWith("tox-")&&(d.remove(a),d.length===0&&t.removeAttribute("class"))}),t.nodeName!==n){let a=e.dom.rename(t,n);i0(e.dom,a,s),x(e,fc(n),a)}else i0(e.dom,t,s),x(e,fc(n),t)},fP=(e,t,n,s,a)=>{let c=Vu(t);if(c&&t.nodeName===s&&!pE(a)&&!m(t))ou(e);else{gE(e,s,a);let d=rp(e.selection.getRng()),p=c?[t,...n]:n,b=c&&m(t)?Jb:xl;et.each(p,S=>{b(e,S,s,a)}),e.selection.setRng(ap(d))}},pE=e=>"list-style-type"in e,hE=(e,t,n,s)=>{if(t!==e.getBody())if(t)if(t.nodeName===n&&!pE(s)&&!m(t))ou(e);else{let a=rp(e.selection.getRng());m(t)&&t.classList.forEach((d,p,b)=>{d.startsWith("tox-")&&(b.remove(d),b.length===0&&t.removeAttribute("class"))}),i0(e.dom,t,s);let c=e.dom.rename(t,n);fE(e.dom,c),e.selection.setRng(ap(a)),gE(e,n,s),x(e,fc(n),c)}else gE(e,n,s),x(e,fc(n),t)},kx=(e,t,n)=>{let s=Wb(e);if(y(e,s))return;let a=uP(e),c=At(n)?n:{};a.length>0?fP(e,s,a,t,c):hE(e,s,t,c)},bE=(e,t,n,s)=>{let a=t.startContainer,c=t.startOffset;if(ag(a)&&(n?c<a.data.length:c>0))return a;let d=e.schema.getNonEmptyElements();oE(a)&&(a=Xc.getNode(a,c));let p=new er(a,s);n&&FR(e.dom,a)&&p.next();let b=n?p.next.bind(p):p.prev2.bind(p);for(;a=b();)if(a.nodeName==="LI"&&!a.hasChildNodes()||d[a.nodeName]||ag(a)&&a.data.length>0)return a;return null},cg=(e,t)=>{let n=t.childNodes;return n.length===1&&!Vu(n[0])&&e.isBlock(n[0])},Qb=e=>L.from(e).map(q.fromDom).filter(Cm).exists(t=>wi(t)&&!In(["details"],fn(t))),WR=(e,t)=>{cg(e,t)&&Qb(t.firstChild)&&e.remove(t.firstChild,!0)},vE=(e,t,n)=>{let s,a=cg(e,n)?n.firstChild:n;if(WR(e,t),!xh(e,t,!0))for(;s=t.firstChild;)a.appendChild(s)},ay=(e,t,n)=>{let s,a=t.parentNode;if(!hx(e,t)||!hx(e,n))return;Vu(n.lastChild)&&(s=n.lastChild),a===n.lastChild&&wh(a.previousSibling)&&e.remove(a.previousSibling);let c=n.lastChild;c&&wh(c)&&t.hasChildNodes()&&e.remove(c),xh(e,n,!0)&&vi(q.fromDom(n)),vE(e,t,n),s&&n.appendChild(s);let p=La(q.fromDom(n),q.fromDom(t))?e.getParents(t,Vu,n):[];e.remove(t),Pe(p,b=>{xh(e,b)&&b!==e.getRoot()&&e.remove(b)})},jR=(e,t,n)=>{vi(q.fromDom(n)),ay(e.dom,t,n),e.selection.setCursorLocation(n,0)},fp=(e,t,n,s)=>{let a=e.dom;if(a.isEmpty(s))jR(e,n,s);else{let c=rp(t);ay(a,n,s),e.selection.setRng(ap(c))}},qR=(e,t,n,s)=>{let a=rp(t);ay(e.dom,n,s);let c=ap(a);e.selection.setRng(c)},GR=(e,t)=>{let n=e.dom,s=e.selection,a=s.getStart(),c=yx(e,a),d=n.getParent(s.getStart(),"LI",c);if(d){let p=d.parentElement;if(p===e.getBody()&&xh(n,p))return!0;let b=vx(s.getRng()),S=n.getParent(bE(e,b,t,c),"LI",c),D=S&&(t?n.isChildOf(d,S):n.isChildOf(S,d));if(S&&S!==d&&!D)return e.undoManager.transact(()=>{t?fp(e,b,S,d):sE(d)?jn(e):qR(e,b,d,S)}),!0;if(D&&!t&&S!==d){let M=b.commonAncestorContainer.parentElement;return!M||n.isChildOf(S,M)?!1:(e.undoManager.transact(()=>{let P=rp(b);vE(n,M,S),M.remove();let Z=ap(P);e.selection.setRng(Z)}),!0)}else if(!S&&!t&&b.startOffset===0&&b.endOffset===0)return e.undoManager.transact(()=>{ou(e)}),!0}return!1},KR=(e,t,n)=>{let s=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),s&&e.isEmpty(s)&&e.remove(s)},YR=(e,t)=>{let n=e.dom,s=e.selection.getStart(),a=yx(e,s),c=n.getParent(s,n.isBlock,a);if(c&&n.isEmpty(c,void 0,{checkRootAsContent:!0})){let d=vx(e.selection.getRng()),p=bE(e,d,t,a),b=n.getParent(p,"LI",a);if(p&&b){let S=Z=>In(["td","th","caption"],fn(Z)),D=Z=>Z.dom===a,M=ha(q.fromDom(b),S,D),P=ha(q.fromDom(d.startContainer),S,D);return dr(M,P,Qt)?(e.undoManager.transact(()=>{let Z=b.parentNode;KR(n,c,a),fE(n,Z),e.selection.select(p,!0),e.selection.collapse(t)}),!0):!1}}return!1},pP=(e,t)=>GR(e,t)||YR(e,t),ke=e=>{let t=e.selection.getStart(),n=yx(e,t),s=e.dom.getParent(t,"LI,DT,DD",n);return Ve(s)||lE(e).length>0},Pn=e=>ke(e)?(e.undoManager.transact(()=>{let t=!0,n=()=>t=!1;e.on("input",n),e.execCommand("Delete"),e.off("input",n),t&&e.dispatch("input"),bx(e.dom,e.getBody())}),!0):!1,dn=(e,t)=>{let n=e.selection;return!y(e,n.getNode())&&(n.isCollapsed()?pP(e,t):Pn(e))},Ts=(e,t)=>({block:e,position:t}),tr=(e,t)=>({from:e,to:t}),jo=(e,t)=>{let n=q.fromDom(e),s=q.fromDom(t.container());return I1(n,s).map(a=>Ts(a,t))},nl=e=>!(La(e.to.block,e.from.block)||La(e.from.block,e.to.block)),kh=e=>!Qt(e.from.block,e.to.block),ug=(e,t)=>ha(t,a=>Vp(a)||Ui(a.dom),a=>Qt(a,e)).filter(Xs).getOr(e),yE=(e,t)=>{let n=q.fromDom(e);return Qt(ug(n,t.from.block),ug(n,t.to.block))},pc=e=>Vo(e.from.block.dom)===!1&&Vo(e.to.block.dom)===!1,XR=e=>{let t=n=>$p(n)||Np(n.dom)||Vm(n);return t(e.from.block)&&t(e.to.block)},JR=(e,t,n,s)=>zs(s.position.getNode())&&!ki(e,s.block)?S1(!1,s.block.dom).bind(a=>a.isEqual(s.position)?Lu(n,t,a).bind(c=>jo(t,c)):L.some(s)).getOr(s):s,uz=(e,t,n,s)=>{let a=jo(t,Fe.fromRangeStart(s)),c=a.bind(d=>Lu(n,t,d.position).bind(p=>jo(t,p).map(b=>JR(e,t,n,b))));return sr(a,c,tr).filter(d=>kh(d)&&yE(t,d)&&pc(d)&&XR(d)&&nl(d))},dz=(e,t,n,s)=>s.collapsed?uz(e,t,n,s):L.none(),mz=(e,t)=>{let n=rr(e);return Ao(n,s=>t.isBlock(fn(s))).fold(lt(n),s=>n.slice(0,s))},HL=(e,t)=>{let n=mz(e,t);return Pe(n,Ko),n},zL=(e,t,n)=>{let s=em(n,t);return xn(s.reverse(),a=>ki(e,a)).each(Ko)},gz=(e,t)=>Lt(Sg(t),n=>!ki(e,n)).length===0,fz=(e,t,n,s,a)=>{if(ki(s,n))return Gd(n),Yi(n.dom);gz(s,a)&&ki(s,t)&&Zr(a,q.fromTag("br"));let c=Gc(n.dom,Fe.before(a.dom));return Pe(HL(t,s),d=>{Zr(a,d)}),zL(s,e,t),c},pz=(e,t)=>e.isInline(fn(t)),hz=(e,t,n,s)=>{if(ki(s,n)){if(ki(s,t)){let d=dt((p=>{let b=(S,D)=>Js(S).fold(()=>D,M=>pz(s,M)?b(M,D.concat(ii(M))):D);return b(p,[])})(n),(p,b)=>(wr(p,b),b),Hf());vi(t),Oo(t,d)}return Ko(n),Yi(t.dom)}let a=yd(n.dom);return Pe(HL(t,s),c=>{Oo(n,c)}),zL(s,e,t),a},bz=(e,t)=>{let n=em(t,e);return L.from(n[n.length-1])},vz=(e,t)=>La(t,e)?bz(t,e):L.none(),$L=(e,t)=>{S1(e,t.dom).bind(n=>L.from(n.getNode())).map(q.fromDom).filter(zl).each(Ko)},VL=(e,t,n,s)=>($L(!0,t),$L(!1,n),vz(t,n).fold(_t(hz,e,t,n,s),_t(fz,e,t,n,s))),UL=(e,t,n,s,a)=>t?VL(e,s,n,a):VL(e,n,s,a),hP=(e,t)=>{let n=q.fromDom(e.getBody());return dz(e.schema,n.dom,t,e.selection.getRng()).map(a=>()=>{UL(n,t,a.from.block,a.to.block,e.schema).each(c=>{e.selection.setRng(c.toRange())})})},yz=(e,t,n)=>{let s=t.getRng();return sr(I1(e,q.fromDom(s.startContainer)),I1(e,q.fromDom(s.endContainer)),(a,c)=>Qt(a,c)?L.none():L.some(()=>{s.deleteContents(),UL(e,!0,a,c,n).each(d=>{t.setRng(d.toRange())})})).getOr(L.none())},ZL=(e,t)=>{let n=q.fromDom(t),s=_t(Qt,e);return jr(n,Vp,s).isSome()},Cz=(e,t)=>ZL(e,t.startContainer)||ZL(e,t.endContainer),wz=(e,t)=>{let n=Gc(e.dom,Fe.fromRangeStart(t)).isNone(),s=cc(e.dom,Fe.fromRangeEnd(t)).isNone();return!Cz(e,t)&&n&&s},xz=e=>L.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),Sz=e=>{let t=q.fromDom(e.getBody()),n=e.selection.getRng();return wz(t,n)?xz(e):yz(t,e.selection,e.schema)},bP=(e,t)=>e.selection.isCollapsed()?L.none():Sz(e),c0=(e,t,n,s,a)=>L.from(t._selectionOverrides.showCaret(e,n,s,a)),kz=e=>{let t=e.ownerDocument.createRange();return t.selectNode(e),t},CE=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?L.none():L.some(kz(t)),Ez=(e,t,n)=>{let s=cC(1,e.getBody(),t),a=Fe.fromRangeStart(s),c=a.getNode();if(y1(c))return c0(1,e,c,!a.isAtEnd(),!1);let d=a.getNode(!0);if(y1(d))return c0(1,e,d,!1,!1);let p=W1(e.dom.getRoot(),a.getNode());return y1(p)?c0(1,e,p,!1,n):L.none()},vP=(e,t,n)=>t.collapsed?Ez(e,t,n).getOr(t):t,Tz=e=>Jm(e)||uc(e),Az=e=>uh(e)||yb(e),_z=(e,t)=>{tt(t)&&t.data.length===0&&e.remove(t)},WL=(e,t,n,s,a,c)=>{c0(s,e,c.getNode(!a),a,!0).each(d=>{if(t.collapsed){let p=t.cloneRange();a?p.setEnd(d.startContainer,d.startOffset):p.setStart(d.endContainer,d.endOffset),p.deleteContents()}else t.deleteContents();e.selection.setRng(d)}),_z(e.dom,n)},Oz=(e,t)=>{let n=e.selection.getRng();if(!tt(n.commonAncestorContainer))return L.none();let s=t?1:-1,a=ef(e.getBody()),c=_t(HS,t?a.next:a.prev),d=t?Tz:Az,p=la(s,e.getBody(),n),b=c(p),S=b&&$u(t,b);if(!S||!Uv(p,S))return L.none();if(d(S))return L.some(()=>WL(e,n,p.getNode(),s,t,S));let D=c(S);return D&&d(D)&&Uv(S,D)?L.some(()=>WL(e,n,p.getNode(),s,t,D)):L.none()},yP=(e,t)=>Oz(e,t),CP=(e,t)=>{let n=e.getBody();return t?Yi(n).filter(Jm):yd(n).filter(uh)},wP=e=>{let t=e.selection.getRng();return!t.collapsed&&(CP(e,!0).exists(n=>n.isEqual(Fe.fromRangeStart(t)))||CP(e,!1).exists(n=>n.isEqual(Fe.fromRangeEnd(t))))},Dz=e=>Ve(e)&&(Vp(q.fromDom(e))||Vm(q.fromDom(e))),cm=Xn.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Rz=(e,t)=>{let n=t.getNode(!e),s=e?"after":"before";return It(n)&&n.getAttribute("data-mce-caret")===s},Nz=(e,t,n,s,a)=>{let c=d=>a.isInline(d.nodeName.toLowerCase())&&!Km(n,s,e);return uC(!t,n).fold(()=>uC(t,s).fold(pn,c),c)},jL=(e,t,n,s,a)=>{let c=a.getNode(!n);return I1(q.fromDom(t),q.fromDom(s.getNode())).map(d=>ki(e,d)?cm.remove(d.dom):cm.moveToElement(c)).orThunk(()=>L.some(cm.moveToElement(c)))},qL=(e,t,n,s)=>Lu(t,e,n).bind(a=>Dz(a.getNode())||Nz(e,t,n,a,s)?L.none():t&&Vo(a.getNode())||!t&&Vo(a.getNode(!0))?jL(s,e,t,n,a):t&&uh(n)||!t&&Jm(n)?L.some(cm.moveToPosition(a)):L.none()),Mz=(e,t)=>os(t)?L.none():e&&Vo(t.nextSibling)?L.some(cm.moveToElement(t.nextSibling)):!e&&Vo(t.previousSibling)?L.some(cm.moveToElement(t.previousSibling)):L.none(),Bz=(e,t,n)=>n.fold(s=>L.some(cm.remove(s)),s=>L.some(cm.moveToElement(s)),s=>Km(t,s,e)?L.none():L.some(cm.moveToPosition(s))),Pz=(e,t,n,s)=>Rz(t,n)?Mz(t,n.getNode(!t)).orThunk(()=>qL(e,t,n,s)):qL(e,t,n,s).bind(a=>Bz(e,n,a)),Lz=(e,t,n,s)=>{let a=cC(t?1:-1,e,n),c=Fe.fromRangeStart(a),d=q.fromDom(e);return!t&&uh(c)?L.some(cm.remove(c.getNode(!0))):t&&Jm(c)?L.some(cm.remove(c.getNode())):!t&&Jm(c)&&tm(d,c,s)?wb(d,c,s).map(p=>cm.remove(p.getNode())):t&&uh(c)&&V4(d,c,s)?k_(d,c,s).map(p=>cm.remove(p.getNode())):Pz(e,t,c,s)},Iz=(e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),ep(e,t,q.fromDom(n)),!0),Fz=(e,t)=>n=>{let s=t?Fe.before(n):Fe.after(n);return e.selection.setRng(s.toRange()),!0},Hz=e=>t=>(e.selection.setRng(t.toRange()),!0),GL=(e,t)=>L.from(W1(e.getBody(),t)),zz=(e,t)=>{let n=e.selection.getNode();return GL(e,n).filter(Vo).fold(()=>Lz(e.getBody(),t,e.selection.getRng(),e.schema).map(s=>()=>s.fold(Iz(e,t),Fz(e,t),Hz(e))),()=>L.some(wt))},$z=e=>{Pe(gs(e,".mce-offscreen-selection"),Ko)},Vz=(e,t)=>{let n=e.selection.getNode();return Vo(n)&&!Of(n)?GL(e,n.parentNode).filter(Vo).fold(()=>L.some(()=>{$z(q.fromDom(e.getBody())),ep(e,t,q.fromDom(e.selection.getNode())),lw(e)}),()=>L.some(wt)):wP(e)?L.some(()=>{Sb(e,e.selection.getRng(),q.fromDom(e.getBody()))}):L.none()},KL=e=>{let t=e.dom,n=e.selection,s=W1(e.getBody(),n.getNode());if(Ui(s)&&t.isBlock(s)&&t.isEmpty(s)){let a=t.create("br",{"data-mce-bogus":"1"});t.setHTML(s,""),s.appendChild(a),n.setRng(Fe.before(a).toRange())}return!0},xP=(e,t)=>e.selection.isCollapsed()?zz(e,t):Vz(e,t),SP=(e,t)=>{let n=e.dom,s=n.getParent(e.selection.getStart(),n.isBlock),a=n.getParent(e.selection.getEnd(),n.isBlock),c=e.getBody();if(s?.nodeName?.toLowerCase()==="div"&&s&&a&&s===c.firstChild&&a===c.lastChild&&!n.isEmpty(c)){let p=s.cloneNode(!1),b=()=>{if(t?p2(e):iw(e),c.firstChild!==s){let S=rp(e.selection.getRng(),()=>document.createElement("span"));Array.from(c.childNodes).forEach(D=>p.appendChild(D)),c.appendChild(p),e.selection.setRng(ap(S))}};return L.some(b)}return L.none()},Uz=(e,t)=>{let n=Fe.fromRangeStart(e.selection.getRng());return Lu(t,e.getBody(),n).filter(s=>t?GM(s):Jc(s)).bind(s=>C1(t?0:-1,s)).map(s=>()=>e.selection.select(s))},kP=(e,t)=>e.selection.isCollapsed()?Uz(e,t):L.none(),Ex=tt,YL=e=>Ex(e)&&e.data[0]===Qr,XL=e=>Ex(e)&&e.data[e.data.length-1]===Qr,JL=e=>(e.ownerDocument??document).createTextNode(Qr),Zz=e=>{if(Ex(e.previousSibling))return XL(e.previousSibling)||e.previousSibling.appendData(Qr),e.previousSibling;if(Ex(e))return YL(e)||e.insertData(0,Qr),e;{let t=JL(e);return e.parentNode?.insertBefore(t,e),t}},Wz=e=>{if(Ex(e.nextSibling))return YL(e.nextSibling)||e.nextSibling.insertData(0,Qr),e.nextSibling;if(Ex(e))return XL(e)||e.appendData(Qr),e;{let t=JL(e);return e.nextSibling?e.parentNode?.insertBefore(t,e.nextSibling):e.parentNode?.appendChild(t),t}},QR=(e,t)=>e?Zz(t):Wz(t),jz=_t(QR,!0),qz=_t(QR,!1),QL=(e,t)=>tt(e.container())?QR(t,e.container()):QR(t,e.getNode()),eI=(e,t)=>{let n=t.get();return n&&e.container()===n&&Um(n)},EP=(e,t)=>t.fold(n=>{ko(e.get());let s=jz(n);return e.set(s),L.some(Fe(s,s.length-1))},n=>Yi(n).map(s=>{if(eI(s,e)){let a=e.get();return Fe(a,1)}else{ko(e.get());let a=QL(s,!0);return e.set(a),Fe(a,1)}}),n=>yd(n).map(s=>{if(eI(s,e)){let a=e.get();return Fe(a,a.length-1)}else{ko(e.get());let a=QL(s,!1);return e.set(a),Fe(a,a.length-1)}}),n=>{ko(e.get());let s=qz(n);return e.set(s),L.some(Fe(s,1))}),tI=(e,t)=>{for(let n=0;n<e.length;n++){let s=e[n].apply(null,t);if(s.isSome())return s}return L.none()},su=Xn.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),nI=(e,t)=>{let n=eh(t,e);return n||e},Gz=(e,t,n)=>{let s=K4(n),a=nI(t,s.container());return dh(e,a,s).fold(()=>cc(a,s).bind(_t(dh,e,a)).map(c=>su.before(c)),L.none)},Kz=(e,t)=>nh(e,t)===null,oI=(e,t,n)=>dh(e,t,n).filter(_t(Kz,t)),Yz=(e,t,n)=>{let s=f2(n);return oI(e,t,s).bind(a=>Gc(a,s).isNone()?L.some(su.start(a)):L.none())},Xz=(e,t,n)=>{let s=K4(n);return oI(e,t,s).bind(a=>cc(a,s).isNone()?L.some(su.end(a)):L.none())},Jz=(e,t,n)=>{let s=f2(n),a=nI(t,s.container());return dh(e,a,s).fold(()=>Gc(a,s).bind(_t(dh,e,a)).map(c=>su.after(c)),L.none)},sI=e=>!np(TP(e)),Eh=(e,t,n)=>tI([Gz,Yz,Xz,Jz],[e,t,n]).filter(sI),TP=e=>e.fold(Ln,Ln,Ln,Ln),rI=e=>e.fold(lt("before"),lt("start"),lt("end"),lt("after")),eN=e=>e.fold(su.before,su.before,su.after,su.after),AP=e=>e.fold(su.start,su.start,su.end,su.end),Qz=(e,t)=>rI(e)===rI(t)&&TP(e)===TP(t),e$=(e,t,n,s,a,c)=>sr(dh(t,n,s),dh(t,n,a),(d,p)=>d!==p&&g2(n,d,p)?su.after(e?d:p):c).getOr(c),t$=(e,t)=>e.fold(so,n=>!Qz(n,t)),n$=(e,t,n,s,a)=>{let c=$u(e,a);return Lu(e,n,c).map(_t($u,e)).fold(()=>s.map(eN),b=>Eh(t,n,b).map(_t(e$,e,t,n,c,b)).filter(_t(t$,s))).filter(sI)},o$=(e,t)=>e?t.fold(ls(L.some,su.start),L.none,ls(L.some,su.after),L.none):t.fold(L.none,ls(L.some,su.before),L.none,ls(L.some,su.end)),s$=(e,t,n,s)=>{let a=$u(e,s),c=Eh(t,n,a);return Eh(t,n,a).bind(_t(o$,e)).orThunk(()=>n$(e,t,n,c,s))},r$=e=>zt(e.selection.getSel().modify),aI=(e,t,n)=>{let s=e?1:-1;return t.setRng(Fe(n.container(),n.offset()+s).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},a$=(e,t)=>{let n=t.selection.getRng(),s=e?Fe.fromRangeEnd(n):Fe.fromRangeStart(n);return r$(t)?e&&c1(s)?aI(!0,t.selection,s):!e&&u1(s)?aI(!1,t.selection,s):!1:!1};var Th;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Th||(Th={}));let tN=(e,t)=>e===-1?kl(t):t,i$=(e,t,n)=>e===1?t.next(n):t.prev(n),l$=(e,t,n,s)=>zs(s.getNode(t===1))?Th.Br:Km(n,s)===!1?Th.Block:Th.Wrap,iI=(e,t,n,s)=>{let a=ef(n),c=s,d=[];for(;c;){let p=i$(t,a,c);if(!p)break;if(zs(p.getNode(!1)))return t===1?{positions:tN(t,d).concat([p]),breakType:Th.Br,breakAt:L.some(p)}:{positions:tN(t,d),breakType:Th.Br,breakAt:L.some(p)};if(!p.isVisible()){c=p;continue}if(e(c,p)){let b=l$(n,t,c,p);return{positions:tN(t,d),breakType:b,breakAt:L.some(p)}}d.push(p),c=p}return{positions:tN(t,d),breakType:Th.Eol,breakAt:L.none()}},lI=(e,t,n,s)=>t(n,s).breakAt.map(a=>{let c=t(n,a).positions;return e===-1?c.concat(a):[a].concat(c)}).getOr([]),_P=(e,t)=>Mt(e,(n,s)=>n.fold(()=>L.some(s),a=>sr(Sn(a.getClientRects()),Sn(s.getClientRects()),(c,d)=>{let p=Math.abs(t-c.left);return Math.abs(t-d.left)<=p?s:a}).or(n)),L.none()),nN=(e,t)=>Sn(t.getClientRects()).bind(n=>_P(e,n.left)),wE=_t(iI,Fe.isAbove,-1),xE=_t(iI,Fe.isBelow,1),cI=_t(lI,-1,wE),uI=_t(lI,1,xE),OP=(e,t)=>wE(e,t).breakAt.isNone(),DP=(e,t)=>xE(e,t).breakAt.isNone(),c$=e=>Yi(e).map(t=>[t].concat(xE(e,t).positions)).getOr([]),u$=e=>yd(e).map(t=>wE(e,t).positions.concat(t)).getOr([]),dI=(e,t)=>nN(cI(e,t),t),mI=(e,t)=>nN(uI(e,t),t),d$=Vo,gI=(e,t)=>Math.abs(e.left-t),fI=(e,t)=>Math.abs(e.right-t),m$=e=>ei(e,"node"),pI=(e,t)=>Sc(e,(n,s)=>{let a=Math.min(gI(n,t),fI(n,t)),c=Math.min(gI(s,t),fI(s,t));return c===a&&m$(s)&&d$(s.node)||c<a?s:n}),g$=e=>{let t=n=>Kt(n,s=>{let a=C(s);return a.node=e,a});if(It(e))return t(e.getClientRects());if(tt(e)){let n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}else return[]},hI=e=>cr(e,g$);var iy;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(iy||(iy={}));let f$=(e,t,n,s)=>{let a=s;for(;a=qf(a,e,$l,t);)if(n(a))return},bI=(e,t,n,s,a,c)=>{let d=0,p=[],b=M=>{let P=hI([M]);e===iy.Up&&(P=P.reverse());for(let Z=0;Z<P.length;Z++){let oe=P[Z];if(!n(oe,S)){if(p.length>0&&t(oe,Or(p))&&d++,oe.line=d,a(oe))return!0;p.push(oe)}}return!1},S=Or(c.getClientRects());if(!S)return p;let D=c.getNode();return D&&(b(D),f$(e,s,b,D)),p},p$=(e,t)=>t.line>e,h$=(e,t)=>t.line===e,b$=_t(bI,iy.Up,F,$),v$=_t(bI,iy.Down,$,F),vI=e=>Or(e.getClientRects()),y$=(e,t,n,s)=>{let a=ef(t),c,d,p,b,S=[],D=0;e===iy.Down?(c=a.next,d=$,p=F,b=Fe.after(s)):(c=a.prev,d=F,p=$,b=Fe.before(s));let M=vI(b);do{if(!b.isVisible())continue;let P=vI(b);if(p(P,M))continue;S.length>0&&d(P,Or(S))&&D++;let Z=C(P);if(Z.position=b,Z.line=D,n(Z))return S;S.push(Z)}while(b=c(b));return S},yI=e=>t=>p$(e,t),RP=e=>t=>h$(e,t),Ah=(e,t)=>{e.selection.setRng(t),bb(e,e.selection.getRng())},NP=(e,t,n)=>L.some(vP(e,t,n)),CI=(e,t)=>{let n=e.getNode(t===-1);return Ve(n)&&go(n)?L.some(n):L.none()},wI=(e,t)=>{let n=e.dom.createRng();return n.selectNode(t),n},xI=(e,t,n,s,a,c)=>{let d=t===1,p=ef(e.getBody()),b=_t(HS,d?p.next:p.prev),S=d?s:a;if(!n.collapsed){let oe=de(n);if(c(oe))if(go(oe)){let Y=la(t,e.getBody(),n);return L.from(b(Y)).map(ne=>ne.toRange())}else return c0(t,e,oe,t===-1,!1);else if(wP(e)){let Y=n.cloneRange();return Y.collapse(t===-1),L.from(Y)}}let D=la(t,e.getBody(),n);if(S(D))return CE(e,D.getNode(!d));let M=b(D),P=g(n);if(M)M=$u(d,M);else return P?L.some(n):L.none();if(S(M))return CI(M,t).fold(()=>c0(t,e,M?.getNode(!d),d,!1),oe=>L.some(wI(e,oe)));let Z=b(M);return Z&&S(Z)&&Uv(M,Z)?CI(M,t).fold(()=>c0(t,e,Z.getNode(!d),d,!1),oe=>L.some(wI(e,oe))):P?NP(e,M.toRange(),!1):L.none()},SI=(e,t,n,s,a,c)=>{let d=la(t,e.getBody(),n),p=Or(d.getClientRects()),b=t===iy.Down,S=e.getBody();if(!p)return L.none();if(wP(e)){let ne=b?Fe.fromRangeEnd(n):Fe.fromRangeStart(n);return(b?mI:dI)(S,ne).orThunk(()=>L.from(ne)).map(be=>be.toRange())}let M=(b?v$:b$)(S,yI(1),d),P=Lt(M,RP(1)),Z=p.left,oe=pI(P,Z);if(oe&&c(oe.node)){let ne=Math.abs(Z-oe.left),he=Math.abs(Z-oe.right);return c0(t,e,oe.node,ne<he,!1)}let Y;if(s(d)?Y=d.getNode():a(d)?Y=d.getNode(!0):Y=de(n),Y){let ne=y$(t,S,yI(1),Y),he=pI(Lt(ne,RP(1)),Z);if(he||(he=Or(Lt(ne,RP(0))),he))return NP(e,he.position.toRange(),!1)}return P.length===0?MP(e,b).filter(b?a:s).map(ne=>vP(e,ne.toRange(),!1)):L.none()},MP=(e,t)=>{let n=e.selection.getRng(),s=t?Fe.fromRangeEnd(n):Fe.fromRangeStart(n),a=Gf(s.container(),e.getBody());if(t){let c=xE(a,s);return Ds(c.positions)}else{let c=wE(a,s);return Sn(c.positions)}},kI=(e,t,n)=>MP(e,t).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),oN=(e,t)=>{let n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},EI=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},TI=(e,t,n)=>EP(t,n).map(s=>(oN(e,s),n)),C$=(e,t,n)=>{let s=Fe.fromRangeStart(e);if(e.collapsed)return s;{let a=Fe.fromRangeEnd(e);return n?Gc(t,a).getOr(a):cc(t,s).getOr(s)}},w$=(e,t,n)=>{let s=e.getBody(),a=C$(e.selection.getRng(),s,n),c=_t(tp,e);return s$(n,c,s,a).bind(p=>TI(e,t,p))},x$=(e,t,n)=>{let s=Kt(gs(q.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),a=Lt(s,e),c=Lt(n,e);Pe(Ni(a,c),_t(EI,!1)),Pe(Ni(c,a),_t(EI,!0))},S$=(e,t)=>{let n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){let s=Fe.fromRangeStart(e.selection.getRng());Fe.isTextPosition(s)&&!Z_(s)&&(oN(e,tM(n,s)),t.set(null))}},k$=(e,t,n,s)=>{if(t.selection.isCollapsed()){let a=Lt(s,e);Pe(a,c=>{let d=Fe.fromRangeStart(t.selection.getRng());Eh(e,t.getBody(),d).bind(p=>TI(t,n,p))})}},AI=(e,t,n)=>Xp(e)?w$(e,t,n).isSome():!1,_I=(e,t,n)=>Xp(t)?a$(e,t):!1,E$=e=>{let t=Us(null),n=_t(tp,e);return e.on("NodeChange",s=>{Xp(e)&&(x$(n,e.dom,s.parents),S$(e,t),k$(n,e,t,s.parents))}),t},T$=_t(_I,!0),A$=_t(_I,!1),sN=(e,t,n)=>{if(Xp(e)){let s=MP(e,t).getOrThunk(()=>{let a=e.selection.getRng();return t?Fe.fromRangeEnd(a):Fe.fromRangeStart(a)});return Eh(_t(tp,e),e.getBody(),s).exists(a=>{let c=eN(a);return EP(n,c).exists(d=>(oN(e,d),!0))})}else return!1},_$=(e,t)=>{let n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},O$=e=>sr(Yi(e),yd(e),(t,n)=>{let s=$u(!0,t),a=$u(!1,n);return cc(e,s).forall(c=>c.isEqual(a))}).getOr(!0),OI=(e,t)=>n=>EP(t,n).map(s=>()=>oN(e,s)),DI=(e,t,n,s)=>{let a=e.getBody(),c=_t(tp,e);e.undoManager.ignore(()=>{e.selection.setRng(_$(n,s)),iw(e),Eh(c,a,Fe.fromRangeStart(e.selection.getRng())).map(AP).bind(OI(e,t)).each(Xa)}),e.nodeChanged()},D$=(e,t)=>{let n=eh(t,e);return n||e},R$=(e,t,n,s)=>{let a=D$(e.getBody(),s.container()),c=_t(tp,e),d=Eh(c,a,s);return d.bind(b=>n?b.fold(lt(L.some(AP(b))),L.none,lt(L.some(eN(b))),L.none):b.fold(L.none,lt(L.some(eN(b))),L.none,lt(L.some(AP(b))))).map(OI(e,t)).getOrThunk(()=>{let b=Iu(n,a,s),S=b.bind(D=>Eh(c,a,D));return sr(d,S,()=>dh(c,a,s).bind(D=>O$(D)?L.some(()=>{ep(e,n,q.fromDom(D))}):L.none())).getOrThunk(()=>S.bind(()=>b.map(D=>()=>{n?DI(e,t,s,D):DI(e,t,D,s)})))})},BP=(e,t,n)=>{if(e.selection.isCollapsed()&&Xp(e)){let s=Fe.fromRangeStart(e.selection.getRng());return R$(e,t,n,s)}return L.none()},N$=e=>ka(e)>1,RI=(e,t)=>{let n=q.fromDom(e.getBody()),s=q.fromDom(e.selection.getStart()),a=em(s,n);return Ao(a,t).fold(lt(a),c=>a.slice(0,c))},M$=e=>ka(e)===1,B$=e=>RI(e,t=>e.schema.isBlock(fn(t))||N$(t)),P$=e=>RI(e,t=>e.schema.isBlock(fn(t))),NI=(e,t)=>{let n=_t(fk,e);return cr(t,s=>n(s)?[s.dom]:[])},PP=e=>{let t=P$(e);return NI(e,t)},L$=(e,t,n,s)=>{let a=NI(t,s);if(a.length===0)ep(t,e,n);else{let c=cO(n.dom,a);t.selection.setRng(c.toRange())}},I$=(e,t)=>{let n=Lt(B$(e),M$);return Ds(n).bind(s=>{let a=Fe.fromRangeStart(e.selection.getRng());return cw(t,a,s.dom)&&!xC(s)?L.some(()=>L$(t,e,s,n)):L.none()})},F$=(e,t)=>{let n=t.parentElement;return zs(t)&&!me(n)&&e.dom.isEmpty(n)},H$=e=>xC(q.fromDom(e)),MI=(e,t)=>{let n=e.selection.getStart(),s=F$(e,n)||H$(n)?cO(n,t):F8(e.selection.getRng(),t);e.selection.setRng(s.toRange())},BI=(e,t)=>{let n=Ni(t,PP(e));n.length>0&&MI(e,n)},PI=e=>tt(e.startContainer),z$=e=>e.startOffset===0&&PI(e),$$=(e,t)=>{let n=t.startContainer.parentElement;return!me(n)&&fk(e,q.fromDom(n))},V$=e=>{let t=e.startContainer.parentNode,n=e.endContainer.parentNode;return!me(t)&&!me(n)&&t.isEqualNode(n)},U$=e=>{let t=e.endContainer;return e.endOffset===(tt(t)?t.length:t.childNodes.length)},Z$=e=>V$(e)&&U$(e),W$=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),j$=e=>Z$(e)||W$(e),q$=e=>{let t=e.selection.getRng();return z$(t)&&$$(e,t)&&j$(t)},G$=e=>{if(q$(e)){let t=PP(e);return L.some(()=>{iw(e),BI(e,t)})}else return L.none()},LP=(e,t)=>e.selection.isCollapsed()?I$(e,t):G$(e),K$=(e,t)=>Nm(e,n=>Xi(n.dom),n=>t.isBlock(fn(n))),Y$=e=>K$(q.fromDom(e.selection.getStart()),e.schema),X$=e=>{let t=e.selection.getRng();return t.collapsed&&(PI(t)||e.dom.isEmpty(t.startContainer))&&!Y$(e)},SE=e=>(X$(e)&&MI(e,[]),!0),IP=(e,t,n)=>Ve(n)?L.some(()=>{e._selectionOverrides.hideFakeCaret(),ep(e,t,q.fromDom(n))}):L.none(),J$=(e,t)=>{let n=t?uc:yb,a=la(t?1:-1,e.getBody(),e.selection.getRng());return n(a)?IP(e,t,a.getNode(!t)):L.from($u(t,a)).filter(c=>n(c)&&Uv(a,c)).bind(c=>IP(e,t,c.getNode(!t)))},Q$=(e,t)=>{let n=e.selection.getNode();return Zi(n)?IP(e,t,n):L.none()},FP=(e,t)=>e.selection.isCollapsed()?J$(e,t):Q$(e,t),eV=e=>ha(e,t=>Ui(t.dom)||Vo(t.dom)).exists(t=>Ui(t.dom)),HP=e=>Cc(e??"").getOr(0),LI=(e,t)=>{let n=e||j0(t)?"margin":"padding",s=fl(t,"direction")==="rtl"?"-right":"-left";return n+s},tV=(e,t,n,s,a,c)=>{let d=LI(n,q.fromDom(c)),p=HP(e.getStyle(c,d));if(t==="outdent"){let b=Math.max(0,p-s);e.setStyle(c,d,b?b+a:"")}else{let b=p+s+a;e.setStyle(c,d,b)}},nV=(e,t)=>Qa(t,n=>{let s=LI(SS(e),n),a=Id(n,s).map(HP).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&a>0}),II=e=>{let t=HI(e);return!e.mode.isReadOnly()&&(t.length>1||nV(e,t))},oV=e=>!e.mode.isReadOnly()&&r0(e),FI=e=>Jr(e)||Vm(e),sV=e=>Mr(e).exists(FI),HI=e=>Lt(ms(e.selection.getSelectedBlocks()),t=>!FI(t)&&!sV(t)&&eV(t)),zI=(e,t)=>{if(e.mode.isReadOnly())return;let{dom:n}=e,s=TT(e),a=/[a-z%]+$/i.exec(s)?.[0]??"px",c=HP(s),d=SS(e);Pe(HI(e),p=>{tV(n,t,d,c,a,p.dom)}),t==="indent"?gp(e):jn(e)},rV=e=>zI(e,"indent"),$I=e=>zI(e,"outdent"),VI=e=>{if(e.selection.isCollapsed()&&II(e)){let t=e.dom,n=e.selection.getRng(),s=Fe.fromRangeStart(n),a=t.getParent(n.startContainer,t.isBlock);if(a!==null&&Sd(q.fromDom(a),s,e.schema))return L.some(()=>$I(e))}return L.none()},aV=(e,t)=>{let n=gh(e.selection.getRng());return Kf(n)?L.some(()=>ep(e,t,q.fromDom(e.selection.getNode()))):L.none()},zP=(e,t)=>e.selection.isCollapsed()?L.none():aV(e,t),UI=(e,t,n)=>Rt([VI,xP,yP,(s,a)=>BP(s,t,a),hP,rk,kP,FP,bP,LP,SP,zP],s=>s(e,n)).filter(s=>e.selection.isEditable()),$P=(e,t)=>{UI(e,t,!1).fold(()=>{e.selection.isEditable()&&(iw(e),lw(e))},Xa),ke(e)&&bx(e.dom,e.getBody())},iV=(e,t)=>{UI(e,t,!0).fold(()=>{e.selection.isEditable()&&p2(e)},Xa),ke(e)&&bx(e.dom,e.getBody())},lV=(e,t)=>{e.addCommand("delete",()=>{$P(e,t)}),e.addCommand("forwardDelete",()=>{iV(e,t)})},ZI=5,cV=400,WI=e=>e.touches===void 0||e.touches.length!==1?L.none():L.some(e.touches[0]),uV=(e,t)=>{let n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>ZI||s>ZI},dV=e=>{let t=Ca(),n=Us(!1),s=ps(a=>{e.dispatch("longpress",{...a,type:"longpress"}),n.set(!0)},cV);e.on("touchstart",a=>{WI(a).each(c=>{s.cancel();let d={x:c.clientX,y:c.clientY,target:a.target};s.throttle(a),n.set(!1),t.set(d)})},!0),e.on("touchmove",a=>{s.cancel(),WI(a).each(c=>{t.on(d=>{uV(c,d)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",a=>{s.cancel(),a.type!=="touchcancel"&&t.get().filter(c=>c.target.isEqualNode(a.target)).each(()=>{n.get()?a.preventDefault():e.dispatch("tap",{...a,type:"tap"})})},!0)},VP=(e,t)=>Yt(e,t.nodeName),mV=(e,t)=>tt(t)?!0:It(t)?!VP(e.getBlockElements(),t)&&!Cl(t)&&!Pm(e,t)&&!Ih(t)&&!Va(t):!1,gV=(e,t,n)=>ro(y_(q.fromDom(n),q.fromDom(t)),s=>VP(e,s.dom)),fV=(e,t)=>{if(tt(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||VP(e,t.nextSibling)||Ih(t.nextSibling)}return!1},UP=e=>e.dom.create(fi(e),Yp(e)),pV=e=>{let t=e.dom,n=e.selection,s=e.schema,a=s.getBlockElements(),c=n.getStart(),d=e.getBody(),p,b,S=null,D=fi(e);if(!c||!It(c))return;let M=d.nodeName.toLowerCase();if(!s.isValidChild(M,D.toLowerCase())||gV(a,d,c))return;if(d.firstChild===d.lastChild&&zs(d.firstChild)){p=UP(e),p.appendChild(Hf().dom),d.replaceChild(p,d.firstChild),e.selection.setCursorLocation(p,0),e.nodeChanged();return}let P=d.firstChild;for(;P;)if(It(P)&&Ua(s,P),mV(s,P)){if(fV(a,P)){b=P,P=P.nextSibling,t.remove(b);continue}if(!p){if(!S&&e.hasFocus()&&(S=rp(e.selection.getRng(),()=>document.createElement("span"))),!P.parentNode){P=null;break}p=UP(e),d.insertBefore(p,P)}b=P,P=P.nextSibling,p.appendChild(b)}else p=null,P=P.nextSibling;S&&(e.selection.setRng(ap(S)),e.nodeChanged())},jI=(e,t,n)=>{let s=q.fromDom(UP(e)),a=Hf();Oo(s,a),n(t,s);let c=document.createRange();return c.setStartBefore(a.dom),c.setEndBefore(a.dom),c},hV=e=>{e.on("NodeChange",()=>pV(e))},qI=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,bV=(e,t,n)=>function(s){let a=arguments,c=a[a.length-2],d=c>0?t.charAt(c-1):"";if(d==='"')return s;if(d===">"){let p=t.lastIndexOf("<",c);if(p!==-1&&t.substring(p,c).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(a[0])+'">'+e.dom.encode(typeof a[1]=="string"?a[1]:a[0])+"</span>"},vV=(e,t,n)=>{let s=t.length,a=n.content;if(n.format!=="raw"){for(;s--;)a=a.replace(t[s],bV(e,a,VT(e)));n.content=a}},yV=(e,t)=>Qa(e,n=>{let s=t.match(n);return s!==null&&s[0].length===t.length}),CV=e=>{let t="contenteditable",n=" "+et.trim(qc(e))+" ",s=" "+et.trim(VT(e))+" ",a=qI(n),c=qI(s),d=UT(e);d.length>0&&e.on("BeforeSetContent",p=>{vV(e,d,p)}),e.parser.addAttributeFilter("class",p=>{let b=p.length;for(;b--;){let S=p[b];a(S)?S.attr(t,"true"):c(S)&&S.attr(t,"false")}}),e.serializer.addAttributeFilter(t,p=>{let b=p.length;for(;b--;){let S=p[b];if(!a(S)&&!c(S))continue;let D=S.attr("data-mce-content");d.length>0&&D?yV(d,D)?(S.name="#text",S.type=3,S.raw=!0,S.value=D):S.remove():S.attr(t,null)}})},wV=e=>Qs(q.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),GI=(e,t)=>{t.hasAttribute("data-mce-caret")&&(_v(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},xV=(e,t)=>{let n=wV(e);if(n){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),GI(e,n);return}l1(n)&&(GI(e,n),e.undoManager.add())}},SV=e=>{e.on("keyup compositionstart",_t(xV,e))},KI=Vo,kV=(e,t,n)=>xI(t,e,n,Jm,uh,KI),EV=(e,t,n)=>SI(t,e,n,c=>Jm(c)||KC(c),c=>uh(c)||i2(c),KI),TV=e=>{let t=e.dom.create(fi(e));return t.innerHTML='<br data-mce-bogus="1">',t},YI=(e,t,n)=>{let s=ef(e.getBody()),a=_t(HS,t===1?s.next:s.prev);if(n.collapsed){let c=e.dom.getParent(n.startContainer,"PRE");if(!c)return;if(!a(Fe.fromRangeStart(n))){let p=q.fromDom(TV(e));t===1?Pl(q.fromDom(c),p):Zr(q.fromDom(c),p),e.selection.select(p.dom,!0),e.selection.collapse()}}},AV=(e,t)=>{let n=t?1:-1,s=e.selection.getRng();return kV(n,e,s).orThunk(()=>(YI(e,n,s),L.none()))},_V=(e,t)=>{let n=t?1:-1,s=e.selection.getRng();return EV(n,e,s).orThunk(()=>(YI(e,n,s),L.none()))},OV=(e,t)=>{let n=t?e.getEnd(!0):e.getStart(!0);return np(n)?!t:t},XI=(e,t)=>AV(e,OV(e.selection,t)).exists(n=>(Ah(e,n),!0)),JI=(e,t)=>_V(e,t).exists(n=>(Ah(e,n),!0)),QI=(e,t)=>kI(e,t,t?uh:Jm),rN=(e,t)=>CP(e,!t).map(n=>{let s=n.toRange(),a=e.selection.getRng();return t?s.setStart(a.startContainer,a.startOffset):s.setEnd(a.endContainer,a.endOffset),s}).exists(n=>(Ah(e,n),!0)),eF=(e,t)=>{let n=d=>Qt(d,t),s=d=>Ui(d.dom),a=q.fromDom(e.container());return ha(a,s,n).filter(d=>!n(d))},DV=(e,t,n)=>(n?mI:dI)(e.getBody(),t).map(a=>a.toRange()),RV=(e,t)=>{let n=Fe.fromRangeStart(e.selection.getRng()),s=Fe.fromRangeEnd(e.selection.getRng()),a=q.fromDom(e.getBody());return fm(sr(eF(n,a),eF(s,a),(d,p)=>Qt(d,p)?L.some(d):L.none())).fold(pn,d=>t&&DP(d.dom,s)||!t&&OP(d.dom,n)?DV(e,t?s:n,t).exists(p=>(Ah(e,p),!0)):!1)},tF=(e,t)=>RV(e,t),NV=e=>In(["figcaption"],fn(e)),MV=(e,t,n)=>{let s=_t(Qt,t);return ha(q.fromDom(e.container()),a=>n.isBlock(fn(a)),s).filter(NV)},BV=(e,t,n)=>t?DP(e.dom,n):OP(e.dom,n),PV=(e,t)=>{let n=q.fromDom(e.getBody()),s=Fe.fromRangeStart(e.selection.getRng());return MV(s,n,e.schema).exists(()=>{if(BV(n,t,s)){let c=jI(e,n,t?Oo:od);return e.selection.setRng(c),!0}else return!1})},nF=(e,t)=>e.selection.isCollapsed()?PV(e,t):!1,LV=(e,t,n)=>{let s=e.selection.getRng(),a=Fe.fromRangeStart(s);return e.getBody().firstChild===t&&OP(n,a)?(e.execCommand("InsertNewBlockBefore"),!0):!1},IV=(e,t)=>{let n=e.selection.getRng(),s=Fe.fromRangeStart(n);return e.getBody().lastChild===t&&DP(t,s)?(e.execCommand("InsertNewBlockAfter"),!0):!1},FV=(e,t)=>t?L.from(e.dom.getParent(e.selection.getNode(),"details")).map(n=>IV(e,n)).getOr(!1):L.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(n=>L.from(e.dom.getParent(n,"details")).map(s=>LV(e,s,n))).getOr(!1),oF=(e,t)=>FV(e,t),sF={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},HV=e=>Kt(e,t=>({...sF,...t})),zV=e=>Kt(e,t=>({...sF,...t})),rF=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,$V=(e,t)=>cr(HV(e),n=>rF(n,t)?[n]:[]),VV=(e,t)=>cr(zV(e),n=>rF(n,t)?[n]:[]),hn=(e,...t)=>()=>e.apply(null,t),kE=(e,t)=>xn($V(e,t),n=>n.action()),aF=(e,t)=>Rt(VV(e,t),n=>n.action()),iF=(e,t)=>{let n=t?1:-1,s=e.selection.getRng();return xI(e,n,s,uc,yb,Zi).exists(a=>(Ah(e,a),!0))},lF=(e,t)=>{let n=t?1:-1,s=e.selection.getRng();return SI(e,n,s,uc,yb,Zi).exists(a=>(Ah(e,a),!0))},cF=(e,t)=>kI(e,t,t?yb:uc),UV=(e,t)=>uF(e,t,so),uF=(e,t,n)=>cr(rr(e),s=>Pa(s,t)?n(s)?[s]:[]:uF(s,t,n)),ZV=(e,t,n=pn)=>{if(n(t))return L.none();if(In(e,fn(t)))return L.some(t);let s=a=>Pa(a,"table")||n(a);return Ha(t,e.join(","),s)},WV=(e,t)=>ZV(["td","th"],e,t),jV=e=>UV(e,"th,td"),dF=(e,t)=>Po(e,"table",t),mF=Xn.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),EE={...mF,none:e=>mF.none(e)},ZP=(e,t,n,s,a=so)=>{let c=s===1;if(!c&&n<=0)return EE.first(e[0]);if(c&&n>=e.length-1)return EE.last(e[e.length-1]);{let d=n+s,p=e[d];return a(p)?EE.middle(t,p):ZP(e,t,d,s,a)}},gF=(e,t)=>dF(e,t).bind(n=>{let s=jV(n);return Ao(s,c=>Qt(e,c)).map(c=>({index:c,all:s}))}),qV=(e,t,n)=>gF(e,n).fold(()=>EE.none(e),a=>ZP(a.all,e,a.index,1,t)),GV=(e,t,n)=>gF(e,n).fold(()=>EE.none(),a=>ZP(a.all,e,a.index,-1,t));var KV=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],YV=()=>{let e=S=>q.fromDom(S.dom.cloneNode(!1)),t=S=>hu(S).dom,n=S=>Xs(S)?fn(S)==="body"?!0:In(KV,fn(S)):!1,s=S=>Xs(S)?In(["br","img","hr","input"],fn(S)):!1,a=S=>Xs(S)&&ai(S,"contenteditable")==="false",c=(S,D)=>S.dom.compareDocumentPosition(D.dom),d=(S,D)=>{let M=Ll(S);Ea(D,M)},p=S=>{let D=fn(S);return In(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],D)},b=S=>Xs(S)?xr(S,"lang"):L.none();return{up:lt({selector:Ha,closest:Po,predicate:jr,all:bu}),down:lt({selector:gs,predicate:Bc}),styles:lt({get:fl,getRaw:Id,set:Am,remove:Dc}),attrs:lt({get:ai,set:Pr,remove:Ws,copyTo:d}),insert:lt({before:Zr,after:Pl,afterAll:yu,append:Oo,appendAll:ml,prepend:od,wrap:wr}),remove:lt({unwrap:yi,remove:Ko}),create:lt({nu:q.fromTag,clone:e,text:q.fromText}),query:lt({comparePosition:c,prevSibling:ul,nextSibling:tc}),property:lt({children:rr,name:fn,parent:Mr,document:t,isText:Sa,isComment:xg,isElement:Xs,isSpecial:p,getLanguage:b,getText:kr,setText:Ke,isBoundary:n,isEmptyTag:s,isNonEditable:a}),eq:Qt,is:Ii}};let WP=(e,t)=>({element:e,offset:t}),fF=(e,t)=>{if(e.property().isText(t))return WP(t,e.property().getText(t).length);{let n=e.property().children(t);return n.length>0?fF(e,n[n.length-1]):WP(t,n.length)}},pF=(e,t,n)=>{let s=e.property().children(t);return s.length>0&&n<s.length?pF(e,s[n],0):s.length>0&&e.property().isElement(t)&&s.length===n?fF(e,s[s.length-1]):WP(t,n)},XV=pF,JV=YV(),QV=(e,t)=>XV(JV,e,t),hF=yo("image"),eU=e=>{let t=e;return L.from(t[hF])},tU=(e,t)=>{let n=e;n[hF]=t},jP=yo("event"),nU=e=>{let t=e;return L.from(t[jP])},aN=e=>t=>{let n=t;n[jP]=e},oU=(e,t)=>aN(t)(e),bF=aN(0),sU=aN(2),rU=aN(1),aU=(e=>t=>{let n=t;return L.from(n[jP]).exists(s=>s===e)})(0),iU=()=>Object.freeze({length:0,item:e=>null}),qP=yo("mode"),lU=e=>{let t=e;return L.from(t[qP])},iN=e=>t=>{let n=t;n[qP]=e},vF=(e,t)=>iN(t)(e),yF=iN(0),GP=iN(2),cU=iN(1),CF=e=>t=>{let n=t;return L.from(n[qP]).exists(s=>s===e)},Tx=CF(0),wF=CF(1),uU=(e,t)=>({...t,get length(){return t.length},add:(n,s)=>{if(Tx(e))if(pt(n)){if(!ns(s))return t.add(n,s)}else return t.add(n);return null},remove:n=>{Tx(e)&&t.remove(n)},clear:()=>{Tx(e)&&t.clear()}}),dU=["none","copy","link","move"],mU=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],KP=()=>{let e=new window.DataTransfer,t="move",n="all",s={get dropEffect(){return t},set dropEffect(a){In(dU,a)&&(t=a)},get effectAllowed(){return n},set effectAllowed(a){aU(s)&&In(mU,a)&&(n=a)},get items(){return uU(s,e.items)},get files(){return wF(s)?iU():e.files},get types(){return e.types},setDragImage:(a,c,d)=>{Tx(s)&&(tU(s,{image:a,x:c,y:d}),e.setDragImage(a,c,d))},getData:a=>wF(s)?"":e.getData(a),setData:(a,c)=>{Tx(s)&&e.setData(a,c)},clearData:a=>{Tx(s)&&e.clearData(a)}};return yF(s),s},gU=e=>{let t=KP(),n=lU(e);return GP(e),bF(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,eU(e).each(s=>t.setDragImage(s.image,s.x,s.y)),Pe(e.types,s=>{s!=="Files"&&t.setData(s,e.getData(s))}),Pe(e.files,s=>t.items.add(s)),nU(e).each(s=>{oU(t,s)}),n.each(s=>{vF(e,s),vF(t,s)}),t},fU=e=>{let t=e.getData("text/html");return t===""?L.none():L.some(t)},xF=(e,t)=>e.setData("text/html",t),pU=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),hU=(e,t)=>cr(t,n=>{let s=pU(C(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),bU=(e,t,n)=>Mt(e,(s,a)=>s.fold(()=>L.some(a),c=>{let d=Math.sqrt(Math.abs(c.x-t)+Math.abs(c.y-n)),p=Math.sqrt(Math.abs(a.x-t)+Math.abs(a.y-n));return L.some(p<d?a:c)}),L.none()),SF=(e,t,n,s,a)=>{let c=gs(q.fromDom(n),"td,th,caption").map(p=>p.dom),d=Lt(hU(e,c),p=>t(p,a));return bU(d,s,a).map(p=>p.cell)},vU=e=>e.bottom,yU=e=>e.top,CU=(e,t)=>e.y<t,wU=(e,t)=>e.y>t,xU=_t(SF,vU,CU),SU=_t(SF,yU,wU),kU=(e,t)=>Sn(t.getClientRects()).bind(n=>xU(e,n.left,n.top)).bind(n=>nN(u$(n),t)),EU=(e,t)=>Ds(t.getClientRects()).bind(n=>SU(e,n.left,n.top)).bind(n=>nN(c$(n),t)),TU=(e,t,n)=>n.breakAt.exists(s=>e(t,s).breakAt.isSome()),AU=e=>e.breakType===Th.Wrap&&e.positions.length===0,_U=e=>e.breakType===Th.Br&&e.positions.length===1,kF=(e,t,n)=>{let s=e(t,n);return AU(s)||!zs(n.getNode())&&_U(s)?!TU(e,t,s):s.breakAt.isNone()},OU=_t(kF,wE),DU=_t(kF,xE),RU=(e,t,n)=>{let s=Fe.fromRangeStart(t);return S1(!e,n).exists(a=>a.isEqual(s))},NU=(e,t,n,s)=>{let a=e.selection.getRng(),c=t?1:-1;return Zn()&&RU(t,a,n)?(c0(c,e,n,!t,!1).each(d=>{Ah(e,d)}),!0):!1},MU=(e,t,n)=>kU(t,n).orThunk(()=>Sn(n.getClientRects()).bind(s=>_P(cI(e,Fe.before(t)),s.left))).getOr(Fe.before(t)),BU=(e,t,n)=>EU(t,n).orThunk(()=>Sn(n.getClientRects()).bind(s=>_P(uI(e,Fe.after(t)),s.left))).getOr(Fe.after(t)),EF=(e,t)=>{let n=t.getNode(e);return Ou(n)?L.some(n):L.none()},PU=(e,t,n)=>{t.undoManager.transact(()=>{let s=e?Pl:Zr,a=jI(t,q.fromDom(n),s);Ah(t,a)})},TF=(e,t,n)=>{let s=EF(!!t,n),a=t===!1;s.fold(()=>Ah(e,n.toRange()),c=>S1(a,e.getBody()).filter(d=>d.isEqual(n)).fold(()=>Ah(e,n.toRange()),d=>PU(t,e,c)))},LU=(e,t,n,s)=>{let a=e.selection.getRng(),c=Fe.fromRangeStart(a),d=e.getBody();if(!t&&OU(s,c)){let p=MU(d,n,c);return TF(e,t,p),!0}else if(t&&DU(s,c)){let p=BU(d,n,c);return TF(e,t,p),!0}else return!1},AF=(e,t,n)=>L.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>L.from(e.dom.getParent(s,"table")).map(a=>n(e,t,a,s))).getOr(!1),_F=(e,t)=>AF(e,t,NU),YP=(e,t)=>AF(e,t,LU),IU=e=>{let t=$i.exact(e,0,e,0);return ao(t)},FU=e=>lN(e)||si(e).some(t=>Cm(t)&&lN(t)),OF=(e,t,n)=>n.fold(L.none,L.none,(s,a)=>rv(a).map(c=>IU(c)),s=>e.mode.isReadOnly()||!HU(s)||!FU(s)?L.none():(e.execCommand("mceTableInsertRowAfter"),DF(e,t,s))),HU=e=>ha(e,pu("table")).exists(wi),DF=(e,t,n)=>OF(e,t,qV(n,lN)),zU=(e,t,n)=>OF(e,t,GV(n,lN)),lN=e=>wi(e)||Pg(e,$U),$U=e=>Cm(e)&&wi(e),RF=(e,t)=>{let n=["table","li","dl"],s=q.fromDom(e.getBody()),a=p=>{let b=fn(p);return Qt(p,s)||In(n,b)},c=e.selection.getRng(),d=q.fromDom(t?c.endContainer:c.startContainer);return WV(d,a).map(p=>(dF(p,a).each(D=>{e.model.table.clearSelectedCells(D.dom)}),e.selection.collapse(!t),(t?DF:zU)(e,a,p).each(D=>{e.selection.setRng(D)}),!0)).getOr(!1)},VU=(e,t,n)=>{let s=En.os.isMacOS()||En.os.isiOS(),a=En.browser.isFirefox();kE([{keyCode:St.RIGHT,action:hn(XI,e,!0)},{keyCode:St.LEFT,action:hn(XI,e,!1)},{keyCode:St.UP,action:hn(JI,e,!1)},{keyCode:St.DOWN,action:hn(JI,e,!0)},...s?[{keyCode:St.UP,action:hn(rN,e,!1),metaKey:!0,shiftKey:!0},{keyCode:St.DOWN,action:hn(rN,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:St.RIGHT,action:hn(_F,e,!0)},{keyCode:St.LEFT,action:hn(_F,e,!1)},{keyCode:St.UP,action:hn(YP,e,!1)},{keyCode:St.DOWN,action:hn(YP,e,!0)},{keyCode:St.UP,action:hn(YP,e,!1)},{keyCode:St.UP,action:hn(oF,e,!1)},{keyCode:St.DOWN,action:hn(oF,e,!0)},{keyCode:St.RIGHT,action:hn(iF,e,!0)},{keyCode:St.LEFT,action:hn(iF,e,!1)},{keyCode:St.UP,action:hn(lF,e,!1)},{keyCode:St.DOWN,action:hn(lF,e,!0)},{keyCode:St.RIGHT,action:hn(AI,e,t,!0)},{keyCode:St.LEFT,action:hn(AI,e,t,!1)},{keyCode:St.RIGHT,ctrlKey:!s,altKey:s,action:hn(T$,e,t)},{keyCode:St.LEFT,ctrlKey:!s,altKey:s,action:hn(A$,e,t)},{keyCode:St.UP,action:hn(nF,e,!1)},{keyCode:St.DOWN,action:hn(nF,e,!0)},...a?[{keyCode:St.UP,action:hn(tF,e,!1)},{keyCode:St.DOWN,action:hn(tF,e,!0)}]:[]],n).each(c=>{n.preventDefault()})},UU=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||VU(e,t,n)})},pp=(e,t)=>({container:e,offset:t}),cN=Co.DOM,uN=e=>t=>e===t?-1:0,ZU=e=>t=>e.isBlock(t)||In(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",XP=(e,t,n)=>{if(tt(e)&&t>=0)return L.some(pp(e,t));{let s=Zc(cN);return L.from(s.backwards(e,t,uN(e),n)).map(a=>pp(a.container,a.container.data.length))}},WU=(e,t,n)=>{if(tt(e)&&t>=e.length)return L.some(pp(e,t));{let s=Zc(cN);return L.from(s.forwards(e,t,uN(e),n)).map(a=>pp(a.container,0))}},JP=(e,t,n)=>{if(!tt(e))return L.none();let s=e.data;if(t>=0&&t<=s.length)return L.some(pp(e,t));{let a=Zc(cN);return L.from(a.backwards(e,t,uN(e),n)).bind(c=>{let d=c.container.data;return JP(c.container,t+d.length,n)})}},NF=(e,t,n)=>{if(!tt(e))return L.none();let s=e.data;if(t<=s.length)return L.some(pp(e,t));{let a=Zc(cN);return L.from(a.forwards(e,t,uN(e),n)).bind(c=>NF(c.container,t-s.length,n))}},QP=(e,t,n,s,a)=>{let c=Zc(e,ZU(e));return L.from(c.backwards(t,n,s,a))},jU=e=>e.collapsed&&tt(e.startContainer),qU=e=>yl(e.toString().replace(/\u00A0/g," ")),MF=e=>e!==""&&` \xA0\uFEFF\f
\r	\v`.indexOf(e)!==-1,GU=(e,t)=>e.substring(t.length),KU=(e,t,n,s=!1)=>{let a,c=n.charAt(0);for(a=t-1;a>=0;a--){let d=e.charAt(a);if(!s&&MF(d))return L.none();if(c===d&&mr(e,n,a,t))break}return L.some(a)},eL=(e,t,n,s=!1)=>{if(!jU(t))return L.none();let a={text:"",offset:0},c=(p,b,S)=>(a.text=S+a.text,a.offset+=b,KU(a.text,a.offset,n,s).getOr(b)),d=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return QP(e,t.startContainer,t.startOffset,c,d).bind(p=>{let b=t.cloneRange();if(b.setStart(p.container,p.offset),b.setEnd(t.endContainer,t.endOffset),b.collapsed)return L.none();let S=qU(b);return S.lastIndexOf(n)!==0?L.none():L.some({text:GU(S,n),range:b,trigger:n})})},YU=e=>e.nodeType===vm,XU=e=>e.nodeType===Ml,BF=e=>{if(YU(e))return pp(e,e.data.length);{let t=e.childNodes;return t.length>0?BF(t[t.length-1]):pp(e,t.length)}},PF=(e,t)=>{let n=e.childNodes;return n.length>0&&t<n.length?PF(n[t],0):n.length>0&&XU(e)&&n.length===t?BF(n[n.length-1]):pp(e,t)},JU=(e,t)=>{let n=e.getParent(t.container,e.isBlock)??e.getRoot();return QP(e,t.container,t.offset,(s,a)=>a===0?-1:a,n).filter(s=>{let a=s.container.data.charAt(s.offset-1);return!MF(a)}).isSome()},QU=e=>t=>{let n=PF(t.startContainer,t.startOffset);return!JU(e,n)},eZ=(e,t,n)=>Rt(n.triggers,s=>eL(e,t,s)),tZ=(e,t)=>{let n=t(),s=e.selection.getRng();return eZ(e.dom,s,n).bind(a=>LF(e,t,a))},LF=(e,t,n,s={})=>{let a=t(),d=e.selection.getRng().startContainer.nodeValue??"",p=Lt(a.lookupByTrigger(n.trigger),S=>n.text.length>=S.minChars&&S.matches.getOrThunk(()=>QU(e.dom))(n.range,d,n.text));if(p.length===0)return L.none();let b=Promise.all(Kt(p,S=>S.fetch(n.text,S.maxResults,s).then(M=>({matchText:n.text,items:M,columns:S.columns,onAction:S.onAction,highlightOn:S.highlightOn}))));return L.some({lookupData:b,context:n})},nZ=Ky("type"),oZ=uS("fetch"),sZ=uS("onAction");Gm("name"),Gm("text"),Gm("role"),Gm("icon"),Gm("url"),Gm("tooltip"),Gm("chevronTooltip"),Gm("label"),Gm("shortcut");let rZ=e=>$s("columns",e),aZ=Nv([nZ,Ky("trigger"),Bv("minChars",1),rZ(1),Bv("maxResults",10),r6("matches"),oZ,sZ,Xy("highlightOn",[],tS)]),iZ=e=>qy("Autocompleter",aZ,e),lZ=()=>{let e={},t={},n={},s={},a={},c={},d={},p={},b={},S=(Z,oe)=>(Y,ne)=>{Z[Y.toLowerCase()]={...ne,type:oe}},D=(Z,oe)=>(Y,ne)=>{Z[Y.toLowerCase()]={type:oe,...ne}},M=(Z,oe)=>s[Z.toLowerCase()]=oe,P=(Z,oe)=>d[Z.toLowerCase()]=oe;return{addButton:S(e,"button"),addGroupToolbarButton:S(e,"grouptoolbarbutton"),addToggleButton:S(e,"togglebutton"),addMenuButton:S(e,"menubutton"),addSplitButton:S(e,"splitbutton"),addMenuItem:S(t,"menuitem"),addNestedMenuItem:S(t,"nestedmenuitem"),addToggleMenuItem:S(t,"togglemenuitem"),addAutocompleter:S(n,"autocompleter"),addContextMenu:S(a,"contextmenu"),addContextToolbar:S(c,"contexttoolbar"),addContextForm:D(c,"contextform"),addSidebar:S(p,"sidebar"),addView:S(b,"views"),addIcon:M,addContext:P,getAll:()=>({buttons:e,menuItems:t,icons:s,popups:n,contextMenus:a,contextToolbars:c,sidebars:p,views:b,contexts:d})}},cZ=e=>{let t=e.ui.registry.getAll().popups,n=$r(t,d=>iZ(d).fold(p=>{throw new Error(Gy(p))},Ln)),s=pg(Vr(n,d=>d.trigger)),a=eo(n);return{dataset:n,triggers:s,lookupByTrigger:d=>Lt(a,p=>p.trigger===d)}},uZ=(e,t)=>{let n=ps(t.load,50);e.on("input",s=>{s.inputType==="insertCompositionText"&&!e.composing||n.throttle()}),e.on("keydown",s=>{let a=s.which;a===8?n.throttle():a===27?(n.cancel(),t.cancelIfNecessary()):(a===38||a===40)&&n.cancel()},!0),e.on("remove",n.cancel)},dZ=e=>{let t=Ca(),n=Us(!1),s=t.isSet,a=()=>{s()&&(mT(e),n.set(!1),t.clear())},c=M=>{s()||t.set({trigger:M.trigger,matchLength:M.text.length})},d=ni(()=>cZ(e)),p=M=>t.get().map(P=>eL(e.dom,e.selection.getRng(),P.trigger,!0).bind(Z=>LF(e,d,Z,M))).getOrThunk(()=>tZ(e,d)),b=M=>{p(M).fold(a,P=>{c(P.context),P.lookupData.then(Z=>{t.get().map(oe=>{let Y=P.context;oe.trigger===Y.trigger&&(t.set({...oe,matchLength:Y.text.length}),n.get()?(pS(e,{range:Y.range}),dT(e,{lookupData:Z})):(n.set(!0),pS(e,{range:Y.range}),fS(e,{lookupData:Z})))})})})},S=(M,P)=>{let Z=M.compareBoundaryPoints(window.Range.START_TO_START,P),oe=M.compareBoundaryPoints(window.Range.END_TO_END,P);return Z>=0&&oe<=0},D=()=>t.get().bind(({trigger:M})=>{let P=e.selection.getRng();return eL(e.dom,P,M,n.get()).filter(({range:Z})=>S(P,Z)).map(({range:Z})=>Z)});e.addCommand("mceAutocompleterReload",(M,P)=>{let Z=At(P)?P.fetchOptions:{};b(Z)}),e.addCommand("mceAutocompleterClose",a),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{D().each(M=>{pS(e,{range:M})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>D().isSome()),uZ(e,{cancelIfNecessary:a,load:b})},mZ=ct().browser.isSafari(),IF=e=>Gd(q.fromDom(e)),FF=(e,t)=>e.startOffset===0&&e.endOffset===t.textContent?.length,dN=(e,t)=>L.from(e.getParent(t.container(),"details")),HF=(e,t)=>dN(e,t).isSome(),gZ=(e,t)=>{let n=L.from(e.getParent(t.startContainer,"details")),s=L.from(e.getParent(t.endContainer,"details"));if(n.isSome()||s.isSome()){let a=n.bind(c=>L.from(e.select("summary",c)[0]));return L.some({startSummary:a,startDetails:n,endDetails:s})}else return L.none()},fZ=(e,t)=>Yi(t).exists(n=>n.isEqual(e)),pZ=(e,t)=>yd(t).exists(n=>zs(n.getNode())&&Gc(t,n).exists(s=>s.isEqual(e))||n.isEqual(e)),hZ=(e,t)=>t.startSummary.exists(n=>fZ(e,n)),bZ=(e,t)=>t.startSummary.exists(n=>pZ(e,n)),vZ=(e,t)=>t.startDetails.exists(n=>Gc(n,e).forall(s=>t.startSummary.exists(a=>!a.contains(e.container())&&a.contains(s.container())))),yZ=(e,t,n)=>n.startDetails.exists(s=>cc(e,t).forall(a=>!s.contains(a.container()))),zF=(e,t)=>{let n=t.getNode();ns(n)||e.selection.setCursorLocation(n,t.offset())},$F=(e,t,n)=>{let s=e.dom.getParent(t.container(),"details");if(s&&!s.open){let a=e.dom.select("summary",s)[0];a&&(n?Yi(a):yd(a)).each(d=>zF(e,d))}else zF(e,t)},CZ=(e,t)=>{let n=b=>b.contains(e.startContainer),s=b=>b.contains(e.endContainer),a=t.startSummary.exists(n),c=t.startSummary.exists(s),d=t.startDetails.forall(b=>t.endDetails.forall(S=>b!==S));return(a||c)&&!(a&&c)||d},VF=(e,t,n)=>{let{dom:s,selection:a}=e,c=e.getBody();if(n==="character"){let d=Fe.fromRangeStart(a.getRng()),p=s.getParent(d.container(),s.isBlock),b=dN(s,d),S=p&&s.isEmpty(p),D=me(p?.previousSibling),M=me(p?.nextSibling);return S&&(t?M:D)&&Iu(!t,c,d).exists(oe=>HF(s,oe)&&!dr(b,dN(s,oe)))?!0:Iu(t,c,d).fold(pn,P=>{let Z=dN(s,P);if(HF(s,P)&&!dr(b,Z)){if(t||$F(e,P,!1),p&&S){if(t&&D)return!0;if(!t&&M)return!0;$F(e,P,t),e.dom.remove(p)}return!0}else return!1})}else return!1},wZ=(e,t,n,s)=>{let c=e.selection.getRng(),d=Fe.fromRangeStart(c),p=e.getBody();return s==="selection"?CZ(c,t):n?bZ(d,t)||yZ(p,d,t):hZ(d,t)||vZ(d,t)},xZ=(e,t,n)=>gZ(e.dom,e.selection.getRng()).fold(()=>VF(e,t,n),s=>wZ(e,s,t,n)||VF(e,t,n)),SZ=(e,t,n)=>{let s=e.selection,a=s.getNode(),c=s.getRng(),d=Fe.fromRangeStart(c);return $x(a)?(n==="selection"&&FF(c,a)||cw(t,d,a)?IF(a):e.undoManager.transact(()=>{let p=s.getSel(),{anchorNode:b,anchorOffset:S,focusNode:D,focusOffset:M}=p??{},P=()=>{Ve(b)&&Ve(S)&&Ve(D)&&Ve(M)&&p?.setBaseAndExtent(b,S,D,M)},Z=()=>{b=p?.anchorNode,S=p?.anchorOffset,D=p?.focusNode,M=p?.focusOffset},oe=(ne,he)=>{Pe(ne.childNodes,be=>{E1(be)&&he.appendChild(be)})},Y=e.dom.create("span",{"data-mce-bogus":"1"});oe(a,Y),a.appendChild(Y),P(),(n==="word"||n==="line")&&p?.modify("extend",t?"right":"left",n),!s.isCollapsed()&&FF(s.getRng(),Y)?IF(a):(e.execCommand(t?"ForwardDelete":"Delete"),Z(),oe(Y,a),P()),e.dom.remove(Y)}),!0):!1},ly=(e,t,n)=>xZ(e,t,n)||mZ&&SZ(e,t,n)?L.some(wt):L.none(),UF=e=>(t,n,s={})=>{let a=t.getBody(),c={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:wt,inputType:n},d=Nu(new InputEvent(e));return t.dispatch(e,{...d,...c,...s})},TE=UF("input"),mN=UF("beforeinput"),ZF=ct(),WF=ZF.os,jF=WF.isMacOS()||WF.isiOS(),kZ=ZF.browser.isFirefox(),EZ=(e,t,n)=>{let s=n.keyCode===St.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=e.selection.isCollapsed(),c=a?"character":"selection",d=p=>a?p?"word":"line":"selection";aF([{keyCode:St.BACKSPACE,action:hn(VI,e)},{keyCode:St.BACKSPACE,action:hn(xP,e,!1)},{keyCode:St.DELETE,action:hn(xP,e,!0)},{keyCode:St.BACKSPACE,action:hn(yP,e,!1)},{keyCode:St.DELETE,action:hn(yP,e,!0)},{keyCode:St.BACKSPACE,action:hn(BP,e,t,!1)},{keyCode:St.DELETE,action:hn(BP,e,t,!0)},{keyCode:St.BACKSPACE,action:hn(rk,e,!1)},{keyCode:St.DELETE,action:hn(rk,e,!0)},{keyCode:St.BACKSPACE,action:hn(ly,e,!1,c)},{keyCode:St.DELETE,action:hn(ly,e,!0,c)},...jF?[{keyCode:St.BACKSPACE,altKey:!0,action:hn(ly,e,!1,d(!0))},{keyCode:St.DELETE,altKey:!0,action:hn(ly,e,!0,d(!0))},{keyCode:St.BACKSPACE,metaKey:!0,action:hn(ly,e,!1,d(!1))}]:[{keyCode:St.BACKSPACE,ctrlKey:!0,action:hn(ly,e,!1,d(!0))},{keyCode:St.DELETE,ctrlKey:!0,action:hn(ly,e,!0,d(!0))}],{keyCode:St.BACKSPACE,action:hn(kP,e,!1)},{keyCode:St.DELETE,action:hn(kP,e,!0)},{keyCode:St.BACKSPACE,action:hn(FP,e,!1)},{keyCode:St.DELETE,action:hn(FP,e,!0)},{keyCode:St.BACKSPACE,action:hn(bP,e,!1)},{keyCode:St.DELETE,action:hn(bP,e,!0)},{keyCode:St.BACKSPACE,action:hn(hP,e,!1)},{keyCode:St.DELETE,action:hn(hP,e,!0)},{keyCode:St.BACKSPACE,action:hn(LP,e,!1)},{keyCode:St.DELETE,action:hn(LP,e,!0)},{keyCode:St.BACKSPACE,action:hn(SP,e,!1)},{keyCode:St.DELETE,action:hn(SP,e,!0)},{keyCode:St.BACKSPACE,action:hn(zP,e,!1)},{keyCode:St.DELETE,action:hn(zP,e,!0)}],n).filter(p=>e.selection.isEditable()).each(p=>{n.preventDefault(),mN(e,s).isDefaultPrevented()||(p(),TE(e,s))})},TZ=(e,t,n,s)=>kE([{keyCode:St.BACKSPACE,action:hn(KL,e)},{keyCode:St.DELETE,action:hn(KL,e)},...jF?[{keyCode:St.BACKSPACE,altKey:!0,action:hn(SE,e)},{keyCode:St.DELETE,altKey:!0,action:hn(SE,e)},...n?[{keyCode:kZ?224:91,action:hn(()=>(BI(e,s),SE(e)))}]:[]]:[{keyCode:St.BACKSPACE,ctrlKey:!0,action:hn(SE,e)},{keyCode:St.DELETE,ctrlKey:!0,action:hn(SE,e)}]],t),AZ=(e,t)=>{let n=!1,s=[];e.on("keydown",a=>{n=a.keyCode===St.BACKSPACE,s=PP(e),a.isDefaultPrevented()||EZ(e,t,a)}),e.on("keyup",a=>{a.isDefaultPrevented()||(TZ(e,a,n,s),s.length=0),n=!1})},_Z=(e,t)=>{let n=q.fromDom(e),s=q.fromDom(t),a=pu("span"),c=_t(Qt,n),d=b=>Xs(b)&&Id(b,"font-size").isSome(),p=[...d(s)?[s]:[],...oc(s,d,c)];Pe(p.slice(1),b=>{Dc(b,"font-size"),Ws(b,"data-mce-style"),a(b)&&kp(b)&&yi(b)})},OZ=e=>{for(;e;){if(It(e)||tt(e)&&e.data&&/[\r\n\s]/.test(e.data))return L.from(q.fromDom(e));e=e.nextSibling}return L.none()},Ax=(e,t)=>{let n=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){let c=b=>/^(ul|ol|dl)$/.test(fn(b)),d=b=>c(b)?L.from(b):no(b,c),p=b=>n.isEmpty(b.dom);OZ(t.firstChild).each(b=>{d(b).fold(()=>{if(p(b)){let S=QV(b,0).element;Xs(S)&&!zl(S)&&Oo(S,q.fromText(ws))}},S=>{Zr(S,q.fromText(ws))})})}let a=n.createRng();if(t.normalize(),t.hasChildNodes()){let c=new er(t,t),d=t,p;for(;p=c.current();){if(tt(p)){a.setStart(p,0),a.setEnd(p,0);break}if(s[p.nodeName.toLowerCase()]){a.setStartBefore(p),a.setEndBefore(p);break}d=p,p=c.next()}p||(a.setStart(d,0),a.setEnd(d,0))}else zs(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(a.setStartBefore(t),a.setEndBefore(t)):(a.setStartAfter(t),a.setEndAfter(t)):(a.setStart(t,0),a.setEnd(t,0));e.selection.setRng(a),bb(e,a)},AE=(e,t)=>{let n=e.getRoot(),s,a=t;for(;a!==n&&a&&e.getContentEditable(a)!=="false";){if(e.getContentEditable(a)==="true"){s=a;break}a=a.parentNode}return a!==n?s:n},tL=e=>L.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),DZ=e=>tL(e).fold(lt(""),t=>t.nodeName.toUpperCase()),RZ=e=>tL(e).filter(t=>Vm(q.fromDom(t))).isSome(),nL=e=>{e.innerHTML='<br data-mce-bogus="1">'},NZ=(e,t,n)=>{let s=e.dom;L.from(n.style).map(s.parseStyle).each(b=>{let D={...Om(q.fromDom(t)),...b};s.setStyles(t,D)});let a=L.from(n.class).map(b=>b.split(/\s+/)),c=L.from(t.className).map(b=>Lt(b.split(/\s+/),S=>S!==""));sr(a,c,(b,S)=>{let D=Lt(S,P=>!In(b,P)),M=[...b,...D];s.setAttrib(t,"class",M.join(" "))});let d=["style","class"],p=us(n,(b,S)=>!In(d,S));s.setAttribs(t,p)},_E=(e,t)=>{if(fi(e).toLowerCase()===t.tagName.toLowerCase()){let s=Yp(e);NZ(e,t,s)}},qF=(e,t,n,s,a=!0,c,d)=>{let p=e.dom,b=e.schema,S=fi(e),D=n?n.nodeName.toUpperCase():"",M=t,P=b.getTextInlineElements(),Z;c||D==="TABLE"||D==="HR"?Z=p.create(c||S,d||{}):Z=n.cloneNode(!1);let oe=Z;if(!a)p.setAttrib(Z,"style",null),p.setAttrib(Z,"class",null);else{do if(P[M.nodeName]){if(Xi(M)||Cl(M))continue;let Y=M.cloneNode(!1);p.setAttrib(Y,"id",""),Z.hasChildNodes()?(Y.appendChild(Z.firstChild),Z.appendChild(Y)):(oe=Y,Z.appendChild(Y))}while((M=M.parentNode)&&M!==s);Z.nodeName!=="LI"&&_Z(Z,oe)}return _E(e,Z),nL(oe),Z},MZ=(e,t)=>e.dom.getParent(t,lv),BZ=(e,t,n)=>{let s=t;for(;s&&s!==e&&me(s.nextSibling);){let a=s.parentElement;if(!a||!n(a))return lv(a);s=a}return!1},PZ=(e,t,n)=>!t&&n.nodeName.toLowerCase()===fi(e)&&e.dom.isEmpty(n)&&BZ(e.getBody(),n,s=>Yt(e.schema.getTextBlockElements(),s.nodeName.toLowerCase())),LZ=(e,t,n)=>{let s=t(fi(e)),a=MZ(e,n);a&&(e.dom.insertAfter(s,a),Ax(e,s),(n.parentElement?.childNodes?.length??0)>1&&e.dom.remove(n))},IZ=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,FZ=e=>e.parentNode?.firstChild===e,GF=(e,t)=>{let n=e?.parentNode;return Ve(n)&&n.nodeName===t},KF=e=>Ve(e)&&/^(OL|UL|LI)$/.test(e.nodeName),oL=e=>Ve(e)&&/^(LI|DT|DD)$/.test(e.nodeName),HZ=e=>KF(e)&&KF(e.parentNode),gN=e=>{let t=e.parentNode;return oL(t)?t:e},fN=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!It(s);)s=s[n?"nextSibling":"previousSibling"];return s===t},YF=e=>Mt(Vr(Om(q.fromDom(e)),(t,n)=>`${n}: ${t};`),(t,n)=>t+n,""),zZ=(e,t,n,s,a)=>{let c=e.dom,d=e.selection.getRng(),p=n.parentNode;if(n===e.getBody()||!p)return;HZ(n)&&(a="LI");let b=oL(s)?YF(s):void 0,S=oL(s)&&b?t(a,{style:YF(s)}):t(a);if(fN(n,s,!0)&&fN(n,s,!1))if(GF(n,"LI")){let D=gN(n);c.insertAfter(S,D),FZ(n)?c.remove(D):c.remove(n)}else c.replace(S,n);else if(fN(n,s,!0))GF(n,"LI")?(c.insertAfter(S,gN(n)),S.appendChild(c.doc.createTextNode(" ")),S.appendChild(n)):p.insertBefore(S,n),c.remove(s);else if(fN(n,s,!1))c.insertAfter(S,gN(n)),c.remove(s);else{n=gN(n);let D=d.cloneRange();D.setStartAfter(s),D.setEndAfter(n);let M=D.extractContents();if(a==="LI"&&IZ(M,"LI")){let P=Lt(Kt(S.children,q.fromDom),Ya(pu("br")));S=M.firstChild,c.insertAfter(M,n),Pe(P,Z=>od(q.fromDom(S),Z)),b&&S.setAttribute("style",b)}else c.insertAfter(M,n),c.insertAfter(S,n);c.remove(s)}Ax(e,S)},$Z=e=>{Pe(Bc(q.fromDom(e),Sa),t=>{let n=t.dom;n.nodeValue=yl(n.data)})},VZ=(e,t)=>{let n=e.dom.getParent(t,"ol,ul,dl");return n!==null&&e.dom.getContentEditableParent(n)==="false"},UZ=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),sL=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,ZZ=(e,t)=>e.nodeName===t||e.nextSibling&&e.nextSibling.nodeName===t,rL=(e,t)=>Ve(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",WZ=(e,t,n)=>{let s=[];if(!n)return;let a=n;for(;a=a.firstChild;){if(e.isBlock(a))return;It(a)&&!t[a.nodeName.toLowerCase()]&&s.push(a)}let c=s.length;for(;c--;)a=s[c],(!a.hasChildNodes()||a.firstChild===a.lastChild&&a.firstChild?.nodeValue===""||UZ(e,a))&&e.remove(a)},aL=(e,t,n)=>tt(t)?e?n===1&&t.data.charAt(n-1)===Qr?0:n:n===t.data.length-1&&t.data.charAt(n)===Qr?t.data.length:n:n,jZ=e=>{let t=e.cloneRange();return t.setStart(e.startContainer,aL(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,aL(!1,e.endContainer,e.endOffset)),t},qZ=e=>{let t=e;do tt(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},GZ=(e,t,n,s,a)=>{let c=e.dom,d=AE(c,s)??c.getRoot(),p=c.getParent(s,c.isBlock);if(!p||!rL(c,p)){if(p=p||d,!p.hasChildNodes()){let M=c.create(t);return _E(e,M),p.appendChild(M),n.setStart(M,0),n.setEnd(M,0),M}let b=s;for(;b&&b.parentNode!==p;)b=b.parentNode;let S;for(;b&&!c.isBlock(b);)S=b,b=b.previousSibling;let D=S?.parentElement?.nodeName;if(S&&D&&e.schema.isValidChild(D,t.toLowerCase())){let M=S.parentNode,P=c.create(t);for(_E(e,P),M.insertBefore(P,S),b=S;b&&!c.isBlock(b);){let Z=b.nextSibling;P.appendChild(b),b=Z}n.setStart(s,a),n.setEnd(s,a)}}return s},KZ=(e,t)=>{t.normalize();let n=t.lastChild;(!n||It(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")},YZ=(e,t)=>{let n=CT(e);return os(t)?!1:pt(n)?In(et.explode(n),t.nodeName.toLowerCase()):n},XF={insert:(e,t)=>{let n,s,a,c,d=!1,p=e.dom,b=e.schema,S=b.getNonEmptyElements(),D=e.selection.getRng(),M=fi(e),P=q.fromDom(D.startContainer),Z=$o(P,D.startOffset),oe=Z.exists(ze=>Cm(ze)&&!wi(ze)),Y=D.collapsed&&oe,ne=(ze,yt)=>qF(e,n,Ct,qe,CS(e),ze,yt),he=ze=>{let yt=aL(ze,n,s);if(tt(n)&&(ze?yt>0:yt<n.data.length))return!1;if((n.parentNode===Ct||n===Ct)&&d&&!ze||ze&&It(n)&&n===Ct.firstChild)return!0;if(sL(n,"TABLE")||sL(n,"HR"))return ZZ(n,"BR")?!ze:d&&!ze||!d&&ze;let mn=new er(n,Ct);tt(n)&&(ze&&yt===0?mn.prev():!ze&&yt===n.data.length&&mn.next());let gn;for(;gn=mn.current();){if(It(gn)){if(!gn.getAttribute("data-mce-bogus")){let Qn=gn.nodeName.toLowerCase();if(S[Qn]&&Qn!=="br")return!1}}else if(tt(gn)&&!Fc(gn.data))return!1;ze?mn.prev():mn.next()}return!0},be=()=>{let ze;return/^(H[1-6]|PRE|FIGURE)$/.test(a)&&Vt!=="HGROUP"?ze=ne(M):ze=ne(),YZ(e,c)&&rL(p,c)&&p.isEmpty(Ct,void 0,{includeZwsp:!0})?ze=p.split(c,Ct):p.insertAfter(ze,Ct),Ax(e,ze),ze};PC(p,D).each(ze=>{D.setStart(ze.startContainer,ze.startOffset),D.setEnd(ze.endContainer,ze.endOffset)}),n=D.startContainer,s=D.startOffset;let Ce=!!(t&&t.shiftKey),He=!!(t&&t.ctrlKey);It(n)&&n.hasChildNodes()&&!Y&&(d=s>n.childNodes.length-1,n=n.childNodes[Math.min(s,n.childNodes.length-1)]||n,d&&tt(n)?s=n.data.length:s=0);let qe=AE(p,n);if(!qe||VZ(e,n))return;Ce||(n=GZ(e,M,D,n,s));let Ct=p.getParent(n,p.isBlock)||p.getRoot();c=Ve(Ct?.parentNode)?p.getParent(Ct.parentNode,p.isBlock):null,a=Ct?Ct.nodeName.toUpperCase():"";let Vt=c?c.nodeName.toUpperCase():"";if(Vt==="LI"&&!He){let ze=c;Ct=ze,c=ze.parentNode,a=Vt}if(It(c)&&PZ(e,Ce,Ct))return LZ(e,ne,Ct);if(/^(LI|DT|DD)$/.test(a)&&It(c)&&p.isEmpty(Ct)){zZ(e,ne,c,Ct,M);return}if(!Y&&(Ct===e.getBody()||!rL(p,Ct)))return;let Ie=Ct.parentNode,_e;if(Y)_e=ne(M),Z.fold(()=>{Oo(P,q.fromDom(_e))},ze=>{Zr(ze,q.fromDom(_e))}),e.selection.setCursorLocation(_e,0);else if($f(Ct))_e=_v(Ct),p.isEmpty(Ct)&&nL(Ct),_E(e,_e),Ax(e,_e);else if(he(!1))_e=be();else if(he(!0)&&Ie){let ze=Fe.fromRangeStart(D),yt=i2(ze),mn=q.fromDom(Ct),Qn=tm(mn,ze,e.schema)?wb(mn,ze,e.schema).bind(ys=>L.from(ys.getNode())):L.none();_e=Ie.insertBefore(ne(),Ct);let Fo=sL(Ct,"HR")||yt?_e:Qn.getOr(Ct);Ax(e,Fo)}else{let ze=jZ(D).cloneRange();ze.setEndAfter(Ct);let yt=ze.extractContents();$Z(yt),qZ(yt),_e=yt.firstChild,Ct===_e?Ve(Ie)&&p.insertAfter(yt,Ie):p.insertAfter(yt,Ct),WZ(p,S,_e),KZ(p,Ct),p.isEmpty(Ct)&&nL(Ct),_e.normalize(),p.isEmpty(_e)?(p.remove(_e),be()):(_E(e,_e),Ax(e,_e))}p.setAttrib(_e,"id",""),e.dispatch("NewBlock",{newBlock:_e})},fakeEventName:"insertParagraph"},XZ=(e,t,n)=>{let s=new er(t,n),a,c=e.getNonEmptyElements();for(;a=s.next();)if(c[a.nodeName.toLowerCase()]||tt(a)&&a.length>0)return!0;return!1},JF=(e,t,n)=>{let s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),bb(e,s)},JZ=(e,t)=>{let n=e.selection,s=e.dom,a=n.getRng(),c,d=!1;PC(s,a).each(Z=>{a.setStart(Z.startContainer,Z.startOffset),a.setEnd(Z.endContainer,Z.endOffset)});let p=a.startOffset,b=a.startContainer;if(It(b)&&b.hasChildNodes()){let Z=p>b.childNodes.length-1;b=b.childNodes[Math.min(p,b.childNodes.length-1)]||b,Z&&tt(b)?p=b.data.length:p=0}let S=s.getParent(b,s.isBlock),D=S&&S.parentNode?s.getParent(S.parentNode,s.isBlock):null,M=D?D.nodeName.toUpperCase():"",P=!!(t&&t.ctrlKey);M==="LI"&&!P&&(S=D),tt(b)&&p>=b.data.length&&(XZ(e.schema,b,S||s.getRoot())||(c=s.create("br"),a.insertNode(c),a.setStartAfter(c),a.setEndAfter(c),d=!0)),c=s.create("br"),zy(s,a,c),JF(e,c,d),e.undoManager.add()},QZ=(e,t)=>{let n=q.fromTag("br");Zr(q.fromDom(t),n),e.undoManager.add()},eW=(e,t)=>{nW(e.getBody(),t)||Pl(q.fromDom(t),q.fromTag("br"));let n=q.fromTag("br");Pl(q.fromDom(t),n),JF(e,n.dom,!1),e.undoManager.add()},tW=e=>zs(e.getNode()),nW=(e,t)=>tW(Fe.after(t))?!0:cc(e,Fe.after(t)).map(n=>zs(n.getNode())).getOr(!1),QF=e=>e&&e.nodeName==="A"&&"href"in e,oW=e=>e.fold(pn,QF,QF,pn),sW=e=>{let t=_t(tp,e),n=Fe.fromRangeStart(e.selection.getRng());return Eh(t,e.getBody(),n).filter(oW)},rW=(e,t)=>{t.fold(wt,_t(QZ,e),_t(eW,e),wt)},eH={insert:(e,t)=>{let n=sW(e);n.isSome()?n.each(_t(rW,e)):JZ(e,t)},fakeEventName:"insertLineBreak"},tH=(e,t)=>tL(e).filter(n=>t.length>0&&Pa(q.fromDom(n),t)).isSome(),aW=e=>tH(e,y6(e)),iW=e=>tH(e,C6(e)),um=Xn.generate([{br:[]},{block:[]},{none:[]}]),lW=(e,t)=>iW(e),nH=e=>(t,n)=>RZ(t)===e,oH=(e,t)=>(n,s)=>DZ(n)===e.toUpperCase()===t,cW=e=>{let t=AE(e.dom,e.selection.getStart());return os(t)},OE=e=>oH("pre",e),uW=()=>oH("summary",!0),pN=e=>(t,n)=>yT(t)===e,dW=(e,t)=>aW(e),hN=(e,t)=>t,mW=e=>{let t=fi(e),n=AE(e.dom,e.selection.getStart());return Ve(n)&&e.schema.isValidChild(n.nodeName,t)},gW=e=>{let t=e.selection.getRng(),n=q.fromDom(t.startContainer),a=$o(n,t.startOffset).map(c=>Cm(c)&&!wi(c));return t.collapsed&&a.getOr(!0)},dg=(e,t)=>(n,s)=>Mt(e,(c,d)=>c&&d(n,s),!0)?L.some(t):L.none(),fW=(e,t)=>tI([dg([lW],um.none()),dg([OE(!0),cW],um.none()),dg([uW()],um.br()),dg([OE(!0),pN(!1),hN],um.br()),dg([OE(!0),pN(!1)],um.block()),dg([OE(!0),pN(!0),hN],um.block()),dg([OE(!0),pN(!0)],um.br()),dg([nH(!0),hN],um.br()),dg([nH(!0)],um.block()),dg([dW],um.br()),dg([hN],um.br()),dg([mW],um.block()),dg([gW],um.block())],[e,!!(t&&t.shiftKey)]).getOr(um.none()),bN=(e,t,n)=>{t.mode.isReadOnly()||(t.selection.isCollapsed()||W_(t),!(Ve(n)&&mN(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,n),Ve(n)&&TE(t,e.fakeEventName)))},sH=(e,t)=>{if(e.mode.isReadOnly())return;let n=()=>bN(eH,e,t),s=()=>bN(XF,e,t),a=fW(e,t);switch(v6(e)){case"linebreak":a.fold(n,n,wt);break;case"block":a.fold(s,s,wt);break;case"invert":a.fold(s,n,wt);break;default:a.fold(n,s,wt);break}},rH=ct(),pW=rH.os.isiOS()&&rH.browser.isSafari(),aH=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),c7(e.undoManager),e.undoManager.transact(()=>{sH(e,t)}))},hW=e=>{if(!e.collapsed)return!1;let t=e.startContainer;if(tt(t)){let n=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,s=t.data.charAt(e.startOffset-1);return n.test(s)}else return!1},bW=e=>{let t=L.none(),n=a=>{t=L.some(a.selection.getBookmark()),a.undoManager.add()},s=(a,c)=>{a.undoManager.undo(),t.fold(wt,d=>a.selection.moveToBookmark(d)),aH(a,c),t=L.none()};e.on("keydown",a=>{a.keyCode===St.ENTER&&(pW&&hW(e.selection.getRng())?n(e):aH(e,a))}),e.on("keyup",a=>{a.keyCode===St.ENTER&&t.each(()=>s(e,a))})},vW=(e,t,n)=>{let s=En.os.isMacOS()||En.os.isiOS();kE([{keyCode:St.END,action:hn(QI,e,!0)},{keyCode:St.HOME,action:hn(QI,e,!1)},...s?[]:[{keyCode:St.HOME,action:hn(rN,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:St.END,action:hn(rN,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:St.END,action:hn(cF,e,!0)},{keyCode:St.HOME,action:hn(cF,e,!1)},{keyCode:St.END,action:hn(sN,e,!0,t)},{keyCode:St.HOME,action:hn(sN,e,!1,t)}],n).each(a=>{n.preventDefault()})},yW=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||vW(e,t,n)})},CW=e=>{e.on("input",t=>{t.isComposing||P_(e)})},wW=ct(),xW=(e,t,n)=>{kE([{keyCode:St.PAGE_UP,action:hn(sN,e,!1,t)},{keyCode:St.PAGE_DOWN,action:hn(sN,e,!0,t)}],n)},iH=e=>e.stopImmediatePropagation(),lH=e=>e.keyCode===St.PAGE_UP||e.keyCode===St.PAGE_DOWN,cH=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",iH,!0):!n&&e.get()&&t.off("NodeChange",iH),e.set(n)},SW=(e,t)=>{if(wW.os.isMacOS())return;let n=Us(!1);e.on("keydown",s=>{lH(s)&&cH(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()||xW(e,t,s),lH(s)&&n.get()&&(cH(n,e,!1),e.nodeChanged())})},uH=(e,t)=>e===t||e.contains(t),kW=(e,t)=>!uH(e.getBody(),t.startContainer)||!uH(e.getBody(),t.endContainer)?!0:A4(e.dom,t),EW=e=>{e.on("beforeinput",t=>{(!e.selection.isEditable()||ro(t.getTargetRanges(),n=>!kW(e,n)))&&t.preventDefault()})},dH=(e,t)=>{let n=t.container(),s=t.offset();return tt(n)?(n.insertData(s,e),L.some(Fe(n,s+e.length))):dC(t).map(a=>{let c=q.fromText(e);return t.isAtEnd()?Pl(a,c):Zr(a,c),Fe(c.dom,e.length)})},mH=_t(dH,ws),gH=_t(dH," "),TW=(e,t,n)=>O_(e,t,n)?mH(t):gH(t),AW=e=>t=>t.fold(n=>Gc(e.dom,Fe.before(n)),n=>Yi(n),n=>yd(n),n=>cc(e.dom,Fe.after(n))),_W=(e,t,n)=>s=>O_(e,s,n)?mH(t):gH(t),fH=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},OW=(e,t)=>e.isEditable(e.getParent(t,"summary")),DW=e=>{let t=Fe.fromRangeStart(e.selection.getRng()),n=q.fromDom(e.getBody());if(e.selection.isCollapsed()){let s=_t(tp,e),a=Fe.fromRangeStart(e.selection.getRng());return Eh(s,e.getBody(),a).bind(AW(n)).map(c=>()=>_W(n,t,e.schema)(c).each(fH(e)))}else return L.none()},RW=e=>{let t=()=>{let n=q.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");let s=Fe.fromRangeStart(e.selection.getRng());TW(n,s,e.schema).each(fH(e))};return bt(En.browser.isFirefox()&&e.selection.isEditable()&&OW(e.dom,e.selection.getRng().startContainer),t)},NW=(e,t)=>{aF([{keyCode:St.SPACEBAR,action:hn(DW,e)},{keyCode:St.SPACEBAR,action:hn(RW,e)}],t).each(n=>{t.preventDefault(),mN(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),TE(e,"insertText",{data:" "}))})},MW=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||NW(e,t)})},BW=e=>uo(e)?[{keyCode:St.TAB,action:hn(RF,e,!0)},{keyCode:St.TAB,shiftKey:!0,action:hn(RF,e,!1)}]:[],PW=(e,t)=>{kE([...BW(e)],t).each(n=>{t.preventDefault()})},LW=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||PW(e,t)})},IW=e=>{if(e.addShortcut("Meta+P","","mcePrint"),dZ(e),lm(e))return Us(null);{let t=E$(e);return EW(e),SV(e),UU(e,t),AZ(e,t),bW(e),MW(e),CW(e),LW(e),yW(e,t),SW(e,t),t}},FW=(e,t)=>{let n=Wb(e);n===null||y(e,n)||e.undoManager.transact(()=>{At(t.styles)&&e.dom.setStyles(n,t.styles),At(t.attrs)&&An(t.attrs,(s,a)=>e.dom.setAttrib(n,a,s))})},iL=(e,t)=>()=>{let n=Wb(e);return Ve(n)&&n.nodeName===t},HW=e=>{e.addCommand("InsertUnorderedList",(t,n)=>{kx(e,"UL",n)}),e.addCommand("InsertOrderedList",(t,n)=>{kx(e,"OL",n)}),e.addCommand("InsertDefinitionList",(t,n)=>{kx(e,"DL",n)}),e.addCommand("RemoveList",()=>{ou(e)}),e.addCommand("mceListUpdate",(t,n)=>{At(n)&&FW(e,n)}),e.addCommand("mceListBackspaceDelete",(t,n)=>{dn(e,n)}),e.addQueryStateHandler("InsertUnorderedList",iL(e,"UL")),e.addQueryStateHandler("InsertOrderedList",iL(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",iL(e,"DL"))},zW=e=>{e.on("keydown",t=>{t.keyCode===St.BACKSPACE?dn(e,!1)&&t.preventDefault():t.keyCode===St.DELETE&&dn(e,!0)&&t.preventDefault()})},pH=e=>e.type===3,hH=e=>e.length===0,$W=e=>{let t=(a,c)=>{let d=Ai.create("li");Pe(a,p=>d.append(p)),c?e.insert(d,c,!0):e.append(d)},n=(a,c)=>pH(c)?[...a,c]:!hH(a)&&!pH(c)?(t(a,c),[]):a,s=Mt(e.children(),n,[]);hH(s)||t(s)},VW=e=>{e.on("PreInit",()=>{let{parser:t}=e;t.addNodeFilter("ul,ol",n=>Pe(n,$W))})},UW=e=>{e.on("keydown",t=>{t.keyCode!==St.TAB||St.metaKeyPressed(t)||e.undoManager.transact(()=>{(t.shiftKey?jn(e):gp(e))&&t.preventDefault()})})},ZW=e=>{JT(e)&&UW(e)},WW=e=>{zW(e),HW(e),VW(e),ZW(e)};class jW{editor;lastPath=[];constructor(t){this.editor=t;let n,s=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",a=>{let c=t.selection.getRng(),d={startContainer:c.startContainer,startOffset:c.startOffset,endContainer:c.endContainer,endOffset:c.endOffset};(a.type==="nodechange"||!t2(d,n))&&t.dispatch("SelectionChange"),n=d}),t.on("contextmenu",()=>{AC(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{let a=t.selection.getStart(!0);a&&Gv(t)&&!s.isSameElementPath(a)&&t.dom.isChildOf(a,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",a=>{!a.isDefaultPrevented()&&Gv(t)&&(t.selection.getNode().nodeName==="IMG"?Yc.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){let n=this.editor,s=n.selection,a;if(n.initialized&&s&&!RT(n)&&!lC(n)){let c=n.getBody();a=s.getStart(!0)||c,(a.ownerDocument!==n.getDoc()||!n.dom.isChildOf(a,c))&&(a=c);let d=[];n.dom.getParent(a,p=>p===c?!0:(d.push(p),!1)),n.dispatch("NodeChange",{...t,element:a,parents:d})}}isSameElementPath(t){let n,s=this.editor,a=kl(s.dom.getParents(t,so,s.getBody()));if(a.length===this.lastPath.length){for(n=a.length;n>=0&&a[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=a,!0}return this.lastPath=a,!1}}let bH="x-tinymce/html",vN=lt(bH),lL="<!-- "+bH+" -->",qW=e=>lL+e,GW=e=>e.replace(lL,""),vH=e=>e.indexOf(lL)!==-1,KW=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),YW=(e,t)=>{let n="<"+e,s=Vr(t,(a,c)=>c+'="'+md.encodeAllRaw(a)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},XW=(e,t,n)=>{let s=e.split(/\n\n/),a=YW(t,n),c="</"+t+">",d=Kt(s,b=>b.split(/\n/).join("<br />")),p=b=>a+b+c;return d.length===1?d[0]:Kt(d,p).join("")},yH="%MCEPASTEBIN%",JW=(e,t)=>{let{dom:n,selection:s}=e,a=e.getBody();t.set(s.getRng());let c=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},yH);En.browser.isFirefox()&&n.setStyle(c,"left",n.getStyle(a,"direction",!0)==="rtl"?65535:-65535),n.bind(c,"beforedeactivate focusin focusout",d=>{d.stopPropagation()}),c.focus(),s.select(c,!0)},QW=(e,t)=>{let n=e.dom;if(cL(e)){let s,a=t.get();for(;s=cL(e);)n.remove(s),n.unbind(s);a&&e.selection.setRng(a)}t.set(null)},cL=e=>e.dom.get("mcepastebin"),ej=e=>Ve(e)&&e.id==="mcepastebin",tj=e=>{let t=e.dom,n=(d,p)=>{d.appendChild(p),t.remove(p,!0)},[s,...a]=Lt(e.getBody().childNodes,ej);Pe(a,d=>{n(s,d)});let c=t.select("div[id=mcepastebin]",s);for(let d=c.length-1;d>=0;d--){let p=t.create("div");s.insertBefore(p,c[d]),n(p,c[d])}return s?s.innerHTML:""},CH=e=>e===yH,nj=e=>{let t=Us(null);return{create:()=>JW(e,t),remove:()=>QW(e,t),getEl:()=>cL(e),getHtml:()=>tj(e),getLastRng:t.get}},wH=(e,t)=>(et.each(t,n=>{Qe(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),oj=e=>{let t=Zd(),n=af({},t),s="",a=t.getVoidElements(),c=et.makeMap("script noscript style textarea video audio iframe object"," "),d=t.getBlockElements(),p=b=>{let S=b.name,D=b;if(S==="br"){s+=`
`;return}if(S!=="wbr"){if(a[S]&&(s+=" "),c[S]){s+=" ";return}if(b.type===3&&(s+=b.value),!(b.name in t.getVoidElements())){let M=b.firstChild;if(M)do p(M);while(M=M.next)}d[S]&&D.next&&(s+=`
`,S==="p"&&(s+=`
`))}};return e=wH(e,[/<!\[[^\]]+\]>/g]),p(n.parse(e)),s},xH=e=>(e=wH(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,s,a)=>!s&&!a?" ":ws],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),sj=e=>{let t=0;return()=>e+t++},rj=e=>{let t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return et.hasOwn(n,t)?"image/"+n[t]:"image/"+t},aj=(e,t)=>{let n=af({sanitize:DS(e),sandbox_iframes:Jp(e),sandbox_iframes_exclusions:ob(e),convert_unsafe_embeds:RS(e)},e.schema);n.addNodeFilter("meta",a=>{et.each(a,c=>{c.remove()})});let s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return of({validate:!0},e.schema).serialize(s)},SH=(e,t)=>({content:e,cancelled:t}),ij=(e,t,n)=>{let s=e.dom.create("div",{style:"display:none"},t),a=hS(e,s,n);return SH(a.node.innerHTML,a.isDefaultPrevented())},lj=(e,t,n)=>{let s=d6(e,t,n),a=aj(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?ij(e,a,n):SH(a,s.isDefaultPrevented())},cj=(e,t,n)=>lj(e,t,n),uL=(e,t)=>(e.insertContent(t,{merge:U6(e),paste:!0}),!0),dL=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),uj=(e,t)=>dL(t)&&ro(GT(e),n=>vc(t.toLowerCase(),`.${n.toLowerCase()}`)),dj=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),mj=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),gj=(e,t,n)=>!e.selection.isCollapsed()&&dL(t)?mj(e,t,n):!1,fj=(e,t,n)=>uj(e,t)?dj(e,t,n):!1,pj=(e,t)=>{et.each([gj,fj,uL],n=>!n(e,t,uL))},hj=(e,t,n)=>{n||!Ki(e)?uL(e,t):pj(e,t)},bj=sj("mceclip"),vj=e=>{let t=KP();return xF(t,e),GP(t),t},kH=(e,t,n,s,a)=>{let c=cj(e,t,n);if(!c.cancelled){let d=c.content,p=()=>hj(e,d,s);a?mN(e,"insertFromPaste",{dataTransfer:vj(d)}).isDefaultPrevented()||(p(),TE(e,"insertFromPaste")):p()}},yN=(e,t,n,s)=>{let a=n||vH(t);kH(e,GW(t),a,!1,s)},mL=(e,t,n)=>{let s=e.dom.encode(t).replace(/\r\n/g,`
`),a=fy(s,W6(e)),c=XW(a,fi(e),Yp(e));kH(e,c,!1,!0,n)},EH=e=>{let t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){let s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},ev=(e,t)=>t in e&&e[t].length>0,TH=e=>ev(e,"text/html")||ev(e,"text/plain"),yj=(e,t)=>{let n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Ve(n)?e.dom.encode(n[1]):void 0},Cj=(e,t,n,s)=>{let a=bj(),c=xT(e)&&Ve(n.name),d=c?yj(e,n.name):a,p=c?n.name:void 0,b=t.create(a,n,s,d,p);return t.add(b),b},wj=(e,t)=>{kk(t.uri).each(({data:n,type:s,base64Encoded:a})=>{let c=a?n:btoa(n),d=t.file,p=e.editorUpload.blobCache,S=p.getByData(c,s)??Cj(e,p,d,c);yN(e,`<img src="${S.blobUri()}">`,!1,!0)})},xj=e=>e.type==="paste",Sj=e=>Promise.all(Kt(e,t=>fh(t).then(n=>({file:t,uri:n})))),kj=e=>{let t=GT(e);return n=>wn(n.type,"image/")&&ro(t,s=>rj(s)===n.type)},Ej=(e,t)=>{let n=t.items?cr(ks(t.items),a=>a.kind==="file"?[a.getAsFile()]:[]):[],s=t.files?ks(t.files):[];return Lt(n.length>0?n:s,kj(e))},AH=(e,t,n)=>{let s=xj(t)?t.clipboardData:t.dataTransfer;if(iC(e)&&s){let a=Ej(e,s);if(a.length>0)return t.preventDefault(),Sj(a).then(c=>{n&&e.selection.setRng(n),Pe(c,d=>{wj(e,d)})}),!0}return!1},Tj=e=>En.os.isAndroid()&&e.clipboardData?.items?.length===0,Aj=e=>St.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,gL=(e,t,n,s,a)=>{let c=xH(n),d=ev(t,vN())||vH(n),p=!d&&KW(c),b=dL(c);(CH(c)||!c.length||p&&!b)&&(s=!0),(s||b)&&(ev(t,"text/plain")&&p?c=t["text/plain"]:c=oj(c)),!CH(c)&&(s?mL(e,c,a):yN(e,c,d,a))},_j=(e,t,n)=>{let s,a=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",c=>{Aj(c)&&!c.isDefaultPrevented()&&(s=c.shiftKey&&c.keyCode===86)}),e.on("paste",c=>{if(c.isDefaultPrevented()||Tj(c))return;let d=n.get()==="text"||s;s=!1;let p=EH(c.clipboardData);!TH(p)&&AH(e,c,a())||(ev(p,"text/html")?(c.preventDefault(),gL(e,p,p["text/html"],d,!0)):ev(p,"text/plain")&&ev(p,"text/uri-list")?(c.preventDefault(),gL(e,p,p["text/plain"],d,!0)):(t.create(),Yc.setEditorTimeout(e,()=>{let b=t.getHtml();t.remove(),gL(e,p,b,d,!1)},0)))})},Oj=e=>{let t=a=>wn(a,"webkit-fake-url"),n=a=>wn(a,"data:"),s=a=>a.data?.paste===!0;e.parser.addNodeFilter("img",(a,c,d)=>{if(!iC(e)&&s(d))for(let p of a){let b=p.attr("src");pt(b)&&!p.attr("data-mce-object")&&b!==En.transparentSrc&&(t(b)||!jc(e)&&n(b))&&p.remove()}})},Dj=(e,t,n)=>{_j(e,t,n),Oj(e)},Rj=(e,t)=>{t.get()==="text"?(t.set("html"),gT(e,!1)):(t.set("text"),gT(e,!0)),e.focus()},Nj=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{Rj(e,t)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&yN(e,s.html,s.internal,!1),s.text&&mL(e,s.text,!1)})},Mj=(e,t,n)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(vN(),t),!0}catch{return!1}else return!1},_H=(e,t,n,s)=>{Mj(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},OH=e=>(t,n)=>{let{dom:s,selection:a}=e,c=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),d=s.create("div",{contenteditable:"true"},t);s.setStyles(c,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),c.appendChild(d),s.add(e.getBody(),c);let p=a.getRng();d.focus();let b=s.createRng();b.selectNodeContents(d),a.setRng(b),Yc.setEditorTimeout(e,()=>{a.setRng(p),s.remove(c),n()},0)},DH=e=>({html:qW(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),Bj=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),RH=e=>!e.selection.isCollapsed()||Bj(e),Pj=(e,t)=>n=>{!n.isDefaultPrevented()&&RH(e)&&e.selection.isEditable()&&_H(n,DH(e),OH(e),()=>{if(En.browser.isChromium()||En.browser.isFirefox()){let s=e.selection.getRng();Yc.setEditorTimeout(e,()=>{e.selection.setRng(s),$P(e,t)},0)}else $P(e,t)})},Lj=e=>t=>{!t.isDefaultPrevented()&&RH(e)&&_H(t,DH(e),OH(e),wt)},Ij=(e,t)=>{e.on("cut",Pj(e,t)),e.on("copy",Lj(e))},NH=(e,t)=>Xc.getCaretRangeFromPoint(t.clientX??0,t.clientY??0,e.getDoc()),Fj=e=>{let t=e["text/plain"];return t?t.indexOf("file://")===0:!1},MH=(e,t)=>{t&&e.selection.setRng(t),e.focus()},Hj=e=>ro(e.files,t=>/^image\//.test(t.type)),zj=(e,t,n,s)=>{let a=e.getParent(n,d=>Pm(t,d));if(!me(e.getParent(n,"summary")))return!0;if(a&&Yt(s,"text/html")){let d=new DOMParser().parseFromString(s["text/html"],"text/html").body;return!me(d.querySelector(a.nodeName.toLowerCase()))}else return!1},$j=e=>{e.on("input",t=>{let n=s=>me(s.querySelector("summary"));if(t.inputType==="deleteByDrag"){let s=Lt(e.dom.select("details"),n);Pe(s,a=>{zs(a.firstChild)&&a.firstChild.remove();let c=e.dom.create("summary");c.appendChild(Hf().dom),a.prepend(c)})}})},Vj=(e,t)=>{zT(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),iC(e)||e.on("drop",n=>{let s=n.dataTransfer;s&&Hj(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented())return;let s=NH(e,n);if(os(s))return;let a=EH(n.dataTransfer),c=ev(a,vN());if((!TH(a)||Fj(a))&&AH(e,n,s))return;let d=a[vN()],p=d||a["text/html"]||a["text/plain"],b=zj(e.dom,e.schema,s.startContainer,a),S=t.get();S&&!b||p&&(n.preventDefault(),Yc.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(d||S&&b)&&e.execCommand("Delete"),MH(e,s);let D=xH(p);a["text/html"]?yN(e,D,c,!0):mL(e,D,!0)})}))}),e.on("dragstart",n=>{t.set(!0)}),e.on("dragover dragend",n=>{iC(e)&&!t.get()&&(n.preventDefault(),MH(e,NH(e,n))),n.type==="dragend"&&t.set(!1)}),$j(e)},Uj=e=>{let t=a=>c=>{a(e,c)},n=H6(e);zt(n)&&e.on("PastePreProcess",t(n));let s=z6(e);zt(s)&&e.on("PastePostProcess",t(s))},Zj=(e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})},Wj=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,BH=e=>et.trim(e).replace(Wj,Mf).toLowerCase(),jj=(e,t,n)=>{let s=V6(e);if(n||s==="all"||!$T(e))return t;let a=s?s.split(/[, ]/):[];if(a&&s!=="none"){let c=e.dom,d=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(p,b,S,D)=>{let M=c.parseStyle(c.decode(S)),P={};for(let oe=0;oe<a.length;oe++){let Y=M[a[oe]],ne=Y,he=c.getStyle(d,a[oe],!0);/color/.test(a[oe])&&(ne=BH(ne),he=BH(he)),he!==ne&&(P[a[oe]]=Y)}let Z=c.serializeStyle(P,"span");return Z?b+' style="'+Z+'"'+D:b+D})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(c,d,p,b)=>d+' style="'+p+'"'+b),t},qj=e=>{(En.browser.isChromium()||En.browser.isSafari())&&Zj(e,jj)},Gj=(e,t)=>{let n=Us(!1),s=Us(Z6(e)?"text":"html"),a=nj(e);qj(e),Nj(e,s),Uj(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>s.get()==="text"),e.on("PreInit",()=>{Ij(e,t),Vj(e,n),Dj(e,a,s)})},Kj=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},Yj=e=>{e.parser.addNodeFilter("details",t=>{let n=Fv(e);Pe(t,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{let n=jf(e);Pe(t,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})})},Xj=e=>{Kj(e),Yj(e)},Jj=zs,PH=tt,Qj=e=>Vo(e.dom),eq=e=>Ui(e.dom),LH=e=>t=>Qt(q.fromDom(e),t),tq=(e,t,n)=>ha(q.fromDom(e),s=>eq(s)||n.isBlock(fn(s)),LH(t)).getOr(q.fromDom(t)).dom,IH=(e,t)=>ha(q.fromDom(e),Qj,LH(t)),FH=(e,t,n)=>{let s=new er(e,t),a=n?s.next.bind(s):s.prev.bind(s),c=e;for(let d=n?e:a();d&&!Jj(d);d=a())On(d)&&(c=d);return c},nq=(e,t,n)=>{let a=Fe.fromRangeStart(e).getNode(),c=tq(a,t,n),d=FH(a,c,!1),p=FH(a,c,!0),b=document.createRange();return IH(d,c).fold(()=>{PH(d)?b.setStart(d,0):b.setStartBefore(d)},S=>b.setStartBefore(S.dom)),IH(p,c).fold(()=>{PH(p)?b.setEnd(p,p.data.length):b.setEndAfter(p)},S=>b.setEndAfter(S.dom)),b},oq=e=>{let t=nq(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(gh(t))},sq=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),oq(e))})};var _x;(function(e){e.Before="before",e.After="after"})(_x||(_x={}));let rq=(e,t)=>Math.abs(e.left-t),aq=(e,t)=>Math.abs(e.right-t),iq=(e,t)=>e>=t.top&&e<=t.bottom,lq=(e,t)=>e.top<t.bottom&&e.bottom>t.top,cq=(e,t)=>{let n=ae(e,t)/Math.min(e.height,t.height);return lq(e,t)&&n>.5},uq=(e,t)=>{let n=Lt(e,s=>iq(t,s));return re(n).fold(()=>[[],e],s=>{let{pass:a,fail:c}=cs(e,d=>cq(d,s));return[a,c]})},dq=(e,t)=>({node:e.node,position:rq(e,t)<aq(e,t)?_x.Before:_x.After}),mq=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),fL=(e,t,n,s)=>{let a=M=>On(M.node)?L.some(M):It(M.node)?fL(ks(M.node.childNodes),t,n,!1):L.none(),c=(M,P,Z)=>a(P).filter(oe=>Math.abs(Z(M,t,n)-Z(oe,t,n))<2&&tt(oe.node)),d=(M,P)=>{let Z=Os(M,(oe,Y)=>P(oe,t,n)-P(Y,t,n));return Rt(Z,a).map(oe=>s&&!tt(oe.node)&&Z.length>1?c(oe,Z[1],P).getOr(oe):oe)},[p,b]=uq(hI(e),n),{pass:S,fail:D}=cs(b,M=>M.top<n);return d(p,mq).orThunk(()=>d(D,pe)).orThunk(()=>d(S,pe))},gq=(e,t,n,s)=>{let a=(c,d)=>{let p=S=>It(S)&&S.classList.contains("mce-drag-container"),b=Lt(c.dom.childNodes,Ya(p));return d.fold(()=>fL(b,n,s,!0),S=>{let D=Lt(b,M=>M!==S.dom);return fL(D,n,s,!0)}).orThunk(()=>(Qt(c,e)?L.none():Ld(c)).bind(D=>a(D,L.some(c))))};return a(t,L.none())},fq=(e,t,n)=>{let s=q.fromDom(e),a=hu(s),d=q.fromPoint(a,t,n).filter(p=>La(s,p)).getOr(s);return gq(s,d,t,n)},HH=(e,t,n)=>fq(e,t,n).filter(s=>sb(s.node)).map(s=>dq(s,t)),zH=e=>{let t=e.getBoundingClientRect(),n=e.ownerDocument,s=n.documentElement,a=n.defaultView;return{top:t.top+(a?.scrollY??0)-s.clientTop,left:t.left+(a?.scrollX??0)-s.clientLeft}},pq=e=>e.inline?zH(e.getBody()):{left:0,top:0},hq=e=>{let t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},bq=e=>{let t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},a={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:a},vq=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){let n=zH(e.getContentAreaContainer()),s=bq(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}},yq=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),Cq=(e,t)=>yq(pq(e),hq(e),vq(e,t)),$H=e=>({target:e,srcElement:e}),wq=(e,t,n,s)=>({...t,dataTransfer:s,type:e,...$H(n)}),xq=(e,t,n)=>{let s=it("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:s,initEvent:s,preventDefault:wt,stopImmediatePropagation:wt,stopPropagation:wt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:s,initMouseEvent:s,getModifierState:s,dataTransfer:n,...$H(t)}},Sq=(e,t)=>{let n=gU(e);return t==="dragstart"?(bF(n),yF(n)):t==="drop"?(sU(n),GP(n)):(rU(n),cU(n)),n},kq=(e,t,n,s)=>{let a=Sq(n,e);return ns(s)?xq(e,t,a):wq(e,s,t,a)},CN=32,Eq=100,wN=8,xN=16,VH=Vo,Tq=We(VH,Ui),Aq=(e,t,n)=>VH(n)&&n!==t&&e.isEditable(n.parentElement),_q=(e,t,n)=>os(t)||t===n||e.dom.isChildOf(t,n)?!1:e.dom.isEditable(t),Oq=(e,t,n,s)=>{let a=e.dom,c=t.cloneNode(!0);a.setStyles(c,{width:n,height:s}),a.setAttrib(c,"data-mce-selected",null);let d=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(d,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),a.setStyles(c,{margin:0,boxSizing:"border-box"}),d.appendChild(c),d},Dq=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},SN=(e,t)=>n=>()=>{let s=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:s+t,behavior:"smooth"})},UH=SN("left",-CN),ZH=SN("left",CN),WH=SN("top",-CN),jH=SN("top",CN),Rq=(e,t,n,s,a,c,d,p,b,S,D,M)=>{let P=0,Z=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>a&&(P=t.pageX+n-a),t.pageY+s>c&&(Z=t.pageY+s-c),e.style.width=n-P+"px",e.style.height=s-Z+"px";let oe=b.clientHeight,Y=b.clientWidth,ne=d+b.getBoundingClientRect().top,he=p+b.getBoundingClientRect().left;D.on(be=>{be.intervalId.clear(),be.dragging&&M&&(d+wN>=oe?be.intervalId.set(jH(S)):d-wN<=0?be.intervalId.set(WH(S)):p+wN>=Y?be.intervalId.set(ZH(S)):p-wN<=0?be.intervalId.set(UH(S)):ne+xN>=window.innerHeight?be.intervalId.set(jH(window)):ne-xN<=0?be.intervalId.set(WH(window)):he+xN>=window.innerWidth?be.intervalId.set(ZH(window)):he-xN<=0&&be.intervalId.set(UH(window)))})},qH=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Nq=(e,t)=>{let n=e.getParent(t.parentNode,e.isBlock);qH(t),n&&n!==e.getRoot()&&e.isEmpty(n)&&Gd(q.fromDom(n))},Mq=e=>e.button===0,Bq=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),Pq=(e,t)=>n=>{if(Mq(n)){let s=xn(t.dom.getParents(n.target),Tq).getOr(null);if(Ve(s)&&Aq(t.dom,t.getBody(),s)){let a=t.dom.getPos(s),c=t.getBody(),d=t.getDoc().documentElement;e.set({element:s,dataTransfer:KP(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?c.scrollWidth:d.offsetWidth)-2,maxY:(t.inline?c.scrollHeight:d.offsetHeight)-2,relX:n.pageX-a.x,relY:n.pageY-a.y,width:s.offsetWidth,height:s.offsetHeight,ghost:Oq(t,s,s.offsetWidth,s.offsetHeight),intervalId:gg(Eq)})}}},Lq=(e,t,n)=>{e._selectionOverrides.hideFakeCaret(),HH(e.getBody(),t,n).fold(()=>e.selection.placeCaretAt(t,n),s=>{let a=e._selectionOverrides.showCaret(1,s.node,s.position===_x.Before,!1);a?e.selection.setRng(a):e.selection.placeCaretAt(t,n)})},DE=(e,t,n,s,a)=>{t==="dragstart"&&xF(s,e.dom.getOuterHTML(n));let c=kq(t,n,s,a);return e.dispatch(t,c)},Iq=(e,t)=>{let n=Dl((a,c)=>Lq(t,a,c),0);t.on("remove",n.cancel);let s=e;return a=>e.on(c=>{let d=Math.max(Math.abs(a.screenX-c.screenX),Math.abs(a.screenY-c.screenY));if(!c.dragging&&d>10){let p=DE(t,"dragstart",c.element,c.dataTransfer,a);if(Ve(p.dataTransfer)&&(c.dataTransfer=p.dataTransfer),p.isDefaultPrevented())return;c.dragging=!0,t.focus()}if(c.dragging){let p=a.currentTarget===t.getDoc().documentElement,b=Bq(c,Cq(t,a));Dq(c.ghost,t.getBody()),Rq(c.ghost,b,c.width,c.height,c.maxX,c.maxY,a.clientY,a.clientX,t.getContentAreaContainer(),t.getWin(),s,p),n.throttle(a.clientX,a.clientY)}})},Fq=e=>{let t=e.getSel();if(Ve(t)){let s=t.getRangeAt(0).startContainer;return tt(s)?s.parentNode:s}else return null},Hq=(e,t)=>n=>{e.on(s=>{if(s.intervalId.clear(),s.dragging){if(_q(t,Fq(t.selection),s.element)){let a=t.getDoc().elementFromPoint(n.clientX,n.clientY)??t.getBody();DE(t,"drop",a,s.dataTransfer,n).isDefaultPrevented()||t.undoManager.transact(()=>{Nq(t.dom,s.element),fU(s.dataTransfer).each(d=>t.insertContent(d)),t._selectionOverrides.hideFakeCaret()})}DE(t,"dragend",t.getBody(),s.dataTransfer,n)}}),KH(e)},GH=(e,t,n)=>{e.on(s=>{s.intervalId.clear(),s.dragging&&n.fold(()=>DE(t,"dragend",s.element,s.dataTransfer),a=>DE(t,"dragend",s.element,s.dataTransfer,a))}),KH(e)},zq=(e,t)=>n=>GH(e,t,L.some(n)),KH=e=>{e.on(t=>{t.intervalId.clear(),qH(t.ghost)}),e.clear()},$q=e=>{let t=Ca(),n=Co.DOM,s=document,a=Pq(t,e),c=Iq(t,e),d=Hq(t,e),p=zq(t,e);e.on("mousedown",a),e.on("mousemove",c),e.on("mouseup",d),n.bind(s,"mousemove",c),n.bind(s,"mouseup",p),e.on("remove",()=>{n.unbind(s,"mousemove",c),n.unbind(s,"mouseup",p)}),e.on("keydown",b=>{b.keyCode===St.ESC&&GH(t,e,L.none())})},Vq=e=>{let t=a=>{if(!a.isDefaultPrevented()){let c=a.dataTransfer;c&&(In(c.types,"Files")||c.files.length>0)&&(a.preventDefault(),a.type==="drop"&&q2(e,"Dropped file type is not supported"))}},n=a=>{OC(e,a.target)&&t(a)},s=()=>{let a=Co.DOM,c=e.dom,d=document,p=e.inline?e.getBody():e.getDoc(),b=["drop","dragover"];Pe(b,S=>{a.bind(d,S,n),c.bind(p,S,t)}),e.on("remove",()=>{Pe(b,S=>{a.unbind(d,S,n),c.unbind(p,S,t)})})};e.on("init",()=>{Yc.setEditorTimeout(e,s,0)})},Uq=e=>{$q(e),F6(e)&&Vq(e)},Zq=e=>{let t=Dl(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){let n=e.selection.getRng();if(n.collapsed){let s=vP(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},Wq=e=>{e.on("init",()=>{e.on("focusin",t=>{let n=t.target;if(Zi(n)){let s=W1(e.getBody(),n),a=Vo(s)?s:n;e.selection.getNode()!==a&&CE(e,a).each(c=>e.selection.setRng(c))}})})},RE=Vo,YH=(e,t)=>W1(e.getBody(),t),jq=e=>{let t=e.selection,n=e.dom,s=e.getBody(),a=oM(e,s,n.isBlock,()=>Xf(e)),c="sel-"+n.uniqueId(),d="data-mce-selected",p,b=Ie=>Ve(Ie)&&n.hasClass(Ie,"mce-offscreen-selection"),S=Ie=>Ie!==s&&(RE(Ie)||Zi(Ie))&&n.isChildOf(Ie,s)&&n.isEditable(Ie.parentNode),D=Ie=>{Ie&&t.setRng(Ie)},M=(Ie,_e,ze,yt=!0)=>e.dispatch("ShowCaret",{target:_e,direction:Ie,before:ze}).isDefaultPrevented()?null:(yt&&t.scrollIntoView(_e,Ie===-1),a.show(ze,_e)),P=Ie=>{Ie.hasAttribute("data-mce-caret")&&(_v(Ie),t.scrollIntoView(Ie))},Z=()=>{e.on("click",_e=>{n.isEditable(_e.target)||(_e.preventDefault(),e.focus())}),e.on("blur NewBlock",qe),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",_e=>{let ze=_e.target,yt=YH(e,ze);RE(yt)?(_e.preventDefault(),CE(e,yt).each(He)):S(ze)&&CE(e,ze).each(He)},!0),e.on("mousedown",_e=>{let ze=_e.target;if(ze!==s&&ze.nodeName!=="HTML"&&!n.isChildOf(ze,s)||!M3(e,_e.clientX,_e.clientY))return;qe(),Vt();let yt=YH(e,ze);RE(yt)?(_e.preventDefault(),CE(e,yt).each(He)):HH(s,_e.clientX,_e.clientY).each(mn=>{_e.preventDefault();let gn=M(1,mn.node,mn.position===_x.Before,!1);D(gn),Rn(yt)?yt.focus():e.getBody().focus()})}),e.on("keypress",_e=>{St.modifierPressed(_e)||RE(t.getNode())&&_e.preventDefault()}),e.on("GetSelectionRange",_e=>{let ze=_e.range;if(p){if(!p.parentNode){p=null;return}ze=ze.cloneRange(),ze.selectNode(p),_e.range=ze}}),e.on("focusin",_e=>{if(!Zi(_e.target)&&e.getBody().contains(_e.target)&&_e.target!==e.getBody()&&!e.dom.isEditable(_e.target.parentNode)){a.isShowing()&&a.hide(),_e.target.contains(e.selection.getNode())||(e.selection.select(_e.target,!0),e.selection.collapse(!0));let ze=He(e.selection.getRng(),!0);ze&&e.selection.setRng(ze)}}),e.on("SetSelectionRange",_e=>{_e.range=ne(_e.range);let ze=He(_e.range,_e.forward);ze&&(_e.range=ze)});let Ie=_e=>It(_e)&&_e.id==="mcepastebin";e.on("AfterSetSelectionRange",_e=>{let ze=_e.range,yt=ze.startContainer.parentElement;!Y(ze)&&!Ie(yt)&&Vt(),b(yt)||qe()}),Uq(e),Zq(e),Wq(e)},oe=Ie=>lc(Ie)||Vf(Ie)||d1(Ie),Y=Ie=>oe(Ie.startContainer)||oe(Ie.endContainer),ne=Ie=>{let _e=e.schema.getVoidElements(),ze=n.createRng(),yt=Ie.startContainer,mn=Ie.startOffset,gn=Ie.endContainer,Qn=Ie.endOffset;return Yt(_e,yt.nodeName.toLowerCase())?mn===0?ze.setStartBefore(yt):ze.setStartAfter(yt):ze.setStart(yt,mn),Yt(_e,gn.nodeName.toLowerCase())?Qn===0?ze.setEndBefore(gn):ze.setEndAfter(gn):ze.setEnd(gn,Qn),ze},he=(Ie,_e)=>{let ze=q.fromDom(e.getBody()),yt=e.getDoc(),mn=Qs(ze,"#"+c).getOrThunk(()=>{let Fo=q.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',yt);return Pr(Fo,"id",c),Oo(ze,Fo),Fo}),gn=n.createRng();vi(mn),ml(mn,[q.fromText(ws,yt),q.fromDom(_e),q.fromText(ws,yt)]),gn.setStart(mn.dom.firstChild,1),gn.setEnd(mn.dom.lastChild,0),_m(mn,{top:n.getPos(Ie,e.getBody()).y+"px"}),ia(mn);let Qn=t.getSel();return Qn&&(Qn.removeAllRanges(),Qn.addRange(gn)),gn},be=Ie=>{let _e=e.getDoc().createElement("div");_e.style.width=Ie.style.width,_e.style.height=Ie.style.height;let ze=Ie.getAttribute("width");ze&&_e.setAttribute("width",ze);let yt=Ie.getAttribute("height");return yt&&_e.setAttribute("height",yt),_e},Ce=Ie=>{let _e=S0(Ie)?be(Ie):Ie.cloneNode(!0),ze=e.dispatch("ObjectSelected",{target:Ie,targetClone:_e});if(ze.isDefaultPrevented())return null;let yt=he(Ie,ze.targetClone),mn=q.fromDom(Ie);return Pe(gs(q.fromDom(e.getBody()),`*[${d}]`),gn=>{Qt(mn,gn)||Ws(gn,d)}),n.getAttrib(Ie,d)||Ie.setAttribute(d,"1"),p=Ie,Vt(),yt},He=(Ie,_e)=>{if(!Ie)return null;if(Ie.collapsed){if(!Y(Ie)){let gn=_e?1:-1,Qn=la(gn,s,Ie),Fo=Qn.getNode(!_e);if(Ve(Fo)){if(sb(Fo))return M(gn,Fo,_e?!Qn.isAtEnd():!1,!1);if(Um(Fo)&&Vo(Fo.nextSibling)){let Is=n.createRng();return Is.setStart(Fo,0),Is.setEnd(Fo,0),Is}}let ys=Qn.getNode(_e);if(Ve(ys)){if(sb(ys))return M(gn,ys,_e?!1:!Qn.isAtEnd(),!1);if(Um(ys)&&Vo(ys.previousSibling)){let Is=n.createRng();return Is.setStart(ys,1),Is.setEnd(ys,1),Is}}}return null}let ze=Ie.startContainer,yt=Ie.startOffset,mn=Ie.endOffset;if(tt(ze)&&yt===0&&RE(ze.parentNode)&&(ze=ze.parentNode,yt=n.nodeIndex(ze),ze=ze.parentNode),!It(ze))return null;if(mn===yt+1&&ze===Ie.endContainer){let gn=ze.childNodes[yt];if(S(gn))return Ce(gn)}return null},qe=()=>{p&&p.removeAttribute(d),Qs(q.fromDom(e.getBody()),"#"+c).each(Ko),p=null},Ct=()=>{a.destroy(),p=null},Vt=()=>{a.hide()};return lm(e)||Z(),{showCaret:M,showBlockCaretContainer:P,hideFakeCaret:Vt,destroy:Ct}},qq=(e,t)=>{let n=t;for(let s=e.previousSibling;tt(s);s=s.previousSibling)n+=s.data.length;return n},XH=(e,t,n,s,a)=>{if(tt(n)&&(s<0||s>n.data.length))return[];let c=a&&tt(n)?[qq(n,s)]:[s],d=n;for(;d!==t&&d.parentNode;)c.push(e.nodeIndex(d,a)),d=d.parentNode;return d===t?c.reverse():[]},pL=(e,t,n,s,a,c,d=!1)=>{let p=XH(e,t,n,s,d),b=XH(e,t,a,c,d);return{start:p,end:b}},JH=(e,t)=>{let n=t.slice(),s=n.pop();return vn(s)?Mt(n,(c,d)=>c.bind(p=>L.from(p.childNodes[d])),L.some(e)).bind(c=>tt(c)&&(s<0||s>c.data.length)?L.none():L.some({node:c,offset:s})):L.none()},QH=(e,t)=>JH(e,t.start).bind(({node:n,offset:s})=>JH(e,t.end).map(({node:a,offset:c})=>{let d=document.createRange();return d.setStart(n,s),d.setEnd(a,c),d})),Gq=(e,t,n,s=!1)=>pL(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,s),Ox=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){let s=t.parentNode;e.remove(t,tt(t.firstChild)&&Fc(t.firstChild.data)),Ox(e,s,n)}},kN=(e,t,n,s=!0)=>{let a=t.startContainer.parentNode,c=t.endContainer.parentNode;t.deleteContents(),s&&!n(t.startContainer)&&(tt(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),tt(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),Ox(e,a,n),a!==c&&Ox(e,c,n))},EN=(e,t)=>L.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),hL=(e,t,n)=>{let s=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:dS(s).concat(e.blockPatterns),inlinePatterns:Qy(s).concat(e.inlinePatterns)}},bL=(e,t,n,s)=>{let a=e.createRng();return a.setStart(t,0),a.setEnd(n,s),a.toString()},e9=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),TN=(e,t)=>{let n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},t9=(e,t,n)=>{let s=QH(e.getRoot(),n).getOrDie("Unable to resolve path range"),a=s.startContainer,c=s.endContainer,d=s.endOffset===0?c:c.splitText(s.endOffset),p=s.startOffset===0?a:a.splitText(s.startOffset),b=p.parentNode,S=d.parentNode;return{prefix:t,end:S.insertBefore(e9(e,t+"-end"),d),start:b.insertBefore(e9(e,t+"-start"),p)}},n9=(e,t,n)=>{Ox(e,e.get(t.prefix+"-end"),n),Ox(e,e.get(t.prefix+"-start"),n)},vL=e=>e.start.length===0,Kq=e=>(t,n)=>{let a=t.data.substring(0,n),c=a.lastIndexOf(e.charAt(e.length-1)),d=a.lastIndexOf(e);return d!==-1?d+e.length:c!==-1?c+1:-1},o9=(e,t,n,s)=>{let a=t.start;return QP(e,s.container,s.offset,Kq(a),n).bind(d=>{let p=n.textContent?.indexOf(a)??-1;if(p!==-1&&d.offset>=p+a.length){let S=e.createRng();return S.setStart(d.container,d.offset-a.length),S.setEnd(d.container,d.offset),L.some(S)}else{let S=d.offset-a.length;return JP(d.container,S,n).map(D=>{let M=e.createRng();return M.setStart(D.container,D.offset),M.setEnd(d.container,d.offset),M}).filter(D=>D.toString()===a).orThunk(()=>o9(e,t,n,pp(d.container,0)))}})},Yq=(e,t,n,s,a,c=!1)=>{if(t.start.length===0&&!c){let d=e.createRng();return d.setStart(n,s),d.setEnd(n,s),L.some(d)}return XP(n,s,a).bind(d=>o9(e,t,a,d).bind(b=>{if(c){if(b.endContainer===d.container&&b.endOffset===d.offset)return L.none();if(d.offset===0&&b.endContainer.textContent?.length===b.endOffset)return L.none()}return L.some(b)}))},Xq=(e,t,n,s)=>{let a=e.dom,c=a.getRoot(),d=n.pattern,p=n.position.container,b=n.position.offset;return JP(p,b-n.pattern.end.length,t).bind(S=>{let D=pL(a,c,S.container,S.offset,p,b,s);if(vL(d))return L.some({matches:[{pattern:d,startRng:D,endRng:D}],position:S});{let M=AN(e,n.remainingPatterns,S.container,S.offset,t,s),P=M.getOr({matches:[],position:S}),Z=P.position;return Yq(a,d,Z.container,Z.offset,t,M.isNone()).map(Y=>{let ne=Gq(a,c,Y,s);return{matches:P.matches.concat([{pattern:d,startRng:ne,endRng:D}]),position:pp(Y.startContainer,Y.startOffset)}})}})},AN=(e,t,n,s,a,c)=>{let d=e.dom;return XP(n,s,d.getRoot()).bind(p=>{let b=bL(d,a,n,s);for(let S=0;S<t.length;S++){let D=t[S];if(!vc(b,D.end))continue;let M=t.slice();M.splice(S,1);let P=Xq(e,a,{pattern:D,remainingPatterns:M,position:p},c);if(P.isNone()&&s>0)return AN(e,t,n,s-1,a,c);if(P.isSome())return P}return L.none()})},s9=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?Pe(t.format,s=>{e.formatter.apply(s)}):e.execCommand(t.cmd,!1,t.value)},Jq=(e,t,n,s)=>{let a=TN(e.dom,n);kN(e.dom,a,s),s9(e,t,a)},Qq=(e,t,n,s,a)=>{let c=e.dom,d=TN(c,s),p=TN(c,n);kN(c,p,a),kN(c,d,a);let b={prefix:n.prefix,start:n.end,end:s.start},S=TN(c,b);s9(e,t,S)},eG=(e,t)=>{let n=yo("mce_textpattern"),s=dt(t,(a,c)=>{let d=t9(e,n+`_end${a.length}`,c.endRng);return a.concat([{...c,endMarker:d}])},[]);return dt(s,(a,c)=>{let d=s.length-a.length-1,p=vL(c.pattern)?c.endMarker:t9(e,n+`_start${d}`,c.startRng);return a.concat([{...c,startMarker:p}])},[])},tG=e=>Os(e,(t,n)=>n.end.length-t.end.length),nG=(e,t)=>{let n=Qa(e,s=>ro(t,a=>s.pattern.start===a.pattern.start&&s.pattern.end===a.pattern.end));return e.length===t.length?n?e:t:e.length>t.length?e:t},r9=(e,t,n,s,a,c)=>{let d=AN(e,a.inlinePatterns,n,s,t,c).fold(()=>[],b=>b.matches),p=AN(e,tG(a.inlinePatterns),n,s,t,c).fold(()=>[],b=>b.matches);return nG(d,p)},a9=(e,t)=>{if(t.length===0)return;let n=e.dom,s=e.selection.getBookmark(),a=eG(n,t);Pe(a,c=>{let d=n.getParent(c.startMarker.start,n.isBlock),p=b=>b===d;vL(c.pattern)?Jq(e,c.pattern,c.endMarker,p):Qq(e,c.pattern,c.startMarker,c.endMarker,p),n9(n,c.endMarker,p),n9(n,c.startMarker,p)}),e.selection.moveToBookmark(s)},i9=(e,t,n)=>WU(t,0,t).map(s=>{let a=s.container;return NF(a,n.start.length,t).each(c=>{let d=e.createRng();d.setStart(a,0),d.setEnd(c.container,c.offset),kN(e,d,p=>p===t)}),a}),l9=e=>(t,n)=>{let s=t.dom,a=n.pattern,c=QH(s.getRoot(),n.range).getOrDie("Unable to resolve path range"),d=(p,b)=>{let S=b.get(p);return ht(S)&&Sn(S).exists(D=>Yt(D,"block"))};return EN(t,c).each(p=>{a.type==="block-format"?d(a.format,t.formatter)&&t.undoManager.transact(()=>{e(t.dom,p,a),t.formatter.apply(a.format)}):a.type==="block-command"&&t.undoManager.transact(()=>{e(t.dom,p,a),t.execCommand(a.cmd,!1,a.value)})}),!0},oG=e=>Os(e,(t,n)=>n.start.length-t.start.length),c9=e=>(t,n)=>{let s=oG(t),a=n.replace(ws," ");return xn(s,c=>e(c,n,a))},u9=(e,t)=>(n,s,a,c,d=s.textContent??"")=>{let p=n.dom,b=fi(n);return p.is(s,b)?e(a.blockPatterns,d).map(S=>t&&et.trim(d).length===S.start.length?[]:[{pattern:S,range:pL(p,p.getRoot(),s,0,s,0,c)}]).getOr([]):[]},sG=e=>/^\s[^\s]/.test(e),rG=l9((e,t,n)=>{i9(e,t,n).each(s=>{let a=q.fromDom(s),c=kr(a);sG(c)&&Ke(a,c.slice(1))})}),aG=c9((e,t,n)=>t.indexOf(e.start)===0||n.indexOf(e.start)===0),iG=u9(aG,!0),lG=(e,t)=>{let n=e.selection.getRng();return EN(e,n).map(s=>{let a=Math.max(0,n.startOffset),c=hL(t,s,s.textContent??""),d=r9(e,s,n.startContainer,a,c,!0),p=iG(e,s,c,!0);return{inlineMatches:d,blockMatches:p}}).filter(({inlineMatches:s,blockMatches:a})=>a.length>0||s.length>0)},cG=(e,t)=>{if(t.length===0)return;let n=e.selection.getBookmark();Pe(t,s=>rG(e,s)),e.selection.moveToBookmark(n)},uG=l9(i9),dG=c9((e,t,n)=>t===e.start||n===e.start),mG=u9(dG,!1),gG=(e,t)=>{let n=e.selection.getRng();return EN(e,n).map(s=>{let a=Math.max(0,n.startOffset),c=bL(e.dom,s,n.startContainer,a),d=hL(t,s,c);return mG(e,s,d,!1,c)}).filter(s=>s.length>0)},fG=(e,t)=>{Pe(t,n=>uG(e,n))},pG=(e,t)=>lG(e,t).fold(pn,({inlineMatches:n,blockMatches:s})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{My(e),a9(e,n),cG(e,s);let a=e.selection.getRng(),c=XP(a.startContainer,a.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),c.each(d=>{let p=d.container;p.data.charAt(d.offset-1)===Rl&&(p.deleteData(d.offset-1,1),Ox(e.dom,p.parentNode,b=>b===e.dom.getRoot()))})}),!0)),hG=(e,t)=>{let n=e.selection.getRng();EN(e,n).map(s=>{let a=Math.max(0,n.startOffset-1),c=bL(e.dom,s,n.startContainer,a),d=hL(t,s,c),p=r9(e,s,n.startContainer,a,d,!1);p.length>0&&e.undoManager.transact(()=>{a9(e,p)})})},bG=(e,t)=>gG(e,t).fold(pn,n=>(e.undoManager.transact(()=>{fG(e,n)}),!0)),d9=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},vG=(e,t)=>d9(e,t,(n,s)=>n===s.keyCode&&!St.modifierPressed(s)),yG=(e,t)=>d9(e,t,(n,s)=>n.charCodeAt(0)===s.charCode),CG=e=>{let t=[",",".",";",":","!","?"],n=[32],s=()=>eC(j6(e).filter(d=>d.type==="inline-command"||d.type==="block-command"?e.queryCommandSupported(d.cmd):!0),q6(e)),a=()=>qT(e);e.on("keydown",d=>{if(d.keyCode===13&&!St.modifierPressed(d)&&e.selection.isCollapsed()&&e.selection.isEditable()){let p=Jg(s(),"enter");(p.inlinePatterns.length>0||p.blockPatterns.length>0||a())&&pG(e,p)&&d.preventDefault()}},!0),e.on("keydown",d=>{if(d.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){let p=Jg(s(),"space");(p.blockPatterns.length>0||a())&&bG(e,p)&&d.preventDefault()}},!0);let c=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){let d=Jg(s(),"space");(d.inlinePatterns.length>0||a())&&hG(e,d)}};e.on("keyup",d=>{vG(n,d)&&c()}),e.on("keypress",d=>{yG(t,d)&&Yc.setEditorTimeout(e,c)})},wG=e=>{CG(e)},xG=e=>{let t=et.each,n=St.BACKSPACE,s=St.DELETE,a=e.dom,c=e.selection,d=e.parser,p=En.browser,b=p.isFirefox(),S=p.isChromium()||p.isSafari(),D=En.deviceType.isiPhone()||En.deviceType.isiPad(),M=En.os.isMacOS()||En.os.isiOS(),P=(Ze,gt)=>{try{e.getDoc().execCommand(Ze,!1,String(gt))}catch{}},Z=Ze=>Ze.isDefaultPrevented(),oe=()=>{let Ze=Pt=>{let qn=a.create("body"),Hn=Pt.cloneContents();return qn.appendChild(Hn),c.serializer.serialize(qn,{format:"html"})},gt=Pt=>{let qn=Ze(Pt),Hn=a.createRng();Hn.selectNode(e.getBody());let qo=Ze(Hn);return qn===qo};e.on("keydown",Pt=>{let qn=Pt.keyCode;if(!Z(Pt)&&(qn===s||qn===n)&&e.selection.isEditable()){let Hn=e.selection.isCollapsed(),qo=e.getBody();if(Hn&&!dd(e.schema,qo)||!Hn&&!gt(e.selection.getRng()))return;Pt.preventDefault(),e.setContent(""),qo.firstChild&&a.isBlock(qo.firstChild)?e.selection.setCursorLocation(qo.firstChild,0):e.selection.setCursorLocation(qo,0),e.nodeChanged()}})},Y=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},ne=()=>{e.inline||a.bind(e.getDoc(),"mousedown mouseup",Ze=>{let gt;if(Ze.target===e.getDoc().documentElement)if(gt=c.getRng(),e.getDoc().getSelection()?.anchorNode!==null&&e.getBody().focus(),Ze.type==="mousedown"){if(lc(gt.startContainer))return;c.placeCaretAt(Ze.clientX,Ze.clientY)}else c.setRng(gt)})},he=()=>{e.on("keydown",Ze=>{if(!Z(Ze)&&Ze.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(c.isCollapsed()&&c.getRng().startOffset===0){let gt=c.getNode(),Pt=gt.previousSibling;if(gt.nodeName==="HR"){a.remove(gt),Ze.preventDefault();return}Pt&&Pt.nodeName&&Pt.nodeName.toLowerCase()==="hr"&&(a.remove(Pt),Ze.preventDefault())}}})},be=()=>{Range.prototype.getClientRects||e.on("mousedown",Ze=>{if(!Z(Ze)&&Ze.target.nodeName==="HTML"){let gt=e.getBody();gt.blur(),Yc.setEditorTimeout(e,()=>{gt.focus()})}})},Ce=()=>{let Ze=_S(e);e.on("click",gt=>{let Pt=gt.target;/^(IMG|HR)$/.test(Pt.nodeName)&&a.isEditable(Pt)&&(gt.preventDefault(),e.selection.select(Pt),e.nodeChanged()),Pt.nodeName==="A"&&a.hasClass(Pt,Ze)&&Pt.childNodes.length===0&&a.isEditable(Pt.parentNode)&&(gt.preventDefault(),c.select(Pt))})},He=()=>{let Ze=gt=>gt.nodeName==="IMG"&&e.dom.isEditable(gt);e.on("mousedown",gt=>{sr(L.from(gt.clientX),L.from(gt.clientY),(Pt,qn)=>{let Hn=e.getDoc().caretPositionFromPoint(Pt,qn),qo=Hn?.offsetNode?.childNodes[Hn.offset-(Hn.offset>0?1:0)]||Hn?.offsetNode;if(Ve(qo)&&Ze(qo)){let au=qo.getBoundingClientRect();gt.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(qo),gt.clientX<au.left||gt.clientY<au.top?e.selection.collapse(!0):(gt.clientX>au.right||gt.clientY>au.bottom)&&e.selection.collapse(!1)}})})},qe=()=>{let Ze=()=>{let Pt=a.getAttribs(c.getStart().cloneNode(!1));return()=>{let qn=c.getStart();qn!==e.getBody()&&(a.setAttrib(qn,"style",null),t(Pt,Hn=>{qn.setAttributeNode(Hn.cloneNode(!0))}))}},gt=()=>!c.isCollapsed()&&a.getParent(c.getStart(),a.isBlock)!==a.getParent(c.getEnd(),a.isBlock);e.on("keypress",Pt=>{let qn;return!Z(Pt)&&(Pt.keyCode===8||Pt.keyCode===46)&&gt()?(qn=Ze(),e.getDoc().execCommand("delete",!1),qn(),Pt.preventDefault(),!1):!0}),a.bind(e.getDoc(),"cut",Pt=>{if(!Z(Pt)&&gt()){let qn=Ze();Yc.setEditorTimeout(e,()=>{qn()})}})},Ct=()=>{e.on("keydown",Ze=>{if(!Z(Ze)&&Ze.keyCode===n&&c.isCollapsed()&&c.getRng().startOffset===0){let gt=c.getNode().previousSibling;if(gt&&gt.nodeName&&gt.nodeName.toLowerCase()==="table")return Ze.preventDefault(),!1}return!0})},Vt=()=>{e.on("keydown",Ze=>{if(Z(Ze)||Ze.keyCode!==St.BACKSPACE)return;let gt=c.getRng(),Pt=gt.startContainer,qn=gt.startOffset,Hn=a.getRoot(),qo=Pt;if(!(!gt.collapsed||qn!==0)){for(;qo.parentNode&&qo.parentNode.firstChild===qo&&qo.parentNode!==Hn;)qo=qo.parentNode;qo.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,qo),gt=a.createRng(),gt.setStart(Pt,0),gt.setEnd(Pt,0),c.setRng(gt))}})},Ie=()=>{let Ze=pu("figcaption");e.on("keydown",gt=>{if(gt.keyCode===St.LEFT||gt.keyCode===St.RIGHT){let Pt=q.fromDom(e.selection.getNode());Ze(Pt)&&e.selection.isCollapsed()&&Mr(Pt).bind(qn=>e.selection.getRng().startOffset===0&&gt.keyCode===St.LEFT?ul(qn):e.selection.getRng().endOffset===Pt.dom.textContent?.length&&gt.keyCode===St.RIGHT?tc(qn):L.none()).each(qn=>{e.selection.setCursorLocation(qn.dom,0)})}})},_e=()=>{let Ze=()=>{P("StyleWithCSS",!1),P("enableInlineTableEditing",!1),Lv(e)||P("enableObjectResizing",!1)};NT(e)||e.on("BeforeExecCommand mousedown",Ze)},ze=()=>{let Ze=()=>{t(a.select("a:not([data-mce-block])"),gt=>{let Pt=gt.parentNode,qn=a.getRoot();if(Pt?.lastChild===gt){for(;Pt&&!a.isBlock(Pt);){if(Pt.parentNode?.lastChild!==Pt||Pt===qn)return;Pt=Pt.parentNode}a.add(Pt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",gt=>{(gt.type==="setcontent"||gt.command==="mceInsertLink")&&Ze()})},yt=()=>{e.on("init",()=>{P("DefaultParagraphSeparator",fi(e))})},mn=Ze=>{let gt=Ze.getBody(),Pt=Ze.selection.getRng();return Pt.startContainer===Pt.endContainer&&Pt.startContainer===gt&&Pt.startOffset===0&&Pt.endOffset===gt.childNodes.length},gn=()=>{e.on("keyup focusin mouseup",Ze=>{!St.modifierPressed(Ze)&&!mn(e)&&c.normalize()},!0)},Qn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Fo=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},ys=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Ze=>{let gt;Ze.target.nodeName==="HTML"&&(gt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(gt),e.selection.normalize(),e.nodeChanged())}))},Is=()=>{M&&e.on("keydown",Ze=>{St.metaKeyPressed(Ze)&&!Ze.shiftKey&&(Ze.keyCode===37||Ze.keyCode===39)&&(Ze.preventDefault(),e.selection.getSel().modify("move",Ze.keyCode===37?"backward":"forward","lineboundary"))})},qa=()=>{e.on("click",Ze=>{let gt=Ze.target;do if(gt.tagName==="A"){Ze.preventDefault();return}while(gt=gt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ru=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Ze=>{Ze.preventDefault()})})},Et=()=>{d.addNodeFilter("br",Ze=>{let gt=Ze.length;for(;gt--;)Ze[gt].attr("class")==="Apple-interchange-newline"&&Ze[gt].remove()})},Gt=wt,Eo=()=>{if(!b||e.removed)return!1;let Ze=e.selection.getSel();return!Ze||!Ze.rangeCount||Ze.rangeCount===0},bo=()=>{S&&(ne(),Ce(),ru(),Y(),D&&(Fo(),ys(),qa())),b&&(be(),_e(),Qn(),Is())},pi=()=>{Vt(),oe(),En.windowsPhone||gn(),S&&(ne(),Ce(),yt(),ru(),Ct(),Et(),D?(Fo(),ys(),qa()):Y()),b&&(Ie(),He(),he(),be(),qe(),_e(),ze(),Qn(),Is(),Ct())};return lm(e)?bo():pi(),{refreshContentEditable:Gt,isHidden:Eo}};class m9 extends Error{url;constructor(t,n){super(t),this.url=n}}let yL={},SG=(e,t,n)=>new Promise((s,a)=>{let c=q.fromTag("script");Ea(c,{type:"text/javascript",src:e,...n});let d=()=>{Ko(c)};Cf(c,"load",()=>{d(),s()}),Cf(c,"error",()=>{d(),a(new Error(`Failed to load script url: ${e}`))}),Oo(vf(t),c)}),g9=async(e,t)=>{let n=Ei.ScriptLoader.getScriptAttributes(e);return await SG(e,t,n).catch(()=>Promise.reject(new m9(`Failed to load component url: ${e}`,e))),e},kG=e=>Vr(e,(t,n)=>_n(yL,t).getOrThunk(()=>{if(os(window.customElements.get(n))){let s=g9(t,Ag());return yL[t]=s,s}else return Promise.resolve(t)}).catch(s=>(delete yL[t],Promise.reject(s)))),EG=(e,t)=>{let n=na(eo(e));return Kt(n,s=>g9(s,q.fromDom(t)))},TG=e=>{let t=e.schema.getComponentUrls();return e.inline?kG(t):EG(t,e.getDoc())},AG=async e=>{let t=TG(e),n=Lt(await Promise.allSettled(t),s=>s.status==="rejected");n.length>0&&Pe(n,s=>{if(s.reason instanceof m9){let{url:a}=s.reason;V7(e,a)}})},_G=e=>{AG(e)},CL=Co.DOM,OG=(e,t)=>{let n=q.fromDom(e.getBody()),s=kg(Hi(n)),a=q.fromTag("style");Pr(a,"type","text/css"),Oo(a,q.fromText(t)),Oo(s,a),e.on("remove",()=>{Ko(a)})},DG=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,wL=e=>us(e,t=>ns(t)===!1),f9=e=>{let t=e.options.get,n=e.editorUpload.blobCache;return wL({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_html_in_comments:t("allow_html_in_comments"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),extended_mathml_attributes:t("extended_mathml_attributes"),extended_mathml_elements:t("extended_mathml_elements"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:DG(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:ob(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},p9=e=>{let t=e.options.get;return wL({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},RG=e=>{let t=e.options.get;return{...f9(e),...p9(e),...wL({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},NG=e=>{let t=af(f9(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(n,s)=>{let a=e.dom,c="data-mce-"+s,d=n.length;for(;d--;){let p=n[d],b=p.attr(s);if(b&&!p.attr(c)){if(b.indexOf("data:")===0||b.indexOf("blob:")===0)continue;s==="style"?(b=a.serializeStyle(a.parseStyle(b),p.name),b.length||(b=null),p.attr(c,b),p.attr(s,b)):s==="tabindex"?(p.attr(c,b),p.attr(s,null)):p.attr(c,e.convertURL(b,s,p.name))}}}),t.addNodeFilter("script",n=>{let s=n.length;for(;s--;){let a=n[s],c=a.attr("type")||"no/type";c.indexOf("mce-")!==0&&a.attr("type","mce-"+c)}}),ZT(e)&&t.addNodeFilter("#cdata",n=>{let s=n.length;for(;s--;){let a=n[s];a.type=8,a.name="#comment",a.value="[CDATA["+e.dom.encode(a.value??"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length,a=e.schema.getNonEmptyElements();for(;s--;){let c=n[s];c.isEmpty(a)&&c.getAll("br").length===0&&c.append(new Ai("br",1))}}),t},MG=e=>{let t=IT(e);t&&Yc.setEditorTimeout(e,()=>{let n;t===!0?n=e:n=e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)},BG=e=>{let t=e.dom.getRoot();!e.inline&&(!Gv(e)||e.selection.getStart(!0)===t)&&Yi(t).each(n=>{let s=n.getNode(),a=Ou(s)?Yi(s).getOr(n):n;e.selection.setRng(a.toRange())})},PG=e=>{e.bindPendingEventDelegates(),e.initialized=!0,tb(e),e.focus(!0),BG(e),e.nodeChanged({initial:!0});let t=PT(e);zt(t)&&t.call(e,e),MG(e),cp(e)&&uR(e,!0)},xL=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,LG=(e,t,n)=>{let{pass:s,fail:a}=cs(t,p=>tinymce.Resource.has(px(p))),d=[...s.map(p=>{let b=tinymce.Resource.get(px(p));return pt(b)?Promise.resolve(xL(e).loadRawCss(p,b)):Promise.resolve()}),xL(e).loadAll(a)];return e.inline?d:d.concat([e.ui.styleSheetLoader.loadAll(n)])},h9=e=>{let t=xL(e),n=ES(e),s=e.contentCSS,a=()=>{t.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},c=()=>{e.removed?a():e.on("remove",a)};if(e.contentStyles.length>0){let b="";et.each(e.contentStyles,S=>{b+=S+`\r
`}),e.dom.addStyle(b)}let d=Promise.all(LG(e,s,n)).then(c).catch(c),p=T6(e);return p&&OG(e,p),d},IG=e=>{let t=e.getDoc(),n=e.getBody();Ti(e),FT(e)||(t.body.spellcheck=!1,CL.setAttrib(n,"spellcheck","false")),e.quirks=xG(e),eb(e);let s=A6(e);s!==void 0&&(n.dir=s);let a=HT(e);a&&e.on("BeforeSetContent",c=>{et.each(a,d=>{c.content=c.content.replace(d,p=>"<!--mce:protected "+escape(p)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",c=>{e.composing=c.type==="compositionstart"})},FG=e=>{lm(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},SL=e=>{e.removed!==!0&&(FG(e),PG(e))},HG=e=>{let t=!1,n=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(n),t=!0,e.setProgressState(!1)}},b9=e=>{let t=e.getElement(),n=e.getDoc();e.inline&&(CL.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);let s=e.getBody();s.disabled=!0,e.readonly=NT(e),e._editableRoot=sC(e),!lC(e)&&e.hasEditableRoot()&&(e.inline&&CL.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=xR(e),e.schema=Zd(p9(e)),e.dom=Co(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:E6(e),referrerPolicy:xt(e),crossOrigin:Jd(e),onSetAttrib:d=>{e.dispatch("SetAttrib",d)}}),e.parser=NG(e),e.serializer=A3(RG(e),e),e.selection=MD(e.dom,e.getWin(),e.serializer,e),e.annotator=Xv(e),e.formatter=J3(e),e.undoManager=eE(e),e._nodeChangeDispatcher=new jW(e),e._selectionOverrides=jq(e),WW(e),dV(e),Xj(e),CV(e),lm(e)||(sq(e),wG(e));let a=IW(e);lV(e,a),hV(e),MR(e),Gj(e,a);let c=p7(e);IG(e),_G(e),c.fold(()=>{let d=HG(e);h9(e).then(()=>{SL(e),d()})},d=>{e.setProgressState(!0),h9(e).then(()=>{d().then(p=>{e.setProgressState(!1),SL(e),DD(e)},p=>{e.notificationManager.open({type:"error",text:String(p)}),SL(e),DD(e)})})})},kL=Co.DOM,zG=(e,t,n,s)=>{let a=q.fromTag("iframe");return s.each(c=>Pr(a,"tabindex",c)),Ea(a,n),Ea(a,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",...En.browser.isFirefox()?{title:t}:{}}),za(a,"tox-edit-area__iframe"),a},$G=e=>{let t=h6(e)+"<html><head>";Kp(e)!==e.editorManager.documentBaseURL&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';let n=b6(e),s=vT(e),a=e.translate(OS(e)),c=En.browser.isFirefox()?"":`aria-label="${a}"`;return yS(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+yS(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" ${c}><br></body></html>`,t},VG=(e,t)=>{let n=OS(e),s=e.translate(n),a=xr(q.fromDom(e.getElement()),"tabindex").bind(Cc),c=zG(e.id,s,p6(e),a).dom;c.onload=()=>{c.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=c,e.iframeHTML=$G(e),kL.add(t.iframeContainer,c)},UG=e=>{let t=e.iframeElement,n=()=>{e.contentDocument=t.contentDocument,b9(e)};if(jT(e)||En.browser.isFirefox()){let s=e.getDoc();s.open(),s.write(e.iframeHTML),s.close(),n()}else{let s=Cf(q.fromDom(t),"load",()=>{s.unbind(),n()});t.srcdoc=e.iframeHTML}},ZG=(e,t)=>{VG(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=kL.isHidden(t.editorContainer)),e.getElement().style.display="none",kL.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,UG(e)},v9=Co.DOM,WG=(e,t,n)=>{let s=t0.get(n),a=t0.urls[n]||e.editorManager.documentBaseURL.replace(/\/$/,"");if(n=et.trim(n),s&&et.inArray(t,n)===-1){if(e.plugins[n])return;try{let c=s(e,a)||{};e.plugins[n]=c,zt(c.init)&&(c.init(e,a),t.push(n))}catch(c){JD(e,n,c)}}},jG=e=>{let t=n=>{n.keyCode===St.ESC&&!n.defaultPrevented&&pT(e).isDefaultPrevented()&&n.preventDefault()};document.addEventListener("keyup",t),e.inline||e.on("keyup",t),e.on("remove",()=>{document.removeEventListener("keyup",t),e.inline||e.off("keyup",t)})},qG=e=>e.replace(/^\-/,""),GG=e=>{let t=[];Pe(v1(e),n=>{WG(e,t,qG(n))})},KG=e=>{let t=et.trim(wS(e)),n=e.ui.registry.getAll().icons,s={...dx.get("default").icons,...dx.get(t).icons};An(s,(a,c)=>{Yt(n,c)||e.ui.registry.addIcon(c,a)})},YG=e=>{let t=h1(e);if(pt(t)){let n=Ch.get(t);e.theme=n(e,Ch.urls[t])||{},zt(e.theme.init)&&e.theme.init(e,Ch.urls[t]||e.editorManager.documentBaseURL.replace(/\/$/,""))}else e.theme={}},XG=e=>{let t=nb(e),n=rg.get(t);e.model=n(e,rg.urls[t])},JG=e=>{V3.init(e)},QG=e=>{let t=e.theme.renderUI;return t?t():C9(e)},eK=e=>{let t=e.getElement(),s=h1(e)(e,t);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||e.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:t.offsetHeight,s},y9=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),tK=e=>{let t=v9.create("div");return v9.insertAfter(t,e),y9(t,t)},C9=e=>{let t=e.getElement();return e.inline?y9(null):tK(t)},nK=e=>{let t=e.getElement();return e.orgDisplay=t.style.display,pt(h1(e))?QG(e):zt(h1(e))?eK(e):C9(e)},oK=(e,t)=>{let n={show:L.from(t.show).getOr(wt),hide:L.from(t.hide).getOr(wt),isEnabled:L.from(t.isEnabled).getOr(so),setEnabled:s=>{s&&(e.mode.get()==="readonly"||cp(e))||L.from(t.setEnabled).each(c=>c(s))}};e.ui={...e.ui,...n}},sK=async e=>{e.dispatch("ScriptsLoaded"),KG(e),jG(e),YG(e),XG(e),JG(e),GG(e);let t=await nK(e);oK(e,L.from(t.api).getOr({})),e.editorContainer=t.editorContainer,tP(e),e.inline?b9(e):ZG(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},cy=Co.DOM,w9=e=>e.charAt(0)==="-",rK=(e,t)=>{let n=ET(t),s=xS(t);if(!ic.hasCode(n)&&n!=="en"){let a=Na(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(a).catch(()=>{YD(t,a,n)})}},aK=(e,t)=>{let n=h1(e);if(pt(n)&&!w9(n)&&!Yt(Ch.urls,n)){let s=R6(e),a=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;Ch.load(n,a).catch(()=>{XD(e,a,n)})}},iK=(e,t)=>{let n=nb(e);if(n!=="plugin"&&!Yt(rg.urls,n)){let s=b1(e),a=pt(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;rg.load(n,a).catch(()=>{$7(e,a,n)})}},lK=(e,t)=>{V3.load(e,t)},cK=e=>L.from(w6(e)).filter(Na).map(t=>({url:t,name:L.none()})),x9=(e,t,n)=>L.from(t).filter(s=>Na(s)&&!dx.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:L.some(s)})),uK=(e,t,n)=>{let s=x9(t,"default",n),a=cK(t).orThunk(()=>x9(t,wS(t),""));Pe(Ol([s,a]),c=>{e.add(c.url).catch(()=>{KD(t,c.url,c.name.getOrUndefined())})})},dK=(e,t)=>{let n=(s,a)=>{s!=="licensekeymanager"&&t0.load(s,a).catch(()=>{z7(e,a,s)})};An(rC(e),(s,a)=>{n(a,s),e.options.set("plugins",v1(e).concat(a))}),Pe(v1(e),s=>{s=et.trim(s),s&&!t0.urls[s]&&!w9(s)&&n(s,`plugins/${s}/plugin${t}.js`)})},mK=e=>{let t=h1(e);return!pt(t)||Ve(Ch.get(t))},gK=e=>{let t=nb(e);return Ve(rg.get(t))},fK=(e,t)=>{let n=Ei.ScriptLoader,s=()=>{!e.removed&&mK(e)&&gK(e)&&sK(e)};aK(e,t),iK(e,t),lK(e,t),rK(n,e),uK(n,e,t),dK(e,t),n.loadQueue().then(s,s)},pK=(e,t)=>R0.forElement(e,{contentCssCors:AS(t),referrerPolicy:xt(t)}),hK=e=>{let t=e.id;ic.setCode(ET(e));let n=()=>{cy.unbind(window,"ready",n),e.render()};if(!jg.Event.domLoaded){cy.bind(window,"ready",n);return}if(!e.getElement())return;let s=q.fromDom(e.getElement()),a=Ll(s);e.on("remove",()=>{Ri(s.dom.attributes,d=>Ws(s,d.name)),Ea(s,a)}),e.ui.styleSheetLoader=pK(s,e),oC(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");let c=e.getElement().form||cy.getParent(t,"form");c&&(e.formElement=c,OT(e)&&!Nh(e.getElement())&&(cy.insertAfter(cy.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=d=>{e.dispatch(d.type,d)},cy.bind(c,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),L6(e)&&!c.submit.nodeType&&!c.submit.length&&!c._mceOldSubmit&&(c._mceOldSubmit=c.submit,c.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),c._mceOldSubmit(c)))),e.windowManager=j2(e),e.notificationManager=qD(e),Y6(e)&&e.on("GetContent",d=>{d.save&&(d.content=cy.encode(d.content))}),I6(e)&&e.on("submit",()=>{e.initialized&&e.save()}),DT(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),fK(e,e.suffix)},S9=["#E41B60","#AD1457","#1939EC","#001CB5","#648000","#465B00","#006CE7","#0054B4","#00838F","#006064","#00866F","#004D40","#51742F","#385021","#CF4900","#A84600","#CC0000","#6A1B9A","#9C27B0","#6A00AB","#3041BA","#0A1877","#774433","#452B24","#607D8B","#455A64"],bK=e=>Intl.Segmenter?`${new Intl.Segmenter().segment(e)[Symbol.iterator]().next().value?.segment}`:e.trim()[0],vK=(e,t)=>{let n=5381;for(let s=0;s<e.length;s++)n=(n<<5)+n+e.charCodeAt(s);return(n>>>0)%(t+1)},yK=e=>{let t=vK(e??"",S9.length-1);return S9[t]},CK=(e,t,n)=>{let s=n/2;return`<svg height="${n}" width="${n}" xmlns="http://www.w3.org/2000/svg"><circle cx="${s}" cy="${s}" r="${s}" fill="${t}"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#FFF" font-family="sans-serif" font-size="${s}">`+e+"</text></svg>"},wK=(e,t,n)=>"data:image/svg+xml,"+encodeURIComponent(CK(e,t,n)),EL=(e,t={size:36})=>wK(bK(e.name),yK(e.id),t.size),xK=Nv([sT("id"),Gm("name"),Gm("avatar"),s6("custom")]),SK=e=>{let t={};return An(e,(n,s)=>{n.each(a=>{t[s]=a})}),t},kK=e=>{if(!Array.isArray(e))throw new Error("fetch_users must return an array");let t=Kt(e,a=>qy("Invalid user object",xK,a)),{errors:n,values:s}=du(t);if(n.length>0){let a=Kt(n,(c,d)=>`User at index ${d}: ${Gy(c)}`);console.warn(`User validation errors:
`+a.join(`
`))}return Kt(s,a=>{let{id:c,name:d,avatar:p,...b}=a;return{id:c,name:d.getOr(c),avatar:p.getOr(EL({id:c,name:d.getOr(c)})),...SK(b)}})},EK=e=>{let t=new Map,n=new Map,s=S=>L.from(t.get(S)),a=(S,D)=>{t.set(D,S)},c=(S,D)=>L.from(n.get(S)).each(({reject:M})=>{M(D),n.delete(S)}),d=(S,D)=>L.from(n.get(S)).each(({resolve:M})=>{M(D),n.delete(S)}),p=S=>{let D=XT(e);if(Array.isArray(S)){if(!D)return El(S,P=>Promise.resolve({id:P,name:P,avatar:EL({id:P,name:P})}))}else return{};let M=na(Lt(S,P=>!s(P).isSome()));return Pe(M,P=>{let Z=new Promise((oe,Y)=>{n.set(P,{resolve:oe,reject:Y})});a(Z,P)}),M.length>0&&D(M).then(kK).then(P=>{let Z=new Set(Kt(P,oe=>oe.id));Pe(P,oe=>d(oe.id,oe)),Pe(M,oe=>{Z.has(oe)||c(oe,new Error(`User ${oe} not found`))})}).catch(P=>{Pe(M,Z=>c(Z,P instanceof Error?P:new Error("Network error")))}),Mt(S,(P,Z)=>(P[Z]=s(Z).getOr(Promise.resolve({id:Z,name:Z,avatar:EL({id:Z,name:Z})})),P),{})},b=YT(e);return Object.freeze({userId:b,fetchUsers:p})},TK=e=>EK(e),AK=(e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,cp(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),fT(e,t))},_K=e=>e._editableRoot,OK=(e,t)=>({sections:lt(e),options:lt(t)}),k9=ct().deviceType,E9=k9.isPhone(),DK=k9.isTablet(),NE=e=>{if(os(e))return[];{let t=ht(e)?e:e.split(/[ ,]/),n=Kt(t,wa);return Lt(n,Na)}},RK=(e,t)=>{let n=Nn(t,(s,a)=>In(e,a));return OK(n.t,n.f)},NK=(e,t,n={})=>{let s=e.sections(),a=_n(s,t).getOr({});return et.extend({},n,a)},TL=(e,t)=>Yt(e.sections(),t),MK=(e,t)=>TL(e,t)?e.sections()[t]:{},BK=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:_n(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),PK=(e,t)=>{let n=t.external_plugins??{};return e&&e.external_plugins?et.extend({},e.external_plugins,n):n},LK=(e,t)=>[...NE(e),...NE(t)],IK=(e,t,n,s)=>e&&TL(t,"mobile")?s:n,FK=(e,t,n,s)=>{let a=NE(n.forced_plugins),c=NE(s.plugins),d=MK(t,"mobile"),p=d.plugins?NE(d.plugins):c,b=IK(e,t,c,p),S=LK(a,b);return et.extend(s,{forced_plugins:a,plugins:S})},HK=(e,t)=>e&&TL(t,"mobile"),zK=(e,t,n,s,a)=>{let c=e?{mobile:BK(a.mobile??{},t)}:{},d=RK(["mobile"],ti(c,a)),p=et.extend(n,s,d.options(),HK(e,d)?NK(d,"mobile"):{},{external_plugins:PK(s,d.options())});return FK(e,d,s,p)},$K=(e,t)=>{let n=Ur(t);return zK(E9||DK,E9,n,e,n)},VK=(e,t)=>T7(e,t),UK=e=>{let t=(s,a)=>{e.formatter.toggle(s,a),e.nodeChanged()},n=s=>()=>{Pe("left,center,right,justify".split(","),a=>{s!==a&&e.formatter.remove("align"+a)}),s!=="none"&&t("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},ZK=e=>{let t=n=>()=>{let s=e.selection,a=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return ro(a,c=>Ve(e.formatter.matchNode(c,n)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},WK=e=>{UK(e),ZK(e)},jK=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{let n=e.getDoc(),s;try{n.execCommand(t)}catch{s=!0}if(t==="paste"&&!n.queryCommandEnabled(t)&&(s=!0),s||!n.queryCommandSupported(t)){let a=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(En.os.isMacOS()||En.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:a,type:"error"})}}})},qK=(e,t,n,s)=>{let a=q.fromDom(e.getRoot());return d2(a,Fe.fromRangeStart(t),s)?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),m2(a,Fe.fromRangeEnd(t),s)?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},GK=e=>{if(typeof e!="string"){let t=et.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},KK=(e,t)=>{let n=e.selection,s=e.dom;return/^ | $/.test(t)?qK(s,n.getRng(),t,e.schema):t},_N=(e,t)=>{if(e.selection.isEditable()){let{content:n,details:s}=GK(t);zw(e,{...s,content:KK(e,n),format:"html",set:!1,selection:!0}).each(a=>{let c=k7(e,a.content,s);$w(e,c,a),e.addVisual()})}},YK=e=>{e.editorCommands.addCommands({mceCleanup:()=>{let t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{_N(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{_N(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{_N(e,s)},mceInsertContent:(t,n,s)=>{_N(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent($6(e))}})},XK={"font-size":"size","font-family":"face"},JK=pu("font"),QK=(e,t,n)=>{let s=c=>Id(c,e).orThunk(()=>JK(c)?_n(XK,e).bind(d=>xr(c,d)):L.none()),a=c=>Qt(q.fromDom(t),c);return Pc(q.fromDom(n),c=>s(c),a)},eY=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),tY=(e,t)=>L.from(Co.DOM.getStyle(t,e,!0)),T9=e=>(t,n)=>L.from(n).map(q.fromDom).filter(Xs).bind(s=>QK(e,t,s.dom).or(tY(e,s.dom))).getOr(""),nY=T9("font-size"),oY=ls(eY,T9("font-family")),sY=e=>Yi(e.getBody()).bind(t=>{let n=t.container();return L.from(tt(n)?n.parentNode:n)}),rY=e=>L.from(e.selection.getRng()).bind(t=>{let n=e.getBody();return t.startContainer===n&&t.startOffset===0?L.none():L.from(e.selection.getStart(!0))}),aY=(e,t)=>rY(e).orThunk(_t(sY,e)).map(q.fromDom).filter(Xs).bind(t),AL=(e,t)=>aY(e,So(L.some,t)),A9=(e,t)=>{if(/^[0-9.]+$/.test(t)){let n=parseInt(t,10);if(n>=1&&n<=7){let s=G6(e),a=K6(e);return a.length>0?a[n-1]||t:s[n-1]||t}else return t}else return t},iY=e=>{let t=e.split(/\s*,\s*/);return Kt(t,n=>n.indexOf(" ")!==-1&&!(wn(n,'"')||wn(n,"'"))?`'${n}'`:n).join(",")},lY=(e,t)=>{let n=A9(e,t);e.formatter.toggle("fontname",{value:iY(n)}),e.nodeChanged()},cY=e=>AL(e,t=>oY(e.getBody(),t.dom)).getOr(""),uY=(e,t)=>{e.formatter.toggle("fontsize",{value:A9(e,t)}),e.nodeChanged()},dY=e=>AL(e,t=>nY(e.getBody(),t.dom)).getOr(""),mY=e=>AL(e,t=>{let n=q.fromDom(e.getBody()),s=Pc(t,c=>Id(c,"line-height"),_t(Qt,n)),a=()=>{let c=parseFloat(fl(t,"line-height")),d=parseFloat(fl(t,"font-size"));return String(c/d)};return s.getOrThunk(a)}).getOr(""),gY=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},fY=e=>{let t=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{t(n)},"ForeColor,HiliteColor":(n,s,a)=>{t(n,{value:a})},BackColor:(n,s,a)=>{t("hilitecolor",{value:a})},FontName:(n,s,a)=>{lY(e,a)},FontSize:(n,s,a)=>{uY(e,a)},LineHeight:(n,s,a)=>{gY(e,a)},Lang:(n,s,a)=>{t(n,{value:a.code,customValue:a.customCode??null})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(n,s,a)=>{t(pt(a)?a:"p")},mceToggleFormat:(n,s,a)=>{t(a)}})},pY=e=>{let t=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>t(n),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>cY(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>dY(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>mY(e))},hY=e=>{fY(e),pY(e)},bY=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},vY=e=>{e.editorCommands.addCommands({Indent:()=>{rV(e)},Outdent:()=>{$I(e)}}),e.editorCommands.addCommands({Outdent:()=>II(e),Indent:()=>oV(e)},"state")},yY=e=>{let t=(n,s,a)=>{if(e.mode.isReadOnly())return;let c=pt(a)?{href:a}:a,d=e.dom.getParent(e.selection.getNode(),"a");At(c)&&pt(c.href)&&(c.href=c.href.replace(/ /g,"%20").replace(/&amp;/g,"&"),(!d||!c.href)&&e.formatter.remove("link"),c.href&&e.formatter.apply("link",c,d))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){let n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})},CY=(e,t,n,s)=>{let a=e.dom,c=p=>a.isBlock(p)&&p.parentElement===n,d=c(t)?t:a.getParent(s,c,n);return L.from(d).map(q.fromDom)},_9=(e,t)=>{if(e.mode.isReadOnly())return;let n=e.dom,s=e.selection.getRng(),a=t?e.selection.getStart():e.selection.getEnd(),c=t?s.startContainer:s.endContainer,d=AE(n,c);if(!d||!d.isContentEditable)return;let p=t?Zr:Pl,b=fi(e);CY(e,a,d,c).each(S=>{let D=qF(e,c,S.dom,d,!1,b);p(S,q.fromDom(D)),e.selection.setCursorLocation(D,0),e.dispatch("NewBlock",{newBlock:D}),TE(e,"insertParagraph")})},wY=e=>_9(e,!0),xY=e=>_9(e,!1),SY=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{wY(e)},InsertNewBlockAfter:()=>{xY(e)}})},kY=e=>{e.editorCommands.addCommands({insertParagraph:()=>{bN(XF,e)},mceInsertNewLine:(t,n,s)=>{sH(e,s)},InsertLineBreak:(t,n,s)=>{bN(eH,e)}})},EY=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let a=0;e.dom.getParent(e.selection.getNode(),c=>It(c)&&a++===s?(e.selection.select(c),!1):!0,e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{let t=e.dom.getParent(e.selection.getStart(),Ui);if(t){let n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},TY=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{let a=s??e.selection.getNode();if(a!==e.getBody()){let c=e.selection.getBookmark();e.dom.remove(a,!0),e.selection.moveToBookmark(c)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{PM(e,s===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},AY=e=>{WK(e),jK(e),bY(e),EY(e),YK(e),yY(e),vY(e),SY(e),kY(e),hY(e),TY(e)},_Y=["toggleview"],O9=e=>In(_Y,e.toLowerCase());class D9{editor;commands={state:{},exec:{},value:{}};constructor(t){this.editor=t}execCommand(t,n=!1,s,a){let c=this.editor,d=t.toLowerCase(),p=a?.skip_focus;if(c.removed||(d!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(d)&&!p?c.focus():SM(c)),c.dispatch("BeforeExecCommand",{command:t,ui:n,value:s}).isDefaultPrevented()))return!1;let S=this.commands.exec[d];return zt(S)?(S(d,n,s,a),c.dispatch("ExecCommand",{command:t,ui:n,value:s,args:a}),!0):!1}queryCommandState(t){if(!O9(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;let n=t.toLowerCase(),s=this.commands.state[n];return zt(s)?s(n):!1}queryCommandValue(t){if(!O9(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";let n=t.toLowerCase(),s=this.commands.value[n];return zt(s)?s(n):""}addCommands(t,n="exec"){let s=this.commands;An(t,(a,c)=>{Pe(c.toLowerCase().split(","),d=>{s[n][d]=a})})}addCommand(t,n,s){let a=t.toLowerCase();this.commands.exec[a]=(c,d,p,b)=>n.call(s??this.editor,d,p,b)}removeCommand(t,n){let s=t.toLowerCase();n?delete this.commands[n][s]:(delete this.commands.exec[s],delete this.commands.state[s],delete this.commands.value[s])}queryCommandSupported(t){let n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,s){this.commands.state[t.toLowerCase()]=()=>n.call(s??this.editor)}addQueryValueHandler(t,n,s){this.commands.value[t.toLowerCase()]=()=>n.call(s??this.editor)}}let OY=et.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class _L{static isNative(t){return!!OY[t.toLowerCase()]}settings;scope;toggleEvent;bindings={};constructor(t){this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||pn}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){let s=t.toLowerCase(),a=Ip(s,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(a);let c=this.bindings[s];if(c)for(let d=0,p=c.length;d<p;d++){let b=c[d];if(!b.removed){if(b.once&&this.off(s,b.func),a.isImmediatePropagationStopped())return a;if(b.func.call(this.scope,a)===!1)return a.preventDefault(),a}}return a}on(t,n,s,a){if(n===!1&&(n=pn),n){let c={func:n,removed:!1};a&&et.extend(c,a);let d=t.toLowerCase().split(" "),p=d.length;for(;p--;){let b=d[p],S=this.bindings[b];S||(S=[],this.toggleEvent(b,!0)),s?S=[c,...S]:S=[...S,c],this.bindings[b]=S}}return this}off(t,n){if(t){let s=t.toLowerCase().split(" "),a=s.length;for(;a--;){let c=s[a],d=this.bindings[c];if(!c)return An(this.bindings,(p,b)=>{this.toggleEvent(b,!1),delete this.bindings[b]}),this;if(d){if(!n)d.length=0;else{let p=cs(d,b=>b.func===n);d=p.fail,this.bindings[c]=d,Pe(p.pass,b=>{b.removed=!0})}d.length||(this.toggleEvent(t,!1),delete this.bindings[c])}}}else An(this.bindings,(s,a)=>{this.toggleEvent(a,!1)}),this.bindings={};return this}once(t,n,s){return this.on(t,n,s,{once:!0})}has(t){t=t.toLowerCase();let n=this.bindings[t];return!(!n||n.length===0)}}let ME=e=>(e._eventDispatcher||(e._eventDispatcher=new _L({scope:e,toggleEvent:(t,n)=>{_L.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),OL={fire(e,t,n){return x5("fire"),this.dispatch(e,t,n)},dispatch(e,t,n){let s=this;if(s.removed&&e!=="remove"&&e!=="detach")return Ip(e.toLowerCase(),t??{},s);let a=ME(s).dispatch(e,t);if(n!==!1&&s.parent){let c=s.parent();for(;c&&!a.isPropagationStopped();)c.dispatch(e,a,!1),c=c.parent?c.parent():void 0}return a},on(e,t,n){return ME(this).on(e,t,n)},off(e,t){return ME(this).off(e,t)},once(e,t){return ME(this).once(e,t)},hasEventListeners(e){return ME(this).has(e)}},ON=Co.DOM,uy,DN=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;let n=Iv(e);return n?(e.eventRoot||(e.eventRoot=ON.select(n)[0]),e.eventRoot):e.getBody()},DY=e=>!e.hidden&&!cp(e),R9=(e,t,n)=>{DY(e)?e.dispatch(t,n):cp(e)&&X7(e,n)},N9=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;let n=DN(e,t);if(Iv(e)){if(uy||(uy={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||uy&&(An(uy,(a,c)=>{e.dom.unbind(DN(e,c))}),uy=null)})),uy[t])return;let s=a=>{let c=a.target,d=e.editorManager.get(),p=d.length;for(;p--;){let b=d[p].getBody();(b===c||ON.isChildOf(c,b))&&R9(d[p],t,a)}};uy[t]=s,ON.bind(n,t,s)}else{let s=a=>{R9(e,t,a)};ON.bind(n,t,s),e.delegates[t]=s}},M9={...OL,bindPendingEventDelegates(){let e=this;et.each(e._pendingNativeEvents,t=>{N9(e,t)})},toggleNativeEvent(e,t){let n=this;e==="focus"||e==="blur"||n.removed||(t?n.initialized?N9(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(DN(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){let e=this,t=e.getBody(),n=e.dom;e.delegates&&(An(e.delegates,(s,a)=>{e.dom.unbind(DN(e,a),a,s)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},RY=e=>pt(e)?{value:e.split(/[ ,]/),valid:!0}:_(e,pt)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},NY=e=>{let t=(()=>{switch(e){case"array":return ht;case"boolean":return ut;case"function":return zt;case"number":return vn;case"object":return At;case"string":return pt;case"string[]":return RY;case"object[]":return n=>_(n,At);case"regexp":return n=>Qe(n,RegExp);default:return so}})();return n=>DL(n,t,`The value must be a ${e}.`)},MY=e=>pt(e.processor),B9=(e,t)=>{let n=xa(t.message)?"":`. ${t.message}`;return e+n},P9=e=>e.valid,DL=(e,t,n="")=>{let s=t(e);return ut(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},BY=(e,t,n)=>{if(!ns(t)){let s=DL(t,n);if(P9(s))return s.value;console.error(B9(`Invalid default value passed for the "${e}" option`,s))}},PY=(e,t,n=t)=>{let s={},a={},c=(Z,oe,Y)=>{let ne=DL(oe,Y);return P9(ne)?(a[Z]=ne.value,!0):(console.warn(B9(`Invalid value passed for the ${Z} option`,ne)),!1)},d=(Z,oe)=>{let Y=MY(oe)?NY(oe.processor):oe.processor,ne=BY(Z,oe.default,Y);s[Z]={...oe,default:ne,processor:Y},_n(a,Z).orThunk(()=>_n(t,Z)).each(be=>c(Z,be,Y))},p=Z=>Yt(s,Z);return{register:d,isRegistered:p,get:Z=>_n(a,Z).orThunk(()=>_n(s,Z).map(oe=>oe.default)).getOrUndefined(),set:(Z,oe)=>{if(p(Z)){let Y=s[Z];return Y.immutable?(console.error(`"${Z}" is an immutable option and cannot be updated`),!1):c(Z,oe,Y.processor)}else return console.warn(`"${Z}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:Z=>{let oe=p(Z);return oe&&delete a[Z],oe},isSet:Z=>Yt(a,Z),debug:()=>{try{console.log(JSON.parse(JSON.stringify(n,(Z,oe)=>ut(oe)||vn(oe)||pt(oe)||me(oe)||ht(oe)||ve(oe)?oe:Object.prototype.toString.call(oe))))}catch(Z){console.error(Z)}}}},LY=(e,t)=>{e.dom.contentEditable=t?"true":"false"},IY=(e,t)=>{let n=q.fromDom(e.getBody());t?(e.readonly=!0,e.hasEditableRoot()&&LY(n,!0),Z3(e)):(e.readonly=!1,cR(e))},Dx=e=>e.readonly,FY=e=>{let t=e.undoManager.add();Ve(t)&&(e.undoManager.undo(),e.undoManager.reset())},HY=e=>ro(e,t=>t.type==="characterData"||t.type==="childList"),zY=e=>{let t=s=>{Dx(e)&&HY(s)&&FY(e)},n=new MutationObserver(t);e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",s=>{Dx(e)&&s.preventDefault()}),e.on("BeforeExecCommand",s=>{(s.command==="Undo"||s.command==="Redo")&&Dx(e)&&s.preventDefault()}),e.on("compositionstart",()=>{Dx(e)&&n.observe(e.getBody(),{characterData:!0,childList:!0,subtree:!0})}),e.on("compositionend",()=>{if(Dx(e)){let s=n.takeRecords();t(s)}n.disconnect()})},$Y=["design","readonly"],L9=(e,t,n,s)=>{let a=n[t.get()],c=n[s];try{c.activate()}catch(d){console.error(`problem while activating editor mode ${s}:`,d);return}a.deactivate(),a.editorReadOnly!==c.editorReadOnly&&IY(e,c.editorReadOnly),t.set(s),c6(e,s)},VY=(e,t,n,s)=>{if(!(s===n.get()||e.initialized&&cp(e))){if(!Yt(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?L9(e,n,t,s):e.on("init",()=>L9(e,n,t,s))}},UY=(e,t,n)=>{if(In($Y,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${t}:`,s)}}}}},ZY=e=>{let t=Us("design"),n=Us({design:{activate:wt,deactivate:wt,editorReadOnly:!1},readonly:{activate:wt,deactivate:wt,editorReadOnly:!0}});return zY(e),Q7(e),{isReadOnly:()=>Dx(e),set:s=>VY(e,n.get(),t,s),get:()=>t.get(),register:(s,a)=>{n.set(UY(n.get(),s,a))}}},RL=et.each,NL=et.explode,WY={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},I9=et.makeMap("alt,ctrl,shift,meta,access"),jY=e=>e in I9,qY=e=>{let t={},n=En.os.isMacOS()||En.os.isiOS();RL(NL(e.toLowerCase(),"+"),c=>{jY(c)?t[c]=!0:/^[0-9]{2,}$/.test(c)?t.keyCode=parseInt(c,10):(t.charCode=c.charCodeAt(0),t.keyCode=WY[c]||c.toUpperCase().charCodeAt(0))});let s=[t.keyCode],a;for(a in I9)t[a]?s.push(a):t[a]=!1;return t.id=s.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class F9{editor;shortcuts={};pendingPatterns=[];constructor(t){this.editor=t;let n=this;t.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(RL(n.shortcuts,a=>{n.matchShortcut(s,a)&&(n.pendingPatterns=a.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(a))}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,s,a){let c=this,d=c.normalizeCommandFunc(s);return RL(NL(et.trim(t)),p=>{let b=c.createShortcut(p,n,d,a);c.shortcuts[b.id]=b}),!0}remove(t){let n=this.createShortcut(t);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(t){let n=this,s=t;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:et.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(t,n,s,a){let c=et.map(NL(t,">"),qY);return c[c.length-1]=et.extend(c[c.length-1],{func:s,scope:a||this.editor}),et.extend(c[0],{desc:this.editor.translate(n),subpatterns:c.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!n||n.ctrl!==t.ctrlKey||n.meta!==t.metaKey||n.alt!==t.altKey||n.shift!==t.shiftKey?!1:t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}let GY=()=>{let e=lZ();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},dy=Co.DOM,H9=et.extend,KY=et.each;class RN{baseUri;id;editorUid;plugins={};documentBaseURI;baseURI;contentCSS=[];contentStyles=[];ui;mode;options;editorUpload;userLookup;shortcuts;loadedCSS={};editorCommands;suffix;editorManager;hidden;inline;hasVisual;isNotDirty=!1;annotator;bodyElement;bookmark;composing=!1;container;contentAreaContainer;contentDocument;contentWindow;delegates;destroyed=!1;dom;editorContainer;eventRoot;formatter;formElement;formEventDelegate;hasHiddenInput=!1;iframeElement=null;iframeHTML;initialized=!1;notificationManager;orgDisplay;orgVisibility;parser;quirks;readonly=!1;removed=!1;schema;selection;serializer;startContent="";targetElm;theme;model;undoManager;windowManager;licenseKeyManager;_beforeUnload;_eventDispatcher;_nodeChangeDispatcher;_pendingNativeEvents=[];_selectionOverrides;_skinLoaded=!1;_editableRoot=!0;bindPendingEventDelegates;toggleNativeEvent;unbindAllNativeEvents;fire;dispatch;on;off;once;hasEventListeners;constructor(t,n,s){this.editorManager=s,H9(this,M9);let a=this;this.id=t,this.editorUid=_r(),this.hidden=!1;let c=$K(s.defaultOptions,n);this.options=PY(a,c,n),f6(a),this.userLookup=TK(this);let d=this.options.get;d("deprecation_warnings")&&Xk(n,c);let p=d("suffix");p&&(s.suffix=p),this.suffix=s.suffix;let b=d("base_url");b&&s._setBaseUrl(b),this.baseUri=s.baseURI;let S=xt(a);S&&(Ei.ScriptLoader._setReferrerPolicy(S),Co.DOM.styleSheetLoader._setReferrerPolicy(S)),Ei.ScriptLoader._setCrossOrigin(Z=>Jd(a)(Z,"script")),Co.DOM.styleSheetLoader._setCrossOrigin(Z=>Jd(a)(Z,"stylesheet"));let D=AS(a);Ve(D)&&Co.DOM.styleSheetLoader._setContentCssCors(D),ui.languageLoad=d("language_load"),ui.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new im(Kp(a),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=oC(a),this.hasVisual=aC(a),this.shortcuts=new F9(this),this.editorCommands=new D9(this),AY(this);let M=d("cache_suffix");M&&(En.cacheSuffix=M.replace(/^[\?\&]+/,"")),this.ui={registry:GY(),styleSheetLoader:void 0,show:wt,hide:wt,setEnabled:wt,isEnabled:so},this.mode=ZY(a),Object.defineProperty(this,"editorUid",{writable:!1,configurable:!1,enumerable:!0}),s.dispatch("SetupEditor",{editor:this});let P=BT(a);zt(P)&&P.call(a,a)}render(){hK(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return Xf(this)}translate(t){return ic.translate(t)}getParam(t,n,s){let a=this.options;return a.isRegistered(t)||(Ve(s)?a.register(t,{processor:s,default:n}):a.register(t,{processor:so,default:n})),!a.isSet(t)&&!ns(n)?n:a.get(t)}hasPlugin(t,n){return In(v1(this),t)?n?t0.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,s){this.editorCommands.addCommand(t,n,s)}addQueryStateHandler(t,n,s){this.editorCommands.addQueryStateHandler(t,n,s)}addQueryValueHandler(t,n,s){this.editorCommands.addQueryValueHandler(t,n,s)}addShortcut(t,n,s,a){this.shortcuts.add(t,n,s,a)}execCommand(t,n,s,a){return this.editorCommands.execCommand(t,n,s,a)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){let t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(dy.show(t.getContainer()),dy.hide(t.id)),t.load(),t.dispatch("show"))}hide(){let t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(dy.hide(t.getContainer()),dy.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){let n=this,s=n.getElement();if(!n.removed&&s){let a={...t,load:!0},c=Nh(s)?s.value:s.innerHTML;n.setContent(c,a),a.no_events||n.dispatch("LoadContent",{...a,element:s})}}save(t={}){let n=this,s=n.getElement();if(!s||!n.initialized||n.removed)return"";let a={...t,save:!0,element:s},c=n.getContent(a),d={...a,content:c};if(d.no_events||n.dispatch("SaveContent",d),d.format==="raw"&&n.dispatch("RawSaveContent",d),c=d.content,Nh(s))s.value=c;else{(t.is_removing||!n.inline)&&(s.innerHTML=c);let p=dy.getParent(n.id,"form");p&&KY(p.elements,b=>b.name===n.id?(b.value=c,!1):!0)}return d.element=a.element=s=null,d.set_dirty!==!1&&n.setDirty(!1),c}setContent(t,n){V2(this,t,n)}getContent(t){return I7(this,t)}insertContent(t,n){n&&(t=H9({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?V2(this,this.startContent,{initial:!0,format:"raw"}):V2(this,t,{initial:!0}),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){let n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){let t=this;return t.container||(t.container=t.editorContainer||dy.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=dy.get(this.id)),this.targetElm}getWin(){let t=this;if(!t.contentWindow){let n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){let t=this;if(!t.contentDocument){let n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){let t=this.getDoc();return this.bodyElement??t?.body??null}convertURL(t,n,s){let a=this,c=a.options.get,d=LT(a);if(zt(d))return d.call(a,t,s,!0,n);if(!c("convert_urls")||s==="link"||At(s)&&s.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;let p=new im(t);return p.protocol!=="http"&&p.protocol!=="https"&&p.protocol!==""?t:c("relative_urls")?a.documentBaseURI.toRelative(t):(t=a.documentBaseURI.toAbsolute(t,c("remove_script_host")),t)}addVisual(t){VK(this,t)}setEditableRoot(t){AK(this,t)}hasEditableRoot(){return _K(this)}remove(){O3(this)}destroy(t){D3(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}let Rx=Co.DOM,NN=et.each,z9=!1,MN,Uu=[],BN=e=>{let t=e.type;NN(tv.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},$9=e=>{if(e!==z9){let t=Co.DOM;e?(t.bind(window,"resize",BN),t.bind(window,"scroll",BN)):(t.unbind(window,"resize",BN),t.unbind(window,"scroll",BN)),z9=e}},V9=e=>{let t=Uu;return Uu=Lt(Uu,n=>e!==n),tv.activeEditor===e&&(tv.activeEditor=Uu.length>0?Uu[0]:null),tv.focusedEditor===e&&(tv.focusedEditor=null),t.length!==Uu.length},YY=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(V9(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},XY=document.compatMode!=="CSS1Compat",tv={...OL,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,pageUid:_r(),majorVersion:"8",minorVersion:"3.1",releaseDate:"2025-12-17",i18n:ic,activeEditor:null,focusedEditor:null,setup(){let e=this,t="",n="",s=im.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/"));let a=window.tinymce||window.tinyMCEPreInit;if(a)t=a.base||a.baseURL,n=a.suffix;else{let c=document.getElementsByTagName("script");for(let d=0;d<c.length;d++){let p=c[d].src||"";if(p==="")continue;let b=p.substring(p.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(p)){b.indexOf(".min")!==-1&&(n=".min"),t=p.substring(0,p.lastIndexOf("/"));break}}if(!t&&document.currentScript){let d=document.currentScript.src;d.indexOf(".min")!==-1&&(n=".min"),t=d.substring(0,d.lastIndexOf("/"))}}e.baseURL=new im(s).toAbsolute(t),e.documentBaseURL=s,e.baseURI=new im(e.baseURL),e.suffix=n,RM(e),Pe(["majorVersion","minorVersion","releaseDate","pageUid","_addLicenseKeyManager"],c=>Object.defineProperty(e,c,{writable:!1,configurable:!1,enumerable:!0}))},overrideDefaults(e){let t=e.base_url;t&&this._setBaseUrl(t);let n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;let s=e.plugin_base_urls;s!==void 0&&An(s,(a,c)=>{ui.PluginManager.urls[c]=a})},init(e){let t=this,n,s=et.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=(D,M)=>D.inline&&M.tagName.toLowerCase()in s,c=D=>{let M=D.id;return M||(M=_n(D,"name").filter(P=>!Rx.get(P)).getOrThunk(Rx.uniqueId),D.setAttribute("id",M)),M},d=D=>{let M=e[D];if(M)return M.apply(t,[])},p=D=>En.browser.isIE()||En.browser.isEdge()?(s0("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/8/support/#supportedwebbrowsers"),[]):XY?(s0("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):pt(D.selector)?Rx.select(D.selector):Ve(D.target)?[D.target]:[],b=D=>{n=D},S=()=>{let D=0,M=[],P,Z=(oe,Y,ne)=>{let he=new RN(oe,Y,t);M.push(he),he.on("init",()=>{++D===P.length&&b(M)}),he.targetElm=he.targetElm||ne,he.render()};Rx.unbind(window,"ready",S),d("onpageload"),P=na(p(e)),et.each(P,oe=>{YY(t.get(oe.id))}),P=et.grep(P,oe=>!t.get(oe.id)),P.length===0?b([]):NN(P,oe=>{a(e,oe)?s0("Could not initialize inline editor on invalid inline target element",oe):Z(c(oe),e,oe)})};return Rx.bind(window,"ready",S),new Promise(D=>{n?D(n):b=M=>{D(M)}})},get(e){return arguments.length===0?Uu.slice(0):pt(e)?xn(Uu,t=>t.id===e).getOr(null):vn(e)&&Uu[e]?Uu[e]:null},add(e){let t=this,n=t.get(e.id);return n===e||(n===null&&Uu.push(e),$9(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),MN||(MN=s=>{let a=t.dispatch("BeforeUnload");if(a.returnValue)return s.preventDefault(),s.returnValue=a.returnValue,a.returnValue},window.addEventListener("beforeunload",MN))),e},createEditor(e,t){return this.add(new RN(e,t,this))},remove(e){let t=this,n;if(!e){for(let s=Uu.length-1;s>=0;s--)t.remove(Uu[s]);return}if(pt(e)){NN(Rx.select(e),s=>{n=t.get(s.id),n&&t.remove(n)});return}return n=e,me(t.get(n.id))?null:(V9(n)&&t.dispatch("RemoveEditor",{editor:n}),Uu.length===0&&window.removeEventListener("beforeunload",MN),n.remove(),$9(Uu.length>0),n)},execCommand(e,t,n){let s=this,a=At(n)?n.id??n.index:n;switch(e){case"mceAddEditor":{if(!s.get(a)){let c=n.options;new RN(a,c,s).render()}return!0}case"mceRemoveEditor":{let c=s.get(a);return c&&c.remove(),!0}case"mceToggleEditor":{let c=s.get(a);return c?(c.isHidden()?c.show():c.hide(),!0):(s.execCommand("mceAddEditor",!1,n),!0)}}return s.activeEditor?s.activeEditor.execCommand(e,t,n):!1},triggerSave:()=>{NN(Uu,e=>{e.save()})},addI18n:(e,t)=>{ic.add(e,t)},translate:e=>ic.translate(e),setActive(e){let t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new im(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new im(this.baseURL)},_addLicenseKeyManager:e=>V3.add(e)};tv.setup();let JY=(()=>{let e=Ca(),t=c=>({items:c,types:zr(c),getType:d=>_n(c,d).getOrUndefined()}),n=c=>{e.set(c)},s=()=>e.get().getOrUndefined(),a=e.clear;return{FakeClipboardItem:t,write:n,read:s,clear:a}})(),U9=Math.min,Nx=Math.max,PN=Math.round,Z9=(e,t,n)=>{let s=t.x,a=t.y,c=e.w,d=e.h,p=t.w,b=t.h,S=(n||"").split("");return S[0]==="b"&&(a+=b),S[1]==="r"&&(s+=p),S[0]==="c"&&(a+=PN(b/2)),S[1]==="c"&&(s+=PN(p/2)),S[3]==="b"&&(a-=d),S[4]==="r"&&(s-=c),S[3]==="c"&&(a-=PN(d/2)),S[4]==="c"&&(s-=PN(c/2)),Mx(s,a,c,d)},QY=(e,t,n,s)=>{for(let a=0;a<s.length;a++){let c=Z9(e,t,s[a]);if(c.x>=n.x&&c.x+c.w<=n.w+n.x&&c.y>=n.y&&c.y+c.h<=n.h+n.y)return s[a]}return null},eX=(e,t,n)=>Mx(e.x-t,e.y-n,e.w+t*2,e.h+n*2),tX=(e,t)=>{let n=Nx(e.x,t.x),s=Nx(e.y,t.y),a=U9(e.x+e.w,t.x+t.w),c=U9(e.y+e.h,t.y+t.h);return a-n<0||c-s<0?null:Mx(n,s,a-n,c-s)},nX=(e,t,n)=>{let s=e.x,a=e.y,c=e.x+e.w,d=e.y+e.h,p=t.x+t.w,b=t.y+t.h,S=Nx(0,t.x-s),D=Nx(0,t.y-a),M=Nx(0,c-p),P=Nx(0,d-b);return s+=S,a+=D,n&&(c+=S,d+=D,s-=M,a-=P),c-=M,d-=P,Mx(s,a,c-s,d-a)},Mx=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),oX={inflate:eX,relativePosition:Z9,findBestRelativePosition:QY,intersect:tX,clamp:nX,create:Mx,fromClientRect:e=>Mx(e.left,e.top,e.width,e.height)},sX=(e,t,n=1e3)=>{let s=!1,a=null,c=S=>(...D)=>{s||(s=!0,a!==null&&(window.clearTimeout(a),a=null),S.apply(null,D))},d=c(e),p=c(t);return{start:(...S)=>{!s&&a===null&&(a=window.setTimeout(()=>p.apply(null,S),n))},resolve:d,reject:p}},rX=(()=>{let e={},t={},n={};return{load:(b,S)=>{let D=`Script at URL "${S}" failed to load`,M=`Script at URL "${S}" did not call \`tinymce.Resource.add('${b}', data)\` within 1 second`;if(e[b]!==void 0)return e[b];{let P=new Promise((Z,oe)=>{let Y=sX(Z,oe);t[b]=Y.resolve,Ei.ScriptLoader.loadScript(S).then(()=>Y.start(M),()=>Y.reject(D))});return e[b]=P,P}},add:(b,S)=>{t[b]!==void 0&&(t[b](S),delete t[b]),e[b]=Promise.resolve(S),n[b]=S},has:b=>b in n,get:b=>n[b],unload:b=>{delete e[b],delete n[b]}}})(),aX=()=>(()=>{let e={},t=[],n={getItem:s=>{let a=e[s];return a||null},setItem:(s,a)=>{t.push(s),e[s]=String(a)},key:s=>t[s],removeItem:s=>{t=t.filter(a=>a===s),delete e[s]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})(),BE;try{let e="__storage_test__";BE=window.localStorage,BE.setItem(e,e),BE.removeItem(e)}catch{BE=aX()}var iX=BE;let lX={geom:{Rect:oX},util:{Delay:Yc,Tools:et,VK:St,URI:im,EventDispatcher:_L,Observable:OL,I18n:ic,LocalStorage:iX,ImageUploader:CR},dom:{EventUtils:jg,TreeWalker:er,TextSeeker:Zc,DOMUtils:Co,ScriptLoader:Ei,RangeUtils:Xc,Serializer:A3,StyleSheetLoader:fv,ControlSelection:UA,BookmarkManager:R1,Selection:MD,Event:jg.Event},html:{Styles:fd,Entities:md,Node:Ai,Schema:Zd,DomParser:af,Writer:vb,Serializer:of},Env:En,AddOnManager:ui,Annotator:Xv,Formatter:J3,UndoManager:eE,EditorCommands:D9,WindowManager:j2,NotificationManager:qD,EditorObservable:M9,Shortcuts:F9,Editor:RN,FocusManager:Jv,EditorManager:tv,DOM:Co.DOM,ScriptLoader:Ei.ScriptLoader,PluginManager:t0,ThemeManager:Ch,ModelManager:rg,IconManager:dx,Resource:rX,FakeClipboard:JY,trim:et.trim,isArray:et.isArray,is:et.is,toArray:et.toArray,makeMap:et.makeMap,each:et.each,map:et.map,grep:et.grep,inArray:et.inArray,extend:et.extend,walk:et.walk,resolve:et.resolve,explode:et.explode,_addCacheSuffix:et._addCacheSuffix},W9=et.extend(tv,lX),cX=e=>{if(typeof PL=="object")try{PL.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(W9),cX(W9)})()});var sz=zx(()=>{(function(){"use strict";var Oi=tinymce.util.Tools.resolve("tinymce.PluginManager");let ol=(Cs,lr)=>{Cs.focus(),Cs.undoManager.transact(()=>{Cs.setContent(lr)}),Cs.selection.setCursorLocation(),Cs.nodeChanged()},Di=Cs=>Cs.getContent({source_view:!0}),Ka=Cs=>{let lr=Di(Cs);Cs.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code",spellcheck:!1}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:lr},onSubmit:To=>{ol(Cs,To.getData().code),To.close()}})},vr=Cs=>{Cs.addCommand("mceCodeEditor",()=>{Ka(Cs)})},Wn=Cs=>{let lr=()=>Cs.execCommand("mceCodeEditor");Cs.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:lr}),Cs.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:lr})};var nr=()=>{Oi.add("code",Cs=>(vr(Cs),Wn(Cs),{}))};nr()})()});var rz=zx(()=>{(function(){"use strict";let Oi=(G,se,xe)=>xe(G,se.prototype)?!0:G.constructor?.name===se.name,ol=G=>{let se=typeof G;return G===null?"null":se==="object"&&Array.isArray(G)?"array":se==="object"&&Oi(G,String,(xe,je)=>je.isPrototypeOf(xe))?"string":se},Di=G=>se=>ol(se)===G,Ka=G=>se=>typeof se===G,vr=G=>se=>G===se,Wn=Di("string"),nr=Di("object"),Cs=Di("array"),lr=vr(null),To=Ka("boolean"),Ar=vr(void 0),Hr=G=>G==null,Fs=G=>!Hr(G),$t=Ka("function"),jt=Ka("number"),Yn=()=>{},Ss=(G,se)=>(...xe)=>G(se.apply(null,xe)),Qe=(G,se)=>xe=>G(se(xe)),pt=G=>()=>G;function At(G,...se){return(...xe)=>{let je=se.concat(xe);return G.apply(null,je)}}let ve=pt(!1),ht=pt(!0);class me{tag;value;static singletonNone=new me(!1);constructor(se,xe){this.tag=se,this.value=xe}static some(se){return new me(!0,se)}static none(){return me.singletonNone}fold(se,xe){return this.tag?xe(this.value):se()}isSome(){return this.tag}isNone(){return!this.tag}map(se){return this.tag?me.some(se(this.value)):me.none()}bind(se){return this.tag?se(this.value):me.none()}exists(se){return this.tag&&se(this.value)}forall(se){return!this.tag||se(this.value)}filter(se){return!this.tag||se(this.value)?this:me.none()}getOr(se){return this.tag?this.value:se}or(se){return this.tag?this:se}getOrThunk(se){return this.tag?this.value:se()}orThunk(se){return this.tag?this:se()}getOrDie(se){if(this.tag)return this.value;throw new Error(se??"Called getOrDie on None")}static from(se){return Fs(se)?me.some(se):me.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(se){this.tag&&se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}let ut=Array.prototype.push,ns=(G,se)=>{let xe=G.length,je=new Array(xe);for(let ct=0;ct<xe;ct++){let Gn=G[ct];je[ct]=se(Gn,ct)}return je},os=(G,se)=>{for(let xe=0,je=G.length;xe<je;xe++){let ct=G[xe];se(ct,xe)}},Ve=(G,se)=>{let xe=[];for(let je=0,ct=G.length;je<ct;je++){let Gn=G[je];se(Gn,je)&&xe.push(Gn)}return xe},zt=(G,se,xe)=>{for(let je=0,ct=G.length;je<ct;je++){let Gn=G[je];if(se(Gn,je))return me.some(Gn);if(xe(Gn,je))break}return me.none()},vn=(G,se)=>zt(G,se,ve),_=G=>{let se=[];for(let xe=0,je=G.length;xe<je;++xe){if(!Cs(G[xe]))throw new Error("Arr.flatten item "+xe+" was not an array, input: "+G);ut.apply(se,G[xe])}return se},wt=(G,se)=>_(ns(G,se)),ls=(G,se)=>se>=0&&se<G.length?me.some(G[se]):me.none(),So=G=>ls(G,0),lt=(G,se)=>{for(let xe=0;xe<G.length;xe++){let je=se(G[xe],xe);if(je.isSome())return je}return me.none()},Ln=Object.keys,Ho=(G,se)=>{let xe=Ln(G);for(let je=0,ct=xe.length;je<ct;je++){let Gn=xe[je],No=G[Gn];se(No,Gn)}},_t=G=>{let se=G;return{get:()=>se,set:ct=>{se=ct}}},Ya=typeof window<"u"?window:Function("return this;")(),it=(G,se,xe)=>G.isSome()&&se.isSome()?me.some(xe(G.getOrDie(),se.getOrDie())):me.none(),Ot=(G,se)=>{let xe=se??Ya;for(let je=0;je<G.length&&xe!==void 0&&xe!==null;++je)xe=xe[G[je]];return xe},Xa=(G,se)=>{let xe=G.split(".");return Ot(xe,se)},pn=G=>{let se=_t(me.none()),xe=()=>se.get().each(G);return{clear:()=>{xe(),se.set(me.none())},isSet:()=>se.get().isSome(),get:()=>se.get(),set:qs=>{xe(),se.set(me.some(qs))}}},so=()=>pn(G=>G.unbind()),L=()=>{let G=pn(Yn);return{...G,on:xe=>G.get().each(xe)}},kn=(G,se,xe=0,je)=>{let ct=G.indexOf(se,xe);return ct!==-1?Ar(je)?!0:ct+se.length<=je:!1},Ja=(G,se)=>{let xe=null;return{cancel:()=>{lr(xe)||(clearTimeout(xe),xe=null)},throttle:(...Gn)=>{lr(xe)&&(xe=setTimeout(()=>{xe=null,G.apply(null,Gn)},se))}}},Vs=G=>{let se=!1,xe;return(...je)=>(se||(se=!0,xe=G.apply(null,je)),xe)};var vo=tinymce.util.Tools.resolve("tinymce.PluginManager");let hi=G=>({isFullscreen:()=>G.get()!==null}),In=(G,se)=>{let je=(se||document).createElement("div");if(je.innerHTML=G,!je.hasChildNodes()||je.childNodes.length>1){let ct="HTML does not have a single root node";throw console.error(ct,G),new Error(ct)}return Pe(je.childNodes[0])},ro=(G,se)=>{let je=(se||document).createElement(G);return Pe(je)},Kt=(G,se)=>{let je=(se||document).createTextNode(G);return Pe(je)},Pe=G=>{if(G==null)throw new Error("Node cannot be null or undefined");return{dom:G}},cs={fromHtml:In,fromTag:ro,fromText:Kt,fromDom:Pe,fromPoint:(G,se,xe)=>me.from(G.dom.elementFromPoint(se,xe)).map(Pe)},Lt=9,Ge=11,dt=1,Mt=3,rn=(G,se)=>{let xe=G.dom;if(xe.nodeType!==dt)return!1;{let je=xe;if(je.matches!==void 0)return je.matches(se);if(je.msMatchesSelector!==void 0)return je.msMatchesSelector(se);if(je.webkitMatchesSelector!==void 0)return je.webkitMatchesSelector(se);if(je.mozMatchesSelector!==void 0)return je.mozMatchesSelector(se);throw new Error("Browser lacks native selectors")}},xn=G=>G.nodeType!==dt&&G.nodeType!==Lt&&G.nodeType!==Ge||G.childElementCount===0,Ao=(G,se)=>{let xe=se===void 0?document:se.dom;return xn(xe)?[]:ns(xe.querySelectorAll(G),cs.fromDom)},_s=(G,se)=>G.dom===se.dom,lu=(G,se,xe,je)=>{let ct=G.isiOS()&&/ipad/i.test(xe)===!0,Gn=G.isiOS()&&!ct,No=G.isiOS()||G.isAndroid(),qs=No||je("(pointer:coarse)"),Mo=ct||!Gn&&No&&je("(min-device-width:768px)"),Gs=Gn||No&&!Mo,Nl=se.isSafari()&&G.isiOS()&&/safari/i.test(xe)===!1,ra=!Gs&&!Mo&&!Nl;return{isiPad:pt(ct),isiPhone:pt(Gn),isTablet:pt(Mo),isPhone:pt(Gs),isTouch:pt(qs),isAndroid:G.isAndroid,isiOS:G.isiOS,isWebView:pt(Nl),isDesktop:pt(ra)}},cr=(G,se)=>{for(let xe=0;xe<G.length;xe++){let je=G[xe];if(je.test(se))return je}},Qa=(G,se)=>{let xe=cr(G,se);if(!xe)return{major:0,minor:0};let je=ct=>Number(se.replace(xe,"$"+ct));return El(je(1),je(2))},kl=(G,se)=>{let xe=String(se).toLowerCase();return G.length===0?Ni():Qa(G,xe)},Ni=()=>El(0,0),El=(G,se)=>({major:G,minor:se}),Os={nu:El,detect:kl,unknown:Ni},qt=(G,se)=>lt(se.brands,xe=>{let je=xe.brand.toLowerCase();return vn(G,ct=>je===ct.brand?.toLowerCase()).map(ct=>({current:ct.name,version:Os.nu(parseInt(xe.version,10),0)}))}),Sn=(G,se)=>{let xe=String(se).toLowerCase();return vn(G,je=>je.search(xe))},Ds=(G,se)=>Sn(G,se).map(xe=>{let je=Os.detect(xe.versionRegexes,se);return{current:xe.name,version:je}}),ks=(G,se)=>Sn(G,se).map(xe=>{let je=Os.detect(xe.versionRegexes,se);return{current:xe.name,version:je}}),Rt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,na=G=>se=>kn(se,G),zr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:G=>kn(G,"edge/")&&kn(G,"chrome")&&kn(G,"safari")&&kn(G,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Rt],search:G=>kn(G,"chrome")&&!kn(G,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:G=>kn(G,"msie")||kn(G,"trident")},{name:"Opera",versionRegexes:[Rt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:na("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:na("firefox")},{name:"Safari",versionRegexes:[Rt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:G=>(kn(G,"safari")||kn(G,"mobile/"))&&kn(G,"applewebkit")}],qu=[{name:"Windows",search:na("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:G=>kn(G,"iphone")||kn(G,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:na("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:na("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:na("linux"),versionRegexes:[]},{name:"Solaris",search:na("sunos"),versionRegexes:[]},{name:"FreeBSD",search:na("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:na("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],An={browsers:pt(zr),oses:pt(qu)},$r="Edge",oa="Chromium",Tl="IE",Al="Opera",Nn="Firefox",us="Safari",Vr=()=>eo({current:void 0,version:Os.unknown()}),eo=G=>{let se=G.current,xe=G.version,je=ct=>()=>se===ct;return{current:se,version:xe,isEdge:je($r),isChromium:je(oa),isIE:je(Tl),isOpera:je(Al),isFirefox:je(Nn),isSafari:je(us)}},_n={unknown:Vr,nu:eo,edge:pt($r),chromium:pt(oa),ie:pt(Tl),opera:pt(Al),firefox:pt(Nn),safari:pt(us)},Yt="Windows",ei="iOS",we="Android",mg="Linux",Xn="macOS",Us="Solaris",Da="FreeBSD",Mi="ChromeOS",Ra=()=>or({current:void 0,version:Os.unknown()}),or=G=>{let se=G.current,xe=G.version,je=ct=>()=>se===ct;return{current:se,version:xe,isWindows:je(Yt),isiOS:je(ei),isAndroid:je(we),isMacOS:je(Xn),isLinux:je(mg),isSolaris:je(Us),isFreeBSD:je(Da),isChromeOS:je(Mi)}},Rs={unknown:Ra,nu:or,windows:pt(Yt),ios:pt(ei),android:pt(we),linux:pt(mg),macos:pt(Xn),solaris:pt(Us),freebsd:pt(Da),chromeos:pt(Mi)},_l={detect:(G,se,xe)=>{let je=An.browsers(),ct=An.oses(),Gn=se.bind(Mo=>qt(je,Mo)).orThunk(()=>Ds(je,G)).fold(_n.unknown,_n.nu),No=ks(ct,G).fold(Rs.unknown,Rs.nu),qs=lu(No,Gn,G,xe);return{browser:Gn,os:No,deviceType:qs}}},ur=G=>window.matchMedia(G).matches,to=Vs(()=>_l.detect(window.navigator.userAgent,me.from(window.navigator.userAgentData),ur)),cu=()=>to(),yo=(G,se)=>Xa(G,se),_r=(G,se)=>{let xe=yo(G,se);if(xe==null)throw new Error(G+" not available on this browser");return xe},uu=Object.getPrototypeOf,bc=G=>_r("HTMLElement",G),Gu=G=>{let se=Xa("ownerDocument.defaultView",G);return nr(G)&&(bc(se).prototype.isPrototypeOf(G)||/^HTML\w*Element$/.test(uu(G).constructor.name))},ti=G=>G.dom.nodeType,Ur=G=>se=>ti(se)===G,sl=G=>dr(G)&&Gu(G.dom),dr=Ur(dt),Ol=Ur(Mt),sr=Ur(Ge),rl=G=>cs.fromDom(G.dom.ownerDocument),fm=G=>me.from(G.dom.parentNode).map(cs.fromDom),bt=(G,se)=>{let xe=$t(se)?se:ve,je=G.dom,ct=[];for(;je.parentNode!==null&&je.parentNode!==void 0;){let Gn=je.parentNode,No=cs.fromDom(Gn);if(ct.push(No),xe(No)===!0)break;je=Gn}return ct},pm=G=>{let se=xe=>Ve(xe,je=>!_s(G,je));return fm(G).map(du).map(se).getOr([])},Od=G=>me.from(G.dom.nextSibling).map(cs.fromDom),du=G=>ns(G.dom.childNodes,cs.fromDom),mu=G=>sr(G)&&Fs(G.dom.host),gg=G=>cs.fromDom(G.dom.getRootNode()),Ca=G=>{let se=gg(G);return mu(se)?me.some(se):me.none()},Ku=G=>cs.fromDom(G.dom.host),Xl=G=>{if(Fs(G.target)){let se=cs.fromDom(G.target);if(dr(se)&&Dd(se)&&G.composed&&G.composedPath){let xe=G.composedPath();if(xe)return So(xe)}}return me.from(G.target)},Dd=G=>Fs(G.dom.shadowRoot),mr=(G,se,xe,je,ct,Gn,No)=>({target:G,x:se,y:xe,stop:je,prevent:ct,kill:Gn,raw:No}),wn=G=>{let se=cs.fromDom(Xl(G).getOr(G.target)),xe=()=>G.stopPropagation(),je=()=>G.preventDefault(),ct=Ss(je,xe);return mr(se,G.clientX,G.clientY,xe,je,ct,G)},vc=(G,se)=>xe=>{G(xe)&&se(wn(xe))},yc=(G,se,xe,je,ct)=>{let Gn=vc(xe,je);return G.dom.addEventListener(se,Gn,ct),{unbind:At(Jl,G,se,Gn,ct)}},wa=(G,se,xe,je)=>yc(G,se,xe,je,!1),Jl=(G,se,xe,je)=>{G.dom.removeEventListener(se,xe,je)},fg=ht,Na=(G,se,xe)=>wa(G,se,fg,xe),xa=(G,se,xe)=>{if(Wn(xe)||To(xe)||jt(xe))G.setAttribute(se,xe+"");else throw console.error("Invalid call to Attribute.set. Key ",se,":: Value ",xe,":: Element ",G),new Error("Attribute value was not simple")},Rd=(G,se,xe)=>{xa(G.dom,se,xe)},Cc=(G,se)=>{let xe=G.dom.getAttribute(se);return xe===null?void 0:xe},Dl=(G,se)=>{G.dom.removeAttribute(se)},ps=G=>G.style!==void 0&&$t(G.style.getPropertyValue),ni=G=>{let se=Ol(G)?G.dom.parentNode:G.dom;if(se==null||se.ownerDocument===null)return!1;let xe=se.ownerDocument;return Ca(cs.fromDom(se)).fold(()=>xe.body.contains(se),Qe(ni,Ku))},Rl=G=>{let se=G.dom.body;if(se==null)throw new Error("Body is not available yet");return cs.fromDom(se)},ws=(G,se,xe)=>{if(!Wn(xe))throw console.error("Invalid call to CSS.set. Property ",se,":: Value ",xe,":: Element ",G),new Error("CSS value must be a string: "+xe);ps(G)&&G.style.setProperty(se,xe)},Yu=(G,se,xe)=>{let je=G.dom;ws(je,se,xe)},js=(G,se)=>{let xe=G.dom;Ho(se,(je,ct)=>{ws(xe,ct,je)})},Bi=(G,se)=>{let xe=G.dom,ct=window.getComputedStyle(xe).getPropertyValue(se);return ct===""&&!ni(G)?pg(xe,se):ct},pg=(G,se)=>ps(G)?G.style.getPropertyValue(se):"",Nd=(G,se)=>({left:G,top:se,translate:(je,ct)=>Nd(G+je,se+ct)}),yr=Nd,Xu=G=>{let se=G!==void 0?G.dom:document,xe=se.body.scrollLeft||se.documentElement.scrollLeft,je=se.body.scrollTop||se.documentElement.scrollTop;return yr(xe,je)},wc=G=>G.dom.classList!==void 0,al=(G,se)=>wc(G)&&G.dom.classList.contains(se),xc=(G,se,xe)=>Ve(bt(G,xe),se),hg=(G,se)=>Ve(pm(G),se),Sc=G=>Ao(G),Ju=(G,se,xe)=>xc(G,je=>rn(je,se),xe),Or=(G,se)=>hg(G,xe=>rn(xe,se)),kc=G=>{let se=G===void 0?window:G;return cu().browser.isFirefox()?me.none():me.from(se.visualViewport)},Qu=(G,se,xe,je)=>({x:G,y:se,width:xe,height:je,right:G+xe,bottom:se+je}),bi=G=>{let se=G===void 0?window:G,xe=se.document,je=Xu(cs.fromDom(xe));return kc(se).fold(()=>{let ct=se.document.documentElement,Gn=ct.clientWidth,No=ct.clientHeight;return Qu(je.left,je.top,Gn,No)},ct=>Qu(Math.max(ct.pageLeft,je.left),Math.max(ct.pageTop,je.top),ct.width,ct.height))},Md=(G,se,xe)=>kc(xe).map(je=>{let ct=Gn=>se(wn(Gn));return je.addEventListener(G,ct),{unbind:()=>je.removeEventListener(G,ct)}}).getOrThunk(()=>({unbind:Yn}));var Ql=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ma=tinymce.util.Tools.resolve("tinymce.Env");let il=(G,se)=>{G.dispatch("FullscreenStateChanged",{state:se}),G.dispatch("ResizeEditor")},Pi=G=>se=>se.options.get(G),Dr=G=>{let se=G.options.register;se("fullscreen_native",{processor:"boolean",default:!1})},oi=Pi("fullscreen_native"),Ec=G=>{let se=cs.fromDom(G.getElement());return Ca(se).map(Ku).getOrThunk(()=>Rl(rl(se)))},Tc=G=>G.fullscreenElement!==void 0?G.fullscreenElement:G.msFullscreenElement!==void 0?G.msFullscreenElement:G.webkitFullscreenElement!==void 0?G.webkitFullscreenElement:null,_o=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",sa=G=>{let se=G.dom;se.requestFullscreen?se.requestFullscreen():se.msRequestFullscreen?se.msRequestFullscreen():se.webkitRequestFullScreen&&se.webkitRequestFullScreen()},ed=G=>{let se=G.dom;se.exitFullscreen?se.exitFullscreen():se.msExitFullscreen?se.msExitFullscreen():se.webkitCancelFullScreen&&se.webkitCancelFullScreen()},Ba=G=>G.dom===Tc(rl(G).dom),Li="data-ephox-mobile-fullscreen-style",zo="display:none!important;",Rr="position:absolute!important;",ll="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",z="background-color:rgb(255,255,255)!important;",te=Ma.os.isAndroid(),fe=G=>{let se=Bi(G,"background-color");return se!==void 0&&se!==""?"background-color:"+se+"!important":z},Be=(G,se,xe)=>{let je=Gs=>Or(Gs,"*:not(.tox-silver-sink)"),ct=Gs=>Nl=>{let ra=Cc(Nl,"style"),Ks=ra===void 0?"no-styles":ra.trim();Ks!==Gs&&(Rd(Nl,Li,Ks),js(Nl,G.parseStyle(Gs)))},Gn=Ju(se,"*"),No=wt(Gn,je),qs=fe(xe);os(No,ct(zo)),os(Gn,ct(Rr+ll+qs)),ct((te===!0?"":Rr)+ll+qs)(se)},ot=G=>{let se=Sc("["+Li+"]");os(se,xe=>{let je=Cc(xe,Li);je&&je!=="no-styles"?js(xe,G.parseStyle(je)):Dl(xe,"style"),Dl(xe,Li)})},Bt=Ql.DOM,Mn=()=>bi(window),mo=G=>window.scrollTo(G.x,G.y),yn=kc().fold(()=>({bind:Yn,unbind:Yn}),G=>{let se=L(),xe=so(),je=so(),ct=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Gn=()=>{window.requestAnimationFrame(()=>{se.on(Gs=>js(Gs,{top:G.offsetTop+"px",left:G.offsetLeft+"px",height:G.height+"px",width:G.width+"px"}))})},No=Ja(()=>{ct(),Gn()},50);return{bind:Gs=>{se.set(Gs),No.throttle(),xe.set(Md("resize",No.throttle)),je.set(Md("scroll",No.throttle))},unbind:()=>{se.on(()=>{xe.clear(),je.clear()}),se.clear()}}}),Ns=(G,se)=>{let xe=document.body,je=document.documentElement,ct=G.getContainer(),Gn=cs.fromDom(ct),No=Od(Gn).filter(En=>sl(En)&&al(En,"tox-silver-sink")),qs=Ec(G),Mo=se.get(),Gs=cs.fromDom(G.getBody()),Nl=Ma.deviceType.isTouch(),ra=ct.style,Cr=G.iframeElement?.style,cl=En=>{En(xe,"tox-fullscreen"),En(je,"tox-fullscreen"),En(ct,"tox-fullscreen"),Ca(Gn).map(ds=>Ku(ds).dom).each(ds=>{En(ds,"tox-fullscreen"),En(ds,"tox-shadowhost")})},en=()=>{Nl&&ot(G.dom),cl(Bt.removeClass),yn.unbind(),me.from(se.get()).each(En=>En.fullscreenChangeHandler.unbind())};if(Mo)Mo.fullscreenChangeHandler.unbind(),oi(G)&&Ba(qs)&&ed(rl(qs)),Cr.width=Mo.iframeWidth,Cr.height=Mo.iframeHeight,ra.width=Mo.containerWidth,ra.height=Mo.containerHeight,ra.top=Mo.containerTop,ra.left=Mo.containerLeft,it(No,Mo.sinkCssPosition,(En,ds)=>{Yu(En,"position",ds)}),en(),mo(Mo.scrollPos),se.set(null),il(G,!1),G.off("remove",en);else{let En=Na(rl(qs),_o(),Zs=>{oi(G)&&!Ba(qs)&&se.get()!==null&&Ns(G,se)}),ds={scrollPos:Mn(),containerWidth:ra.width,containerHeight:ra.height,containerTop:ra.top,containerLeft:ra.left,iframeWidth:Cr.width,iframeHeight:Cr.height,fullscreenChangeHandler:En,sinkCssPosition:No.map(Zs=>Bi(Zs,"position"))};Nl&&Be(G.dom,Gn,Gs),Cr.width=Cr.height="100%",ra.width=ra.height="",cl(Bt.addClass),No.each(Zs=>{Yu(Zs,"position","fixed")}),yn.bind(Gn),G.on("remove",en),se.set(ds),oi(G)&&sa(qs),il(G,!0)}},Go=(G,se)=>{G.addCommand("mceFullScreen",()=>{Ns(G,se)})};var ma=tinymce.util.Tools.resolve("tinymce.util.VK");let gu=(G,se)=>{G.on("init",()=>{G.on("keydown",xe=>{xe.keyCode===ma.TAB&&!(xe.metaKey||xe.ctrlKey)&&se.get()&&xe.preventDefault()})})},Ms=(G,se)=>xe=>{xe.setActive(se.get()!==null);let je=ct=>xe.setActive(ct.state);return G.on("FullscreenStateChanged",je),()=>G.off("FullscreenStateChanged",je)},Ac=(G,se)=>{let xe=()=>G.execCommand("mceFullScreen");G.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:xe,onSetup:Ms(G,se),context:"any"}),G.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:xe,onSetup:Ms(G,se),shortcut:"Meta+Shift+F",context:"any"})};var ec=()=>{vo.add("fullscreen",G=>{let se=_t(null);return G.inline||(Dr(G),Go(G,se),Ac(G,se),gu(G,se),G.addShortcut("Meta+Shift+F","","mceFullScreen")),hi(se)})};ec()})()});var az=zx(()=>{(function(){"use strict";var Oi=tinymce.util.Tools.resolve("tinymce.PluginManager");let ol=(z,te,fe)=>fe(z,te.prototype)?!0:z.constructor?.name===te.name,Di=z=>{let te=typeof z;return z===null?"null":te==="object"&&Array.isArray(z)?"array":te==="object"&&ol(z,String,(fe,Be)=>Be.isPrototypeOf(fe))?"string":te},Ka=z=>te=>Di(te)===z,vr=z=>te=>typeof te===z,Wn=z=>te=>z===te,nr=Ka("string"),Cs=Ka("object"),lr=Ka("array"),To=Wn(null),Ar=vr("boolean"),Hr=z=>z==null,Fs=z=>!Hr(z),$t=vr("function"),jt=(z,te)=>{if(lr(z)){for(let fe=0,Be=z.length;fe<Be;++fe)if(!te(z[fe]))return!1;return!0}return!1},Yn=()=>{},Ss=z=>()=>z,Qe=z=>z,pt=(z,te)=>z===te;class At{tag;value;static singletonNone=new At(!1);constructor(te,fe){this.tag=te,this.value=fe}static some(te){return new At(!0,te)}static none(){return At.singletonNone}fold(te,fe){return this.tag?fe(this.value):te()}isSome(){return this.tag}isNone(){return!this.tag}map(te){return this.tag?At.some(te(this.value)):At.none()}bind(te){return this.tag?te(this.value):At.none()}exists(te){return this.tag&&te(this.value)}forall(te){return!this.tag||te(this.value)}filter(te){return!this.tag||te(this.value)?this:At.none()}getOr(te){return this.tag?this.value:te}or(te){return this.tag?this:te}getOrThunk(te){return this.tag?this.value:te()}orThunk(te){return this.tag?this:te()}getOrDie(te){if(this.tag)return this.value;throw new Error(te??"Called getOrDie on None")}static from(te){return Fs(te)?At.some(te):At.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(te){this.tag&&te(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}let ve=Array.prototype.slice,ht=Array.prototype.indexOf,me=Array.prototype.push,ut=(z,te)=>ht.call(z,te),ns=(z,te)=>ut(z,te)>-1,os=(z,te)=>{let fe=z.length,Be=new Array(fe);for(let ot=0;ot<fe;ot++){let Bt=z[ot];Be[ot]=te(Bt,ot)}return Be},Ve=(z,te)=>{for(let fe=0,Be=z.length;fe<Be;fe++){let ot=z[fe];te(ot,fe)}},zt=(z,te,fe)=>(Ve(z,(Be,ot)=>{fe=te(fe,Be,ot)}),fe),vn=z=>{let te=[];for(let fe=0,Be=z.length;fe<Be;++fe){if(!lr(z[fe]))throw new Error("Arr.flatten item "+fe+" was not an array, input: "+z);me.apply(te,z[fe])}return te},_=(z,te)=>vn(os(z,te)),wt=(z,te)=>te>=0&&te<z.length?At.some(z[te]):At.none(),ls=z=>wt(z,0);$t(Array.from);let So=(z,te)=>{for(let fe=0;fe<z.length;fe++){let Be=te(z[fe],fe);if(Be.isSome())return Be}return At.none()},lt=Object.keys,Ln=Object.hasOwnProperty,Ho=(z,te)=>{let fe=lt(z);for(let Be=0,ot=fe.length;Be<ot;Be++){let Bt=fe[Be],Mn=z[Bt];te(Mn,Bt)}},_t=z=>(te,fe)=>{z[fe]=te},Ya=(z,te,fe,Be)=>{Ho(z,(ot,Bt)=>{(te(ot,Bt)?fe:Be)(ot,Bt)})},it=(z,te)=>{let fe={};return Ya(z,te,_t(fe),Yn),fe},Ot=(z,te)=>Ln.call(z,te),Xa=(z,te)=>Ot(z,te)&&z[te]!==void 0&&z[te]!==null,pn=z=>{let te=z;return{get:()=>te,set:ot=>{te=ot}}},so=(z,te,fe=pt)=>z.exists(Be=>fe(Be,te)),L=z=>{let te=[],fe=Be=>{te.push(Be)};for(let Be=0;Be<z.length;Be++)z[Be].each(fe);return te},kn=(z,te)=>z?At.some(te):At.none(),Ja=z=>{let te=pn(At.none()),fe=()=>te.get().each(z);return{clear:()=>{fe(),te.set(At.none())},isSet:()=>te.get().isSome(),get:()=>te.get(),set:mo=>{fe(),te.set(At.some(mo))}}},Vs=()=>{let z=Ja(Yn);return{...z,on:fe=>z.get().each(fe)}},vo=(z,te)=>z.substring(te),hi=(z,te,fe)=>te===""||z.length>=te.length&&z.substr(fe,fe+te.length)===te,In=(z,te)=>ro(z,te)?vo(z,te.length):z,ro=(z,te)=>hi(z,te,0),Kt=z=>te=>te.options.get(z),Pe=z=>{let te=z.options.register;te("link_assume_external_targets",{processor:fe=>{let Be=nr(fe)||Ar(fe);return Be?fe===!0?{value:1,valid:Be}:fe==="http"||fe==="https"?{value:fe,valid:Be}:{value:0,valid:Be}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),te("link_context_toolbar",{processor:"boolean",default:!1}),te("link_list",{processor:fe=>nr(fe)||$t(fe)||jt(fe,Cs)}),te("link_default_target",{processor:"string"}),te("link_default_protocol",{processor:"string",default:"https"}),te("link_target_list",{processor:fe=>Ar(fe)||jt(fe,Cs),default:!0}),te("link_rel_list",{processor:"object[]",default:[]}),te("link_class_list",{processor:"object[]",default:[]}),te("link_title",{processor:"boolean",default:!0}),te("allow_unsafe_link_target",{processor:"boolean",default:!1}),te("link_quicklink",{processor:"boolean",default:!1}),te("link_attributes_postprocess",{processor:"function"}),te("files_upload_handler",{processor:"function"}),te("link_uploadtab",{processor:"boolean",default:!0})},Ri=Kt("link_assume_external_targets"),cs=Kt("link_context_toolbar"),Lt=Kt("link_list"),Ge=Kt("link_default_target"),dt=Kt("link_default_protocol"),Mt=Kt("link_target_list"),rn=Kt("link_rel_list"),xn=Kt("link_class_list"),Ao=Kt("link_title"),_s=Kt("allow_unsafe_link_target"),lu=Kt("link_quicklink"),cr=Kt("link_attributes_postprocess"),Qa=Kt("files_upload_handler"),kl=Kt("link_uploadtab"),Ni=Kt("documents_file_types"),El=z=>Fs(z.options.get("files_upload_handler")),Os=z=>Fs(z.options.get("documents_file_types"));var qt=tinymce.util.Tools.resolve("tinymce.util.URI"),Sn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ds=tinymce.util.Tools.resolve("tinymce.util.Tools");let ks=z=>Fs(z)&&z.nodeName.toLowerCase()==="a",Rt=z=>ks(z)&&!!qu(z),na=(z,te)=>{if(z.collapsed)return[];{let fe=z.cloneContents(),Be=fe.firstChild,ot=new Sn(Be,fe),Bt=[],Mn=Be;do te(Mn)&&Bt.push(Mn);while(Mn=ot.next());return Bt}},zr=z=>/^\w+:/i.test(z),qu=z=>z.getAttribute("data-mce-href")??z.getAttribute("href")??"",An=(z,te)=>{let fe=["noopener"],Be=z?z.split(/\s+/):[],ot=yn=>Ds.trim(yn.sort().join(" ")),Bt=yn=>(yn=Mn(yn),yn.length>0?yn.concat(fe):fe),Mn=yn=>yn.filter(Ns=>Ds.inArray(fe,Ns)===-1),mo=te?Bt(Be):Mn(Be);return mo.length>0?ot(mo):""},$r=z=>z.replace(/\uFEFF/g,""),oa=(z,te)=>(te=te||Nn(z.selection.getRng())[0]||z.selection.getNode(),Yt(te)?At.from(z.dom.select("a[href]",te)[0]):At.from(z.dom.getParent(te,"a[href]"))),Tl=(z,te)=>oa(z,te).isSome(),Al=(z,te)=>{let fe=te.fold(()=>z.getContent({format:"text"}),Be=>Be.innerText||Be.textContent||"");return $r(fe)},Nn=z=>na(z,Rt),us=z=>Ds.grep(z,Rt),Vr=z=>us(z).length>0,eo=z=>Nn(z).length>0,_n=z=>{let te=z.schema.getTextInlineElements(),fe=Bt=>Bt.nodeType===1&&!ks(Bt)&&!Ot(te,Bt.nodeName.toLowerCase());if(oa(z).exists(Bt=>Bt.hasAttribute("data-mce-block")))return!1;let ot=z.selection.getRng();return ot.collapsed?!0:na(ot,fe).length===0},Yt=z=>Fs(z)&&z.nodeName==="FIGURE"&&/\bimage\b/i.test(z.className),ei=z=>new Promise((te,fe)=>{let Be=new FileReader;Be.onload=()=>{te(Be.result)},Be.onerror=()=>{fe(new Error(Be.error?.message??"Failed to convert blob to a data url"))},Be.readAsDataURL(z)}),we=z=>zt(["title","rel","class","target"],(fe,Be)=>(z[Be].each(ot=>{fe[Be]=ot.length>0?ot:null}),fe),{href:z.href}),mg=(z,te)=>(te==="http"||te==="https")&&!zr(z)?te+"://"+z:z,Xn=(z,te)=>{let fe={...te};if(rn(z).length===0&&!_s(z)){let Be=An(fe.rel,fe.target==="_blank");fe.rel=Be||null}return At.from(fe.target).isNone()&&Mt(z)===!1&&(fe.target=Ge(z)),fe.href=mg(fe.href,Ri(z)),fe},Us=(z,te,fe,Be)=>{fe.each(Bt=>{Ot(te,"innerText")?te.innerText=Bt:te.textContent=Bt}),z.dom.setAttribs(te,Be);let ot=z.dom.createRng();ot.setStartAfter(te),ot.setEndAfter(te),z.selection.setRng(ot)},Da=(z,te,fe,Be)=>{let ot=z.dom;Yt(te)?cu(ot,te,Be):fe.fold(()=>{z.execCommand("mceInsertLink",!1,Be);let Bt=z.selection.getEnd(),Mn=ot.createRng();Mn.setStartAfter(Bt),Mn.setEndAfter(Bt),z.selection.setRng(Mn)},Bt=>{z.insertContent(ot.createHTML("a",Be,ot.encode(Bt)))})},Mi=(z,te,fe)=>{let Be=z.selection.getNode(),ot=oa(z,Be),Bt=Xn(z,we(fe)),Mn=cr(z);Fs(Mn)&&Mn(Bt),z.undoManager.transact(()=>{fe.href===te.href&&te.attach(),ot.fold(()=>{Da(z,Be,fe.text,Bt)},mo=>{z.focus(),Us(z,mo,fe.text,Bt)})})},Ra=z=>{let te=z.dom,fe=z.selection,Be=fe.getBookmark(),ot=fe.getRng().cloneRange(),Bt=te.getParent(ot.startContainer,"a[href]",z.getBody()),Mn=te.getParent(ot.endContainer,"a[href]",z.getBody());Bt&&ot.setStartBefore(Bt),Mn&&ot.setEndAfter(Mn),fe.setRng(ot),z.execCommand("unlink"),fe.moveToBookmark(Be)},or=z=>{z.undoManager.transact(()=>{let te=z.selection.getNode();Yt(te)?to(z,te):Ra(z),z.focus()})},Rs=z=>{let{class:te,href:fe,rel:Be,target:ot,text:Bt,title:Mn}=z;return it({class:te.getOrNull(),href:fe,rel:Be.getOrNull(),target:ot.getOrNull(),text:Bt.getOrNull(),title:Mn.getOrNull()},(mo,yn)=>To(mo)===!1)},gm=(z,te)=>{let fe=z.options.get,Be={allow_html_data_urls:fe("allow_html_data_urls"),allow_script_urls:fe("allow_script_urls"),allow_svg_data_urls:fe("allow_svg_data_urls")},ot=te.href;return{...te,href:qt.isDomSafe(ot,"a",Be)?ot:""}},_l=(z,te,fe)=>{let Be=gm(z,fe);z.hasPlugin("rtc",!0)?z.execCommand("createlink",!1,Rs(Be)):Mi(z,te,Be)},ur=z=>{z.hasPlugin("rtc",!0)?z.execCommand("unlink"):or(z)},to=(z,te)=>{let fe=z.dom.select("img",te)[0];if(fe){let Be=z.dom.getParents(fe,"a[href]",te)[0];Be&&(Be.parentNode?.insertBefore(fe,Be),z.dom.remove(Be))}},cu=(z,te,fe)=>{let Be=z.select("img",te)[0];if(Be){let ot=z.create("a",fe);Be.parentNode?.insertBefore(ot,Be),ot.appendChild(Be)}},yo=z=>nr(z.value)?z.value:"",_r=z=>nr(z.text)?z.text:nr(z.title)?z.title:"",uu=(z,te)=>{let fe=[];return Ds.each(z,Be=>{let ot=_r(Be);if(Be.menu!==void 0){let Bt=uu(Be.menu,te);fe.push({text:ot,items:Bt})}else{let Bt=te(Be);fe.push({text:ot,value:Bt})}}),fe},bc=(z=yo)=>te=>At.from(te).map(fe=>uu(fe,z)),Ur={sanitize:z=>bc(yo)(z),sanitizeWith:bc,createUi:(z,te)=>fe=>({name:z,type:"listbox",label:te,items:fe}),getValue:yo},sl=z=>Xa(z,"items"),dr=(z,te)=>So(te,fe=>sl(fe)?dr(z,fe.items):kn(fe.value===z,fe)),Ol=(z,te,fe,Be)=>{let ot=Be[te],Bt=z.length>0;return ot!==void 0?dr(ot,fe).map(Mn=>({url:{value:Mn.value,meta:{text:Bt?z:Mn.text,attach:Yn}},text:Bt?z:Mn.text})):At.none()},sr=(z,te)=>te==="link"?z.link:te==="anchor"?z.anchor:At.none(),fm={init:(z,te)=>{let fe={text:z.text,title:z.title},Be=yn=>kn(fe.title.length<=0,At.from(yn.meta?.title).getOr("")),ot=yn=>kn(fe.text.length<=0,At.from(yn.meta?.text).getOr(yn.value)),Bt=yn=>{let Ns=ot(yn.url),Go=Be(yn.url);return Ns.isSome()||Go.isSome()?At.some({...Ns.map(ma=>({text:ma})).getOr({}),...Go.map(ma=>({title:ma})).getOr({})}):At.none()},Mn=(yn,Ns)=>{let Go=sr(te,Ns).getOr([]);return Ol(fe.text,Ns,Go,yn)};return{onChange:(yn,Ns)=>{let Go=Ns.name;return Go==="url"?Bt(yn()):ns(["anchor","link"],Go)?Mn(yn(),Go):((Go==="text"||Go==="title")&&(fe[Go]=yn()[Go]),At.none())}}},getDelta:Ol};var bt=tinymce.util.Tools.resolve("tinymce.util.Delay");let pm=(z,te,fe)=>{let Be=z.selection.getRng();bt.setEditorTimeout(z,()=>{z.windowManager.confirm(te,ot=>{z.selection.setRng(Be),fe(ot)})})},Od=z=>{let te=z.href;return te.indexOf("@")>0&&te.indexOf("/")===-1&&te.indexOf("mailto:")===-1?At.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Be=>({...Be,href:"mailto:"+te})}):At.none()},du=(z,te)=>fe=>{let Be=fe.href;return z===1&&!zr(Be)||z===0&&/^\s*www(\.|\d\.)/i.test(Be)?At.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${te}:// prefix?`,preprocess:Bt=>({...Bt,href:te+"://"+Be})}):At.none()},gg={preprocess:(z,te)=>So([Od,du(Ri(z),dt(z))],fe=>fe(te)).fold(()=>Promise.resolve(te),fe=>new Promise(Be=>{pm(z,fe.message,ot=>{Be(ot?fe.preprocess(te):te)})}))},Ku={getAnchors:z=>{let te=z.dom.select("a:not([href])"),fe=_(te,Be=>{let ot=Be.name||Be.id;return ot?[{text:ot,value:"#"+ot}]:[]});return fe.length>0?At.some([{text:"None",value:""}].concat(fe)):At.none()}},Dd={getClasses:z=>{let te=xn(z);return te.length>0?Ur.sanitize(te):At.none()}},mr=z=>{try{return At.some(JSON.parse(z))}catch{return At.none()}},vc={getLinks:z=>{let te=Be=>z.convertURL(Be.value||Be.url||"","href"),fe=Lt(z);return new Promise(Be=>{nr(fe)?fetch(fe).then(ot=>ot.ok?ot.text().then(mr):Promise.reject()).then(Be,()=>Be(At.none())):$t(fe)?fe(ot=>Be(At.some(ot))):Be(At.from(fe))}).then(Be=>Be.bind(Ur.sanitizeWith(te)).map(ot=>ot.length>0?[{text:"None",value:""}].concat(ot):ot))}},wa={getRels:(z,te)=>{let fe=rn(z);if(fe.length>0){let Be=so(te,"_blank"),ot=_s(z)===!1,Bt=mo=>An(Ur.getValue(mo),Be);return(ot?Ur.sanitizeWith(Bt):Ur.sanitize)(fe)}return At.none()}},Jl=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Na={getTargets:z=>{let te=Mt(z);return lr(te)?Ur.sanitize(te).orThunk(()=>At.some(Jl)):te===!1?At.none():At.some(Jl)}},xa=(z,te,fe)=>{let Be=z.getAttrib(te,fe);return Be!==null&&Be.length>0?At.some(Be):At.none()},Rd=(z,te)=>{let fe=z.dom,ot=_n(z)?At.some(Al(z.selection,te)):At.none(),Bt=te.bind(Go=>At.from(fe.getAttrib(Go,"href"))),Mn=te.bind(Go=>At.from(fe.getAttrib(Go,"target"))),mo=te.bind(Go=>xa(fe,Go,"rel")),yn=te.bind(Go=>xa(fe,Go,"class")),Ns=te.bind(Go=>xa(fe,Go,"title"));return{url:Bt,text:ot,title:Ns,target:Mn,rel:mo,linkClass:yn}},Dl={collect:(z,te)=>vc.getLinks(z).then(fe=>{let Be=El(z)&&Os(z)&&kl(z),ot=Rd(z,te);return{anchor:ot,catalogs:{targets:Na.getTargets(z),rels:wa.getRels(z,ot.target),classes:Dd.getClasses(z),anchor:Ku.getAnchors(z),link:fe},hasUploadPanel:Be,optNode:te,flags:{titleEnabled:Ao(z)}}})},ni={makeTab:z=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput",buttonLabel:"Browse for a file",dropAreaLabel:"Drop a file here",allowedFileTypes:z.map(fe=>fe.mimeType).join(","),allowedFileExtensions:vn(z.map(fe=>fe.extensions))}]})},Rl=(z,te)=>fe=>{let Be=fe.getData();if(!Be.url.value){ur(z),fe.close();return}let ot=mo=>At.from(Be[mo]).filter(yn=>!so(te.anchor[mo],yn)),Bt={href:Be.url.value,text:ot("text"),target:ot("target"),rel:ot("rel"),class:ot("linkClass"),title:ot("title")},Mn={href:Be.url.value,attach:Be.url.meta!==void 0&&Be.url.meta.attach?Be.url.meta.attach:Yn};gg.preprocess(z,Bt).then(mo=>{_l(z,Mn,mo)}),fe.close()},ws=z=>(te,fe)=>Qa(z)(te,fe),Yu=z=>At.from(z.split(",")[1]).getOr(""),js=(z,te)=>{let fe=te.getData();te.block("Uploading file"),ls(fe.fileinput).fold(()=>{te.unblock()},Be=>{let ot=URL.createObjectURL(Be),Bt=({url:mo,fileName:yn})=>{te.setData({text:yn,title:yn,url:{value:mo,meta:{}}}),te.showTab("general"),te.focus("url")},Mn=()=>{te.unblock(),URL.revokeObjectURL(ot)};ei(Be).then(mo=>{let yn=z.getExistingBlobInfo(Yu(mo),Be.type),Ns=yn&&yn.filename()===Be.name?yn:z.createBlobCache(Be,ot,mo);return z.addToBlobCache(Ns),z.uploadFile(Ns,Qe)}).then(mo=>{Bt(mo),Mn()}).catch(mo=>{Mn(),z.alertErr(mo,()=>{te.focus("fileinput")})})})},Bi=z=>(te,fe,Be)=>z.editorUpload.blobCache.create({blob:te,blobUri:fe,name:te.name?.replace(/\.[^\.]+$/,""),filename:te.name,base64:Be.split(",")[1]}),pg=z=>te=>{z.editorUpload.blobCache.add(te)},Nd=z=>(te,fe)=>z.editorUpload.blobCache.getByData(te,fe),yr=z=>(te,fe)=>{z.windowManager.alert(te,fe)},Xu=z=>{let te=oa(z);return Dl.collect(z,te)},wc=(z,te)=>{let fe=z.anchor,Be=fe.url.getOr("");return{url:{value:Be,meta:{original:{value:Be}}},text:fe.text.getOr(""),title:fe.title.getOr(""),anchor:Be,link:Be,rel:fe.rel.getOr(""),target:fe.target.or(te).getOr(""),linkClass:fe.linkClass.getOr(""),fileinput:[]}},al=(z,te,fe,Be,ot,Bt)=>{let Mn=vn([z,te,fe,L([Be.anchor.map(Ur.createUi("anchor","Anchors")),Be.rels.map(Ur.createUi("rel","Rel")),Be.targets.map(Ur.createUi("target","Open link in...")),Be.link.map(Ur.createUi("link","Link list")),Be.classes.map(Ur.createUi("linkClass","Class"))])]);return ot?{type:"tabpanel",tabs:vn([[{title:"General",name:"general",items:Mn}],[ni.makeTab(Bt)]])}:{type:"panel",items:Mn}},xc=(z,te,fe)=>{let Be=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],ot=z.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Bt=z.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Mn=At.from(Ge(fe)),mo=wc(z,Mn),yn=z.catalogs,Ns=fm.init(mo,yn),Go=al(Be,ot,Bt,yn,z.hasUploadPanel,Ni(fe)),ma={addToBlobCache:pg(fe),createBlobCache:Bi(fe),alertErr:yr(fe),uploadFile:ws(fe),getExistingBlobInfo:Nd(fe)};return{title:"Insert/Edit Link",size:"normal",body:Go,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:mo,onChange:(gu,{name:Ms})=>{Ms==="fileinput"?js(ma,gu):Ns.onChange(gu.getData,{name:Ms}).each(Ac=>{gu.setData(Ac)})},onSubmit:te}},hg=z=>{Xu(z).then(fe=>{let Be=Rl(z,fe);return xc(fe,Be,z)}).then(fe=>{z.windowManager.open(fe)})},Sc=z=>{z.addCommand("mceLink",(te,fe)=>{fe?.dialog===!0||!lu(z)?hg(z):z.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},Ju=z=>{z.addShortcut("Meta+K","",()=>{z.execCommand("mceLink")})};var Or=tinymce.util.Tools.resolve("tinymce.util.VK");let kc=(z,te)=>{document.body.appendChild(z),z.dispatchEvent(te),document.body.removeChild(z)},Qu=z=>{let te=document.createElement("a");te.target="_blank",te.href=z,te.rel="noreferrer noopener";let fe=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(fe),kc(te,fe)},bi=z=>z.altKey===!0&&z.shiftKey===!1&&z.ctrlKey===!1&&z.metaKey===!1,Md=(z,te)=>{if(te){let fe=qu(te);if(/^#/.test(fe)){let Be=z.dom.select(`${fe},[name="${In(fe,"#")}"]`);Be.length&&z.selection.scrollIntoView(Be[0],!0)}else Qu(te.href)}},Ql=z=>{let te=z.selection.getRng(),fe=te.startContainer;return Rt(fe)&&te.startContainer===te.endContainer&&z.dom.select("img",fe).length===1},Ma=(z,te)=>{let fe=us(z.dom.getParents(te));return kn(fe.length===1,fe[0])},il=z=>{let te=Nn(z.selection.getRng());return kn(te.length>0,te[0]).or(Ma(z,z.selection.getNode()))},Pi=z=>z.selection.isCollapsed()||Ql(z)?Ma(z,z.selection.getStart()):il(z),Dr=z=>{let te=Vs(),fe=()=>te.get().or(Pi(z)),Be=()=>fe().each(ot=>Md(z,ot));return z.on("contextmenu",ot=>{Ma(z,ot.target).each(te.set)}),z.on("SelectionChange",()=>{te.isSet()||Pi(z).each(te.set)}),z.on("click",ot=>{te.clear();let Bt=us(z.dom.getParents(ot.target));Bt.length===1&&Or.metaKeyPressed(ot)&&(ot.preventDefault(),Md(z,Bt[0]))}),z.on("keydown",ot=>{te.clear(),!ot.isDefaultPrevented()&&ot.keyCode===13&&bi(ot)&&fe().each(Bt=>{ot.preventDefault(),Md(z,Bt)})}),{gotoSelectedLink:Be}},oi=z=>()=>{z.execCommand("mceLink",!1,{dialog:!0})},Ec=(z,te)=>(z.on("NodeChange",te),()=>z.off("NodeChange",te)),Tc=z=>te=>{let fe=()=>{te.setActive(!z.mode.isReadOnly()&&Tl(z,z.selection.getNode())),te.setEnabled(z.selection.isEditable())};return fe(),Ec(z,fe)},_o=z=>te=>{let fe=()=>{te.setEnabled(z.selection.isEditable())};return fe(),Ec(z,fe)},sa=z=>te=>{let fe=Bt=>Vr(Bt)||eo(z.selection.getRng()),Be=z.dom.getParents(z.selection.getStart()),ot=Bt=>{te.setEnabled(fe(Bt)&&z.selection.isEditable())};return ot(Be),Ec(z,Bt=>ot(Bt.parents))},ed=(z,te)=>{z.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:oi(z),onSetup:Tc(z)}),z.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:te.gotoSelectedLink,onSetup:sa(z)}),z.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>ur(z),onSetup:sa(z)})},Ba=(z,te)=>{z.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:te.gotoSelectedLink,onSetup:sa(z)}),z.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:oi(z),onSetup:_o(z)}),z.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>ur(z),onSetup:sa(z)})},Li=z=>{let te="link unlink openlink",fe="link";z.ui.registry.addContextMenu("link",{update:Be=>z.dom.isEditable(Be)?Vr(z.dom.getParents(Be,"a"))?te:fe:""})},zo=(z,te)=>{let fe=Bt=>{Bt.selection.collapse(!1)},Be=Bt=>{let Mn=z.selection.getNode();return Bt.setEnabled(Tl(z,Mn)&&z.selection.isEditable()),Yn},ot=Bt=>{let Mn=oa(z),mo=_n(z);if(Mn.isNone()&&mo){let yn=Al(z.selection,Mn);return kn(yn.length===0,Bt)}else return At.none()};z.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Tc(z)},label:"Link",predicate:Bt=>cs(z)&&Tl(z,Bt),initValue:()=>oa(z).fold(Ss(""),qu),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Bt=>{let Mn=z.selection.getNode();return Bt.setActive(Tl(z,Mn)),Tc(z)(Bt)},onAction:Bt=>{let Mn=Bt.getValue(),mo=ot(Mn);_l(z,{href:Mn,attach:Yn},{href:Mn,text:mo,title:At.none(),rel:At.none(),target:At.from(Ge(z)),class:At.none()}),fe(z),Bt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Be,onAction:Bt=>{ur(z),Bt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Be,onAction:Bt=>{te.gotoSelectedLink(),Bt.hide()}}]})},Rr=z=>{let te=Dr(z);ed(z,te),Ba(z,te),Li(z),zo(z,te)};var ll=()=>{Oi.add("link",z=>{Pe(z),Sc(z),Rr(z),Ju(z)})};ll()})()});var iz=zx(()=>{(function(){"use strict";var Oi=tinymce.util.Tools.resolve("tinymce.PluginManager");let ol=Ge=>({backspaceDelete:dt=>{Ge.execCommand("mceListBackspaceDelete",!1,dt)}}),Di=Ge=>dt=>typeof dt===Ge,Ka=Ge=>Ge==null,vr=Ge=>!Ka(Ge),Wn=Di("function"),nr=Ge=>()=>Ge,Cs=(Ge,dt)=>Ge===dt,lr=nr(!1);class To{tag;value;static singletonNone=new To(!1);constructor(dt,Mt){this.tag=dt,this.value=Mt}static some(dt){return new To(!0,dt)}static none(){return To.singletonNone}fold(dt,Mt){return this.tag?Mt(this.value):dt()}isSome(){return this.tag}isNone(){return!this.tag}map(dt){return this.tag?To.some(dt(this.value)):To.none()}bind(dt){return this.tag?dt(this.value):To.none()}exists(dt){return this.tag&&dt(this.value)}forall(dt){return!this.tag||dt(this.value)}filter(dt){return!this.tag||dt(this.value)?this:To.none()}getOr(dt){return this.tag?this.value:dt}or(dt){return this.tag?this:dt}getOrThunk(dt){return this.tag?this.value:dt()}orThunk(dt){return this.tag?this:dt()}getOrDie(dt){if(this.tag)return this.value;throw new Error(dt??"Called getOrDie on None")}static from(dt){return vr(dt)?To.some(dt):To.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(dt){this.tag&&dt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}let Ar=Array.prototype.slice,Hr=(Ge,dt)=>{for(let Mt=0,rn=Ge.length;Mt<rn;Mt++){let xn=Ge[Mt];if(dt(xn,Mt))return!0}return!1},Fs=(Ge,dt)=>{let Mt=Ge.length,rn=new Array(Mt);for(let xn=0;xn<Mt;xn++){let Ao=Ge[xn];rn[xn]=dt(Ao,xn)}return rn},$t=(Ge,dt)=>{for(let Mt=0,rn=Ge.length;Mt<rn;Mt++){let xn=Ge[Mt];dt(xn,Mt)}},jt=(Ge,dt,Mt)=>($t(Ge,(rn,xn)=>{Mt=dt(Mt,rn,xn)}),Mt),Yn=(Ge,dt,Mt)=>{for(let rn=0,xn=Ge.length;rn<xn;rn++){let Ao=Ge[rn];if(dt(Ao,rn))return To.some(Ao);if(Mt(Ao,rn))break}return To.none()},Ss=(Ge,dt)=>Yn(Ge,dt,lr),Qe=Ge=>{let dt=Ar.call(Ge,0);return dt.reverse(),dt};Wn(Array.from);let pt=(Ge,dt,Mt=Cs)=>Ge.exists(rn=>Mt(rn,dt)),ve=(Ge=>dt=>dt.replace(Ge,""))(/^\s+|\s+$/g),ht=Ge=>Ge.length>0,me=Ge=>!ht(Ge),ut=Ge=>{let dt=Qe(ve(Ge).split("")),Mt=Fs(dt,(rn,xn)=>{let Ao=rn.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,xn)*Ao});return jt(Mt,(rn,xn)=>rn+xn,0)},ns=Ge=>{if(Ge--,Ge<0)return"";{let dt=Ge%26,Mt=Math.floor(Ge/26),rn=ns(Mt),xn=String.fromCharCode(65+dt);return rn+xn}},os=Ge=>/^[A-Z]+$/.test(Ge),Ve=Ge=>/^[a-z]+$/.test(Ge),zt=Ge=>/^[0-9]+$/.test(Ge),vn=Ge=>zt(Ge)?2:os(Ge)?0:Ve(Ge)?1:me(Ge)?3:4,_=Ge=>{switch(vn(Ge)){case 2:return To.some({listStyleType:To.none(),start:Ge});case 0:return To.some({listStyleType:To.some("upper-alpha"),start:ut(Ge).toString()});case 1:return To.some({listStyleType:To.some("lower-alpha"),start:ut(Ge).toString()});case 3:return To.some({listStyleType:To.none(),start:""});case 4:return To.none()}},wt=Ge=>{let dt=parseInt(Ge.start,10);return pt(Ge.listStyleType,"upper-alpha")?ns(dt):pt(Ge.listStyleType,"lower-alpha")?ns(dt).toLowerCase():Ge.start},So=(Ge=>dt=>dt.options.get(Ge))("forced_root_block"),lt=Ge=>/\btox\-/.test(Ge.className),Ln=Ge=>dt=>vr(dt)&&Ge.test(dt.nodeName),Ho=Ge=>dt=>vr(dt)&&dt.nodeName.toLowerCase()===Ge,_t=Ln(/^(OL|UL|DL)$/),Ya=Ln(/^(TH|TD)$/),it=Ln(/^(LI|DT|DD)$/),Ot=(Ge,dt)=>Yn(Ge,_t,Ya).exists(Mt=>Mt.nodeName===dt&&!lt(Mt)),Xa=(Ge,dt)=>{let Mt=Ge.selection.getNode();return dt({parents:Ge.dom.getParents(Mt),element:Mt}),Ge.on("NodeChange",dt),()=>Ge.off("NodeChange",dt)},pn=(Ge,dt)=>dt!==null&&!Ge.dom.isEditable(dt),so=(Ge,dt)=>{let Mt=Ge.dom.getParent(dt,"ol,ul,dl");return pn(Ge,Mt)||!Ge.selection.isEditable()},L=Ho("ol"),kn=["OL","UL","DL"],Ja=kn.join(","),Vs=(Ge,dt)=>{let Mt=dt||Ge.selection.getStart(!0);return Ge.dom.getParent(Mt,Ja,vo(Ge,Mt))},vo=(Ge,dt)=>{let Mt=Ge.dom.getParents(dt,Ge.dom.isBlock),rn=Ao=>Ao.nodeName.toLowerCase()!==So(Ge);return Ss(Mt,Ao=>rn(Ao)&&hi(Ge.schema,Ao)).getOr(Ge.getBody())},hi=(Ge,dt)=>!_t(dt)&&!it(dt)&&Hr(kn,Mt=>Ge.isValidChild(dt.nodeName,Mt)),In=Ge=>{let dt=Vs(Ge);!L(dt)||so(Ge,dt)||Ge.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:wt({start:Ge.dom.getAttrib(dt,"start","1"),listStyleType:To.from(Ge.dom.getStyle(dt,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Mt=>{let rn=Mt.getData();_(rn.start).each(xn=>{Ge.execCommand("mceListUpdate",!1,{attrs:{start:xn.start==="1"?"":xn.start},styles:{"list-style-type":xn.listStyleType.getOr("")}})}),Mt.close()}})},ro=Ge=>{Ge.addCommand("mceListProps",()=>{In(Ge)})},Kt=(Ge,dt)=>Mt=>{let rn=xn=>{Mt.setActive(Ot(xn.parents,dt)),Mt.setEnabled(!so(Ge,xn.element)&&Ge.selection.isEditable())};return Mt.setEnabled(Ge.selection.isEditable()),Xa(Ge,rn)},Pe=Ge=>{let dt=Mt=>()=>Ge.execCommand(Mt);Ge.hasPlugin("advlist")||(Ge.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:dt("InsertOrderedList"),onSetup:Kt(Ge,"OL")}),Ge.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:dt("InsertUnorderedList"),onSetup:Kt(Ge,"UL")}))},Ri=(Ge,dt)=>Mt=>Xa(Ge,xn=>Mt.setEnabled(Ot(xn.parents,dt)&&!so(Ge,xn.element))),cs=Ge=>{let dt={text:"List properties...",icon:"ordered-list",onAction:()=>Ge.execCommand("mceListProps"),onSetup:Ri(Ge,"OL")};Ge.ui.registry.addMenuItem("listprops",dt),Ge.ui.registry.addContextMenu("lists",{update:Mt=>{let rn=Vs(Ge,Mt);return L(rn)?["listprops"]:[]}})};var Lt=()=>{Oi.add("lists",Ge=>(ro(Ge),Pe(Ge),cs(Ge),ol(Ge)))};Lt()})()});var lz=zx(()=>{(function(){"use strict";var Oi=tinymce.util.Tools.resolve("tinymce.PluginManager");let ol=(w,T,H)=>H(w,T.prototype)?!0:w.constructor?.name===T.name,Di=w=>{let T=typeof w;return w===null?"null":T==="object"&&Array.isArray(w)?"array":T==="object"&&ol(w,String,(H,j)=>j.isPrototypeOf(H))?"string":T},Ka=w=>T=>Di(T)===w,vr=w=>T=>typeof T===w,Wn=w=>T=>w===T,nr=Ka("string"),Cs=Ka("array"),lr=vr("boolean"),To=Wn(void 0),Ar=w=>w==null,Hr=w=>!Ar(w),Fs=vr("function"),$t=vr("number"),jt=()=>{},Yn=(w,T)=>H=>w(T(H)),Ss=w=>()=>w,Qe=w=>w,pt=(w,T)=>w===T;function At(w,...T){return(...H)=>{let j=T.concat(H);return w.apply(null,j)}}let ve=w=>{w()},ht=Ss(!1),me=Ss(!0);class ut{tag;value;static singletonNone=new ut(!1);constructor(T,H){this.tag=T,this.value=H}static some(T){return new ut(!0,T)}static none(){return ut.singletonNone}fold(T,H){return this.tag?H(this.value):T()}isSome(){return this.tag}isNone(){return!this.tag}map(T){return this.tag?ut.some(T(this.value)):ut.none()}bind(T){return this.tag?T(this.value):ut.none()}exists(T){return this.tag&&T(this.value)}forall(T){return!this.tag||T(this.value)}filter(T){return!this.tag||T(this.value)?this:ut.none()}getOr(T){return this.tag?this.value:T}or(T){return this.tag?this:T}getOrThunk(T){return this.tag?this.value:T()}orThunk(T){return this.tag?this:T()}getOrDie(T){if(this.tag)return this.value;throw new Error(T??"Called getOrDie on None")}static from(T){return Hr(T)?ut.some(T):ut.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(T){this.tag&&T(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}let ns=Array.prototype.slice,os=Array.prototype.indexOf,Ve=Array.prototype.push,zt=(w,T)=>os.call(w,T),vn=(w,T)=>zt(w,T)>-1,_=(w,T)=>{for(let H=0,j=w.length;H<j;H++){let ie=w[H];if(T(ie,H))return!0}return!1},wt=(w,T)=>{let H=[];for(let j=0;j<w;j++)H.push(T(j));return H},ls=(w,T)=>{let H=w.length,j=new Array(H);for(let ie=0;ie<H;ie++){let Oe=w[ie];j[ie]=T(Oe,ie)}return j},So=(w,T)=>{for(let H=0,j=w.length;H<j;H++){let ie=w[H];T(ie,H)}},lt=(w,T)=>{for(let H=w.length-1;H>=0;H--){let j=w[H];T(j,H)}},Ln=(w,T)=>{let H=[],j=[];for(let ie=0,Oe=w.length;ie<Oe;ie++){let Je=w[ie];(T(Je,ie)?H:j).push(Je)}return{pass:H,fail:j}},Ho=(w,T)=>{let H=[];for(let j=0,ie=w.length;j<ie;j++){let Oe=w[j];T(Oe,j)&&H.push(Oe)}return H},_t=(w,T,H)=>(lt(w,(j,ie)=>{H=T(H,j,ie)}),H),Ya=(w,T,H)=>(So(w,(j,ie)=>{H=T(H,j,ie)}),H),it=(w,T,H)=>{for(let j=0,ie=w.length;j<ie;j++){let Oe=w[j];if(T(Oe,j))return ut.some(Oe);if(H(Oe,j))break}return ut.none()},Ot=(w,T)=>it(w,T,ht),Xa=(w,T)=>{for(let H=0,j=w.length;H<j;H++){let ie=w[H];if(T(ie,H))return ut.some(H)}return ut.none()},pn=w=>{let T=[];for(let H=0,j=w.length;H<j;++H){if(!Cs(w[H]))throw new Error("Arr.flatten item "+H+" was not an array, input: "+w);Ve.apply(T,w[H])}return T},so=(w,T)=>pn(ls(w,T)),L=(w,T)=>{for(let H=0,j=w.length;H<j;++H){let ie=w[H];if(T(ie,H)!==!0)return!1}return!0},kn=(w,T)=>{let H={};for(let j=0,ie=w.length;j<ie;j++){let Oe=w[j];H[String(Oe)]=T(Oe,j)}return H},Ja=(w,T)=>T>=0&&T<w.length?ut.some(w[T]):ut.none(),Vs=w=>Ja(w,0),vo=w=>Ja(w,w.length-1);Fs(Array.from);let hi=(w,T)=>{for(let H=0;H<w.length;H++){let j=T(w[H],H);if(j.isSome())return j}return ut.none()},In=Object.keys,ro=Object.hasOwnProperty,Kt=(w,T)=>{let H=In(w);for(let j=0,ie=H.length;j<ie;j++){let Oe=H[j],Je=w[Oe];T(Je,Oe)}},Pe=w=>(T,H)=>{w[H]=T},Ri=(w,T,H,j)=>{Kt(w,(ie,Oe)=>{(T(ie,Oe)?H:j)(ie,Oe)})},cs=(w,T)=>{let H={};return Ri(w,T,Pe(H),jt),H},Lt=(w,T)=>{let H=[];return Kt(w,(j,ie)=>{H.push(T(j,ie))}),H},Ge=w=>Lt(w,Qe),dt=w=>In(w).length,Mt=(w,T)=>rn(w,T)?ut.from(w[T]):ut.none(),rn=(w,T)=>ro.call(w,T),xn=(w,T)=>rn(w,T)&&w[T]!==void 0&&w[T]!==null,Ao=w=>{for(let T in w)if(ro.call(w,T))return!1;return!0},_s=w=>{let T=w;return{get:()=>T,set:ie=>{T=ie}}},lu=(w,T,H=pt)=>w.exists(j=>H(j,T)),cr=w=>{let T=[],H=j=>{T.push(j)};for(let j=0;j<w.length;j++)w[j].each(H);return T},Qa=(w,T,H)=>w.isSome()&&T.isSome()?ut.some(H(w.getOrDie(),T.getOrDie())):ut.none(),kl=w=>w.bind(Qe),Ni=(w,T)=>w?ut.some(T):ut.none(),El=w=>{let T=_s(ut.none()),H=()=>T.get().each(w);return{clear:()=>{H(),T.set(ut.none())},isSet:()=>T.get().isSome(),get:()=>T.get(),set:Xe=>{H(),T.set(ut.some(Xe))}}},Os=()=>El(w=>w.unbind()),qt=(w,T)=>w.substring(T),Sn=(w,T,H)=>T===""||w.length>=T.length&&w.substr(H,H+T.length)===T,Ds=(w,T)=>ks(w,T)?qt(w,T.length):w,ks=(w,T)=>Sn(w,T,0),na=(w=>T=>T.replace(w,""))(/^\s+|\s+$/g),zr=w=>w.length>0,qu=w=>!zr(w),An=(w,T=10)=>{let H=parseInt(w,T);return isNaN(H)?ut.none():ut.some(H)},$r=w=>{let T=parseFloat(w);return isNaN(T)?ut.none():ut.some(T)},oa=w=>{let T=!1,H;return(...j)=>(T||(T=!0,H=w.apply(null,j)),H)},Tl=(w,T)=>{let j=(T||document).createElement("div");if(j.innerHTML=w,!j.hasChildNodes()||j.childNodes.length>1){let ie="HTML does not have a single root node";throw console.error(ie,w),new Error(ie)}return us(j.childNodes[0])},Al=(w,T)=>{let j=(T||document).createElement(w);return us(j)},Nn=(w,T)=>{let j=(T||document).createTextNode(w);return us(j)},us=w=>{if(w==null)throw new Error("Node cannot be null or undefined");return{dom:w}},eo={fromHtml:Tl,fromTag:Al,fromText:Nn,fromDom:us,fromPoint:(w,T,H)=>ut.from(w.dom.elementFromPoint(T,H)).map(us)},_n=8,Yt=9,ei=11,we=1,mg=3,Xn=(w,T)=>{let H=w.dom;if(H.nodeType!==we)return!1;{let j=H;if(j.matches!==void 0)return j.matches(T);if(j.msMatchesSelector!==void 0)return j.msMatchesSelector(T);if(j.webkitMatchesSelector!==void 0)return j.webkitMatchesSelector(T);if(j.mozMatchesSelector!==void 0)return j.mozMatchesSelector(T);throw new Error("Browser lacks native selectors")}},Us=w=>w.nodeType!==we&&w.nodeType!==Yt&&w.nodeType!==ei||w.childElementCount===0,Da=(w,T)=>{let H=T===void 0?document:T.dom;return Us(H)?[]:ls(H.querySelectorAll(w),eo.fromDom)},Mi=(w,T)=>{let H=T===void 0?document:T.dom;return Us(H)?ut.none():ut.from(H.querySelector(w)).map(eo.fromDom)},Ra=(w,T)=>w.dom===T.dom,or=Xn,Rs=w=>w.dom.nodeName.toLowerCase(),gm=w=>w.dom.nodeType,_l=w=>T=>gm(T)===w,ur=w=>gm(w)===_n||Rs(w)==="#comment",to=_l(we),cu=_l(mg),yo=_l(Yt),_r=_l(ei),uu=w=>T=>to(T)&&Rs(T)===w,bc=w=>eo.fromDom(w.dom.ownerDocument),Gu=w=>yo(w)?w:bc(w),ti=w=>ut.from(w.dom.parentNode).map(eo.fromDom),Ur=(w,T)=>{let H=Fs(T)?T:ht,j=w.dom,ie=[];for(;j.parentNode!==null&&j.parentNode!==void 0;){let Oe=j.parentNode,Je=eo.fromDom(Oe);if(ie.push(Je),H(Je)===!0)break;j=Oe}return ie},sl=w=>ut.from(w.dom.previousSibling).map(eo.fromDom),dr=w=>ut.from(w.dom.nextSibling).map(eo.fromDom),Ol=w=>ls(w.dom.childNodes,eo.fromDom),sr=(w,T)=>{let H=w.dom.childNodes;return ut.from(H[T]).map(eo.fromDom)},rl=w=>sr(w,0),fm=w=>_r(w)&&Hr(w.dom.host),bt=w=>eo.fromDom(w.dom.getRootNode()),pm=w=>{let T=bt(w);return fm(T)?ut.some(T):ut.none()},Od=w=>eo.fromDom(w.dom.host),du=(w,T)=>{ti(w).each(j=>{j.dom.insertBefore(T.dom,w.dom)})},mu=(w,T)=>{dr(w).fold(()=>{ti(w).each(ie=>{Ca(ie,T)})},j=>{du(j,T)})},gg=(w,T)=>{rl(w).fold(()=>{Ca(w,T)},j=>{w.dom.insertBefore(T.dom,j.dom)})},Ca=(w,T)=>{w.dom.appendChild(T.dom)},Ku=(w,T)=>{du(w,T),Ca(T,w)},Xl=(w,T)=>{So(T,(H,j)=>{let ie=j===0?w:T[j-1];mu(ie,H)})},Dd=(w,T)=>{So(T,H=>{Ca(w,H)})},mr=(w,T,H)=>{if(nr(H)||lr(H)||$t(H))w.setAttribute(T,H+"");else throw console.error("Invalid call to Attribute.set. Key ",T,":: Value ",H,":: Element ",w),new Error("Attribute value was not simple")},wn=(w,T,H)=>{mr(w.dom,T,H)},vc=(w,T)=>{let H=w.dom;Kt(T,(j,ie)=>{mr(H,ie,j)})},yc=(w,T)=>{let H=w.dom.getAttribute(T);return H===null?void 0:H},wa=(w,T)=>ut.from(yc(w,T)),Jl=(w,T)=>{w.dom.removeAttribute(T)},fg=w=>Ya(w.dom.attributes,(T,H)=>(T[H.name]=H.value,T),{}),Na=w=>{let T=w.dom;T.parentNode!==null&&T.parentNode.removeChild(T)},xa=w=>{let T=Ol(w);T.length>0&&Xl(w,T),Na(w)},Rd=w=>ls(w,eo.fromDom),Cc=w=>w.style!==void 0&&Fs(w.style.getPropertyValue),Dl=w=>{let T=cu(w)?w.dom.parentNode:w.dom;if(T==null||T.ownerDocument===null)return!1;let H=T.ownerDocument;return pm(eo.fromDom(T)).fold(()=>H.body.contains(T),Yn(Dl,Od))},ps=(w,T,H)=>{if(!nr(H))throw console.error("Invalid call to CSS.set. Property ",T,":: Value ",H,":: Element ",w),new Error("CSS value must be a string: "+H);Cc(w)&&w.style.setProperty(T,H)},ni=(w,T)=>{Cc(w)&&w.style.removeProperty(T)},Rl=(w,T,H)=>{let j=w.dom;ps(j,T,H)},ws=(w,T)=>{let H=w.dom,ie=window.getComputedStyle(H).getPropertyValue(T);return ie===""&&!Dl(w)?Yu(H,T):ie},Yu=(w,T)=>Cc(w)?w.style.getPropertyValue(T):"",js=(w,T)=>{let H=w.dom,j=Yu(H,T);return ut.from(j).filter(ie=>ie.length>0)},Bi=(w,T)=>{let H=w.dom;ni(H,T),lu(wa(w,"style").map(na),"")&&Jl(w,"style")},pg=(w,T)=>{let H=(Xe,kt)=>{if(!$t(kt)&&!kt.match(/^[0-9]+$/))throw new Error(w+".set accepts only positive integer values. Value was "+kt);let Zt=Xe.dom;Cc(Zt)&&(Zt.style[w]=kt+"px")},j=Xe=>{let kt=T(Xe);if(kt<=0||kt===null){let Zt=ws(Xe,w);return parseFloat(Zt)||0}return kt},ie=j,Oe=(Xe,kt)=>Ya(kt,(Zt,lo)=>{let Do=ws(Xe,lo),Es=Do===void 0?0:parseInt(Do,10);return isNaN(Es)?Zt:Zt+Es},0);return{set:H,get:j,getOuter:ie,aggregate:Oe,max:(Xe,kt,Zt)=>{let lo=Oe(Xe,Zt);return kt>lo?kt-lo:0}}},Nd=(w,T)=>$r(w).getOr(T),yr=(w,T,H)=>Nd(ws(w,T),H),Xu=(w,T,H,j)=>{let ie=yr(w,`padding-${H}`,0),Oe=yr(w,`padding-${j}`,0),Je=yr(w,`border-${H}-width`,0),Xe=yr(w,`border-${j}-width`,0);return T-ie-Oe-Je-Xe},wc=(w,T)=>{let H=w.dom,j=H.getBoundingClientRect().width||H.offsetWidth;return T==="border-box"?j:Xu(w,j,"left","right")},al=w=>wc(w,"content-box");pg("width",w=>{let T=w.dom;return Dl(w)?T.getBoundingClientRect().width:T.offsetWidth});let xc=al,Sc=((w,T)=>{let H=Oe=>{if(!w(Oe))throw new Error("Can only get "+T+" value of a "+T+" node");return j(Oe).getOr("")},j=Oe=>w(Oe)?ut.from(Oe.dom.nodeValue):ut.none();return{get:H,getOption:j,set:(Oe,Je)=>{if(!w(Oe))throw new Error("Can only set raw "+T+" value of a "+T+" node");Oe.dom.nodeValue=Je}}})(cu,"text"),Ju=w=>Sc.get(w),Or=(w,T)=>Sc.set(w,T);var kc=(w,T,H,j,ie)=>w(H,j)?ut.some(H):Fs(ie)&&ie(H)?ut.none():T(H,j,ie);let Qu=(w,T,H)=>{let j=w.dom,ie=Fs(H)?H:ht;for(;j.parentNode;){j=j.parentNode;let Oe=eo.fromDom(j);if(T(Oe))return ut.some(Oe);if(ie(Oe))break}return ut.none()},bi=(w,T,H)=>kc((ie,Oe)=>Oe(ie),Qu,w,T,H),Md=(w,T)=>{let H=ie=>T(eo.fromDom(ie));return Ot(w.dom.childNodes,H).map(eo.fromDom)},Ql=(w,T,H)=>Qu(w,j=>Xn(j,T),H),Ma=(w,T)=>Md(w,H=>Xn(H,T)),il=(w,T)=>Mi(T,w),Pi=(w,T,H)=>kc((ie,Oe)=>Xn(ie,Oe),Ql,w,T,H),Dr=w=>Pi(w,"[contenteditable]"),oi=(w,T=!1)=>Dl(w)?w.dom.isContentEditable:Dr(w).fold(Ss(T),H=>Ec(H)==="true"),Ec=w=>w.dom.contentEditable,Tc=(w,T)=>Ho(Ol(w),T),_o=(w,T)=>{let H=[];return So(Ol(w),j=>{T(j)&&(H=H.concat([j])),H=H.concat(_o(j,T))}),H},sa=(w,T)=>Tc(w,H=>Xn(H,T)),ed=(w,T)=>Da(T,w),Ba=(w,T)=>Ma(w,T).isSome(),Li=w=>w.nodeName.toLowerCase(),zo=w=>eo.fromDom(w.getBody()),Rr=w=>T=>Ra(T,zo(w)),ll=w=>w?w.replace(/px$/,""):"",z=w=>/^\d+(\.\d+)?$/.test(w)?w+"px":w,te=w=>eo.fromDom(w.selection.getStart()),fe=w=>eo.fromDom(w.selection.getEnd()),Be=w=>bi(w,uu("table")).forall(oi),ot=["tfoot","thead","tbody","colgroup"],Bt=w=>vn(ot,w),Mn=(w,T)=>({rows:w,columns:T}),mo=(w,T,H)=>({element:w,rowspan:T,colspan:H}),yn=(w,T,H,j,ie,Oe)=>({element:w,rowspan:T,colspan:H,row:j,column:ie,isLocked:Oe}),Ns=(w,T,H)=>({element:w,cells:T,section:H}),Go=(w,T,H,j)=>({startRow:w,startCol:T,finishRow:H,finishCol:j}),ma=(w,T,H)=>({element:w,colspan:T,column:H}),gu=(w,T)=>({element:w,columns:T}),Ms=(w,T,H=0)=>wa(w,T).map(j=>parseInt(j,10)).getOr(H),Ac=(w,T)=>ec(w,T,me),ec=(w,T,H)=>so(Ol(w),j=>Xn(j,T)?H(j)?[j]:[]:ec(j,T,H)),G=(w,T,H=ht)=>{if(H(T))return ut.none();if(vn(w,Rs(T)))return ut.some(T);let j=ie=>Xn(ie,"table")||H(ie);return Ql(T,w.join(","),j)},se=(w,T)=>G(["td","th"],w,T),xe=w=>Ac(w,"th,td"),je=w=>Xn(w,"colgroup")?sa(w,"col"):so(No(w),T=>sa(T,"col")),ct=(w,T)=>Pi(w,"table",T),Gn=w=>Ac(w,"tr"),No=w=>ct(w).fold(Ss([]),T=>sa(T,"colgroup")),qs=uu("th"),Mo=(w,T)=>w&&T?"sectionCells":w?"section":"cells",Gs=w=>{let T=w.section==="thead",H=lu(Nl(w.cells),"th");return w.section==="tfoot"?{type:"footer"}:T||H?{type:"header",subType:Mo(T,H)}:{type:"body"}},Nl=w=>{let T=Ho(w,H=>qs(H.element));return T.length===0?ut.some("td"):T.length===w.length?ut.some("th"):ut.none()},ra=w=>{let T=ls(w,ie=>Gs(ie).type),H=vn(T,"header"),j=vn(T,"footer");if(!H&&!j)return ut.some("body");{let ie=vn(T,"body");return H&&!ie&&!j?ut.some("header"):!H&&!ie&&j?ut.some("footer"):ut.none()}},Ks=(w,T)=>ls(w,H=>{if(Rs(H)==="colgroup"){let j=ls(je(H),ie=>{let Oe=Ms(ie,"span",1);return mo(ie,1,Oe)});return Ns(H,j,"colgroup")}else{let j=ls(xe(H),ie=>{let Oe=Ms(ie,"rowspan",1),Je=Ms(ie,"colspan",1);return mo(ie,Oe,Je)});return Ns(H,j,T(H))}}),Cr=w=>ti(w).map(T=>{let H=Rs(T);return Bt(H)?H:"tbody"}).getOr("tbody"),cl=w=>{let T=Gn(w),j=[...No(w),...T];return Ks(j,Cr)},en="data-snooker-locked-cols",En=w=>wa(w,en).bind(T=>ut.from(T.match(/\d+/g))).map(T=>kn(T,me)),ds=(w,T)=>w+","+T,Zs=(w,T,H)=>ut.from(w.access[ds(T,H)]),Oh=(w,T,H)=>{let j=Bs(w,ie=>H(T,ie.element));return j.length>0?ut.some(j[0]):ut.none()},Bs=(w,T)=>{let H=so(w.all,j=>j.cells);return Ho(H,T)},yp=w=>{let T={},H=0;return So(w.cells,j=>{let ie=j.colspan;wt(ie,Oe=>{let Je=H+Oe;T[Je]=ma(j.element,ie,Je)}),H+=ie}),T},_c=w=>{let T={},H=[],ie=Vs(w).map(Si=>Si.element).bind(ct).bind(En).getOr({}),Oe=0,Je=0,Xe=0,{pass:kt,fail:Zt}=Ln(w,Si=>Si.section==="colgroup");So(Zt,Si=>{let ld=[];So(Si.cells,cd=>{let Eu=0;for(;T[ds(Xe,Eu)]!==void 0;)Eu++;let $i=xn(ie,Eu.toString()),Vi=yn(cd.element,cd.rowspan,cd.colspan,Xe,Eu,$i);for(let hl=0;hl<cd.colspan;hl++)for(let Lc=0;Lc<cd.rowspan;Lc++){let _p=Xe+Lc,Tu=Eu+hl,Mm=ds(_p,Tu);T[Mm]=Vi,Je=Math.max(Je,Tu+1)}ld.push(Vi)}),Oe++,H.push(Ns(Si.element,ld,Si.section)),Xe++});let{columns:lo,colgroups:Do}=vo(kt).map(Si=>{let ld=yp(Si);return{colgroups:[gu(Si.element,Ge(ld))],columns:ld}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Mn(Oe,Je),access:T,all:H,columns:lo,colgroups:Do}},gr={fromTable:w=>{let T=cl(w);return _c(T)},generate:_c,getAt:Zs,findItem:Oh,filterItems:Bs,justCells:w=>so(w.all,T=>T.cells),justColumns:w=>Ge(w.columns),hasColumns:w=>In(w.columns).length>0,getColumnAt:(w,T)=>ut.from(w.columns[T])},Ys=(w,T)=>hi(w.all,H=>Ot(H.cells,j=>Ra(T,j.element))),m0=(w,T,H)=>{let j=ls(T.selection,Oe=>se(Oe).bind(Je=>Ys(w,Je)).filter(H)),ie=cr(j);return Ni(ie.length>0,ie)},hm=(w,T)=>T.mergable,yg=(w,T)=>T.unmergable,q=(w,T)=>m0(w,T,me),Bd=(w,T)=>Ys(w,T).exists(H=>!H.isLocked),td=(w,T)=>L(T,H=>Bd(w,H)),ga=(w,T)=>hm(w,T).filter(H=>td(w,H.cells)),ff=(w,T)=>yg(w,T).filter(H=>td(w,H)),Hs=uu("col"),bm=uu("colgroup"),Oc=w=>Rs(w)==="tr"||bm(w),Un=w=>{let T=Ms(w,"colspan",1),H=Ms(w,"rowspan",1);return{element:w,colspan:T,rowspan:H}},pf=(w,T=Un)=>{let H=Xe=>Hs(Xe.element)?w.col(Xe):w.cell(Xe),j=Xe=>bm(Xe.element)?w.colgroup(Xe):w.row(Xe),ie=Xe=>{if(Oc(Xe))return j({element:Xe});{let kt=Xe,Zt=H(T(kt));return Oe=ut.some({item:kt,replacement:Zt}),Zt}},Oe=ut.none();return{getOrInit:(Xe,kt)=>Oe.fold(()=>ie(Xe),Zt=>kt(Xe,Zt.item)?Zt.replacement:ie(Xe))}},Cg=w=>T=>{let H=[],j=(Je,Xe)=>Ot(H,kt=>Xe(kt.item,Je)),ie=Je=>{let Xe=w==="td"?{scope:null}:{},kt=T.replace(Je,w,Xe);return H.push({item:Je,sub:kt}),kt};return{replaceOrInit:(Je,Xe)=>{if(Oc(Je)||Hs(Je))return Je;{let kt=Je;return j(kt,Xe).fold(()=>ie(kt),Zt=>Xe(Je,Zt.item)?Zt.sub:ie(kt))}}}},wg=w=>wa(w,"scope").map(T=>T.substr(0,3)),Ml={modification:pf,transform:Cg,merging:w=>({unmerge:j=>{let ie=wg(j);return ie.each(Oe=>wn(j,"scope",Oe)),()=>{let Oe=w.cell({element:j,colspan:1,rowspan:1});return Bi(Oe,"width"),Bi(j,"width"),ie.each(Je=>wn(Oe,"scope",Je)),Oe}},merge:j=>{let ie=()=>{let Oe=cr(ls(j,wg));if(Oe.length===0)return ut.none();{let Je=Oe[0],Xe=["row","col"];return _(Oe,Zt=>Zt!==Je&&vn(Xe,Zt))?ut.none():ut.from(Je)}};return Bi(j[0],"width"),ie().fold(()=>Jl(j[0],"scope"),Oe=>wn(j[0],"scope",Oe+"group")),Ss(j[0])}})};var vm=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Pa=()=>{let w=Zt=>eo.fromDom(Zt.dom.cloneNode(!1)),T=Zt=>Gu(Zt).dom,H=Zt=>to(Zt)?Rs(Zt)==="body"?!0:vn(vm,Rs(Zt)):!1,j=Zt=>to(Zt)?vn(["br","img","hr","input"],Rs(Zt)):!1,ie=Zt=>to(Zt)&&yc(Zt,"contenteditable")==="false",Oe=(Zt,lo)=>Zt.dom.compareDocumentPosition(lo.dom),Je=(Zt,lo)=>{let Do=fg(Zt);vc(lo,Do)},Xe=Zt=>{let lo=Rs(Zt);return vn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],lo)},kt=Zt=>to(Zt)?wa(Zt,"lang"):ut.none();return{up:Ss({selector:Ql,closest:Pi,predicate:Qu,all:Ur}),down:Ss({selector:ed,predicate:_o}),styles:Ss({get:ws,getRaw:js,set:Rl,remove:Bi}),attrs:Ss({get:yc,set:wn,remove:Jl,copyTo:Je}),insert:Ss({before:du,after:mu,afterAll:Xl,append:Ca,appendAll:Dd,prepend:gg,wrap:Ku}),remove:Ss({unwrap:xa,remove:Na}),create:Ss({nu:eo.fromTag,clone:w,text:eo.fromText}),query:Ss({comparePosition:Oe,prevSibling:sl,nextSibling:dr}),property:Ss({children:Ol,name:Rs,parent:ti,document:T,isText:cu,isComment:ur,isElement:to,isSpecial:Xe,getLanguage:kt,getText:Ju,setText:Or,isBoundary:H,isEmptyTag:j,isNonEditable:ie}),eq:Ra,is:or}};let hs=(w,T)=>({left:w,right:T}),fu=(w,T,H)=>({first:w,second:T,splits:H}),Pd=(w,T,H)=>{let j=w.property().children(T);return Xa(j,At(w.eq,H)).map(Oe=>({before:j.slice(0,Oe),after:j.slice(Oe+1)}))},Qt=(w,T,H)=>Pd(w,T,H).map(j=>{let ie=w.create().clone(T);return w.insert().appendAll(ie,j.after),w.insert().after(T,ie),hs(T,ie)}),La=(w,T,H)=>Pd(w,T,H).map(j=>{let ie=w.create().clone(T);return w.insert().appendAll(ie,j.before.concat([H])),w.insert().appendAll(T,j.after),w.insert().before(T,ie),hs(ie,T)}),Ii=(w,T,H,j)=>{let ie=(Oe,Je,Xe)=>{let kt=fu(Oe,ut.none(),Xe);return H(Oe)?fu(Oe,Je,Xe):w.property().parent(Oe).bind(Zt=>j(w,Zt,Oe).map(lo=>{let Do=[{first:lo.left,second:lo.right}],Es=H(Zt)?Zt:lo.left;return ie(Es,ut.some(lo.right),Xe.concat(Do))})).getOr(kt)};return ie(T,ut.none(),[])},ym=(w,T,H,j)=>{let ie=H[0],Oe=H.slice(1);return j(w,T,ie,Oe)},fn=(w,T,H)=>H.length>0?ym(w,T,H,hf):ut.none(),hf=(w,T,H,j)=>{let ie=T(w,H);return _t(j,(Oe,Je)=>{let Xe=T(w,Je);return bf(w,Oe,Xe)},ie)},bf=(w,T,H)=>T.bind(j=>H.filter(At(w.eq,j))),xg=fn,Cm=Pa(),Xs=(w,T)=>xg(Cm,(H,j)=>w(j),T),Sa=(w,T)=>{let H=gr.fromTable(w);return q(H,T).bind(ie=>{let Oe=ie[ie.length-1],Je=ie[0].row,Xe=Oe.row+Oe.rowspan,kt=H.all.slice(Je,Xe);return ra(kt)}).getOr("")};Ml.transform("th"),Ml.transform("td");let g0=Sa,f0=(w,T)=>T.column>=w.startCol&&T.column+T.colspan-1<=w.finishCol&&T.row>=w.startRow&&T.row+T.rowspan-1<=w.finishRow,pu=(w,T)=>{let H=!0,j=At(f0,T);for(let ie=T.startRow;ie<=T.finishRow;ie++)for(let Oe=T.startCol;Oe<=T.finishCol;Oe++)H=H&&gr.getAt(w,ie,Oe).exists(j);return H?ut.some(T):ut.none()},Fi=(w,T)=>Go(Math.min(w.row,T.row),Math.min(w.column,T.column),Math.max(w.row+w.rowspan-1,T.row+T.rowspan-1),Math.max(w.column+w.colspan-1,T.column+T.colspan-1)),hu=(w,T,H)=>{let j=gr.findItem(w,T,Ra),ie=gr.findItem(w,H,Ra);return j.bind(Oe=>ie.map(Je=>Fi(Oe,Je)))},Cp=(w,T,H)=>hu(w,T,H).bind(j=>pu(w,j)),xo=(w,T,H)=>{let j=Mr(w);return Cp(j,T,H)},Mr=gr.fromTable;var Ld=tinymce.util.Tools.resolve("tinymce.util.Tools");let bu=(w,T,H)=>{let j=w.select("td,th",T),ie;for(let Oe=0;Oe<j.length;Oe++){let Je=w.getStyle(j[Oe],H);if(To(ie)&&(ie=Je),ie!==Je)return""}return ie},si=(w,T,H)=>{Ld.each("left center right".split(" "),j=>{j!==H&&w.formatter.remove("align"+j,{},T)}),H&&w.formatter.apply("align"+H,{},T)},ul=(w,T,H)=>{Ld.each("top middle bottom".split(" "),j=>{j!==H&&w.formatter.remove("valign"+j,{},T)}),H&&w.formatter.apply("valign"+H,{},T)},tc=(w,T,H)=>{w.dispatch("TableModified",{...H,table:T})};var Sg=tinymce.util.Tools.resolve("tinymce.Env");let bs="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",rr=wt(5,w=>{let T=`${w+1}px`;return{title:T,value:T}}),$o=ls(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],w=>({title:w,value:w.toLowerCase()})),Js="100%",dl=w=>{let T=w.dom,H=T.getParent(w.selection.getStart(),T.isBlock)??w.getBody();return xc(eo.fromDom(H))+"px"},ka=(w,T)=>_g(w)||!vu(w)?T:ia(w)?{...T,width:dl(w)}:{...T,width:Js},vf=(w,T)=>_g(w)||vu(w)?T:ia(w)?{...T,width:dl(w)}:{...T,width:Js},Bo=w=>T=>T.options.get(w),Hi=w=>{let T=w.options.register;T("table_border_widths",{processor:"object[]",default:rr}),T("table_border_styles",{processor:"object[]",default:$o}),T("table_cell_advtab",{processor:"boolean",default:!0}),T("table_row_advtab",{processor:"boolean",default:!0}),T("table_advtab",{processor:"boolean",default:!0}),T("table_appearance_options",{processor:"boolean",default:!0}),T("table_grid",{processor:"boolean",default:!Sg.deviceType.isTouch()}),T("table_cell_class_list",{processor:"object[]",default:[]}),T("table_row_class_list",{processor:"object[]",default:[]}),T("table_class_list",{processor:"object[]",default:[]}),T("table_toolbar",{processor:"string",default:bs}),T("table_background_color_map",{processor:"object[]",default:[]}),T("table_border_color_map",{processor:"object[]",default:[]})},kg=Bo("table_sizing_mode"),aa=Bo("table_border_widths"),wm=Bo("table_border_styles"),xm=Bo("table_cell_advtab"),Eg=Bo("table_row_advtab"),nd=Bo("table_advtab"),yf=Bo("table_appearance_options"),wp=Bo("table_grid"),vu=Bo("table_style_by_css"),Tg=Bo("table_cell_class_list"),xp=Bo("table_row_class_list"),Bl=Bo("table_class_list"),Sp=Bo("table_toolbar"),Cf=Bo("table_background_color_map"),Ag=Bo("table_border_color_map"),ia=w=>kg(w)==="fixed",_g=w=>kg(w)==="responsive",ri=w=>{let T=w.options,H=T.get("table_default_styles");return T.isSet("table_default_styles")?H:ka(w,H)},Og=w=>{let T=w.options,H=T.get("table_default_attributes");return T.isSet("table_default_attributes")?H:vf(w,H)},Zr=w=>Ql(w,"table"),Pl=(w,T)=>{let H=ed(w,T);return H.length>0?ut.some(H):ut.none()},od=(w,T,H)=>il(w,T).bind(j=>il(w,H).bind(ie=>Xs(Zr,[j,ie]).map(Oe=>({first:j,last:ie,table:Oe})))),Oo=(w,T)=>Pl(w,T),wr=(w,T,H)=>od(w,T,H).bind(j=>{let ie=kt=>Ra(w,kt),Oe="thead,tfoot,tbody,table",Je=Ql(j.first,Oe,ie),Xe=Ql(j.last,Oe,ie);return Je.bind(kt=>Xe.bind(Zt=>Ra(kt,Zt)?xo(j.table,j.first,j.last):ut.none()))}),Br=Qe,yu=w=>{let T=(j,ie)=>wa(j,ie).exists(Oe=>parseInt(Oe,10)>1),H=j=>T(j,"rowspan")||T(j,"colspan");return w.length>0&&L(w,H)?ut.some(w):ut.none()},ml=(w,T,H)=>T.length<=1?ut.none():wr(w,H.firstSelectedSelector,H.lastSelectedSelector).map(j=>({bounds:j,cells:T})),Wr="data-mce-selected",Pr="td["+Wr+"],th["+Wr+"]",Ea="data-mce-first-selected",ai="td["+Ea+"],th["+Ea+"]",xr="data-mce-last-selected",Sm="td["+xr+"],th["+xr+"]",Ws={selected:Wr,selectedSelector:Pr,firstSelected:Ea,firstSelectedSelector:ai,lastSelected:xr,lastSelectedSelector:Sm},kp=w=>ct(w).bind(T=>Oo(T,Ws.firstSelectedSelector)).fold(Ss(w),T=>T[0]),Ll=w=>(T,H)=>{let j=Rs(T),ie=j==="col"||j==="colgroup"?kp(T):T;return Pi(ie,w,H)},vi=Ll("th,td,caption"),Ko=Ll("th,td"),yi=w=>Rd(w.model.table.getSelectedCells()),km=(w,T)=>{let H=Ko(w),j=H.bind(ie=>ct(ie)).map(ie=>Gn(ie));return Qa(H,j,(ie,Oe)=>Ho(Oe,Je=>_(Rd(Je.dom.cells),Xe=>yc(Xe,T)==="1"||Ra(Xe,ie)))).getOr([])},ii=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],wf=w=>({value:ms(w)}),gl=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Em=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Ep=w=>gl.test(w)||Em.test(w),ms=w=>Ds(w,"#").toUpperCase(),sd=w=>Ep(w)?ut.some({value:ms(w)}):ut.none(),Cu=w=>{let T=w.toString(16);return(T.length===1?"0"+T:T).toUpperCase()},Tm=w=>{let T=Cu(w.red)+Cu(w.green)+Cu(w.blue);return wf(T)},Dg=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,wu=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Rg=(w,T,H,j)=>({red:w,green:T,blue:H,alpha:j}),Tp=(w,T,H,j)=>{let ie=parseInt(w,10),Oe=parseInt(T,10),Je=parseInt(H,10),Xe=parseFloat(j);return Rg(ie,Oe,Je,Xe)},Am=w=>{let T=Dg.exec(w);if(T!==null)return ut.some(Tp(T[1],T[2],T[3],"1"));let H=wu.exec(w);return H!==null?ut.some(Tp(H[1],H[2],H[3],H[4])):ut.none()},_m=w=>sd(w).orThunk(()=>Am(w).map(Tm)).getOrThunk(()=>{let T=document.createElement("canvas");T.height=1,T.width=1;let H=T.getContext("2d");H.clearRect(0,0,T.width,T.height),H.fillStyle="#FFFFFF",H.fillStyle=w,H.fillRect(0,0,1,1);let j=H.getImageData(0,0,1,1).data,ie=j[0],Oe=j[1],Je=j[2],Xe=j[3];return Tm(Rg(ie,Oe,Je,Xe))}),fl=w=>Am(w).map(Tm).map(T=>"#"+T.value).getOr(w),xf=(w,T,H)=>j=>{let ie=Os(),Oe=qu(H),Je=()=>{let Xe=yi(w),kt=Zt=>w.formatter.match(T,{value:H},Zt.dom,Oe);Oe?(j.setActive(!_(Xe,kt)),ie.set(w.formatter.formatChanged(T,Zt=>j.setActive(!Zt),!0))):(j.setActive(L(Xe,kt)),ie.set(w.formatter.formatChanged(T,j.setActive,!1,{value:H})))};return w.initialized?Je():w.on("init",Je),ie.clear},Id=w=>xn(w,"menu"),Om=w=>ls(w,T=>{let H=T.text||T.title||"";return Id(T)?{text:H,items:Om(T.menu)}:{text:H,value:T.value}}),Dc=w=>w.length?ut.some(Om([{text:"Select...",value:"mce-no-match"},...w])):ut.none(),fa=(w,T,H,j)=>ls(T,ie=>{let Oe=ie.text||ie.title;return Id(ie)?{type:"nestedmenuitem",text:Oe,getSubmenuItems:()=>fa(w,ie.menu,H,j)}:{text:Oe,type:"togglemenuitem",onAction:()=>j(ie.value),onSetup:xf(w,H,ie.value)}}),Jt=(w,T)=>H=>{w.execCommand("mceTableApplyCellStyle",!1,{[T]:H})},Il=w=>so(w,T=>Id(T)?[{...T,menu:Il(T.menu)}]:zr(T.value)?[T]:[]),rd=(w,T,H,j)=>ie=>ie(fa(w,T,H,j)),Ng=(w,T,H)=>{let j=ls(T,ie=>({text:ie.title,value:"#"+_m(ie.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:j.length>0?j:void 0,allowCustomColors:!1},onAction:ie=>{let Oe=ie.value==="remove"?"":ie.value;w.execCommand("mceTableApplyCellStyle",!1,{[H]:Oe})}}]},xu=w=>()=>{let H=w.queryCommandValue("mceTableRowType")==="header"?"body":"header";w.execCommand("mceTableRowType",!1,{type:H})},Dm=w=>()=>{let H=w.queryCommandValue("mceTableColType")==="th"?"td":"th";w.execCommand("mceTableColType",!1,{type:H})},Fd=w=>Dc(Tg(w)).map(T=>({name:"class",type:"listbox",label:"Class",items:T})),p0=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:ii}],ss=w=>p0.concat(Fd(w).toArray()),Ia=(w,T)=>{let j=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Om(wm(w)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:T==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(j):j}},Rc={normal:(w,T)=>{let H=w.dom;return{setAttrib:(Je,Xe)=>{H.setAttrib(T,Je,Xe)},setStyle:(Je,Xe)=>{H.setStyle(T,Je,Xe)},setFormat:(Je,Xe)=>{Xe===""?w.formatter.remove(Je,{value:null},T,!0):w.formatter.apply(Je,{value:Xe},T)}}}},pa=w=>ks(w,"rgb")?fl(w):w,Nc=w=>{let T=eo.fromDom(w);return{borderwidth:js(T,"border-width").getOr(""),borderstyle:js(T,"border-style").getOr(""),bordercolor:js(T,"border-color").map(pa).getOr(""),backgroundcolor:js(T,"background-color").map(pa).getOr("")}},Sr=w=>{let T=w[0],H=w.slice(1);return So(H,j=>{So(In(T),ie=>{Kt(j,(Oe,Je)=>{let Xe=T[ie];Xe!==""&&ie===Je&&Xe!==Oe&&(T[ie]=ie==="class"?"mce-no-match":"")})})}),T},kr=(w,T,H,j)=>Ot(w,ie=>!To(H.formatter.matchNode(j,T+ie))).getOr(""),Hd=At(kr,["left","center","right"],"align"),Ke=At(kr,["top","middle","bottom"],"valign"),Ci=(w,T)=>{let H=ri(w),j=Og(w),ie=()=>({borderstyle:Mt(H,"border-style").getOr(""),bordercolor:pa(Mt(H,"border-color").getOr("")),backgroundcolor:pa(Mt(H,"background-color").getOr(""))}),Oe={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},Je=()=>{let lo=H["border-width"];return vu(w)&&lo?{border:lo}:Mt(j,"border").fold(()=>({}),Do=>({border:Do}))},Xe=T?ie():{},kt=()=>{let lo=Mt(H,"border-spacing").or(Mt(j,"cellspacing")).fold(()=>({}),Es=>({cellspacing:Es})),Do=Mt(H,"border-padding").or(Mt(j,"cellpadding")).fold(()=>({}),Es=>({cellpadding:Es}));return{...lo,...Do}};return{...Oe,...H,...j,...Xe,...Je(),...kt()}},Mg=w=>ct(eo.fromDom(w)).map(T=>{let H={selection:Rd(w.cells)};return g0(T,H)}).getOr(""),fr=(w,T,H)=>{let j=(Xe,kt)=>{let Zt=js(eo.fromDom(kt),"border-width");return vu(w)&&Zt.isSome()?Zt.getOr(""):Xe.getAttrib(kt,"border")||bu(w.dom,kt,"border-width")||bu(w.dom,kt,"border")||""},ie=w.dom,Oe=vu(w)?ie.getStyle(T,"border-spacing")||ie.getAttrib(T,"cellspacing"):ie.getAttrib(T,"cellspacing")||ie.getStyle(T,"border-spacing"),Je=vu(w)?bu(ie,T,"padding")||ie.getAttrib(T,"cellpadding"):ie.getAttrib(T,"cellpadding")||bu(ie,T,"padding");return{width:ie.getStyle(T,"width")||ie.getAttrib(T,"width"),height:ie.getStyle(T,"height")||ie.getAttrib(T,"height"),cellspacing:Oe??"",cellpadding:Je??"",border:j(ie,T),caption:!!ie.select("caption",T)[0],class:ie.getAttrib(T,"class",""),align:Hd(w,T),...H?Nc(T):{}}},Fl=(w,T,H)=>{let j=w.dom;return{height:j.getStyle(T,"height")||j.getAttrib(T,"height"),class:j.getAttrib(T,"class",""),type:Mg(T),align:Hd(w,T),...H?Nc(T):{}}},jr=(w,T,H,j)=>{let ie=w.dom,Oe=j.getOr(T);return{width:((Xe,kt)=>ie.getStyle(Xe,kt)||ie.getAttrib(Xe,kt))(Oe,"width"),scope:ie.getAttrib(T,"scope"),celltype:Li(T),class:ie.getAttrib(T,"class",""),halign:Hd(w,T),valign:Ke(w,T),...H?Nc(T):{}}},ha=(w,T)=>{let H=gr.fromTable(w),j=gr.justCells(H),ie=Ho(j,Oe=>_(T,Je=>Ra(Oe.element,Je)));return ls(ie,Oe=>({element:Oe.element.dom,column:gr.getColumnAt(H,Oe.column).map(Je=>Je.element.dom)}))},Bg=(w,T,H,j)=>{j("scope")&&w.setAttrib("scope",H.scope),j("class")&&H.class!=="mce-no-match"&&w.setAttrib("class",H.class),j("width")&&T.setStyle("width",z(H.width))},Fa=(w,T,H)=>{H("backgroundcolor")&&w.setFormat("tablecellbackgroundcolor",T.backgroundcolor),H("bordercolor")&&w.setFormat("tablecellbordercolor",T.bordercolor),H("borderstyle")&&w.setFormat("tablecellborderstyle",T.borderstyle),H("borderwidth")&&w.setFormat("tablecellborderwidth",z(T.borderwidth))},no=(w,T,H,j)=>{let ie=T.length===1;So(T,Oe=>{let Je=Oe.element,Xe=ie?me:j,kt=Rc.normal(w,Je),Zt=Oe.column.map(lo=>Rc.normal(w,lo)).getOr(kt);Bg(kt,Zt,H,Xe),xm(w)&&Fa(kt,H,Xe),j("halign")&&si(w,Je,H.halign),j("valign")&&ul(w,Je,H.valign)})},Ha=(w,T)=>{w.execCommand("mceTableCellType",!1,{type:T.celltype,no_events:!0})},Qs=(w,T,H,j)=>{let ie=cs(j,(Oe,Je)=>H[Je]!==Oe);dt(ie)>0&&T.length>=1&&ct(T[0]).each(Oe=>{let Je=ha(Oe,T),Xe=dt(cs(ie,(Zt,lo)=>lo!=="scope"&&lo!=="celltype"))>0,kt=rn(ie,"celltype");(Xe||rn(ie,"scope"))&&no(w,Je,j,At(rn,ie)),kt&&Ha(w,j),tc(w,Oe.dom,{structure:kt,style:Xe})})},Po=(w,T,H,j)=>{let ie=j.getData();j.close(),w.undoManager.transact(()=>{Qs(w,T,H,ie),w.focus()})},zd=(w,T)=>{let H=ct(T[0]).map(j=>ls(ha(j,T),ie=>jr(w,ie.element,xm(w),ie.column)));return Sr(H.getOrDie())},qr=w=>{let T=yi(w);if(T.length===0)return;let H=zd(w,T),j={type:"tabpanel",tabs:[{title:"General",name:"general",items:ss(w)},Ia(w,"cell")]},ie={type:"panel",items:[{type:"grid",columns:2,items:ss(w)}]};w.windowManager.open({title:"Cell Properties",size:"normal",body:xm(w)?j:ie,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:H,onSubmit:At(Po,w,T,H)})},ad=w=>Dc(xp(w)).map(T=>({name:"class",type:"listbox",label:"Class",items:T})),ci=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Te=w=>ci.concat(ad(w).toArray()),za=(w,T,H)=>{H("class")&&T.class!=="mce-no-match"&&w.setAttrib("class",T.class),H("height")&&w.setStyle("height",z(T.height))},Mc=(w,T,H)=>{H("backgroundcolor")&&w.setStyle("background-color",T.backgroundcolor),H("bordercolor")&&w.setStyle("border-color",T.bordercolor),H("borderstyle")&&w.setStyle("border-style",T.borderstyle)},Yo=(w,T,H,j)=>{let Oe=T.length===1?me:j;So(T,Je=>{let Xe=sa(eo.fromDom(Je),"td,th"),kt=Rc.normal(w,Je);za(kt,H,Oe),Eg(w)&&Mc(kt,H,Oe),j("height")&&So(Xe,Zt=>{w.dom.setStyle(Zt.dom,"height",null)}),j("align")&&si(w,Je,H.align)})},nc=(w,T)=>{w.execCommand("mceTableRowType",!1,{type:T.type,no_events:!0})},Gr=(w,T,H,j)=>{let ie=cs(j,(Oe,Je)=>H[Je]!==Oe);if(dt(ie)>0){let Oe=rn(ie,"type"),Je=Oe?dt(ie)>1:!0;Je&&Yo(w,T,j,At(rn,ie)),Oe&&nc(w,j),ct(eo.fromDom(T[0])).each(Xe=>tc(w,Xe.dom,{structure:Oe,style:Je}))}},rs=(w,T,H,j)=>{let ie=j.getData();j.close(),w.undoManager.transact(()=>{Gr(w,T,H,ie),w.focus()})},Su=w=>{let T=km(te(w),Ws.selected);if(T.length===0)return;let H=ls(T,Je=>Fl(w,Je.dom,Eg(w))),j=Sr(H),ie={type:"tabpanel",tabs:[{title:"General",name:"general",items:Te(w)},Ia(w,"row")]},Oe={type:"panel",items:[{type:"grid",columns:2,items:Te(w)}]};w.windowManager.open({title:"Row Properties",size:"normal",body:Eg(w)?ie:Oe,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:j,onSubmit:At(rs,w,ls(T,Je=>Je.dom),j)})},Ap=(w,T,H)=>{let j=H?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],ie=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Oe=yf(w)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],Je=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Xe=T.length>0?[{name:"class",type:"listbox",label:"Class",items:T}]:[];return j.concat(ie).concat(Oe).concat(Je).concat(Xe)},wi=(w,T,H,j)=>{if(T.tagName==="TD"||T.tagName==="TH")nr(H)&&Hr(j)?w.setStyle(T,H,j):w.setStyles(T,H);else if(T.children)for(let ie=0;ie<T.children.length;ie++)wi(w,T.children[ie],H,j)},Rm=(w,T,H,j)=>{let ie=w.dom,Oe={},Je={},Xe=vu(w),kt=nd(w),Zt=parseFloat(H.border)===0;if(!To(H.class)&&H.class!=="mce-no-match"&&(Oe.class=H.class),Je.height=z(H.height),Xe?Je.width=z(H.width):ie.getAttrib(T,"width")&&(Oe.width=ll(H.width)),Xe?(Zt?(Oe.border=0,Je["border-width"]=""):(Je["border-width"]=z(H.border),Oe.border=1),Je["border-spacing"]=z(H.cellspacing)):(Oe.border=Zt?0:H.border,Oe.cellpadding=H.cellpadding,Oe.cellspacing=H.cellspacing),Xe&&T.children){let lo={};if(Zt?lo["border-width"]="":j.border&&(lo["border-width"]=z(H.border)),j.cellpadding&&(lo.padding=z(H.cellpadding)),kt&&j.bordercolor&&(lo["border-color"]=H.bordercolor),!Ao(lo))for(let Do=0;Do<T.children.length;Do++)wi(ie,T.children[Do],lo)}if(kt){let lo=H;Je["background-color"]=lo.backgroundcolor,Je["border-color"]=lo.bordercolor,Je["border-style"]=lo.borderstyle}ie.setStyles(T,{...ri(w),...Je}),ie.setAttribs(T,{...Og(w),...Oe})},Er=(w,T,H,j)=>{let ie=w.dom,Oe=j.getData(),Je=cs(Oe,(Xe,kt)=>H[kt]!==Xe);j.close(),w.undoManager.transact(()=>{if(!T){let Xe=An(Oe.cols).getOr(1),kt=An(Oe.rows).getOr(1);w.execCommand("mceInsertTable",!1,{rows:kt,columns:Xe}),T=Ko(te(w),Rr(w)).bind(Zt=>ct(Zt,Rr(w))).map(Zt=>Zt.dom).getOrDie()}if(dt(Je)>0){let Xe={border:rn(Je,"border"),bordercolor:rn(Je,"bordercolor"),cellpadding:rn(Je,"cellpadding")};Rm(w,T,Oe,Xe);let kt=ie.select("caption",T)[0];(kt&&!Oe.caption||!kt&&Oe.caption)&&w.execCommand("mceTableToggleCaption"),si(w,T,Oe.align)}if(w.focus(),w.addVisual(),dt(Je)>0){let Xe=rn(Je,"caption"),kt=Xe?dt(Je)>1:!0;tc(w,T,{structure:Xe,style:kt})}})},oc=(w,T)=>{let H=w.dom,j,ie=Ci(w,nd(w));T?(ie.cols="1",ie.rows="1",nd(w)&&(ie.borderstyle="",ie.bordercolor="",ie.backgroundcolor="")):(j=H.getParent(w.selection.getStart(),"table",w.getBody()),j?ie=fr(w,j,nd(w)):nd(w)&&(ie.borderstyle="",ie.bordercolor="",ie.backgroundcolor=""));let Oe=Dc(Bl(w));Oe.isSome()&&ie.class&&(ie.class=ie.class.replace(/\s*mce\-item\-table\s*/g,""));let Je={type:"grid",columns:2,items:Ap(w,Oe.getOr([]),T)},Xe=()=>({type:"panel",items:[Je]}),kt=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[Je]},Ia(w,"table")]}),Zt=nd(w)?kt():Xe();w.windowManager.open({title:"Table Properties",size:"normal",body:Zt,onSubmit:At(Er,w,j,ie),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ie})},Sf=w=>{let T=H=>{Be(te(w))&&H()};Kt({mceTableProps:At(oc,w,!1),mceTableRowProps:At(Su,w),mceTableCellProps:At(qr,w),mceInsertTableDialog:At(oc,w,!0)},(H,j)=>w.addCommand(j,()=>T(H)))},Bc=w=>({element:w,mergable:ut.none(),unmergable:ut.none(),selection:[w]}),sc=(w,T,H)=>({element:H,mergable:ml(T,w,Ws),unmergable:yu(w),selection:Br(w)}),gs=w=>{let T=_s(ut.none()),H=_s([]),j=ut.none(),ie=uu("caption"),Oe=ao=>j.forall(Ps=>!Ps[ao]),Je=()=>vi(te(w),Rr(w)),Xe=()=>vi(fe(w),Rr(w)),kt=()=>Je().bind(ao=>kl(Qa(ct(ao),Xe().bind(ct),(Ps,$a)=>Ra(Ps,$a)?ie(ao)?ut.some(Bc(ao)):ut.some(sc(yi(w),Ps,ao)):ut.none()))),Zt=ao=>ct(ao.element).map($a=>{let pr=gr.fromTable($a),Ic=q(pr,ao).getOr([]),er=Ya(Ic,(Ef,Fc)=>(Fc.isLocked&&(Ef.onAny=!0,Fc.column===0?Ef.onFirst=!0:Fc.column+Fc.colspan>=pr.grid.columns&&(Ef.onLast=!0)),Ef),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:ga(pr,ao).isSome(),unmergeable:ff(pr,ao).isSome(),locked:er}}),lo=()=>{T.set(oa(kt)()),j=T.get().bind(Zt),So(H.get(),ve)},Do=ao=>(ao(),H.set(H.get().concat([ao])),()=>{H.set(Ho(H.get(),Ps=>Ps!==ao))}),Es=(ao,Ps)=>Do(()=>T.get().fold(()=>{ao.setEnabled(!1)},$a=>{ao.setEnabled(!Ps($a)&&w.selection.isEditable())})),Si=(ao,Ps,$a)=>Do(()=>T.get().fold(()=>{ao.setEnabled(!1),ao.setActive(!1)},pr=>{ao.setEnabled(!Ps(pr)&&w.selection.isEditable()),ao.setActive($a(pr))})),ld=ao=>j.exists(Ps=>Ps.locked[ao]),cd=ao=>Es(ao,Ps=>!1),Eu=ao=>Es(ao,Ps=>ie(Ps.element)),$i=ao=>Ps=>Es(Ps,$a=>ie($a.element)||ld(ao)),Vi=ao=>Ps=>Es(Ps,$a=>ie($a.element)||ao().isNone()),hl=(ao,Ps)=>$a=>Es($a,pr=>ie(pr.element)||ao().isNone()||ld(Ps)),Lc=ao=>Es(ao,Ps=>Oe("mergeable")),_p=ao=>Es(ao,Ps=>Oe("unmergeable")),Tu=ao=>Si(ao,ht,Ps=>ct(Ps.element,Rr(w)).exists(pr=>Ba(pr,"caption"))),Mm=(ao,Ps)=>$a=>Si($a,pr=>ie(pr.element),()=>w.queryCommandValue(ao)===Ps),kf=Mm("mceTableRowType","header"),Op=Mm("mceTableColType","th");return w.on("NodeChange ExecCommand TableSelectorChange",lo),{onSetupTable:cd,onSetupCellOrRow:Eu,onSetupColumn:$i,onSetupPasteable:Vi,onSetupPasteableColumn:hl,onSetupMergeable:Lc,onSetupUnmergeable:_p,resetTargets:lo,onSetupTableWithCaption:Tu,onSetupTableRowHeaders:kf,onSetupTableColumnHeaders:Op,targets:T.get}};var Nm=tinymce.util.Tools.resolve("tinymce.FakeClipboard");let id="x-tinymce/dom-table-",Pg=id+"rows",xi=id+"columns",pl=w=>{let T=Nm.read()??[];return hi(T,H=>ut.from(H.getType(w)))},Lg=()=>pl(Pg),zi=()=>pl(xi),h0=w=>T=>{let H=()=>{T.setEnabled(w.selection.isEditable())};return w.on("NodeChange",H),H(),()=>{w.off("NodeChange",H)}},Pc=(w,T)=>{w.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:h0(w),fetch:Xe=>Xe("inserttable | cell row column | advtablesort | tableprops deletetable")});let H=Xe=>()=>w.execCommand(Xe),j=(Xe,kt)=>{w.queryCommandSupported(kt.command)&&w.ui.registry.addButton(Xe,{...kt,onAction:Fs(kt.onAction)?kt.onAction:H(kt.command)})},ie=(Xe,kt)=>{w.queryCommandSupported(kt.command)&&w.ui.registry.addToggleButton(Xe,{...kt,onAction:Fs(kt.onAction)?kt.onAction:H(kt.command)})};j("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:T.onSetupTable}),j("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:T.onSetupTable}),j("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:T.onSetupCellOrRow}),j("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:T.onSetupMergeable}),j("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:T.onSetupUnmergeable}),j("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:T.onSetupCellOrRow}),j("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:T.onSetupCellOrRow}),j("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:T.onSetupCellOrRow}),j("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:T.onSetupCellOrRow}),j("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:T.onSetupColumn("onFirst")}),j("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:T.onSetupColumn("onLast")}),j("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:T.onSetupColumn("onAny")}),j("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:T.onSetupCellOrRow}),j("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:T.onSetupCellOrRow}),j("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:T.onSetupPasteable(Lg)}),j("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:T.onSetupPasteable(Lg)}),j("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:T.onSetupColumn("onAny")}),j("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:T.onSetupColumn("onAny")}),j("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:T.onSetupPasteableColumn(zi,"onFirst")}),j("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:T.onSetupPasteableColumn(zi,"onLast")}),j("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:h0(w)});let Oe=Il(Bl(w));Oe.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:rd(w,Oe,"tableclass",Xe=>w.execCommand("mceTableToggleClass",!1,Xe)),onSetup:T.onSetupTable});let Je=Il(Tg(w));Je.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:rd(w,Je,"tablecellclass",Xe=>w.execCommand("mceTableCellToggleClass",!1,Xe)),onSetup:T.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:rd(w,ii,"tablecellverticalalign",Jt(w,"vertical-align")),onSetup:T.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:rd(w,aa(w),"tablecellborderwidth",Jt(w,"border-width")),onSetup:T.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:rd(w,wm(w),"tablecellborderstyle",Jt(w,"border-style")),onSetup:T.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Xe=>Xe(Ng(w,Cf(w),"background-color")),onSetup:T.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Xe=>Xe(Ng(w,Ag(w),"border-color")),onSetup:T.onSetupCellOrRow})),ie("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:T.onSetupTableWithCaption}),ie("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:xu(w),onSetup:T.onSetupTableRowHeaders}),ie("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Dm(w),onSetup:T.onSetupTableColumnHeaders})},$d=w=>{let T=j=>w.dom.is(j,"table")&&w.getBody().contains(j)&&w.dom.isEditable(j.parentNode),H=Sp(w);H.length>0&&w.ui.registry.addContextToolbar("table",{predicate:T,items:H,scope:"node",position:"node"})},ku=w=>T=>{let H=()=>{T.setEnabled(w.selection.isEditable())};return w.on("NodeChange",H),H(),()=>{w.off("NodeChange",H)}},b0=(w,T)=>{let H=Do=>()=>w.execCommand(Do),j=(Do,Es)=>w.queryCommandSupported(Es.command)?(w.ui.registry.addMenuItem(Do,{...Es,onAction:Fs(Es.onAction)?Es.onAction:H(Es.command)}),!0):!1,ie=(Do,Es)=>{w.queryCommandSupported(Es.command)&&w.ui.registry.addToggleMenuItem(Do,{...Es,onAction:Fs(Es.onAction)?Es.onAction:H(Es.command)})},Oe=Do=>{w.execCommand("mceInsertTable",!1,{rows:Do.numRows,columns:Do.numColumns})},Je=[j("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:T.onSetupCellOrRow}),j("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:T.onSetupCellOrRow}),j("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:T.onSetupCellOrRow}),j("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:T.onSetupCellOrRow}),j("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:T.onSetupCellOrRow}),j("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:T.onSetupCellOrRow}),j("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:T.onSetupPasteable(Lg)}),j("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:T.onSetupPasteable(Lg)})],Xe=[j("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:T.onSetupColumn("onFirst")}),j("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:T.onSetupColumn("onLast")}),j("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:T.onSetupColumn("onAny")}),j("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:T.onSetupColumn("onAny")}),j("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:T.onSetupColumn("onAny")}),j("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:T.onSetupPasteableColumn(zi,"onFirst")}),j("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:T.onSetupPasteableColumn(zi,"onLast")})],kt=[j("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:T.onSetupCellOrRow}),j("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:T.onSetupMergeable}),j("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:T.onSetupUnmergeable})];wp(w)?w.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Oe}],onSetup:ku(w)}):w.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:H("mceInsertTableDialog"),onSetup:ku(w)}),w.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:H("mceInsertTableDialog"),onSetup:ku(w)}),j("tableprops",{text:"Table properties",onSetup:T.onSetupTable,command:"mceTableProps"}),j("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:T.onSetupTable,command:"mceTableDelete"}),vn(Je,!0)&&w.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Ss("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),vn(Xe,!0)&&w.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Ss("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),vn(kt,!0)&&w.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Ss("tablecellprops tablemergecells tablesplitcells")}),w.ui.registry.addContextMenu("table",{update:()=>(T.resetTargets(),T.targets().fold(Ss(""),Do=>Rs(Do.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});let Zt=Il(Bl(w));Zt.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>fa(w,Zt,"tableclass",Do=>w.execCommand("mceTableToggleClass",!1,Do)),onSetup:T.onSetupTable});let lo=Il(Tg(w));lo.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>fa(w,lo,"tablecellclass",Do=>w.execCommand("mceTableCellToggleClass",!1,Do)),onSetup:T.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>fa(w,ii,"tablecellverticalalign",Jt(w,"vertical-align")),onSetup:T.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>fa(w,aa(w),"tablecellborderwidth",Jt(w,"border-width")),onSetup:T.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>fa(w,wm(w),"tablecellborderstyle",Jt(w,"border-style")),onSetup:T.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Ng(w,Cf(w),"background-color"),onSetup:T.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Ng(w,Ag(w),"border-color"),onSetup:T.onSetupCellOrRow})),ie("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:T.onSetupTableWithCaption}),ie("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:xu(w),onSetup:T.onSetupTableRowHeaders}),ie("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Dm(w),onSetup:T.onSetupTableRowHeaders})},Ig=w=>{let T=gs(w);Hi(w),Sf(w),b0(w,T),Pc(w,T),$d(w)};var rv=()=>{Oi.add("table",Ig)};rv()})()});var cz=dX(oz(),1);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',"checkmark-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.8 5a1 1 0 0 0-1.4.3l-5.4 8-2-2.1a1 1 0 1 0-1.5 1.4l3 3a1 1 0 0 0 1.5-.2l6-9a1 1 0 0 0-.2-1.4Z"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',"close-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.7 5.3a1 1 0 0 0-1.3 0L12 10.6 8.6 7.3a1 1 0 0 0-1.3 1.3l3.3 3.4-3.3 3.4a1 1 0 0 0 1.3 1.3l3.4-3.3 3.4 3.3a1 1 0 0 0 1.3-1.3L13.4 12l3.3-3.4a1 1 0 0 0 0-1.3Z"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-gear-properties":'<svg height="24" width="24"><path d="M17.3 14.5a7.1 7.1 0 0 1 1.2.6l1.5-.5 1 1.8-1.2 1V18.7l1.2 1-1 1.6-1.5-.4a4.5 4.5 0 0 1-.6.3 7.1 7.1 0 0 1-.6.3L17 23h-2l-.3-1.5a7.4 7.4 0 0 1-.6-.3 4.5 4.5 0 0 1-.6-.3l-1.5.5-1-1.8 1.2-1a3.9 3.9 0 0 1 0-.6v-.7l-1.2-1 1-1.6 1.5.4a4.5 4.5 0 0 1 1.2-.6L15 13h2zM16 16a2 2 0 0 0-1.5.6A1.9 1.9 0 0 0 14 18c0 .6.2 1 .6 1.4s1 .6 1.5.6 1-.2 1.5-.6.6-.8.6-1.4-.2-1-.6-1.4A2 2 0 0 0 16 16z" fill-rule="evenodd"/><path d="M19 7.6V12h-2V9h-4V5H7v14h3v2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h7.4z"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',feedback:'<svg width="24" height="24"><path fill-rule="evenodd" d="M16 6c1 0 2 1 2 2v5c0 1-1 2-2 2h-3l-4 3v-3H8c-1 0-2-1-2-2V8c0-1 1-2 2-2h8Zm-7 5v1h4v-1H9Zm0-2v1h6V9H9Z"/></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg height="48" width="48"><path d="M8 14a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 34a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-default":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M12 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M16 31h6v6h-6z"/><path d="M16 31h6v6h-6z"/><path d="M18 12h22v4H18zm4 10h18v4H22zm4 10h14v4H26z" opacity=".2"/></svg>',"list-bull-disc":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-square":'<svg height="48" width="48"><path d="M8 21h6v6H8zm0 10h6v6H8zm0-20h6v6H8z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',"suggestededits-badge":'<svg height="24" width="24"><path d="M11 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9.7a6 6 0 0 1-2 .3v9H7V5h4a6 6 0 0 1 0-2z"/><path d="M15 13v-2h-4v2zm-3 2H9v2h3zm-1-8H9v2h2zm4 10v-2h-2v2z"/><path d="M21 4a4 4 0 1 1-8 0 4 4 0 0 1 8 0z" class="tox-icon--badge"/></svg>',suggestededits:'<svg width="24" height="24"><path d="M7 3h7.4L19 7.6V19a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2Zm0 16h10V9h-3V5H7v14Z" clip-rule="evenodd"/><path d="M9 7h2v2H9V7Zm2 4h4v2h-4v-2Zm-2 4h3v2H9v-2Z"/><path d="M9 7h2v2H9V7Zm4 8h2v2h-2v-2Z"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',"upload-from-device":'<svg width="24" height="25"><path d="M11 19a1 1 0 1 0 2 0v-3.2l1.5 1a1 1 0 1 0 1-1.7L12 12.8l-3.5 2.3a1 1 0 0 0 1 1.7l1.5-1V19Z"/><path d="M9.6 4c.3 0 .6.2.8.5l1.3 2h6.7c.7 0 1.4.2 1.8.7.5.5.8 1.2.8 1.9v8.3c0 .7-.3 1.3-.8 1.8a2.6 2.6 0 0 1-1.8.8H16v-2h2.4a.6.6 0 0 0 .4-.2.6.6 0 0 0 .2-.4V9a.6.6 0 0 0-.2-.5.6.6 0 0 0-.4-.1h-7.2a1 1 0 0 1-.8-.5L9 6H5.6a.6.6 0 0 0-.4.2.6.6 0 0 0-.2.4v10.8c0 .1 0 .3.2.4a.6.6 0 0 0 .4.2H8v2H5.6a2.6 2.6 0 0 1-1.8-.8 2.7 2.7 0 0 1-.8-1.8V6.6c0-.7.3-1.3.8-1.8A2.6 2.6 0 0 1 5.6 4h4Z"/></svg>',"upload-from-link":'<svg height="25" width="24"><path d="M11.5 11.8a1 1 0 0 1 1.9-.5 5 5 0 0 1-1.3 4.8l-2.4 2.3A4 4 0 1 1 4 13L5 12a1 1 0 0 1 1.4 1.4l-.7.8A2 2 0 1 0 8.3 17l2.4-2.4a3 3 0 0 0 .8-2.8z"/><path d="M10.1 11.8a1 1 0 0 1-2 .5 5 5 0 0 1 1.4-4.8L12 5.1a4 4 0 0 1 5.5 5.6l-.7.8a1 1 0 0 1-1.5-1.4l.8-.8a2 2 0 1 0-2.7-2.7l-2.4 2.3a3 3 0 0 0-.8 3zm5.7 7.2a1 1 0 1 0 2 0v-3l1.4 1.1a1 1 0 0 0 1.2-1.5l-3.6-2.9-3.6 2.9a1 1 0 0 0 1.2 1.5l1.4-1z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){"use strict";let Oi=Object.getPrototypeOf,ol=(o,r,i)=>!!i(o,r.prototype)||o.constructor?.name===r.name,Di=o=>r=>(i=>{let l=typeof i;return i===null?"null":l==="object"&&Array.isArray(i)?"array":l==="object"&&ol(i,String,((u,m)=>m.isPrototypeOf(u)))?"string":l})(r)===o,Ka=o=>r=>typeof r===o,vr=o=>r=>o===r,Wn=Di("string"),nr=Di("object"),Cs=o=>((r,i)=>nr(r)&&ol(r,i,((l,u)=>Oi(l)===u)))(o,Object),lr=Di("array"),To=vr(null),Ar=Ka("boolean"),Hr=vr(void 0),Fs=o=>o==null,$t=o=>!Fs(o),jt=Ka("function"),Yn=Ka("number"),Ss=(o,r)=>{if(lr(o)){for(let i=0,l=o.length;i<l;++i)if(!r(o[i]))return!1;return!0}return!1},Qe=()=>{},pt=o=>()=>o(),At=(o,r)=>(...i)=>o(r.apply(null,i)),ve=o=>()=>o,ht=o=>o,me=(o,r)=>o===r;function ut(o,...r){return(...i)=>{let l=r.concat(i);return o.apply(null,l)}}let ns=o=>r=>!o(r),os=o=>()=>{throw new Error(o)},Ve=o=>o(),zt=ve(!1),vn=ve(!0);class _{tag;value;static singletonNone=new _(!1);constructor(r,i){this.tag=r,this.value=i}static some(r){return new _(!0,r)}static none(){return _.singletonNone}fold(r,i){return this.tag?i(this.value):r()}isSome(){return this.tag}isNone(){return!this.tag}map(r){return this.tag?_.some(r(this.value)):_.none()}bind(r){return this.tag?r(this.value):_.none()}exists(r){return this.tag&&r(this.value)}forall(r){return!this.tag||r(this.value)}filter(r){return!this.tag||r(this.value)?this:_.none()}getOr(r){return this.tag?this.value:r}or(r){return this.tag?this:r}getOrThunk(r){return this.tag?this.value:r()}orThunk(r){return this.tag?this:r()}getOrDie(r){if(this.tag)return this.value;throw new Error(r??"Called getOrDie on None")}static from(r){return $t(r)?_.some(r):_.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(r){this.tag&&r(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}let wt=Array.prototype.slice,ls=Array.prototype.indexOf,So=Array.prototype.push,lt=(o,r)=>ls.call(o,r),Ln=(o,r)=>lt(o,r)>-1,Ho=(o,r)=>{for(let i=0,l=o.length;i<l;i++)if(r(o[i],i))return!0;return!1},_t=(o,r)=>{let i=[];for(let l=0;l<o;l++)i.push(r(l));return i},Ya=(o,r)=>{let i=[];for(let l=0;l<o.length;l+=r){let u=wt.call(o,l,l+r);i.push(u)}return i},it=(o,r)=>{let i=o.length,l=new Array(i);for(let u=0;u<i;u++){let m=o[u];l[u]=r(m,u)}return l},Ot=(o,r)=>{for(let i=0,l=o.length;i<l;i++)r(o[i],i)},Xa=(o,r)=>{let i=[],l=[];for(let u=0,m=o.length;u<m;u++){let f=o[u];(r(f,u)?i:l).push(f)}return{pass:i,fail:l}},pn=(o,r)=>{let i=[];for(let l=0,u=o.length;l<u;l++){let m=o[l];r(m,l)&&i.push(m)}return i},so=(o,r,i)=>(((l,u)=>{for(let m=l.length-1;m>=0;m--)u(l[m],m)})(o,((l,u)=>{i=r(i,l,u)})),i),L=(o,r,i)=>(Ot(o,((l,u)=>{i=r(i,l,u)})),i),kn=(o,r)=>((i,l,u)=>{for(let m=0,f=i.length;m<f;m++){let v=i[m];if(l(v,m))return _.some(v);if(u(v,m))break}return _.none()})(o,r,zt),Ja=(o,r)=>{for(let i=0,l=o.length;i<l;i++)if(r(o[i],i))return _.some(i);return _.none()},Vs=o=>{let r=[];for(let i=0,l=o.length;i<l;++i){if(!lr(o[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+o);So.apply(r,o[i])}return r},vo=(o,r)=>Vs(it(o,r)),hi=(o,r)=>{for(let i=0,l=o.length;i<l;++i)if(r(o[i],i)!==!0)return!1;return!0},In=o=>{let r=wt.call(o,0);return r.reverse(),r},ro=(o,r)=>pn(o,(i=>!Ln(r,i))),Kt=(o,r)=>{let i={};for(let l=0,u=o.length;l<u;l++){let m=o[l];i[String(m)]=r(m,l)}return i},Pe=o=>[o],Ri=(o,r)=>{let i=wt.call(o,0);return i.sort(r),i},cs=(o,r)=>r>=0&&r<o.length?_.some(o[r]):_.none(),Lt=o=>cs(o,0),Ge=o=>cs(o,o.length-1),dt=jt(Array.from)?Array.from:o=>wt.call(o),Mt=(o,r)=>{for(let i=0;i<o.length;i++){let l=r(o[i],i);if(l.isSome())return l}return _.none()},rn=Object.keys,xn=Object.hasOwnProperty,Ao=(o,r)=>{let i=rn(o);for(let l=0,u=i.length;l<u;l++){let m=i[l];r(o[m],m)}},_s=(o,r)=>lu(o,((i,l)=>({k:l,v:r(i,l)}))),lu=(o,r)=>{let i={};return Ao(o,((l,u)=>{let m=r(l,u);i[m.k]=m.v})),i},cr=o=>(r,i)=>{o[i]=r},Qa=(o,r,i,l)=>{Ao(o,((u,m)=>{(r(u,m)?i:l)(u,m)}))},kl=(o,r)=>{let i={};return Qa(o,r,cr(i),Qe),i},Ni=(o,r)=>{let i=[];return Ao(o,((l,u)=>{i.push(r(l,u))})),i},El=(o,r)=>{let i=rn(o);for(let l=0,u=i.length;l<u;l++){let m=i[l],f=o[m];if(r(f,m,o))return _.some(f)}return _.none()},Os=o=>Ni(o,ht),qt=(o,r)=>Sn(o,r)?_.from(o[r]):_.none(),Sn=(o,r)=>xn.call(o,r),Ds=(o,r)=>Sn(o,r)&&o[r]!==void 0&&o[r]!==null,ks=o=>{if(!lr(o))throw new Error("cases must be an array");if(o.length===0)throw new Error("there must be at least one case");let r=[],i={};return Ot(o,((l,u)=>{let m=rn(l);if(m.length!==1)throw new Error("one and only one name per case");let f=m[0],v=l[f];if(i[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!lr(v))throw new Error("case arguments must be an array");r.push(f),i[f]=(...y)=>{let x=y.length;if(x!==v.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+v.length+" ("+v+"), got "+x);return{fold:(...A)=>{if(A.length!==o.length)throw new Error("Wrong number of arguments to fold. Expected "+o.length+", got "+A.length);return A[u].apply(null,y)},match:A=>{let E=rn(A);if(r.length!==E.length)throw new Error("Wrong number of arguments to match. Expected: "+r.join(",")+`
Actual: `+E.join(","));if(!hi(r,(O=>Ln(E,O))))throw new Error("Not all branches were specified when using match. Specified: "+E.join(", ")+`
Required: `+r.join(", "));return A[f].apply(null,y)},log:A=>{console.log(A,{constructors:r,constructor:f,params:y})}}}})),i},Rt=o=>{let r=o;return{get:()=>r,set:i=>{r=i}}},na=o=>{let r=_.none(),i=[],l=f=>{u()?m(f):i.push(f)},u=()=>r.isSome(),m=f=>{r.each((v=>{setTimeout((()=>{f(v)}),0)}))};return o((f=>{u()||(r=_.some(f),Ot(i,m),i=[])})),{get:l,map:f=>na((v=>{l((y=>{v(f(y))}))})),isReady:u}},zr={nu:na,pure:o=>na((r=>{r(o)}))},qu=o=>{setTimeout((()=>{throw o}),0)},An=o=>{let r=i=>{o().then(i,qu)};return{map:i=>An((()=>o().then(i))),bind:i=>An((()=>o().then((l=>i(l).toPromise())))),anonBind:i=>An((()=>o().then((()=>i.toPromise())))),toLazy:()=>zr.nu(r),toCached:()=>{let i=null;return An((()=>(i===null&&(i=o()),i)))},toPromise:o,get:r}},$r=o=>An((()=>new Promise(o))),oa=o=>An((()=>Promise.resolve(o))),Tl=o=>{let r=m=>m(o),i=ve(o),l=()=>u,u={tag:!0,inner:o,fold:(m,f)=>f(o),isValue:vn,isError:zt,map:m=>Nn.value(m(o)),mapError:l,bind:r,exists:r,forall:r,getOr:i,or:l,getOrThunk:i,orThunk:l,getOrDie:i,each:m=>{m(o)},toOptional:()=>_.some(o)};return u},Al=o=>{let r=()=>i,i={tag:!1,inner:o,fold:(l,u)=>l(o),isValue:zt,isError:vn,map:r,mapError:l=>Nn.error(l(o)),bind:r,exists:zt,forall:vn,getOr:ht,or:ht,getOrThunk:Ve,orThunk:Ve,getOrDie:os(String(o)),each:Qe,toOptional:_.none};return i},Nn={value:Tl,error:Al,fromOption:(o,r)=>o.fold((()=>Al(r)),Tl)},us=o=>({...o,toCached:()=>us(o.toCached()),bindFuture:r=>us(o.bind((i=>i.fold((l=>oa(Nn.error(l))),(l=>r(l)))))),bindResult:r=>us(o.map((i=>i.bind(r)))),mapResult:r=>us(o.map((i=>i.map(r)))),mapError:r=>us(o.map((i=>i.mapError(r)))),foldResult:(r,i)=>o.map((l=>l.fold(r,i))),withTimeout:(r,i)=>us($r((l=>{let u=!1,m=setTimeout((()=>{u=!0,l(Nn.error(i()))}),r);o.get((f=>{u||(clearTimeout(m),l(f))}))})))}),Vr=o=>us($r(o)),eo=typeof window<"u"?window:Function("return this;")(),_n=(o,r,i,l)=>{let u=o+r;return u>l?i:u<i?l:u},Yt=(o,r,i)=>Math.min(Math.max(o,r),i),ei=0,we=o=>{let r=new Date().getTime(),i=Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295*1e9);return ei++,o+"_"+i+ei+String(r)},mg=o=>(...r)=>{if(r.length===0)throw new Error("Can't merge zero objects");let i={};for(let l=0;l<r.length;l++){let u=r[l];for(let m in u)Sn(u,m)&&(i[m]=o(i[m],u[m]))}return i},Xn=mg(((o,r)=>Cs(o)&&Cs(r)?Xn(o,r):r)),Us=mg(((o,r)=>r)),Da=(o,r,i=me)=>o.exists((l=>i(l,r))),Mi=o=>{let r=[],i=l=>{r.push(l)};for(let l=0;l<o.length;l++)o[l].each(i);return r},Ra=(o,r,i)=>o.isSome()&&r.isSome()?_.some(i(o.getOrDie(),r.getOrDie())):_.none(),or=(o,r)=>o!=null?_.some(r(o)):_.none(),Rs=(o,r)=>o?_.some(r):_.none(),gm=(o,r)=>((i,l)=>{let u=l??eo;for(let m=0;m<i.length&&u!=null;++m)u=u[i[m]];return u})(o.split("."),r);ks([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);let _l=o=>{let r=Rt(_.none()),i=()=>r.get().each(o);return{clear:()=>{i(),r.set(_.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:l=>{i(),r.set(_.some(l))}}},ur=()=>_l((o=>o.unbind())),to=()=>{let o=_l(Qe);return{...o,on:r=>o.get().each(r)}},cu=(o,r,i)=>r===""||o.length>=r.length&&o.substr(i,i+r.length)===r,yo=(o,r)=>uu(o,r)?((i,l)=>i.substring(l))(o,r.length):o,_r=(o,r,i=0,l)=>{let u=o.indexOf(r,i);return u!==-1&&(!!Hr(l)||u+r.length<=l)},uu=(o,r)=>cu(o,r,0),bc=(o,r)=>cu(o,r,o.length-r.length),Gu=(Ku=/^\s+|\s+$/g,o=>o.replace(Ku,"")),ti=o=>o.length>0,Ur=o=>!ti(o),sl=(o,r)=>{let i=null,l=()=>{To(i)||(clearTimeout(i),i=null)};return{cancel:l,throttle:(...u)=>{l(),i=setTimeout((()=>{i=null,o.apply(null,u)}),r)}}},dr=o=>{let r,i=!1;return(...l)=>(i||(i=!0,r=o.apply(null,l)),r)},Ol=o=>{if(o==null)throw new Error("Node cannot be null or undefined");return{dom:o}},sr=(o,r)=>{let i=(r||document).createElement("div");if(i.innerHTML=o,!i.hasChildNodes()||i.childNodes.length>1){let l="HTML does not have a single root node";throw console.error(l,o),new Error(l)}return Ol(i.childNodes[0])},rl=(o,r)=>{let i=(r||document).createElement(o);return Ol(i)},fm=(o,r)=>{let i=(r||document).createTextNode(o);return Ol(i)},bt=Ol,pm=(o,r,i)=>{let l=o.document.createRange();var u;return u=l,r.fold((m=>{u.setStartBefore(m.dom)}),((m,f)=>{u.setStart(m.dom,f)}),(m=>{u.setStartAfter(m.dom)})),((m,f)=>{f.fold((v=>{m.setEndBefore(v.dom)}),((v,y)=>{m.setEnd(v.dom,y)}),(v=>{m.setEndAfter(v.dom)}))})(l,i),l},Od=(o,r,i,l,u)=>{let m=o.document.createRange();return m.setStart(r.dom,i),m.setEnd(l.dom,u),m},du=o=>({left:o.left,top:o.top,right:o.right,bottom:o.bottom,width:o.width,height:o.height}),mu=ks([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),gg=(o,r,i)=>r(bt(i.startContainer),i.startOffset,bt(i.endContainer),i.endOffset),Ca=(o,r)=>((i,l)=>{let u=((m,f)=>f.match({domRange:v=>({ltr:ve(v),rtl:_.none}),relative:(v,y)=>({ltr:dr((()=>pm(m,v,y))),rtl:dr((()=>_.some(pm(m,y,v))))}),exact:(v,y,x,A)=>({ltr:dr((()=>Od(m,v,y,x,A))),rtl:dr((()=>_.some(Od(m,x,A,v,y))))})}))(i,l);return((m,f)=>{let v=f.ltr();return v.collapsed?f.rtl().filter((y=>y.collapsed===!1)).map((y=>mu.rtl(bt(y.endContainer),y.endOffset,bt(y.startContainer),y.startOffset))).getOrThunk((()=>gg(0,mu.ltr,v))):gg(0,mu.ltr,v)})(0,u)})(o,r).match({ltr:(i,l,u,m)=>{let f=o.document.createRange();return f.setStart(i.dom,l),f.setEnd(u.dom,m),f},rtl:(i,l,u,m)=>{let f=o.document.createRange();return f.setStart(u.dom,m),f.setEnd(i.dom,l),f}});var Ku;mu.ltr,mu.rtl;let Xl=(o,r)=>{let i=o.dom;if(i.nodeType!==1)return!1;{let l=i;if(l.matches!==void 0)return l.matches(r);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(r);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(r);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")}},Dd=o=>o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11||o.childElementCount===0,mr=(o,r)=>{let i=r===void 0?document:r.dom;return Dd(i)?_.none():_.from(i.querySelector(o)).map(bt)},wn=(o,r)=>o.dom===r.dom,vc=(o,r)=>{let i=o.dom,l=r.dom;return i!==l&&i.contains(l)},yc=()=>wa(0,0),wa=(o,r)=>({major:o,minor:r}),Jl={nu:wa,detect:(o,r)=>{let i=String(r).toLowerCase();return o.length===0?yc():((l,u)=>{let m=((v,y)=>{for(let x=0;x<v.length;x++){let A=v[x];if(A.test(y))return A}})(l,u);if(!m)return{major:0,minor:0};let f=v=>Number(u.replace(m,"$"+v));return wa(f(1),f(2))})(o,i)},unknown:yc},fg=(o,r)=>{let i=String(r).toLowerCase();return kn(o,(l=>l.search(i)))},Na=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,xa=o=>r=>_r(r,o),Rd=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:o=>_r(o,"edge/")&&_r(o,"chrome")&&_r(o,"safari")&&_r(o,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Na],search:o=>_r(o,"chrome")&&!_r(o,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:o=>_r(o,"msie")||_r(o,"trident")},{name:"Opera",versionRegexes:[Na,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:xa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:xa("firefox")},{name:"Safari",versionRegexes:[Na,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:o=>(_r(o,"safari")||_r(o,"mobile/"))&&_r(o,"applewebkit")}],Cc=[{name:"Windows",search:xa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:o=>_r(o,"iphone")||_r(o,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:xa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:xa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:xa("linux"),versionRegexes:[]},{name:"Solaris",search:xa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:xa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:xa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Dl={browsers:ve(Rd),oses:ve(Cc)},ps="Edge",ni="Chromium",Rl="Opera",ws="Firefox",Yu="Safari",js=o=>{let r=o.current,i=o.version,l=u=>()=>r===u;return{current:r,version:i,isEdge:l(ps),isChromium:l(ni),isIE:l("IE"),isOpera:l(Rl),isFirefox:l(ws),isSafari:l(Yu)}},Bi=()=>js({current:void 0,version:Jl.unknown()}),pg=js,Nd=(ve(ps),ve(ni),ve("IE"),ve(Rl),ve(ws),ve(Yu),"Windows"),yr="Android",Xu="Linux",wc="macOS",al="Solaris",xc="FreeBSD",hg="ChromeOS",Sc=o=>{let r=o.current,i=o.version,l=u=>()=>r===u;return{current:r,version:i,isWindows:l(Nd),isiOS:l("iOS"),isAndroid:l(yr),isMacOS:l(wc),isLinux:l(Xu),isSolaris:l(al),isFreeBSD:l(xc),isChromeOS:l(hg)}},Ju=()=>Sc({current:void 0,version:Jl.unknown()}),Or=Sc,kc=(ve(Nd),ve("iOS"),ve(yr),ve(Xu),ve(wc),ve(al),ve(xc),ve(hg),o=>window.matchMedia(o).matches),Qu=dr((()=>((o,r,i)=>{let l=Dl.browsers(),u=Dl.oses(),m=r.bind((y=>((x,A)=>Mt(A.brands,(E=>{let O=E.brand.toLowerCase();return kn(x,(B=>O===B.brand?.toLowerCase())).map((B=>({current:B.name,version:Jl.nu(parseInt(E.version,10),0)})))})))(l,y))).orThunk((()=>((y,x)=>fg(y,x).map((A=>{let E=Jl.detect(A.versionRegexes,x);return{current:A.name,version:E}})))(l,o))).fold(Bi,pg),f=((y,x)=>fg(y,x).map((A=>{let E=Jl.detect(A.versionRegexes,x);return{current:A.name,version:E}})))(u,o).fold(Ju,Or),v=((y,x,A,E)=>{let O=y.isiOS()&&/ipad/i.test(A)===!0,B=y.isiOS()&&!O,I=y.isiOS()||y.isAndroid(),X=I||E("(pointer:coarse)"),W=O||!B&&I&&E("(min-device-width:768px)"),K=B||I&&!W,V=x.isSafari()&&y.isiOS()&&/safari/i.test(A)===!1,U=!K&&!W&&!V;return{isiPad:ve(O),isiPhone:ve(B),isTablet:ve(W),isPhone:ve(K),isTouch:ve(X),isAndroid:y.isAndroid,isiOS:y.isiOS,isWebView:ve(V),isDesktop:ve(U)}})(f,m,o,i);return{browser:m,os:f,deviceType:v}})(window.navigator.userAgent,_.from(window.navigator.userAgentData),kc))),bi=()=>Qu(),Md=Object.getPrototypeOf,Ql=o=>{let r=gm("ownerDocument.defaultView",o);return nr(o)&&((i=>((l,u)=>{let m=((f,v)=>gm(f,v))(l,u);if(m==null)throw new Error(l+" not available on this browser");return m})("HTMLElement",i))(r).prototype.isPrototypeOf(o)||/^HTML\w*Element$/.test(Md(o).constructor.name))},Ma=o=>o.dom.nodeName.toLowerCase(),il=o=>r=>(i=>i.dom.nodeType)(r)===o,Pi=o=>Dr(o)&&Ql(o.dom),Dr=il(1),oi=il(3),Ec=il(9),Tc=il(11),_o=o=>r=>Dr(r)&&Ma(r)===o,sa=o=>bt(o.dom.ownerDocument),ed=o=>Ec(o)?o:sa(o),Ba=o=>bt(ed(o).dom.documentElement),Li=o=>bt(ed(o).dom.defaultView),zo=o=>_.from(o.dom.parentNode).map(bt),Rr=o=>_.from(o.dom.parentElement).map(bt),ll=o=>_.from(o.dom.offsetParent).map(bt),z=o=>_.from(o.dom.previousSibling).map(bt),te=o=>_.from(o.dom.nextSibling).map(bt),fe=o=>it(o.dom.childNodes,bt),Be=(o,r)=>{let i=o.dom.childNodes;return _.from(i[r]).map(bt)},ot=o=>Be(o,0),Bt=(o,r)=>({element:o,offset:r}),Mn=(o,r)=>{let i=fe(o);return i.length>0&&r<i.length?Bt(i[r],0):Bt(o,r)},mo=o=>Tc(o)&&$t(o.dom.host),yn=o=>bt(o.dom.getRootNode()),Ns=o=>mo(o)?o:bt(ed(o).dom.body),Go=o=>{let r=yn(o);return mo(r)?_.some(r):_.none()},ma=o=>bt(o.dom.host),gu=o=>{let r=bt((m=>{if($t(m.target)){let f=bt(m.target);if(Dr(f)&&(v=>$t(v.dom.shadowRoot))(f)&&m.composed&&m.composedPath){let v=m.composedPath();if(v)return Lt(v)}}return _.from(m.target)})(o).getOr(o.target)),i=()=>o.stopPropagation(),l=()=>o.preventDefault(),u=At(l,i);return((m,f,v,y,x,A,E)=>({target:m,x:f,y:v,stop:y,prevent:x,kill:A,raw:E}))(r,o.clientX,o.clientY,i,l,u,o)},Ms=(o,r,i,l,u)=>{let m=((f,v)=>y=>{f(y)&&v(gu(y))})(i,l);return o.dom.addEventListener(r,m,u),{unbind:ut(Ac,o,r,m,u)}},Ac=(o,r,i,l)=>{o.dom.removeEventListener(r,i,l)},ec=vn,G=(o,r,i)=>((l,u,m,f)=>Ms(l,u,m,f,!1))(o,r,ec,i),se=(o,r,i)=>((l,u,m,f)=>Ms(l,u,m,f,!0))(o,r,ec,i),xe=gu,je=()=>bt(document),ct=(o,r=!1)=>o.dom.focus({preventScroll:r}),Gn=o=>o.dom.blur(),No=o=>{let r=yn(o).dom;return o.dom===r.activeElement},qs=(o=je())=>_.from(o.dom.activeElement).map(bt),Mo=o=>qs(yn(o)).filter((r=>o.dom.contains(r.dom))),Gs=(o,r)=>{zo(o).each((i=>{i.dom.insertBefore(r.dom,o.dom)}))},Nl=(o,r)=>{te(o).fold((()=>{zo(o).each((i=>{Ks(i,r)}))}),(i=>{Gs(i,r)}))},ra=(o,r)=>{ot(o).fold((()=>{Ks(o,r)}),(i=>{o.dom.insertBefore(r.dom,i.dom)}))},Ks=(o,r)=>{o.dom.appendChild(r.dom)},Cr=(o,r)=>{Ot(r,(i=>{Ks(o,i)}))},cl=(o,r,i)=>{if(!(Wn(i)||Ar(i)||Yn(i)))throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",i,":: Element ",o),new Error("Attribute value was not simple");o.setAttribute(r,i+"")},en=(o,r,i)=>{cl(o.dom,r,i)},En=(o,r)=>{let i=o.dom;Ao(r,((l,u)=>{cl(i,u,l)}))},ds=(o,r)=>{let i=o.dom.getAttribute(r);return i===null?void 0:i},Zs=(o,r)=>_.from(ds(o,r)),Oh=(o,r)=>{let i=o.dom;return!(!i||!i.hasAttribute)&&i.hasAttribute(r)},Bs=(o,r)=>{o.dom.removeAttribute(r)},yp=o=>{o.dom.textContent="",Ot(fe(o),(r=>{_c(r)}))},_c=o=>{let r=o.dom;r.parentNode!==null&&r.parentNode.removeChild(r)},Dh=(o,r)=>bt(o.dom.cloneNode(r)),gf=o=>o.dom.innerHTML,bg=(o,r)=>{let i=sa(o).dom,l=bt(i.createDocumentFragment()),u=((m,f)=>{let v=(f||document).createElement("div");return v.innerHTML=m,fe(bt(v))})(r,i);Cr(l,u),yp(o),Ks(o,l)},vg=o=>new Promise(((r,i)=>{let l=()=>{m(),r(o)},u=[G(o,"load",l),G(o,"error",(()=>{m(),i("Unable to load data from image: "+o.dom.src)}))],m=()=>Ot(u,(f=>f.unbind()));o.dom.complete&&l()})),et=o=>o.style!==void 0&&jt(o.style.getPropertyValue),gr=o=>{let r=oi(o)?o.dom.parentNode:o.dom;if(r==null||r.ownerDocument===null)return!1;let i=r.ownerDocument;return Go(bt(r)).fold((()=>i.body.contains(r)),(l=gr,u=ma,m=>l(u(m))));var l,u},Ys=()=>m0(bt(document)),m0=o=>{let r=o.dom.body;if(r==null)throw new Error("Body is not available yet");return bt(r)},hm=(o,r,i)=>{if(!Wn(i))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",i,":: Element ",o),new Error("CSS value must be a string: "+i);et(o)&&o.style.setProperty(r,i)},yg=(o,r)=>{et(o)&&o.style.removeProperty(r)},q=(o,r,i)=>{let l=o.dom;hm(l,r,i)},Bd=(o,r)=>{let i=o.dom;Ao(r,((l,u)=>{hm(i,u,l)}))},td=(o,r)=>{let i=o.dom;Ao(r,((l,u)=>{l.fold((()=>{yg(i,u)}),(m=>{hm(i,u,m)}))}))},ga=(o,r)=>{let i=o.dom,l=window.getComputedStyle(i).getPropertyValue(r);return l!==""||gr(o)?l:ff(i,r)},ff=(o,r)=>et(o)?o.style.getPropertyValue(r):"",Hs=(o,r)=>{let i=o.dom,l=ff(i,r);return _.from(l).filter((u=>u.length>0))},bm=o=>{let r={},i=o.dom;if(et(i))for(let l=0;l<i.style.length;l++){let u=i.style.item(l);r[u]=i.style[u]}return r},Oc=(o,r,i)=>{let l=rl(o);return q(l,r,i),Hs(l,r).isSome()},Un=(o,r)=>{let i=o.dom;yg(i,r),Da(Zs(o,"style").map(Gu),"")&&Bs(o,"style")},pf=o=>o.dom.offsetWidth,Cg=(o,r)=>{let i=u=>{let m=r(u);if(m<=0||m===null){let f=ga(u,o);return parseFloat(f)||0}return m},l=(u,m)=>L(m,((f,v)=>{let y=ga(u,v),x=y===void 0?0:parseInt(y,10);return isNaN(x)?f:f+x}),0);return{set:(u,m)=>{if(!Yn(m)&&!m.match(/^[0-9]+$/))throw new Error(o+".set accepts only positive integer values. Value was "+m);let f=u.dom;et(f)&&(f.style[o]=m+"px")},get:i,getOuter:i,aggregate:l,max:(u,m,f)=>{let v=l(u,f);return m>v?m-v:0}}},wg=Cg("height",(o=>{let r=o.dom;return gr(o)?r.getBoundingClientRect().height:r.offsetHeight})),Nr=o=>wg.get(o),Ml=o=>wg.getOuter(o),vm=o=>!(r=>r.offsetWidth<=0&&r.offsetHeight<=0)(o.dom),Pa=Cg("width",(o=>{let r=o.dom;return gr(o)?r.getBoundingClientRect().width:r.offsetWidth})),hs=o=>Pa.get(o),fu=o=>Pa.getOuter(o),Pd=(o,r)=>({left:o,top:r,translate:(i,l)=>Pd(o+i,r+l)}),Qt=Pd,La=(o,r)=>o!==void 0?o:r!==void 0?r:0,Ii=o=>{let r=o.dom.ownerDocument,i=r.body,l=r.defaultView,u=r.documentElement;if(i===o.dom)return Qt(i.offsetLeft,i.offsetTop);let m=La(l?.pageYOffset,u.scrollTop),f=La(l?.pageXOffset,u.scrollLeft),v=La(u.clientTop,i.clientTop),y=La(u.clientLeft,i.clientLeft);return ym(o).translate(f-y,m-v)},ym=o=>{let r=o.dom,i=r.ownerDocument.body;return i===r?Qt(i.offsetLeft,i.offsetTop):gr(o)?(l=>{let u=l.getBoundingClientRect();return Qt(u.left,u.top)})(r):Qt(0,0)},fn=o=>{let r=o!==void 0?o.dom:document,i=r.body.scrollLeft||r.documentElement.scrollLeft,l=r.body.scrollTop||r.documentElement.scrollTop;return Qt(i,l)},hf=(o,r,i)=>{let l=(i!==void 0?i.dom:document).defaultView;l&&l.scrollTo(o,r)},bf=(o=>{let r=i=>o(i)?_.from(i.dom.nodeValue):_.none();return{get:i=>{if(!o(i))throw new Error("Can only get text value of a text node");return r(i).getOr("")},getOption:r,set:(i,l)=>{if(!o(i))throw new Error("Can only set raw text value of a text node");i.dom.nodeValue=l}}})(oi),xg=(o,r)=>i=>Cm(i)==="rtl"?r:o,Cm=o=>ga(o,"direction")==="rtl"?"rtl":"ltr",Xs=(o,r)=>{let i=ds(o,r);return i===void 0||i===""?[]:i.split(" ")};var Sa=(o,r,i,l,u)=>o(i,l)?_.some(i):jt(u)&&u(i)?_.none():r(i,l,u);let g0=(o,r,i)=>{let l=o.dom,u=jt(i)?i:zt;for(;l.parentNode;){l=l.parentNode;let m=bt(l);if(r(m))return _.some(m);if(u(m))break}return _.none()},f0=(o,r,i)=>Sa(((l,u)=>u(l)),g0,o,r,i),pu=(o,r)=>kn(o.dom.childNodes,(i=>r(bt(i)))).map(bt),Fi=(o,r,i)=>g0(o,(l=>Xl(l,r)),i),hu=(o,r)=>(i=>{let l=i.dom;return l.parentNode?pu(bt(l.parentNode),(u=>!wn(i,u)&&Xl(u,r))):_.none()})(o),Cp=(o,r)=>pu(o,(i=>Xl(i,r))),xo=(o,r)=>mr(r,o),Mr=(o,r,i)=>Sa(((l,u)=>Xl(l,u)),Fi,o,r,i),Ld=(o,r)=>{o.dom.checked=r},bu=o=>o.dom.checked,si=o=>o.dom.classList!==void 0,ul=o=>Xs(o,"class"),tc=(o,r)=>((i,l,u)=>{let m=Xs(i,l).concat([u]);return en(i,l,m.join(" ")),!0})(o,"class",r),Sg=(o,r)=>((i,l,u)=>{let m=pn(Xs(i,l),(f=>f!==u));return m.length>0?en(i,l,m.join(" ")):Bs(i,l),!1})(o,"class",r),bs=(o,r)=>{si(o)?o.dom.classList.add(r):tc(o,r)},rr=o=>{(si(o)?o.dom.classList:ul(o)).length===0&&Bs(o,"class")},$o=(o,r)=>{si(o)?o.dom.classList.remove(r):Sg(o,r),rr(o)},Js=(o,r)=>si(o)&&o.dom.classList.contains(r),dl=(o,r)=>{Ot(r,(i=>{bs(o,i)}))},ka=(o,r)=>{Ot(r,(i=>{$o(o,i)}))},vf=o=>si(o)?(r=>{let i=r.dom.classList,l=new Array(i.length);for(let u=0;u<i.length;u++){let m=i.item(u);m!==null&&(l[u]=m)}return l})(o):ul(o),Bo=o=>o.dom.value,Hi=(o,r)=>{if(r===void 0)throw new Error("Value.set was undefined");o.dom.value=r},kg=(o,r,i)=>pn(((l,u)=>{let m=jt(u)?u:zt,f=l.dom,v=[];for(;f.parentNode!==null&&f.parentNode!==void 0;){let y=f.parentNode,x=bt(y);if(v.push(x),m(x)===!0)break;f=y}return v})(o,i),r),aa=(o,r)=>((i,l)=>{let u=l===void 0?document:l.dom;return Dd(u)?[]:it(u.querySelectorAll(i),bt)})(r,o),wm=(o,r,i)=>f0(o,r,i).isSome(),xm=(o,r,i)=>Mr(o,r,i).isSome(),Eg=o=>jt(o)?o:zt,nd=(o,r,i)=>{let l=o.dom,u=Eg(i);for(;l.parentNode;){l=l.parentNode;let m=bt(l),f=r(m);if(f.isSome())return f;if(u(m))break}return _.none()},yf=(o,r,i)=>{let l=r(o),u=Eg(i);return l.orThunk((()=>u(o)?_.none():nd(o,r,u)))},wp=(o,r,i,l)=>({start:o,soffset:r,finish:i,foffset:l}),vu=ks([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Tg=(vu.before,vu.on,vu.after,o=>o.fold(ht,ht,ht)),xp=ks([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Bl={domRange:xp.domRange,relative:xp.relative,exact:xp.exact,exactFromRange:o=>xp.exact(o.start,o.soffset,o.finish,o.foffset),getWin:o=>{let r=(i=>i.match({domRange:l=>bt(l.startContainer),relative:(l,u)=>Tg(l),exact:(l,u,m,f)=>l}))(o);return Li(r)},range:wp},Sp=o=>{if(o.rangeCount>0){let r=o.getRangeAt(0),i=o.getRangeAt(o.rangeCount-1);return _.some(wp(bt(r.startContainer),r.startOffset,bt(i.endContainer),i.endOffset))}return _.none()},Cf=o=>{if(o.anchorNode===null||o.focusNode===null)return Sp(o);{let r=bt(o.anchorNode),i=bt(o.focusNode);return((l,u,m,f)=>{let v=((x,A,E,O)=>{let B=sa(x).dom.createRange();return B.setStart(x.dom,A),B.setEnd(E.dom,O),B})(l,u,m,f),y=wn(l,m)&&u===f;return v.collapsed&&!y})(r,o.anchorOffset,i,o.focusOffset)?_.some(wp(r,o.anchorOffset,i,o.focusOffset)):Sp(o)}},Ag=(o,r)=>(i=>{let l=i.getClientRects(),u=l.length>0?l[0]:i.getBoundingClientRect();return u.width>0||u.height>0?_.some(u).map(du):_.none()})(Ca(o,r)),ia={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},_g=(()=>{let o="[0-9]+",r="[eE][+-]?"+o,i=u=>`(?:${u})?`,l=["Infinity",o+"\\."+i(o)+i(r),"\\."+o+i(r),o+i(r)].join("|");return new RegExp(`^([+-]?(?:${l}))(.*)$`)})(),ri=(o,r)=>_.from(_g.exec(o)).bind((i=>{let l=Number(i[1]),u=i[2];return((m,f)=>Ho(f,(v=>Ho(ia[v],(y=>m===y)))))(u,r)?_.some({value:l,unit:u}):_.none()})),Og=(o,r,i,l)=>({x:o,y:r,width:i,height:l,right:o+i,bottom:r+l}),Zr=o=>{let r=o===void 0?window:o,i=r.document,l=fn(bt(i));return(u=>{let m=u===void 0?window:u;return bi().browser.isFirefox()?_.none():_.from(m.visualViewport)})(r).fold((()=>{let u=r.document.documentElement,m=u.clientWidth,f=u.clientHeight;return Og(l.left,l.top,m,f)}),(u=>Og(Math.max(u.pageLeft,l.left),Math.max(u.pageTop,l.top),u.width,u.height)))},Pl=(o,r)=>o.view(r).fold(ve([]),(i=>{let l=o.owner(i),u=Pl(o,l);return[i].concat(u)}));var od=Object.freeze({__proto__:null,view:o=>(o.dom===document?_.none():_.from(o.dom.defaultView?.frameElement)).map(bt),owner:o=>sa(o)});let Oo=o=>{let r=je(),i=fn(r);return((u,m)=>{let f=m.owner(u),v=Pl(m,f);return _.some(v)})(o,od).fold(ut(Ii,o),(u=>{let m=ym(o),f=so(u,((v,y)=>{let x=ym(y);return{left:v.left+x.left,top:v.top+x.top}}),{left:0,top:0});return Qt(f.left+m.left+i.left,f.top+m.top+i.top)}))},wr=(o,r,i,l)=>({x:o,y:r,width:i,height:l,right:o+i,bottom:r+l}),Br=o=>{let r=Ii(o),i=fu(o),l=Ml(o);return wr(r.left,r.top,i,l)},yu=o=>{let r=Oo(o),i=fu(o),l=Ml(o);return wr(r.left,r.top,i,l)},ml=(o,r)=>{let i=Math.max(o.x,r.x),l=Math.max(o.y,r.y),u=Math.min(o.right,r.right),m=Math.min(o.bottom,r.bottom);return wr(i,l,u-i,m-l)},Wr=()=>Zr(window),Pr=(o,r)=>wn(o.element,r.event.target),Ea=o=>(Da(Hs(o,"position"),"fixed")?_.none():ll(o)).orThunk((()=>{let r=rl("span");return zo(o).bind((i=>{Ks(i,r);let l=ll(r);return _c(r),l}))})),ai=o=>Ea(o).map(Ii).getOrThunk((()=>Qt(0,0)));var xr;(function(o){o[o.Error=0]="Error",o[o.Value=1]="Value"})(xr||(xr={}));let Sm=(o,r,i)=>o.stype===xr.Error?r(o.serror):i(o.svalue),Ws=o=>({stype:xr.Value,svalue:o}),kp=o=>({stype:xr.Error,serror:o}),Ll=Ws,vi=kp,Ko=Sm,yi=o=>nr(o)&&rn(o).length>100?" removed due to size":JSON.stringify(o,null,2),km=(o,r)=>vi([{path:o,getErrorInfo:r}]),ii=o=>({extract:(r,i)=>((l,u)=>l.stype===xr.Error?u(l.serror):l)(o(i),(l=>((u,m)=>km(u,ve(m)))(r,l))),toString:ve("val")}),wf=ii(Ll),gl=ve(wf),Em=(o,r)=>ii((i=>{let l=typeof i;return o(i)?Ll(i):vi(`Expected type: ${r} but got: ${l}`)})),Ep=Em(Yn,"number"),ms=Em(Wn,"string"),sd=Em(Ar,"boolean"),Cu=Em(jt,"function"),Tm=o=>{if(Object(o)!==o)return!0;switch({}.toString.call(o).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(o).every((r=>Tm(o[r])));default:return!1}},Dg=ii((o=>Tm(o)?Ll(o):vi("Expected value to be acceptable for sending via postMessage"))),wu=o=>({tag:"defaultedThunk",process:o}),Rg=o=>wu(ve(o)),Tp=o=>({tag:"mergeWithThunk",process:o}),Am=(o,r,i,l)=>({tag:"field",key:o,newKey:r,presence:i,prop:l}),_m=(o,r,i)=>{switch(o.tag){case"field":return r(o.key,o.newKey,o.presence,o.prop);case"custom":return i(o.newKey,o.instantiator)}},fl=o=>{let r=(l=>{let u=[],m=[];return Ot(l,(f=>{Sm(f,(v=>m.push(v)),(v=>u.push(v)))})),{values:u,errors:m}})(o);return r.errors.length>0?(i=r.errors,At(vi,Vs)(i)):Ll(r.values);var i},xf=(o,r,i,l)=>l(qt(o,r).getOrThunk((()=>i(o)))),Id=(o,r,i,l,u)=>{let m=v=>u.extract(r.concat([l]),v),f=v=>v.fold((()=>Ll(_.none())),(y=>((x,A)=>x.stype===xr.Value?{stype:xr.Value,svalue:A(x.svalue)}:x)(u.extract(r.concat([l]),y),_.some)));switch(o.tag){case"required":return((v,y,x,A)=>qt(y,x).fold((()=>((E,O,B)=>km(E,(()=>'Could not find valid *required* value for "'+O+'" in '+yi(B))))(v,x,y)),A))(r,i,l,m);case"defaultedThunk":return xf(i,l,o.process,m);case"option":return((v,y,x)=>x(qt(v,y)))(i,l,f);case"defaultedOptionThunk":return((v,y,x,A)=>A(qt(v,y).map((E=>E===!0?x(v):E))))(i,l,o.process,f);case"mergeWithThunk":return xf(i,l,ve({}),(v=>{let y=Xn(o.process(i),v);return m(y)}))}},Om=o=>({extract:(r,i)=>o().extract(r,i),toString:()=>o().toString()}),Dc=o=>rn(kl(o,$t)),fa=o=>{let r=Jt(o),i=so(o,((l,u)=>_m(u,(m=>Xn(l,{[m]:!0})),ve(l))),{});return{extract:(l,u)=>{let m=Ar(u)?[]:Dc(u),f=pn(m,(v=>!Ds(i,v)));return f.length===0?r.extract(l,u):((v,y)=>km(v,(()=>"There are unsupported fields: ["+y.join(", ")+"] specified")))(l,f)},toString:r.toString}},Jt=o=>({extract:(r,i)=>((l,u,m)=>{let f={},v=[];for(let y of m)_m(y,((x,A,E,O)=>{let B=Id(E,l,u,x,O);Ko(B,(I=>{v.push(...I)}),(I=>{f[A]=I}))}),((x,A)=>{f[x]=A(u)}));return v.length>0?vi(v):Ll(f)})(r,i,o),toString:()=>`obj{
`+it(o,(i=>_m(i,((l,u,m,f)=>l+" -> "+f.toString()),((l,u)=>"state("+l+")")))).join(`
`)+"}"}),Il=o=>({extract:(r,i)=>{let l=it(i,((u,m)=>o.extract(r.concat(["["+m+"]"]),u)));return fl(l)},toString:()=>"array("+o.toString()+")"}),rd=(o,r)=>{let i=r!==void 0?r:ht;return{extract:(l,u)=>{let m=[];for(let f of o){let v=f.extract(l,u);if(v.stype===xr.Value)return{stype:xr.Value,svalue:i(v.svalue)};m.push(v)}return fl(m)},toString:()=>"oneOf("+it(o,(l=>l.toString())).join(", ")+")"}},Ng=(o,r)=>({extract:(i,l)=>{let u=rn(l),m=((f,v)=>Il(ii(o)).extract(f,v))(i,u);return((f,v)=>f.stype===xr.Value?v(f.svalue):f)(m,(f=>{let v=it(f,(y=>Am(y,y,{tag:"required",process:{}},r)));return Jt(v).extract(i,l)}))},toString:()=>"setOf("+r.toString()+")"}),xu=At(Il,Jt),Dm=(o,r)=>({extract:(i,l)=>qt(l,o).fold((()=>((u,m)=>km(u,(()=>'Choice schema did not contain choice key: "'+m+'"')))(i,o)),(u=>((m,f,v,y)=>qt(v,y).fold((()=>((x,A,E)=>km(x,(()=>'The chosen schema: "'+E+'" did not exist in branches: '+yi(A))))(m,v,y)),(x=>x.extract(m.concat(["branch: "+y]),f))))(i,l,r,u))),toString:()=>"chooseOn("+o+"). Possible values: "+rn(r)}),Fd=o=>ii((r=>o(r).fold(vi,Ll))),p0=(o,r)=>Ng((i=>o(i).fold(kp,Ws)),r),ss=(o,r,i)=>{return l=((u,m,f)=>((v,y)=>v.stype===xr.Error?{stype:xr.Error,serror:y(v.serror)}:v)(m.extract([u],f),(v=>({input:f,errors:v}))))(o,r,i),Sm(l,Nn.error,Nn.value);var l},Ia=o=>o.fold((r=>{throw new Error(Rc(r))}),ht),li=(o,r,i)=>Ia(ss(o,r,i)),Rc=o=>`Errors: 
`+(r=>{let i=r.length>10?r.slice(0,10).concat([{path:[],getErrorInfo:ve("... (only showing first ten failures)")}]):r;return it(i,(l=>"Failed path: ("+l.path.join(" > ")+`)
`+l.getErrorInfo()))})(o.errors).join(`
`)+`

Input object: `+yi(o.input),pa=(o,r)=>Dm(o,_s(r,Jt)),Nc=(o,r)=>((i,l)=>{let u=dr(l);return{extract:(m,f)=>u().extract(m,f),toString:()=>u().toString()}})(0,r),Sr=Am,kr=(o,r)=>({tag:"custom",newKey:o,instantiator:r}),Hd=o=>Fd((r=>Ln(o,r)?Nn.value(r):Nn.error(`Unsupported value: "${r}", choose one of "${o.join(", ")}".`))),Ke=o=>Sr(o,o,{tag:"required",process:{}},gl()),Ci=(o,r)=>Sr(o,o,{tag:"required",process:{}},r),Mg=o=>Ci(o,Ep),fr=o=>Ci(o,ms),Fl=(o,r)=>Sr(o,o,{tag:"required",process:{}},Hd(r)),jr=o=>Ci(o,Cu),ha=(o,r)=>Sr(o,o,{tag:"required",process:{}},Jt(r)),Bg=(o,r)=>Sr(o,o,{tag:"required",process:{}},xu(r)),Fa=(o,r)=>Sr(o,o,{tag:"required",process:{}},Il(r)),no=o=>Sr(o,o,{tag:"option",process:{}},gl()),Ha=(o,r)=>Sr(o,o,{tag:"option",process:{}},r),Qs=o=>Ha(o,Ep),Po=o=>Ha(o,ms),zd=(o,r)=>Ha(o,Hd(r)),qr=o=>Ha(o,Cu),ad=(o,r)=>Ha(o,Il(r)),ci=(o,r)=>Ha(o,Jt(r)),Te=(o,r)=>Sr(o,o,Rg(r),gl()),za=(o,r,i)=>Sr(o,o,Rg(r),i),Mc=(o,r)=>za(o,r,Ep),Yo=(o,r)=>za(o,r,ms),nc=(o,r,i)=>za(o,r,Hd(i)),Gr=(o,r)=>za(o,r,sd),rs=(o,r)=>za(o,r,Cu),Su=(o,r,i)=>za(o,r,Il(i)),Ap=(o,r,i)=>za(o,r,Jt(i)),wi=(o,r)=>((i,l)=>({[i]:l}))(o,r),Rm=o=>(r=>{let i={};return Ot(r,(l=>{i[l.key]=l.value})),i})(o),Er=ve,oc=Er("touchstart"),Sf=Er("touchmove"),Bc=Er("touchend"),sc=Er("touchcancel"),gs=Er("mousedown"),Nm=Er("mousemove"),id=Er("mouseout"),Pg=Er("mouseup"),xi=Er("mouseover"),pl=Er("focusin"),Lg=Er("focusout"),zi=Er("keydown"),h0=Er("keyup"),Pc=Er("input"),$d=Er("change"),ku=Er("click"),b0=Er("transitioncancel"),Ig=Er("transitionend"),rv=Er("transitionstart"),w=Er("selectstart"),T=o=>ve("alloy."+o),H={tap:T("tap")},j=T("focus"),ie=T("blur.post"),Oe=T("paste.post"),Je=T("receive"),Xe=T("execute"),kt=T("focus.item"),Zt=H.tap,lo=T("longpress"),Do=T("sandbox.close"),Es=T("typeahead.cancel"),Si=T("system.init"),ld=T("system.touchmove"),cd=T("system.touchend"),Eu=T("system.scroll"),$i=T("system.resize"),Vi=T("system.attached"),hl=T("system.detached"),Lc=T("system.dismissRequested"),_p=T("system.repositionRequested"),Tu=T("focusmanager.shifted"),Mm=T("slotcontainer.visibility"),kf=T("system.external.element.scroll"),Op=T("change.tab"),ao=T("dismiss.tab"),Ps=T("highlight"),$a=T("dehighlight"),pr=o=>(r=>{if(mo(r))return"#shadow-root";{let i=(l=>Dh(l,!1))(r);return(l=>{let u=rl("div"),m=bt(l.dom.cloneNode(!0));return Ks(u,m),gf(u)})(i)}})(o);var Ic;(function(o){o[o.STOP=0]="STOP",o[o.NORMAL=1]="NORMAL",o[o.LOGGING=2]="LOGGING"})(Ic||(Ic={}));let er=Rt({}),Ef=["alloy/data/Fields","alloy/debugging/Debugging"],Fc=(o,r,i)=>((l,u,m)=>{switch(qt(er.get(),l).orThunk((()=>{let f=rn(er.get());return Mt(f,(v=>l.indexOf(v)>-1?_.some(er.get()[v]):_.none()))})).getOr(Ic.NORMAL)){case Ic.NORMAL:return m(av());case Ic.LOGGING:{let f=((y,x)=>{let A=[],E=new Date().getTime();return{logEventCut:(O,B,I)=>{A.push({outcome:"cut",target:B,purpose:I})},logEventStopped:(O,B,I)=>{A.push({outcome:"stopped",target:B,purpose:I})},logNoParent:(O,B,I)=>{A.push({outcome:"no-parent",target:B,purpose:I})},logEventNoHandlers:(O,B)=>{A.push({outcome:"no-handlers-left",target:B})},logEventResponse:(O,B,I)=>{A.push({outcome:"response",purpose:I,target:B})},write:()=>{let O=new Date().getTime();Ln(["mousemove","mouseover","mouseout",Si()],y)||console.log(y,{event:y,time:O-E,target:x.dom,sequence:it(A,(B=>Ln(["cut","stopped","response"],B.outcome)?"{"+B.purpose+"} "+B.outcome+" at ("+pr(B.target)+")":B.outcome))})}}})(l,u),v=m(f);return f.write(),v}case Ic.STOP:return!0}})(o,r,i),av=ve({logEventCut:Qe,logEventStopped:Qe,logNoParent:Qe,logEventNoHandlers:Qe,logEventResponse:Qe,write:Qe}),v0=ve([Ke("menu"),Ke("selectedMenu")]),Rh=ve([Ke("item"),Ke("selectedItem")]);ve(Jt(Rh().concat(v0())));let gy=ve(Jt(Rh())),fy=ha("initSize",[Ke("numColumns"),Ke("numRows")]),Bm=()=>ha("markers",[Ke("backgroundMenu")].concat(v0()).concat(Rh())),Au=o=>ha("markers",it(o,Ke)),It=(o,r,i)=>((()=>{let l=new Error;if(l.stack!==void 0){let u=l.stack.split(`
`);kn(u,(m=>m.indexOf("alloy")>0&&!Ho(Ef,(f=>m.indexOf(f)>-1)))).getOr("unknown")}})(),Sr(r,r,i,Fd((l=>Nn.value(((...u)=>l.apply(void 0,u))))))),Rn=o=>It(0,o,Rg(Qe)),bl=o=>It(0,o,Rg(_.none)),_u=o=>It(0,o,{tag:"required",process:{}}),rc=o=>It(0,o,{tag:"required",process:{}}),Xo=(o,r)=>kr(o,ve(r)),py=o=>kr(o,ht),Fg=ve(fy),Tf=o=>it(o,(r=>bc(r,"/*")?r.substring(0,r.length-2):r)),Ou=(o,r)=>{let i=o.toString(),l=i.indexOf(")")+1,u=i.indexOf("("),m=i.substring(u+1,l-1).split(/,\s*/);return o.toFunctionAnnotation=()=>({name:r,parameters:Tf(m)}),o},y0=(o,r)=>{let i=null;return{cancel:()=>{i!==null&&(clearTimeout(i),i=null)},schedule:(...l)=>{i=setTimeout((()=>{o.apply(null,l),i=null}),r)}}},Nh=o=>{let r=o.raw;return r.touches===void 0||r.touches.length!==1?_.none():_.some(r.touches[0])};var tt;(function(o){o.OnFocusMode="onFocus",o.OnEnterOrSpaceMode="onEnterOrSpace",o.OnApiMode="onApi"})(tt||(tt={}));let iv="placeholder",Mh=ks([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),ud=o=>Sn(o,"uiType"),Af=(o,r,i,l)=>((u,m,f,v)=>ud(f)&&f.uiType===iv?((y,x,A,E)=>y.exists((O=>O!==A.owner))?Mh.single(!0,ve(A)):qt(E,A.name).fold((()=>{throw new Error("Unknown placeholder component: "+A.name+`
Known: [`+rn(E)+`]
Namespace: `+y.getOr("none")+`
Spec: `+JSON.stringify(A,null,2))}),(O=>O.replace())))(u,0,f,v):Mh.single(!1,ve(f)))(o,0,i,l).fold(((u,m)=>{let f=ud(i)?m(r,i.config,i.validated):m(r),v=qt(f,"components").getOr([]),y=vo(v,(x=>Af(o,r,x,l)));return[{...f,components:y}]}),((u,m)=>{if(ud(i)){let f=m(r,i.config,i.validated);return i.validated.preprocess.getOr(ht)(f)}return m(r)})),Bh=Mh.single,zs=Mh.multiple,C0=ve(iv),Ph=ks([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Ui=Te("factory",{sketch:ht}),Vo=Te("schema",[]),_f=Ke("name"),Of=Sr("pname","pname",wu((o=>"<alloy."+we(o.name)+">")),gl()),w0=kr("schema",(()=>[no("preprocess")])),Va=Te("defaults",ve({})),Zi=Te("overrides",ve({})),x0=Jt([Ui,Vo,_f,Of,Va,Zi]),lv=Jt([Ui,Vo,_f,Va,Zi]),$x=Jt([Ui,Vo,_f,Of,Va,Zi]),hy=Jt([Ui,w0,_f,Ke("unit"),Of,Va,Zi]),S0=o=>o.fold(_.some,_.none,_.some,_.some),cv=o=>{let r=i=>i.name;return o.fold(r,r,r,r)},k0=(o,r)=>i=>{let l=li("Converting part type",r,i);return o(l)},Wi=k0(Ph.required,x0),Hc=k0(Ph.external,lv),Du=k0(Ph.optional,$x),E0=k0(Ph.group,hy),uv=ve("entirety");var Vx=Object.freeze({__proto__:null,required:Wi,external:Hc,optional:Du,group:E0,asNamedPart:S0,name:cv,asCommon:o=>o.fold(ht,ht,ht,ht),original:uv});let Lh=(o,r,i,l)=>Xn(r.defaults(o,i,l),i,{uid:o.partUids[r.name]},r.overrides(o,i,l)),dd=(o,r)=>{let i={};return Ot(r,(l=>{S0(l).each((u=>{let m=ki(o,u.pname);i[u.name]=f=>{let v=li("Part: "+u.name+" in "+o,Jt(u.schema),f);return{...m,config:f,validated:v}}}))})),i},ki=(o,r)=>({uiType:C0(),owner:o,name:r}),T0=(o,r,i)=>({uiType:C0(),owner:o,name:r,config:i,validated:{}}),Dp=o=>vo(o,(r=>r.fold(_.none,_.some,_.none,_.none).map((i=>ha(i.name,i.schema.concat([py(uv())])))).toArray())),Hg=o=>it(o,cv),Ih=(o,r,i)=>((l,u,m)=>{let f={},v={};return Ot(m,(y=>{y.fold((x=>{f[x.pname]=Bh(!0,((A,E,O)=>x.factory.sketch(Lh(A,x,E,O))))}),(x=>{let A=u.parts[x.name];v[x.name]=ve(x.factory.sketch(Lh(u,x,A[uv()]),A))}),(x=>{f[x.pname]=Bh(!1,((A,E,O)=>x.factory.sketch(Lh(A,x,E,O))))}),(x=>{f[x.pname]=zs(!0,((A,E,O)=>{let B=A[x.name];return it(B,(I=>x.factory.sketch(Xn(x.defaults(A,I,O),I,x.overrides(A,I)))))}))}))})),{internals:ve(f),externals:ve(v)}})(0,r,i),A0=(o,r,i)=>((l,u,m,f)=>{let v=_s(f,((x,A)=>((E,O)=>{let B=!1;return{name:ve(E),required:()=>O.fold(((I,X)=>I),((I,X)=>I)),used:()=>B,replace:()=>{if(B)throw new Error("Trying to use the same placeholder more than once: "+E);return B=!0,O}}})(A,x))),y=((x,A,E,O)=>vo(E,(B=>Af(x,A,B,O))))(l,u,m,v);return Ao(v,(x=>{if(x.used()===!1&&x.required())throw new Error("Placeholder: "+x.name()+` was not found in components list
Namespace: `+l.getOr("none")+`
Components: `+JSON.stringify(u.components,null,2))})),y})(_.some(o),r,r.components,i),fs=(o,r,i)=>{let l=r.partUids[i];return o.getSystem().getByUid(l).toOptional()},zg=(o,r,i)=>fs(o,r,i).getOrDie("Could not find part: "+i),Df=(o,r,i)=>{let l={},u=r.partUids,m=o.getSystem();return Ot(i,(f=>{l[f]=ve(m.getByUid(u[f]))})),l},dv=(o,r)=>{let i=o.getSystem();return _s(r.partUids,((l,u)=>ve(i.getByUid(l))))},Fh=o=>rn(o.partUids),Hh=(o,r,i)=>{let l={},u=r.partUids,m=o.getSystem();return Ot(i,(f=>{l[f]=ve(m.getByUid(u[f]).getOrDie())})),l},_0=(o,r)=>{let i=Hg(r);return Rm(it(i,(l=>({key:l,value:o+"-"+l}))))},O0=o=>Sr("partUids","partUids",Tp((r=>_0(r.uid,o))),gl());var by=Object.freeze({__proto__:null,generate:dd,generateOne:T0,schemas:Dp,names:Hg,substitutes:Ih,components:A0,defaultUids:_0,defaultUidsSchema:O0,getAllParts:dv,getAllPartNames:Fh,getPart:fs,getPartOrDie:zg,getParts:Df,getPartsOrDie:Hh});let mv=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Hl=(o,r,i,l=1)=>{let u=o*l,m=r*l,f=y=>qt(i,y).getOr([]),v=(y,x,A)=>{let E=ro(mv,A);return{offset:Qt(y,x),classesOn:vo(A,f),classesOff:vo(E,f)}};return{southeast:()=>v(-o,r,["top","alignLeft"]),southwest:()=>v(o,r,["top","alignRight"]),south:()=>v(-o/2,r,["top","alignCentre"]),northeast:()=>v(-o,-r,["bottom","alignLeft"]),northwest:()=>v(o,-r,["bottom","alignRight"]),north:()=>v(-o/2,-r,["bottom","alignCentre"]),east:()=>v(o,-r/2,["valignCentre","left"]),west:()=>v(-o,-r/2,["valignCentre","right"]),insetNortheast:()=>v(u,m,["top","alignLeft","inset"]),insetNorthwest:()=>v(-u,m,["top","alignRight","inset"]),insetNorth:()=>v(-u/2,m,["top","alignCentre","inset"]),insetSoutheast:()=>v(u,-m,["bottom","alignLeft","inset"]),insetSouthwest:()=>v(-u,-m,["bottom","alignRight","inset"]),insetSouth:()=>v(-u/2,-m,["bottom","alignCentre","inset"]),insetEast:()=>v(-u,-m/2,["valignCentre","right","inset"]),insetWest:()=>v(u,-m/2,["valignCentre","left","inset"])}},Rp=()=>Hl(0,0,{}),Ua=(o,r,i,l,u,m,f,v=!1)=>({x:o,y:r,bubble:i,direction:l,placement:u,restriction:m,label:`${f}-${u}`,alwaysFit:v}),$g=ks([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Np=$g.southeast,zh=$g.southwest,$h=$g.northeast,Pm=$g.northwest,vy=$g.south,D0=$g.north,yy=$g.east,gv=$g.west,Za=(o,r)=>Kt(["left","right","top","bottom"],(i=>qt(r,i).map((l=>((u,m)=>{switch(m){case 1:return u.x;case 0:return u.x+u.width;case 2:return u.y;case 3:return u.y+u.height}})(o,l))))),Lm="layout",Cy=o=>o.x,wy=(o,r)=>o.x+o.width/2-r.width/2,fv=(o,r)=>o.x+o.width-r.width,xy=(o,r)=>o.y-r.height,R0=o=>o.y+o.height,Sy=(o,r)=>o.y+o.height/2-r.height/2,Lr=(o,r,i)=>Ua(Cy(o),R0(o),i.southeast(),Np(),"southeast",Za(o,{left:1,top:3}),Lm),Kr=(o,r,i)=>Ua(fv(o,r),R0(o),i.southwest(),zh(),"southwest",Za(o,{right:0,top:3}),Lm),Ta=(o,r,i)=>Ua(Cy(o),xy(o,r),i.northeast(),$h(),"northeast",Za(o,{left:1,bottom:2}),Lm),Wa=(o,r,i)=>Ua(fv(o,r),xy(o,r),i.northwest(),Pm(),"northwest",Za(o,{right:0,bottom:2}),Lm),ba=(o,r,i)=>Ua(wy(o,r),xy(o,r),i.north(),D0(),"north",Za(o,{bottom:2}),Lm),Yr=(o,r,i)=>Ua(wy(o,r),R0(o),i.south(),vy(),"south",Za(o,{top:3}),Lm),Mp=(o,r,i)=>Ua((l=>l.x+l.width)(o),Sy(o,r),i.east(),yy(),"east",Za(o,{left:0}),Lm),N0=(o,r,i)=>Ua(((l,u)=>l.x-u.width)(o,r),Sy(o,r),i.west(),gv(),"west",Za(o,{right:1}),Lm),Bp=()=>[Lr,Kr,Ta,Wa,Yr,ba,Mp,N0],Vh=()=>[Kr,Lr,Wa,Ta,Yr,ba,Mp,N0],M0=()=>[Ta,Wa,Lr,Kr,ba,Yr],Uh=()=>[Wa,Ta,Kr,Lr,ba,Yr],pv=()=>[Lr,Kr,Ta,Wa,Yr,ba],Vd=()=>[Kr,Lr,Wa,Ta,Yr,ba],ac="data-alloy-placement",Vg=o=>Zs(o,ac),Im="layout-inset",Zh=o=>o.x,hv=(o,r)=>o.x+o.width/2-r.width/2,bv=(o,r)=>o.x+o.width-r.width,Wh=o=>o.y,jh=(o,r)=>o.y+o.height-r.height,B0=(o,r)=>o.y+o.height/2-r.height/2,qh=(o,r,i)=>Ua(bv(o,r),jh(o,r),i.insetSouthwest(),Pm(),"southwest",Za(o,{right:0,bottom:3}),Im),md=(o,r,i)=>Ua(Zh(o),jh(o,r),i.insetSoutheast(),$h(),"southeast",Za(o,{left:1,bottom:3}),Im),Xr=(o,r,i)=>Ua(bv(o,r),Wh(o),i.insetNorthwest(),zh(),"northwest",Za(o,{right:0,top:2}),Im),Ug=(o,r,i)=>Ua(Zh(o),Wh(o),i.insetNortheast(),Np(),"northeast",Za(o,{left:1,top:2}),Im),zc=(o,r,i)=>Ua(hv(o,r),Wh(o),i.insetNorth(),vy(),"north",Za(o,{top:2}),Im),Gh=(o,r,i)=>Ua(hv(o,r),jh(o,r),i.insetSouth(),D0(),"south",Za(o,{bottom:3}),Im),P0=(o,r,i)=>Ua(bv(o,r),B0(o,r),i.insetEast(),gv(),"east",Za(o,{right:0}),Im),L0=(o,r,i)=>Ua(Zh(o),B0(o,r),i.insetWest(),yy(),"west",Za(o,{left:1}),Im),ky=o=>{switch(o){case"north":return zc;case"northeast":return Ug;case"northwest":return Xr;case"south":return Gh;case"southeast":return md;case"southwest":return qh;case"east":return P0;case"west":return L0}},I0=(o,r,i,l,u)=>Vg(l).map(ky).getOr(zc)(o,r,i,l,u),Ux=o=>{switch(o){case"north":return Gh;case"northeast":return md;case"northwest":return qh;case"south":return zc;case"southeast":return Ug;case"southwest":return Xr;case"east":return L0;case"west":return P0}},Ey=(o,r,i,l,u)=>Vg(l).map(Ux).getOr(zc)(o,r,i,l,u),Zg=(o,r)=>{((i,l)=>{let u=wg.max(i,l,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);q(i,"max-height",u+"px")})(o,Math.floor(r))},vv=ve(((o,r)=>{Zg(o,r),Bd(o,{"overflow-x":"hidden","overflow-y":"auto"})})),Fm=ve(((o,r)=>{Zg(o,r)})),F0=ve(((o,r)=>{((i,l)=>{let u=Pa.max(i,l,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);q(i,"max-width",u+"px")})(o,Math.floor(r))}));var Ud;(function(o){o.TopToBottom="toptobottom",o.BottomToTop="bottomtotop"})(Ud||(Ud={}));let Kh="data-alloy-vertical-dir",Ty=o=>wm(o,(r=>Dr(r)&&ds(r,"data-alloy-vertical-dir")===Ud.BottomToTop));var ja;(function(o){o[o.HighlightMenuAndItem=0]="HighlightMenuAndItem",o[o.HighlightJustMenu=1]="HighlightJustMenu",o[o.HighlightNone=2]="HighlightNone"})(ja||(ja={}));let ji={init:()=>hr({readState:ve("No State required")})},hr=o=>o,Rf={can:vn,abort:zt,run:Qe},gd=o=>{if(!Ds(o,"can")&&!Ds(o,"abort")&&!Ds(o,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(o,null,2)+" does not have can, abort, or run!");return{...Rf,...o}},$n=(o,r)=>{yv(o,o.element,r,{})},Wt=(o,r,i)=>{yv(o,o.element,r,i)},Nf=o=>{$n(o,Xe())},Zd=(o,r,i)=>{yv(o,r,i,{})},yv=(o,r,i,l)=>{let u={target:r,...l};o.getSystem().triggerEvent(i,r,u)},Yh=(o,r,i,l)=>{o.getSystem().triggerEvent(i,r,l.event)},Lo=o=>Rm(o),Wg=(o,r)=>({key:o,value:gd({abort:r})}),Xh=o=>({key:o,value:gd({run:(r,i)=>{i.event.prevent()}})}),$e=(o,r)=>({key:o,value:gd({run:r})}),H0=(o,r,i)=>({key:o,value:gd({run:(l,u)=>{r.apply(void 0,[l,u].concat(i))}})}),Pp=o=>r=>({key:o,value:gd({run:(i,l)=>{Pr(i,l)&&r(i,l)}})}),Lp=(o,r,i)=>((l,u)=>$e(l,((m,f)=>{m.getSystem().getByUid(u).each((v=>{Yh(v,v.element,l,f)}))})))(o,r.partUids[i]),z0=(o,r)=>$e(o,((i,l)=>{let u=l.event,m=i.getSystem().getByDom(u.target).getOrThunk((()=>yf(u.target,(f=>i.getSystem().getByDom(f).toOptional()),zt).getOr(i)));r(i,m,l)})),Hm=o=>$e(o,((r,i)=>{i.cut()})),Mf=o=>$e(o,((r,i)=>{i.stop()})),fd=(o,r)=>Pp(o)(r),as=Pp(Vi()),Ru=Pp(hl()),Ay=Pp(Si()),Wd=(o=>r=>$e(o,r))(Xe()),Nu=o=>({classes:Hr(o.classes)?[]:o.classes,attributes:Hr(o.attributes)?{}:o.attributes,styles:Hr(o.styles)?{}:o.styles}),Ip=(o,r,i)=>Ay(((l,u)=>{i(l,o,r)})),Zx=o=>({key:o,value:void 0}),_y=(o,r,i,l,u,m,f)=>{let v=A=>Ds(A,i)?A[i]():_.none(),y=_s(u,((A,E)=>((O,B,I)=>((X,W,K)=>{let V=K.toString(),U=V.indexOf(")")+1,J=V.indexOf("("),ee=V.substring(J+1,U-1).split(/,\s*/);return X.toFunctionAnnotation=()=>({name:W,parameters:Tf(ee.slice(0,1).concat(ee.slice(3)))}),X})(((X,...W)=>{let K=[X].concat(W);return X.config({name:ve(O)}).fold((()=>{throw new Error("We could not find any behaviour configuration for: "+O+". Using API: "+I)}),(V=>{let U=Array.prototype.slice.call(K,1);return B.apply(void 0,[X,V.config,V.state].concat(U))}))}),I,B))(i,A,E))),x={..._s(m,((A,E)=>Ou(A,E))),...y,revoke:ut(Zx,i),config:A=>{let E=li(i+"-config",o,A);return{key:i,value:{config:E,me:x,configAsRaw:dr((()=>li(i+"-config",o,A))),initialConfig:A,state:f}}},schema:ve(r),exhibit:(A,E)=>Ra(v(A),qt(l,"exhibit"),((O,B)=>B(E,O.config,O.state))).getOrThunk((()=>Nu({}))),name:ve(i),handlers:A=>v(A).map((E=>qt(l,"events").getOr((()=>({})))(E.config,E.state))).getOr({})};return x},st=o=>Rm(o),$0=fa([Ke("fields"),Ke("name"),Te("active",{}),Te("apis",{}),Te("state",ji),Te("extra",{})]),Aa=o=>{let r=li("Creating behaviour: "+o.name,$0,o);return((i,l,u,m,f,v)=>{let y=fa(i),x=ci(l,[(A=i,Ha("config",fa(A)))]);var A;return _y(y,x,l,u,m,f,v)})(r.fields,r.name,r.active,r.apis,r.extra,r.state)},Jh=fa([Ke("branchKey"),Ke("branches"),Ke("name"),Te("active",{}),Te("apis",{}),Te("state",ji),Te("extra",{})]),Cv=o=>{let r=li("Creating behaviour: "+o.name,Jh,o);return((i,l,u,m,f,v)=>{let y=i,x=ci(l,[Ha("config",i)]);return _y(y,x,l,u,m,f,v)})(pa(r.branchKey,r.branches),r.name,r.active,r.apis,r.extra,r.state)},jg=ve(void 0),on=(o,r)=>{let i=((l,u)=>{let m=Lo(u);return Aa({fields:[Ke("enabled")],name:l,active:{events:ve(m)}})})(o,r);return{key:o,value:{config:{},me:i,configAsRaw:ve({}),initialConfig:{},state:ji}}},wv=(o,r)=>{r.ignore||(ct(o.element),r.onFocus(o))};var Fp=Object.freeze({__proto__:null,focus:wv,blur:(o,r)=>{r.ignore||Gn(o.element)},isFocused:o=>No(o.element)}),Wx=Object.freeze({__proto__:null,exhibit:(o,r)=>{let i=r.ignore?{}:{attributes:{tabindex:"-1"}};return Nu(i)},events:o=>Lo([$e(j(),((r,i)=>{wv(r,o),i.stop()}))].concat(o.stopMousedown?[$e(gs(),((r,i)=>{i.event.prevent()}))]:[]))}),jd=[Rn("onFocus"),Te("stopMousedown",!1),Te("ignore",!1)];let un=Aa({fields:jd,name:"focusing",active:Wx,apis:Fp}),qg=[8],qd=[9],$c=[13],Gg=[27],vl=[32],Co=[37],Hp=[38],Qh=[39],Bf=[40],Vc=ve("tooltipping.close.all"),pd=ve("dismiss.popups"),Ei=ve("reposition.popups"),e1=ve("mouse.released"),Oy=(o,r,i)=>{let l=In(o.slice(0,r)),u=In(o.slice(r+1));return kn(l.concat(u),i)},xv=(o,r,i)=>{let l=In(o.slice(0,r));return kn(l,i)},t1=(o,r,i)=>{let l=o.slice(0,r),u=o.slice(r+1);return kn(u.concat(l),i)},n1=(o,r,i)=>{let l=o.slice(r+1);return kn(l,i)},Kn=o=>r=>{let i=r.raw;return Ln(o,i.which)},hd=o=>r=>hi(o,(i=>i(r))),zp=o=>o.raw.shiftKey===!0,jx=o=>o.raw.ctrlKey===!0,o1=ns(zp),co=(o,r)=>({matches:o,classification:r}),qx=(o,r,i,l)=>{let u=aa(o.element,"."+r.highlightClass);Ot(u,(m=>{Ho(l,(f=>wn(f.element,m)))||($o(m,r.highlightClass),o.getSystem().getByDom(m).each((f=>{r.onDehighlight(o,f),$n(f,$a())})))}))},s1=(o,r,i,l)=>{qx(o,r,0,[l]),ic(o,r,i,l)||(bs(l.element,r.highlightClass),r.onHighlight(o,l),$n(l,Ps()))},ic=(o,r,i,l)=>Js(l.element,r.highlightClass),ui=(o,r,i)=>xo(o.element,"."+r.itemClass).bind((l=>o.getSystem().getByDom(l).toOptional())),Pf=(o,r,i)=>{let l=aa(o.element,"."+r.itemClass);return(l.length>0?_.some(l[l.length-1]):_.none()).bind((u=>o.getSystem().getByDom(u).toOptional()))},zm=(o,r,i,l)=>{let u=aa(o.element,"."+r.itemClass);return Ja(u,(m=>Js(m,r.highlightClass))).bind((m=>{let f=_n(m,l,0,u.length-1);return o.getSystem().getByDom(u[f]).toOptional()}))},Mu=(o,r,i)=>{let l=aa(o.element,"."+r.itemClass);return Mi(it(l,(u=>o.getSystem().getByDom(u).toOptional())))};var Lf=Object.freeze({__proto__:null,dehighlightAll:(o,r,i)=>qx(o,r,0,[]),dehighlight:(o,r,i,l)=>{ic(o,r,i,l)&&($o(l.element,r.highlightClass),r.onDehighlight(o,l),$n(l,$a()))},highlight:s1,highlightFirst:(o,r,i)=>{ui(o,r).each((l=>{s1(o,r,i,l)}))},highlightLast:(o,r,i)=>{Pf(o,r).each((l=>{s1(o,r,i,l)}))},highlightAt:(o,r,i,l)=>{((u,m,f,v)=>{let y=aa(u.element,"."+m.itemClass);return _.from(y[v]).fold((()=>Nn.error(new Error("No element found with index "+v))),u.getSystem().getByDom)})(o,r,0,l).fold((u=>{throw u}),(u=>{s1(o,r,i,u)}))},highlightBy:(o,r,i,l)=>{let u=Mu(o,r);kn(u,l).each((m=>{s1(o,r,i,m)}))},isHighlighted:ic,getHighlighted:(o,r,i)=>xo(o.element,"."+r.highlightClass).bind((l=>o.getSystem().getByDom(l).toOptional())),getFirst:ui,getLast:Pf,getPrevious:(o,r,i)=>zm(o,r,0,-1),getNext:(o,r,i)=>zm(o,r,0,1),getCandidates:Mu}),Kg=[Ke("highlightClass"),Ke("itemClass"),Rn("onHighlight"),Rn("onDehighlight")];let Vn=Aa({fields:Kg,name:"highlighting",apis:Lf}),Sv=(o,r,i)=>{r.exists((l=>i.exists((u=>wn(u,l)))))||Wt(o,Tu(),{prevFocus:r,newFocus:i})},V0=()=>{let o=r=>Mo(r.element);return{get:o,set:(r,i)=>{let l=o(r);r.getSystem().triggerFocus(i,r.element);let u=o(r);Sv(r,l,u)}}},kv=()=>{let o=r=>Vn.getHighlighted(r).map((i=>i.element));return{get:o,set:(r,i)=>{let l=o(r);r.getSystem().getByDom(i).fold(Qe,(m=>{Vn.highlight(r,m)}));let u=o(r);Sv(r,l,u)}}},Uc=(o,r,i,l,u)=>{let m=(v,y,x,A,E)=>{return(O=x(v,y,A,E),B=y.event,kn(O,(I=>I.matches(B))).map((I=>I.classification))).bind((I=>I(v,y,A,E)));var O,B},f={schema:()=>o.concat([Te("focusManager",V0()),za("focusInside","onFocus",Fd((v=>Ln(["onFocus","onEnterOrSpace","onApi"],v)?Nn.value(v):Nn.error("Invalid value for focusInside")))),Xo("handler",f),Xo("state",r),Xo("sendFocusIn",u)]),processKey:m,toEvents:(v,y)=>{let x=v.focusInside!==tt.OnFocusMode?_.none():u(v).map((E=>$e(j(),((O,B)=>{E(O,v,y),B.stop()})))),A=[$e(zi(),((E,O)=>{m(E,O,i,v,y).fold((()=>{((B,I)=>{let X=Kn(vl.concat($c))(I.event);v.focusInside===tt.OnEnterOrSpaceMode&&X&&Pr(B,I)&&u(v).each((W=>{W(B,v,y),I.stop()}))})(E,O)}),(B=>{O.stop()}))})),$e(h0(),((E,O)=>{m(E,O,l,v,y).each((B=>{O.stop()}))}))];return Lo(x.toArray().concat(A))}};return f},U0=o=>{let r=[no("onEscape"),no("onEnter"),Te("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Te("firstTabstop",0),Te("useTabstopAt",vn),no("visibilitySelector")].concat([o]),i=(A,E)=>{let O=A.visibilitySelector.bind((B=>Mr(E,B))).getOr(E);return Nr(O)>0},l=(A,E)=>E.focusManager.get(A).bind((O=>Mr(O,E.selector))),u=(A,E,O)=>{((B,I)=>{let X=aa(B.element,I.selector),W=pn(X,(K=>i(I,K)));return _.from(W[I.firstTabstop])})(A,E).each((B=>{E.focusManager.set(A,B)}))},m=(A,E,O,B)=>{let I=pn(aa(A.element,O.selector),(X=>i(O,X)));return l(A,O).bind((X=>Ja(I,ut(wn,X)).bind((W=>((K,V,U,J,ee)=>ee(V,U,(ue=>((ce,ge)=>i(ce,ge)&&ce.useTabstopAt(ge))(J,ue))).fold((()=>J.cyclic?_.some(!0):_.none()),(ue=>(J.focusManager.set(K,ue),_.some(!0)))))(A,I,W,O,B)))))},f=(A,E,O)=>{let B=O.cyclic?Oy:xv;return m(A,0,O,B)},v=(A,E,O)=>{let B=O.cyclic?t1:n1;return m(A,0,O,B)},y=ve([co(hd([zp,Kn(qd)]),f),co(Kn(qd),v),co(hd([o1,Kn($c)]),((A,E,O)=>O.onEnter.bind((B=>B(A,E)))))]),x=ve([co(Kn(Gg),((A,E,O)=>(A.getSystem().broadcastOn([Vc()],{closedTooltip:()=>{E.stop()}}),E.isStopped()?_.none():O.onEscape.bind((B=>B(A,E)))))),co(Kn(qd),((A,E,O)=>l(A,O).filter((B=>!O.useTabstopAt(B))).bind((B=>((I=>(X=>zo(X))(I).bind(ot).exists((X=>wn(X,I))))(B)?f:v)(A,E,O)))))]);return Uc(r,ji.init,y,x,(()=>_.some(u)))};var Z0=U0(kr("cyclic",zt)),W0=U0(kr("cyclic",vn));let Yg=o=>_o("input")(o)&&ds(o,"type")!=="radio"||_o("textarea")(o),If=(o,r,i)=>Yg(i)&&Kn(vl)(r.event)?_.none():((l,u,m)=>(Zd(l,m,Xe()),_.some(!0)))(o,0,i),Ff=(o,r)=>_.some(!0),Zc=[Te("execute",If),Te("useSpace",!1),Te("useEnter",!0),Te("useControlEnter",!1),Te("useDown",!1)],r1=(o,r,i)=>i.execute(o,r,o.element);var Dy=Uc(Zc,ji.init,((o,r,i,l)=>{let u=i.useSpace&&!Yg(o.element)?vl:[],m=i.useEnter?$c:[],f=i.useDown?Bf:[],v=u.concat(m).concat(f);return[co(Kn(v),r1)].concat(i.useControlEnter?[co(hd([jx,Kn($c)]),r1)]:[])}),((o,r,i,l)=>i.useSpace&&!Yg(o.element)?[co(Kn(vl),Ff)]:[]),(()=>_.none()));let Ry=()=>{let o=to();return hr({readState:()=>o.get().map((r=>({numRows:String(r.numRows),numColumns:String(r.numColumns)}))).getOr({numRows:"?",numColumns:"?"}),setGridSize:(r,i)=>{o.set({numRows:r,numColumns:i})},getNumRows:()=>o.get().map((r=>r.numRows)),getNumColumns:()=>o.get().map((r=>r.numColumns))})};var Ev=Object.freeze({__proto__:null,flatgrid:Ry,init:o=>o.state(o)});let bd=o=>(r,i,l,u)=>{let m=o(r.element);return zl(m,r,i,l,u)},Tv=(o,r)=>{let i=xg(o,r);return bd(i)},$m=(o,r)=>{let i=xg(r,o);return bd(i)},j0=o=>(r,i,l,u)=>zl(o,r,i,l,u),zl=(o,r,i,l,u)=>l.focusManager.get(r).bind((m=>o(r.element,m,l,u))).map((m=>(l.focusManager.set(r,m),!0))),$p=j0,Jr=j0,Vm=j0,Av=(o,r,i)=>{let l=aa(o,i);return(u=>Ja(u,(m=>wn(m,r))).map((m=>({index:m,candidates:u}))))(pn(l,vm))},Vp=(o,r)=>Ja(o,(i=>wn(r,i))),a1=(o,r,i,l)=>l(Math.floor(r/i),r%i).bind((u=>{let m=u.row*i+u.column;return m>=0&&m<o.length?_.some(o[m]):_.none()})),Ny=(o,r,i,l,u)=>a1(o,r,l,((m,f)=>{let v=m===i-1?o.length-m*l:l,y=_n(f,u,0,v-1);return _.some({row:m,column:y})})),i1=(o,r,i,l,u)=>a1(o,r,l,((m,f)=>{let v=_n(m,u,0,i-1),y=v===i-1?o.length-v*l:l,x=Yt(f,0,y-1);return _.some({row:v,column:x})})),Hf=[Ke("selector"),Te("execute",If),bl("onEscape"),Te("captureTab",!1),Fg()],Gd=(o,r,i)=>{xo(o.element,r.selector).each((l=>{r.focusManager.set(o,l)}))},Up=o=>(r,i,l,u)=>Av(r,i,l.selector).bind((m=>o(m.candidates,m.index,u.getNumRows().getOr(l.initSize.numRows),u.getNumColumns().getOr(l.initSize.numColumns)))),Qr=(o,r,i)=>i.captureTab?_.some(!0):_.none(),zf=Up(((o,r,i,l)=>Ny(o,r,i,l,-1))),yl=Up(((o,r,i,l)=>Ny(o,r,i,l,1))),My=Up(((o,r,i,l)=>i1(o,r,i,l,-1))),By=Up(((o,r,i,l)=>i1(o,r,i,l,1))),Zp=ve([co(Kn(Co),Tv(zf,yl)),co(Kn(Qh),$m(zf,yl)),co(Kn(Hp),$p(My)),co(Kn(Bf),Jr(By)),co(hd([zp,Kn(qd)]),Qr),co(hd([o1,Kn(qd)]),Qr),co(Kn(vl.concat($c)),((o,r,i,l)=>((u,m)=>m.focusManager.get(u).bind((f=>Mr(f,m.selector))))(o,i).bind((u=>i.execute(o,r,u)))))]),$f=ve([co(Kn(Gg),((o,r,i)=>i.onEscape(o,r))),co(Kn(vl),Ff)]);var Um=Uc(Hf,Ry,Zp,$f,(()=>_.some(Gd)));let lc=(o,r,i,l,u)=>{let m=(f,v,y)=>u(f,v,l,0,y.length-1,y[v],(x=>{return A=y[x],Ma(A)==="button"&&ds(A,"disabled")==="disabled"?m(f,x,y):_.from(y[x]);var A}));return Av(o,i,r).bind((f=>{let v=f.index,y=f.candidates;return m(v,v,y)}))},l1=(o,r,i,l)=>lc(o,r,i,l,((u,m,f,v,y,x,A)=>{let E=Yt(m+f,v,y);return E===u?_.from(x):A(E)})),q0=(o,r,i,l)=>lc(o,r,i,l,((u,m,f,v,y,x,A)=>{let E=_n(m,f,v,y);return E===u?_.none():A(E)})),c1=[Ke("selector"),Te("getInitial",_.none),Te("execute",If),bl("onEscape"),Te("executeOnMove",!1),Te("allowVertical",!0),Te("allowHorizontal",!0),Te("cycles",!0)],u1=(o,r,i)=>((l,u)=>u.focusManager.get(l).bind((m=>Mr(m,u.selector))))(o,i).bind((l=>i.execute(o,r,l))),Py=(o,r,i)=>{r.getInitial(o).orThunk((()=>xo(o.element,r.selector))).each((l=>{r.focusManager.set(o,l)}))},Vf=(o,r,i)=>(i.cycles?q0:l1)(o,i.selector,r,-1),d1=(o,r,i)=>(i.cycles?q0:l1)(o,i.selector,r,1),Ly=o=>(r,i,l,u)=>o(r,i,l,u).bind((()=>l.executeOnMove?u1(r,i,l):_.some(!0))),_v=ve([co(Kn(vl),Ff),co(Kn(Gg),((o,r,i)=>i.onEscape(o,r)))]);var g=Uc(c1,ji.init,((o,r,i,l)=>{let u=[...i.allowHorizontal?Co:[]].concat(i.allowVertical?Hp:[]),m=[...i.allowHorizontal?Qh:[]].concat(i.allowVertical?Bf:[]);return[co(Kn(u),Ly(Tv(Vf,d1))),co(Kn(m),Ly($m(Vf,d1))),co(Kn($c),u1),co(Kn(vl),u1)]}),_v,(()=>_.some(Py)));let h=(o,r,i)=>_.from(o[r]).bind((l=>_.from(l[i]).map((u=>({rowIndex:r,columnIndex:i,cell:u}))))),C=(o,r,i,l)=>{let u=o[r].length,m=_n(i,l,0,u-1);return h(o,r,m)},k=(o,r,i,l)=>{let u=_n(i,l,0,o.length-1),m=o[u].length,f=Yt(r,0,m-1);return h(o,u,f)},R=(o,r,i,l)=>{let u=o[r].length,m=Yt(i+l,0,u-1);return h(o,r,m)},N=(o,r,i,l)=>{let u=Yt(i+l,0,o.length-1),m=o[u].length,f=Yt(r,0,m-1);return h(o,u,f)},F=[ha("selectors",[Ke("row"),Ke("cell")]),Te("cycles",!0),Te("previousSelector",_.none),Te("execute",If)],$=(o,r,i)=>{r.previousSelector(o).orThunk((()=>{let l=r.selectors;return xo(o.element,l.cell)})).each((l=>{r.focusManager.set(o,l)}))},Q=(o,r)=>(i,l,u)=>{let m=u.cycles?o:r;return Mr(l,u.selectors.row).bind((f=>{let v=aa(f,u.selectors.cell);return Vp(v,l).bind((y=>{let x=aa(i,u.selectors.row);return Vp(x,f).bind((A=>{let E=((O,B)=>it(O,(I=>aa(I,B.selectors.cell))))(x,u);return m(E,A,y).map((O=>O.cell))}))}))}))},re=Q(((o,r,i)=>C(o,r,i,-1)),((o,r,i)=>R(o,r,i,-1))),pe=Q(((o,r,i)=>C(o,r,i,1)),((o,r,i)=>R(o,r,i,1))),ae=Q(((o,r,i)=>k(o,i,r,-1)),((o,r,i)=>N(o,i,r,-1))),de=Q(((o,r,i)=>k(o,i,r,1)),((o,r,i)=>N(o,i,r,1))),le=ve([co(Kn(Co),Tv(re,pe)),co(Kn(Qh),$m(re,pe)),co(Kn(Hp),$p(ae)),co(Kn(Bf),Jr(de)),co(Kn(vl.concat($c)),((o,r,i)=>Mo(o.element).bind((l=>i.execute(o,r,l)))))]),Se=ve([co(Kn(vl),Ff)]);var ye=Uc(F,ji.init,le,Se,(()=>_.some($)));let Ue=[Ke("selector"),Te("execute",If),Te("moveOnTab",!1)],We=(o,r,i)=>i.focusManager.get(o).bind((l=>i.execute(o,r,l))),nt=(o,r,i)=>{xo(o.element,r.selector).each((l=>{r.focusManager.set(o,l)}))},rt=(o,r,i)=>q0(o,i.selector,r,-1),at=(o,r,i)=>q0(o,i.selector,r,1),mt=ve([co(Kn(Hp),Vm(rt)),co(Kn(Bf),Vm(at)),co(hd([zp,Kn(qd)]),((o,r,i,l)=>i.moveOnTab?Vm(rt)(o,r,i,l):_.none())),co(hd([o1,Kn(qd)]),((o,r,i,l)=>i.moveOnTab?Vm(at)(o,r,i,l):_.none())),co(Kn($c),We),co(Kn(vl),We)]),vt=ve([co(Kn(vl),Ff)]);var Ht=Uc(Ue,ji.init,mt,vt,(()=>_.some(nt)));let ln=[bl("onSpace"),bl("onEnter"),bl("onShiftEnter"),bl("onLeft"),bl("onRight"),bl("onTab"),bl("onShiftTab"),bl("onUp"),bl("onDown"),bl("onEscape"),Te("stopSpaceKeyup",!1),no("focusIn")];var ho=Uc(ln,ji.init,((o,r,i)=>[co(Kn(vl),i.onSpace),co(hd([o1,Kn($c)]),i.onEnter),co(hd([zp,Kn($c)]),i.onShiftEnter),co(hd([zp,Kn(qd)]),i.onShiftTab),co(hd([o1,Kn(qd)]),i.onTab),co(Kn(Hp),i.onUp),co(Kn(Bf),i.onDown),co(Kn(Co),i.onLeft),co(Kn(Qh),i.onRight),co(Kn(vl),i.onSpace)]),((o,r,i)=>[...i.stopSpaceKeyup?[co(Kn(vl),Ff)]:[],co(Kn(Gg),i.onEscape)]),(o=>o.focusIn));let Tn=Z0.schema(),On=W0.schema(),Dn=g.schema(),Ro=Um.schema(),Ir=ye.schema(),di=Dy.schema(),_a=Ht.schema(),$l=ho.schema(),Ft=Cv({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Tn,cyclic:On,flow:Dn,flatgrid:Ro,matrix:Ir,execution:di,menu:_a,special:$l}),name:"keying",active:{events:(o,r)=>o.handler.toEvents(o,r)},apis:{focusIn:(o,r,i)=>{r.sendFocusIn(r).fold((()=>{o.getSystem().triggerFocus(o.element,o.element)}),(l=>{l(o,r,i)}))},setGridSize:(o,r,i,l,u)=>{(m=>Ds(m,"setGridSize"))(i)?i.setGridSize(l,u):console.error("Layout does not support setGridSize")}},state:Ev}),mi=we("alloy-premade"),Zm=o=>(Object.defineProperty(o.element.dom,mi,{value:o.uid,writable:!0}),wi(mi,o)),m1=o=>qt(o,mi),vd=o=>((r,i)=>{let l=i.toString(),u=l.indexOf(")")+1,m=l.indexOf("("),f=l.substring(m+1,u-1).split(/,\s*/);return r.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Tf(f.slice(1))}),r})(((r,...i)=>o(r.getApis(),r,...i)),o),g1=o=>o.getSystem().isConnected(),Bu=o=>{$n(o,hl());let r=o.components();Ot(r,Bu)},Kd=o=>{let r=o.components();Ot(r,Kd),$n(o,Vi())},Gx=(o,r)=>{o.getSystem().addToWorld(r),gr(o.element)&&Kd(r)},G0=o=>{Bu(o),o.getSystem().removeFromWorld(o)},Iy=(o,r)=>{Ks(o.element,r.element)},Uf=(o,r)=>{Kx(o,r,Ks)},Kx=(o,r,i)=>{o.getSystem().addToWorld(r),i(o.element,r.element),gr(o.element)&&Kd(r),o.syncComponents()},Fy=o=>{Bu(o),_c(o.element),o.getSystem().removeFromWorld(o)},Zf=o=>{let r=zo(o.element).bind((i=>o.getSystem().getByDom(i).toOptional()));Fy(o),r.each((i=>{i.syncComponents()}))},HE=o=>{let r=o.components();Ot(r,Fy),yp(o.element),o.syncComponents()},Hy=(o,r)=>{Wp(o,r,Ks)},Wm=(o,r)=>{Wp(o,r,Nl)},Wp=(o,r,i)=>{i(o,r.element);let l=fe(r.element);Ot(l,(u=>{r.getByDom(u).each(Kd)}))},IN=o=>{let r=fe(o.element);Ot(r,(i=>{o.getByDom(i).each(Bu)})),_c(o.element)},Fe=(o,r,i)=>{i.fold((()=>Ks(o,r)),(l=>{wn(l,r)||(Gs(l,r),_c(l))}))},Ov=(o,r,i)=>{let l=it(r,i),u=fe(o);return Ot(u.slice(l.length),_c),l},zE=(o,r,i,l)=>{let u=Be(o,r),m=l(i,u),f=((v,y,x)=>Be(v,y).map((A=>{if(x.exists((E=>!wn(E,A)))){let E=x.map(Ma).getOr("span"),O=rl(E);return Gs(A,O),O}return A})))(o,r,u);return Fe(o,m.element,f),m},Yx=(o,r)=>{let i=yn(r),l=qs(i).bind((m=>{let f=v=>wn(m,v);return f(r)?_.some(r):((v,y)=>{let x=A=>{for(let E=0;E<A.childNodes.length;E++){let O=bt(A.childNodes[E]);if(y(O))return _.some(O);let B=x(A.childNodes[E]);if(B.isSome())return B}return _.none()};return x(v.dom)})(r,f)})),u=o(r);return l.each((m=>{qs(i).filter((f=>wn(f,m))).fold((()=>{ct(m)}),Qe)})),u},zy=(o,r)=>{Yx((()=>{((i,l,u)=>{let m=i.components();(y=>{Ot(y.components(),(x=>_c(x.element))),yp(y.element),y.syncComponents()})(i);let f=u(l),v=ro(m,f);Ot(v,(y=>{Bu(y),i.getSystem().removeFromWorld(y)})),Ot(f,(y=>{g1(y)?Iy(i,y):(i.getSystem().addToWorld(y),Iy(i,y),gr(i.element)&&Kd(y))})),i.syncComponents()})(o,r,(()=>it(r,o.getSystem().build)))}),o.element)},Yd=(o,r)=>{Yx((()=>{((i,l)=>{let u=i.components(),m=vo(l,(y=>m1(y).toArray()));Ot(u,(y=>{Ln(m,y)||G0(y)}));let f=((y,x,A)=>Ov(y,x,((E,O)=>zE(y,O,E,A))))(o.element,r,o.getSystem().buildOrPatch),v=ro(u,f);Ot(v,(y=>{g1(y)&&G0(y)})),Ot(f,(y=>{g1(y)||Gx(i,y)})),i.syncComponents()})(o,r)}),o.element)},$E=(o,r,i,l)=>{G0(r);let u=zE(o.element,i,l,o.getSystem().buildOrPatch);Gx(o,u),o.syncComponents()},$y=(o,r,i)=>{let l=o.getSystem().build(i);Kx(o,l,r)},VE=(o,r,i,l)=>{Zf(r),$y(o,((u,m)=>((f,v,y)=>{Be(f,y).fold((()=>{Ks(f,v)}),(x=>{Gs(x,v)}))})(u,m,i)),l)},K0=(o,r)=>o.components(),UE=(o,r,i,l,u)=>{let m=K0(o);return _.from(m[l]).map((f=>(u.fold((()=>Zf(f)),(v=>{(r.reuseDom?$E:VE)(o,f,l,v)})),f)))};var ZE=Object.freeze({__proto__:null,append:(o,r,i,l)=>{$y(o,Ks,l)},prepend:(o,r,i,l)=>{$y(o,ra,l)},remove:(o,r,i,l)=>{let u=K0(o);kn(u,(f=>wn(l.element,f.element))).each(Zf)},replaceAt:UE,replaceBy:(o,r,i,l,u)=>{let m=K0(o);return Ja(m,l).bind((f=>UE(o,r,0,f,u)))},set:(o,r,i,l)=>(r.reuseDom?Yd:zy)(o,l),contents:K0});let Cn=Aa({fields:[Gr("reuseDom",!0)],name:"replacing",apis:ZE}),WE=Lo([(o=>({key:o,value:gd({can:(r,i)=>{let l=i.event,u=l.originator,m=l.target;return!((f,v,y)=>wn(v,f.element)&&!wn(v,y))(r,u,m)||(console.warn(j()+` did not get interpreted by the desired target. 
Originator: `+pr(u)+`
Target: `+pr(m)+`
Check the `+j()+" event handlers"),!1)}})}))(j())]);var FN=Object.freeze({__proto__:null,events:WE});let jE=ve("alloy-id-"),HN=ve("data-alloy-id"),zN=jE(),Xx=HN(),Y0=(o,r)=>{Object.defineProperty(o.dom,Xx,{value:r,writable:!0})},Dv=o=>{let r=Dr(o)?o.dom[Xx]:null;return _.from(r)},f1=o=>we(o),$N=ht,X0=o=>{let r=u=>`The component must be in a context to execute: ${u}`+(o?`
`+pr(o().element)+" is not in context.":""),i=u=>()=>{throw new Error(r(u))},l=u=>()=>{console.warn(r(u))};return{debugInfo:ve("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:i("build"),buildOrPatch:i("buildOrPatch"),addToWorld:i("addToWorld"),removeFromWorld:i("removeFromWorld"),addToGui:i("addToGui"),removeFromGui:i("removeFromGui"),getByUid:i("getByUid"),getByDom:i("getByDom"),isConnected:zt}},qE=X0(),Jx=(o,r)=>{let i={};return Ao(o,((l,u)=>{Ao(l,((m,f)=>{let v=qt(i,f).getOr([]);i[f]=v.concat([r(u,m)])}))})),i},Vy=o=>o.cHandler,VN=(o,r)=>({name:o,handler:r}),GE=(o,r)=>{let i={};return Ot(o,(l=>{i[l.name()]=l.handlers(r)})),i},UN=(o,r,i)=>{let l=r[i];return l?((u,m,f,v)=>{try{let y=Ri(f,((x,A)=>{let E=x[m],O=A[m],B=v.indexOf(E),I=v.indexOf(O);if(B===-1)throw new Error("The ordering for "+u+" does not have an entry for "+E+`.
Order specified: `+JSON.stringify(v,null,2));if(I===-1)throw new Error("The ordering for "+u+" does not have an entry for "+O+`.
Order specified: `+JSON.stringify(v,null,2));return B<I?-1:I<B?1:0}));return Nn.value(y)}catch(y){return Nn.error([y])}})("Event: "+i,"name",o,l).map((u=>(m=>({can:(y=>(...x)=>L(y,((A,E)=>A&&(O=>O.can)(E).apply(void 0,x)),!0))(m),abort:(y=>(...x)=>L(y,((A,E)=>A||(O=>O.abort)(E).apply(void 0,x)),!1))(m),run:(...y)=>{Ot(m,(x=>{x.run.apply(void 0,y)}))}}))(it(u,(m=>m.handler))))):((u,m)=>Nn.error(["The event ("+u+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(it(m,(f=>f.name)),null,2)]))(i,o)},ZN=(o,r)=>((i,l)=>{let u=(f=>{let v=[],y=[];return Ot(f,(x=>{x.fold((A=>{v.push(A)}),(A=>{y.push(A)}))})),{errors:v,values:y}})(i);return u.errors.length>0?(m=u.errors,Nn.error(Vs(m))):((f,v)=>f.length===0?Nn.value(v):Nn.value(Xn(v,Us.apply(void 0,f))))(u.values,l);var m})(Ni(o,((i,l)=>(i.length===1?Nn.value(i[0].handler):UN(i,r,l)).map((u=>{let m=(v=>{let y=(x=>jt(x)?{can:vn,abort:zt,run:x}:x)(v);return(x,A,...E)=>{let O=[x,A].concat(E);y.abort.apply(void 0,O)?A.stop():y.can.apply(void 0,O)&&y.run.apply(void 0,O)}})(u),f=i.length>1?pn(r[l],(v=>Ho(i,(y=>y.name===v)))).join(" > "):i[0].name;return wi(l,((v,y)=>({handler:v,purpose:y}))(m,f))})))),{}),jp="alloy.base.behaviour",KE=Jt([Sr("dom","dom",{tag:"required",process:{}},Jt([Ke("tag"),Te("styles",{}),Te("classes",[]),Te("attributes",{}),no("value"),no("innerHtml")])),Ke("components"),Ke("uid"),Te("events",{}),Te("apis",{}),Sr("eventOrder","eventOrder",(eS={[Xe()]:["disabling",jp,"toggling","typeaheadevents"],[j()]:[jp,"focusing","keying"],[Si()]:[jp,"disabling","toggling","representing","tooltipping"],[Pc()]:[jp,"representing","streaming","invalidating"],[hl()]:[jp,"representing","item-events","toolbar-button-events","tooltipping"],[gs()]:["focusing",jp,"item-type-events"],[oc()]:["focusing",jp,"item-type-events"],[xi()]:["item-type-events","tooltipping"],[Je()]:["receiving","reflecting","tooltipping"]},Tp(ve(eS))),gl()),no("domModification")]),WN=o=>o.events,Uy=(o,r)=>{let i=rn(o),l=rn(r),u=ro(l,i),m=(f=>{let v={},y={};return Qa(f,((x,A)=>!Sn(r,A)||x!==r[A]),cr(v),cr(y)),{t:v,f:y}})(o).t;return{toRemove:u,toSet:m}},J0=(o,r)=>{let i=r.filter((l=>Ma(l)===o.tag&&!(u=>u.innerHtml.isSome()&&u.domChildren.length>0)(o)&&!(u=>Sn(u.dom,mi))(l))).bind((l=>((u,m)=>{try{let f=((v,y)=>{let{class:x,style:A,...E}=(J=>L(J.dom.attributes,((ee,ue)=>(ee[ue.name]=ue.value,ee)),{}))(y),{toSet:O,toRemove:B}=Uy(v.attributes,E),I=bm(y),{toSet:X,toRemove:W}=Uy(v.styles,I),K=vf(y),V=ro(K,v.classes),U=ro(v.classes,K);return Ot(B,(J=>Bs(y,J))),En(y,O),dl(y,U),ka(y,V),Ot(W,(J=>Un(y,J))),Bd(y,X),v.innerHtml.fold((()=>{let J=v.domChildren;((ee,ue)=>{Ov(ee,ue,((ce,ge)=>{let Re=Be(ee,ge);return Fe(ee,ce,Re),ce}))})(y,J)}),(J=>{bg(y,J)})),(()=>{let J=y,ee=v.value.getOrUndefined();ee!==Bo(J)&&Hi(J,ee??"")})(),y})(u,m);return _.some(f)}catch{return _.none()}})(o,l))).getOrThunk((()=>(l=>{let u=rl(l.tag);En(u,l.attributes),dl(u,l.classes),Bd(u,l.styles),l.innerHtml.each((f=>bg(u,f)));let m=l.domChildren;return Cr(u,m),l.value.each((f=>{Hi(u,f)})),u})(o)));return Y0(i,o.uid),i},p1=o=>{let r=(i=>{let l=qt(i,"behaviours").getOr({});return vo(rn(l),(u=>{let m=l[u];return $t(m)?[m.me]:[]}))})(o);return((i,l)=>((u,m)=>{let f=it(m,(y=>ci(y.name(),[Ke("config"),Te("state",ji)]))),v=ss("component.behaviours",Jt(f),u.behaviours).fold((y=>{throw new Error(Rc(y)+`
Complete spec:
`+JSON.stringify(u,null,2))}),ht);return{list:m,data:_s(v,(y=>{let x=y.map((A=>({config:A.config,state:A.state.init(A.config)})));return ve(x)}))}})(i,l))(o,r)},jm=(o,r)=>{let i=()=>O,l=Rt(qE),u=Ia((B=>ss("custom.definition",KE,B))(o)),m=p1(o),f=(B=>B.list)(m),v=(B=>B.data)(m),y=((B,I,X)=>{let W={...(K=B).dom,uid:K.uid,domChildren:it(K.components,(ce=>ce.element))};var K;let V=(ce=>ce.domModification.fold((()=>Nu({})),Nu))(B),U={"alloy.base.modification":V},J=I.length>0?((ce,ge,Re,Ne)=>{let Ae={...ge};Ot(Re,(Fn=>{Ae[Fn.name()]=Fn.exhibit(ce,Ne)}));let Le=Jx(Ae,((Fn,fo)=>({name:Fn,modification:fo}))),Ye=Fn=>so(Fn,((fo,Zo)=>({...Zo.modification,...fo})),{}),Dt=so(Le.classes,((Fn,fo)=>fo.modification.concat(Fn)),[]),nn=Ye(Le.attributes),sn=Ye(Le.styles);return Nu({classes:Dt,attributes:nn,styles:sn})})(X,U,I,W):V;return ee=W,ue=J,{...ee,attributes:{...ee.attributes,...ue.attributes},styles:{...ee.styles,...ue.styles},classes:ee.classes.concat(ue.classes)};var ee,ue})(u,f,v),x=J0(y,r),A=((B,I,X)=>{let W={"alloy.base.behaviour":WN(B)};return((K,V,U,J)=>{let ee=((ue,ce,ge)=>{let Re={...ge,...GE(ce,ue)};return Jx(Re,VN)})(K,U,J);return ZN(ee,V)})(X,B.eventOrder,I,W).getOrDie()})(u,f,v),E=Rt(u.components),O={uid:o.uid,getSystem:l.get,config:B=>{let I=v;return(jt(I[B.name()])?I[B.name()]:()=>{throw new Error("Could not find "+B.name()+" in "+JSON.stringify(o,null,2))})()},hasConfigured:B=>jt(v[B.name()]),spec:o,readState:B=>v[B]().map((I=>I.state.readState())).getOr("not enabled"),getApis:()=>u.apis,connect:B=>{l.set(B)},disconnect:()=>{l.set(X0(i))},element:x,syncComponents:()=>{let B=fe(x),I=vo(B,(X=>l.get().getByDom(X).fold((()=>[]),Pe)));E.set(I)},components:E.get,events:A};return O},xs=o=>{let r=fm(o);return YE({element:r})},YE=o=>{let r=li("external.component",fa([Ke("element"),no("uid")]),o),i=Rt(X0()),l=r.uid.getOrThunk((()=>f1("external")));Y0(r.element,l);let u={uid:l,getSystem:i.get,config:_.none,hasConfigured:zt,connect:m=>{i.set(m)},disconnect:()=>{i.set(X0((()=>u)))},getApis:()=>({}),element:r.element,spec:o,readState:ve("No state"),syncComponents:Qe,components:ve([]),events:{}};return Zm(u)},jN=f1,Qx=(o,r)=>m1(o).getOrThunk((()=>((i,l)=>{let{events:u,...m}=$N(i),f=((y,x)=>{let A=qt(y,"components").getOr([]);return x.fold((()=>it(A,qi)),(E=>it(A,((O,B)=>Qx(O,Be(E,B))))))})(m,l),v={...m,events:{...FN,...u},components:f};return Nn.value(jm(v,l))})((i=>Sn(i,"uid"))(o)?o:{uid:jN(""),...o},r).getOrDie())),qi=o=>Qx(o,_.none()),Pu=Zm;var eS,XE=Object.freeze({__proto__:null,block:(o,r,i,l)=>{en(o.element,"aria-busy",!0);let u=r.getRoot(o).getOr(o),m=st([Ft.config({mode:"special",onTab:()=>_.some(!0),onShiftTab:()=>_.some(!0)}),un.config({})]),f=l(u,m),v=u.getSystem().build(f);Cn.append(u,Pu(v)),v.hasConfigured(Ft)&&r.focus&&Ft.focusIn(v),i.isBlocked()||r.onBlock(o),i.blockWith((()=>Cn.remove(u,v)))},unblock:(o,r,i)=>{Bs(o.element,"aria-busy"),i.isBlocked()&&r.onUnblock(o),i.clear()},isBlocked:(o,r,i)=>i.isBlocked()}),LL=[rs("getRoot",_.none),Gr("focus",!0),Rn("onBlock"),Rn("onUnblock")];let Xg=Aa({fields:LL,name:"blocking",apis:XE,state:Object.freeze({__proto__:null,init:()=>{let o=_l((r=>r.destroy()));return hr({readState:o.isSet,blockWith:r=>{o.set({destroy:r})},clear:o.clear,isBlocked:o.isSet})}})});var Gi=Object.freeze({__proto__:null,getCurrent:(o,r,i)=>r.find(o)});let JE=[Ke("find")],io=Aa({fields:JE,name:"composing",apis:Gi});var QE=Object.freeze({__proto__:null,getCoupled:(o,r,i,l)=>i.getOrCreate(o,r,l),getExistingCoupled:(o,r,i,l)=>i.getExisting(o,r,l)}),qN=[Ci("others",p0(Nn.value,gl()))],GN=Object.freeze({__proto__:null,init:()=>{let o={},r=(l,u)=>{if(rn(l.others).length===0)throw new Error("Cannot find any known coupled components");return qt(o,u)},i=ve({});return hr({readState:i,getExisting:(l,u,m)=>r(u,m).orThunk((()=>(qt(u.others,m).getOrDie("No information found for coupled component: "+m),_.none()))),getOrCreate:(l,u,m)=>r(u,m).getOrThunk((()=>{let f=qt(u.others,m).getOrDie("No information found for coupled component: "+m)(l),v=l.getSystem().build(f);return o[m]=v,v}))})}});let br=Aa({fields:qN,name:"coupling",apis:QE,state:GN}),KN=["input","button","textarea","select"],Zy=(o,r,i)=>{(r.disabled()?oS:Wy)(o,r)},Rv=(o,r)=>r.useNative===!0&&Ln(KN,Ma(o.element)),YN=o=>{en(o.element,"disabled","disabled")},tS=o=>{Bs(o.element,"disabled")},eT=o=>{en(o.element,"aria-disabled","true")},nS=o=>{en(o.element,"aria-disabled","false")},oS=(o,r,i)=>{r.disableClass.each((l=>{bs(o.element,l)})),(Rv(o,r)?YN:eT)(o),r.onDisabled(o)},Wy=(o,r,i)=>{r.disableClass.each((l=>{$o(o.element,l)})),(Rv(o,r)?tS:nS)(o),r.onEnabled(o)},sS=(o,r)=>Rv(o,r)?(i=>Oh(i.element,"disabled"))(o):(i=>ds(i.element,"aria-disabled")==="true")(o);var XN=Object.freeze({__proto__:null,enable:Wy,disable:oS,isDisabled:sS,onLoad:Zy,set:(o,r,i,l)=>{(l?oS:Wy)(o,r)}}),tT=Object.freeze({__proto__:null,exhibit:(o,r)=>Nu({classes:r.disabled()?r.disableClass.toArray():[]}),events:(o,r)=>Lo([Wg(Xe(),((i,l)=>sS(i,o))),Ip(o,r,Zy)])}),JN=[rs("disabled",zt),Te("useNative",!0),no("disableClass"),Rn("onDisabled"),Rn("onEnabled")];let Ut=Aa({fields:JN,name:"disabling",active:tT,apis:XN}),qm=(o,r,i,l,u)=>{let m=f=>f+"px";return{position:o,left:r.map(m),top:i.map(m),right:l.map(m),bottom:u.map(m)}},QN=(o,r)=>{td(o,(i=>({...i,position:_.some(i.position)}))(r))},e6=(o,r)=>{let i=o.element;bs(i,r.transitionClass),$o(i,r.fadeOutClass),bs(i,r.fadeInClass),r.onShow(o)},t6=(o,r)=>{let i=o.element;bs(i,r.transitionClass),$o(i,r.fadeInClass),bs(i,r.fadeOutClass),r.onHide(o)},rS=(o,r)=>o.y>=r.y,nT=(o,r)=>o.bottom<=r.bottom,aS=(o,r,i)=>({location:"top",leftX:r,topY:i.bounds.y-o.y}),iS=(o,r,i)=>({location:"bottom",leftX:r,bottomY:o.bottom-i.bounds.bottom}),lS=o=>o.box.x-o.win.x,Nv=(o,r,i)=>i.getInitialPos().map((l=>{let u=((m,f)=>{let v=f.optScrollEnv.fold(ve(m.bounds.y),(y=>y.scrollElmTop+(m.bounds.y-y.currentScrollTop)));return Qt(m.bounds.x,v)})(l,r);return{box:wr(u.left,u.top,hs(o),Nr(o)),location:l.location}})),jy=(o,r,i,l,u)=>{let m=((v,y)=>{let x=y.optScrollEnv.fold(ve(v.y),(A=>v.y+A.currentScrollTop-A.scrollElmTop));return Qt(v.x,x)})(r,i),f=wr(m.left,m.top,r.width,r.height);l.setInitialPos({style:bm(o),position:ga(o,"position")||"static",bounds:f,location:u.location})},oT=(o,r,i)=>i.getInitialPos().bind((l=>{switch(i.clearInitialPos(),l.position){case"static":return _.some({morph:"static"});case"absolute":let u=Ea(o).getOr(Ys()),m=Br(u),f=u.dom.scrollTop??0;return _.some({morph:"absolute",positionCss:qm("absolute",qt(l.style,"left").map((v=>r.x-m.x)),qt(l.style,"top").map((v=>r.y-m.y+f)),qt(l.style,"right").map((v=>m.right-r.right)),qt(l.style,"bottom").map((v=>m.bottom-r.bottom)))});default:return _.none()}})),cS=o=>{switch(o.location){case"top":return _.some({morph:"fixed",positionCss:qm("fixed",_.some(o.leftX),_.some(o.topY),_.none(),_.none())});case"bottom":return _.some({morph:"fixed",positionCss:qm("fixed",_.some(o.leftX),_.none(),_.none(),_.some(o.bottomY))});default:return _.none()}},n6=(o,r,i)=>{let l=o.element;return Da(Hs(l,"position"),"fixed")?((u,m,f)=>((v,y,x)=>Nv(v,y,x).filter((({box:A})=>((E,O,B)=>hi(E,(I=>{switch(I){case"bottom":return nT(O,B.bounds);case"top":return rS(O,B.bounds)}})))(x.getModes(),A,y))).bind((({box:A})=>oT(v,A,x))))(u,m,f).orThunk((()=>m.optScrollEnv.bind((v=>Nv(u,m,f))).bind((({box:v,location:y})=>{let x=Wr(),A=lS({win:x,box:v}),E=y==="top"?aS(x,A,m):iS(x,A,m);return cS(E)})))))(l,r,i):((u,m,f)=>{let v=Br(u),y=Wr(),x=((A,E,O)=>{let B=E.win,I=E.box,X=lS(E);return Mt(A,(W=>{switch(W){case"bottom":return nT(I,O.bounds)?_.none():_.some(iS(B,X,O));case"top":return rS(I,O.bounds)?_.none():_.some(aS(B,X,O));default:return _.none()}})).getOr({location:"no-dock"})})(f.getModes(),{win:y,box:v},m);return x.location==="top"||x.location==="bottom"?(jy(u,v,m,f,x),cS(x)):_.none()})(l,r,i)},qy=(o,r,i)=>{i.setDocked(!1),Ot(["left","right","top","bottom","position"],(l=>Un(o.element,l))),r.onUndocked(o)},Gy=(o,r,i,l)=>{let u=l.position==="fixed";i.setDocked(u),QN(o.element,l),(u?r.onDocked:r.onUndocked)(o)},qp=(o,r,i,l,u=!1)=>{r.contextual.each((m=>{m.lazyContext(o).each((f=>{let v=((y,x)=>y.y<x.bottom&&y.bottom>x.y)(f,l.bounds);v!==i.isVisible()&&(i.setVisible(v),u&&!v?(dl(o.element,[m.fadeOutClass]),m.onHide(o)):(v?e6:t6)(o,m))}))}))},sT=(o,r,i,l,u)=>{qp(o,r,i,l,!0),Gy(o,r,i,u.positionCss)},Mv=(o,r,i)=>{o.getSystem().isConnected()&&((l,u,m)=>{let f=u.lazyViewport(l);qp(l,u,m,f),n6(l,f,m).each((v=>{((y,x,A,E,O)=>{switch(O.morph){case"static":return qy(y,x,A);case"absolute":return Gy(y,x,A,O.positionCss);case"fixed":sT(y,x,A,E,O)}})(l,u,m,f,v)}))})(o,r,i)},Ky=(o,r,i)=>{i.isDocked()&&((l,u,m)=>{let f=l.element;m.setDocked(!1);let v=u.lazyViewport(l);((y,x,A)=>{let E=y.element;return Nv(E,x,A).bind((({box:O})=>oT(E,O,A)))})(l,v,m).each((y=>{switch(y.morph){case"static":qy(l,u,m);break;case"absolute":Gy(l,u,m,y.positionCss)}})),m.setVisible(!0),u.contextual.each((y=>{ka(f,[y.fadeInClass,y.fadeOutClass,y.transitionClass]),y.onShow(l)})),Mv(l,u,m)})(o,r,i)},uS=o=>(r,i,l)=>{let u=i.lazyViewport(r);((m,f,v,y)=>{let x=Br(m),A=Wr(),E=y(A,lS({win:A,box:x}),f);return E.location==="bottom"||E.location==="top"?(((O,B,I,X,W)=>{X.getInitialPos().fold((()=>jy(O,B,I,X,W)),(()=>Qe))})(m,x,f,v,E),cS(E)):_.none()})(r.element,u,l,o).each((m=>{sT(r,i,l,u,m)}))},o6=uS(aS),s6=uS(iS);var rT=Object.freeze({__proto__:null,refresh:Mv,reset:Ky,isDocked:(o,r,i)=>i.isDocked(),getModes:(o,r,i)=>i.getModes(),setModes:(o,r,i,l)=>i.setModes(l),forceDockToTop:o6,forceDockToBottom:s6}),Gm=Object.freeze({__proto__:null,events:(o,r)=>Lo([fd(Ig(),((i,l)=>{o.contextual.each((u=>{Js(i.element,u.transitionClass)&&(ka(i.element,[u.transitionClass,u.fadeInClass]),(r.isVisible()?u.onShown:u.onHidden)(i)),l.stop()}))})),$e(Eu(),((i,l)=>{Mv(i,o,r)})),$e(kf(),((i,l)=>{Mv(i,o,r)})),$e($i(),((i,l)=>{Ky(i,o,r)}))])}),r6=[ci("contextual",[fr("fadeInClass"),fr("fadeOutClass"),fr("transitionClass"),jr("lazyContext"),Rn("onShow"),Rn("onShown"),Rn("onHide"),Rn("onHidden")]),rs("lazyViewport",(()=>({bounds:Wr(),optScrollEnv:_.none()}))),Su("modes",["top","bottom"],ms),Rn("onDocked"),Rn("onUndocked")];let $s=Aa({fields:r6,name:"docking",active:Gm,apis:rT,state:Object.freeze({__proto__:null,init:o=>{let r=Rt(!1),i=Rt(!0),l=to(),u=Rt(o.modes);return hr({isDocked:r.get,setDocked:r.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:i.get,setVisible:i.set,getModes:u.get,setModes:u.set,readState:()=>`docked:  ${r.get()}, visible: ${i.get()}, modes: ${u.get().join(",")}`})}})}),Yy=ks([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),Bv=o=>r=>r.translate(-o.left,-o.top),Xy=o=>r=>r.translate(o.left,o.top),Wf=o=>(r,i)=>L(o,((l,u)=>u(l)),Qt(r,i)),Jy=(o,r,i)=>o.fold(Wf([Xy(i),Bv(r)]),Wf([Bv(r)]),Wf([])),Q0=(o,r,i)=>o.fold(Wf([Xy(i)]),Wf([]),Wf([Xy(r)])),aT=(o,r,i)=>o.fold(Wf([]),Wf([Bv(i)]),Wf([Xy(r),Bv(i)])),dS=(o,r,i)=>{let l=o.fold(((u,m)=>({position:_.some("absolute"),left:_.some(u+"px"),top:_.some(m+"px")})),((u,m)=>({position:_.some("absolute"),left:_.some(u-i.left+"px"),top:_.some(m-i.top+"px")})),((u,m)=>({position:_.some("fixed"),left:_.some(u+"px"),top:_.some(m+"px")})));return{right:_.none(),bottom:_.none(),...l}},Qy=(o,r,i,l)=>{let u=(m,f)=>(v,y)=>{let x=m(r,i,l);return f(v.getOr(x.left),y.getOr(x.top))};return o.fold(u(aT,eC),u(Q0,Jg),u(Jy,Gp))},eC=Yy.offset,Jg=Yy.absolute,Gp=Yy.fixed,iT=(o,r)=>{let i=ds(o,r);return Hr(i)?NaN:parseInt(i,10)},a6=(o,r,i,l,u,m)=>{let f=((x,A,E,O)=>((B,I)=>{let X=B.element,W=iT(X,I.leftAttr),K=iT(X,I.topAttr);return isNaN(W)||isNaN(K)?_.none():_.some(Qt(W,K))})(x,A).fold((()=>E),(B=>Gp(B.left+O.left,B.top+O.top))))(o,r,i,l),v=r.mustSnap?i6(o,r,f,u,m):l6(o,r,f,u,m),y=Jy(f,u,m);return((x,A,E)=>{let O=x.element;en(O,A.leftAttr,E.left+"px"),en(O,A.topAttr,E.top+"px")})(o,r,y),v.fold((()=>({coord:Gp(y.left,y.top),extra:_.none()})),(x=>({coord:x.output,extra:x.extra})))},lT=(o,r,i,l)=>Mt(o,(u=>{let m=u.sensor;return((v,y,x,A,E,O)=>{let B=Q0(v,E,O),I=Q0(y,E,O);return Math.abs(B.left-I.left)<=x&&Math.abs(B.top-I.top)<=A})(r,m,u.range.left,u.range.top,i,l)?_.some({output:Qy(u.output,r,i,l),extra:u.extra}):_.none()})),i6=(o,r,i,l,u)=>{let m=r.getSnapPoints(o);return lT(m,i,l,u).orThunk((()=>L(m,((v,y)=>{let x=y.sensor,A=((E,O,B,I,X,W)=>{let K=Q0(E,X,W),V=Q0(O,X,W),U=Math.abs(K.left-V.left),J=Math.abs(K.top-V.top);return Qt(U,J)})(i,x,y.range.left,y.range.top,l,u);return v.deltas.fold((()=>({deltas:_.some(A),snap:_.some(y)})),(E=>(A.left+A.top)/2<=(E.left+E.top)/2?{deltas:_.some(A),snap:_.some(y)}:v))}),{deltas:_.none(),snap:_.none()}).snap.map((v=>({output:Qy(v.output,i,l,u),extra:v.extra})))))},l6=(o,r,i,l,u)=>{let m=r.getSnapPoints(o);return lT(m,i,l,u)};var c6=Object.freeze({__proto__:null,snapTo:(o,r,i,l)=>{let u=r.getTarget(o.element);if(r.repositionTarget){let m=sa(o.element),f=fn(m),v=ai(u),y=((A,E,O)=>({coord:Qy(A.output,A.output,E,O),extra:A.extra}))(l,f,v),x=dS(y.coord,0,v);td(u,x)}}});let gi=(o,r)=>Ap(o,{},it(r,(i=>{return l=i.name(),u="Cannot configure "+i.name()+" for "+o,Sr(l,l,{tag:"option",process:{}},ii((m=>vi("The field: "+l+" is forbidden. "+u))));var l,u})).concat([kr("dump",ht)])),mS=o=>o.dump,Ti=(o,r)=>({...st(r),...o.dump}),eb=gi,tb=Ti,cT=(o,r,i,l,u)=>{let m=((f,v)=>(f.length>0?[ha("parts",f)]:[]).concat([Ke("uid"),Te("dom",{}),Te("components",[]),py("originalSpec"),Te("debug.sketcher",{})]).concat(v))(l,u);return li(o+" [SpecSchema]",fa(m.concat(r)),i)},tC=(o,r,i,l,u)=>{let m=gS(u),f=Dp(i),v=O0(i),y=cT(o,r,m,f,[v]),x=Ih(0,y,i);return l(y,A0(o,y,x.internals()),m,x.externals())},gS=o=>(r=>Sn(r,"uid"))(o)?o:{...o,uid:f1("uid")},uT=fa([Ke("name"),Ke("factory"),Ke("configFields"),Te("apis",{}),Te("extraApis",{})]),u6=fa([Ke("name"),Ke("factory"),Ke("configFields"),Ke("partFields"),Te("apis",{}),Te("extraApis",{})]),Wc=o=>{let r=li("Sketcher for "+o.name,uT,o),i=_s(r.apis,vd),l=_s(r.extraApis,((u,m)=>Ou(u,m)));return{name:r.name,configFields:r.configFields,sketch:u=>((m,f,v,y)=>{let x=gS(y);return v(cT(m,f,x,[],[]),x)})(r.name,r.configFields,r.factory,u),...i,...l}},Vl=o=>{let r=li("Sketcher for "+o.name,u6,o),i=dd(r.name,r.partFields),l=_s(r.apis,vd),u=_s(r.extraApis,((m,f)=>Ou(m,f)));return{name:r.name,partFields:r.partFields,configFields:r.configFields,sketch:m=>tC(r.name,r.configFields,r.partFields,r.factory,m),parts:i,...l,...u}},Xd=Wc({name:"Container",factory:o=>{let{attributes:r,...i}=o.dom;return{uid:o.uid,dom:{tag:"div",attributes:{role:"presentation",...r},...i},components:o.components,behaviours:mS(o.containerBehaviours),events:o.events,domModification:o.domModification,eventOrder:o.eventOrder}},configFields:[Te("components",[]),gi("containerBehaviours",[]),Te("events",{}),Te("domModification",{}),Te("eventOrder",{})]}),fS="data-initial-z-index",dT=(o,r)=>{o.getSystem().addToGui(r),(i=>{zo(i.element).filter(Dr).each((l=>{Hs(l,"z-index").each((u=>{en(l,fS,u)})),q(l,"z-index",ga(i.element,"z-index"))}))})(r)},pS=o=>{(r=>{zo(r.element).filter(Dr).each((i=>{Zs(i,fS).fold((()=>Un(i,"z-index")),(l=>q(i,"z-index",l))),Bs(i,fS)}))})(o),o.getSystem().removeFromGui(o)},mT=(o,r,i)=>o.getSystem().build(Xd.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[r]},events:i}));var d6=ci("snaps",[Ke("getSnapPoints"),Rn("onSensor"),Ke("leftAttr"),Ke("topAttr"),Te("lazyViewport",Wr),Te("mustSnap",!1)]);let hS=[Te("useFixed",zt),Ke("blockerClass"),Te("getTarget",ht),Te("onDrag",Qe),Te("repositionTarget",!0),Te("onDrop",Qe),rs("getBounds",Wr),d6],gT=o=>{return(r=Hs(o,"left"),i=Hs(o,"top"),l=Hs(o,"position"),r.isSome()&&i.isSome()&&l.isSome()?_.some(((u,m,f)=>(f==="fixed"?Gp:eC)(parseInt(u,10),parseInt(m,10)))(r.getOrDie(),i.getOrDie(),l.getOrDie())):_.none()).getOrThunk((()=>{let u=Ii(o);return Jg(u.left,u.top)}));var r,i,l},fT=(o,r)=>({bounds:o.getBounds(),height:Ml(r.element),width:fu(r.element)}),bS=(o,r,i,l,u)=>{let m=i.update(l,u),f=i.getStartData().getOrThunk((()=>fT(r,o)));m.each((v=>{((y,x,A,E)=>{let O=x.getTarget(y.element);if(x.repositionTarget){let B=sa(y.element),I=fn(B),X=ai(O),W=gT(O),K=((U,J,ee,ue,ce,ge,Re)=>((Ne,Ae,Le,Ye,Dt)=>{let nn=Dt.bounds,sn=Q0(Ae,Le,Ye),Fn=Yt(sn.left,nn.x,nn.x+nn.width-Dt.width),fo=Yt(sn.top,nn.y,nn.y+nn.height-Dt.height),Zo=Jg(Fn,fo);return Ae.fold((()=>{let tn=aT(Zo,Le,Ye);return eC(tn.left,tn.top)}),ve(Zo),(()=>{let tn=Jy(Zo,Le,Ye);return Gp(tn.left,tn.top)}))})(0,J.fold((()=>{let Ne=(Ae=ee,Le=ge.left,Ye=ge.top,Ae.fold(((nn,sn)=>eC(nn+Le,sn+Ye)),((nn,sn)=>Jg(nn+Le,sn+Ye)),((nn,sn)=>Gp(nn+Le,sn+Ye))));var Ae,Le,Ye;let Dt=Jy(Ne,ue,ce);return Gp(Dt.left,Dt.top)}),(Ne=>{let Ae=a6(U,Ne,ee,ge,ue,ce);return Ae.extra.each((Le=>{Ne.onSensor(U,Le)})),Ae.coord})),ue,ce,Re))(y,x.snaps,W,I,X,E,A),V=dS(K,0,X);td(O,V)}x.onDrag(y,O,E)})(o,r,f,v)}))},pT=(o,r,i,l)=>{r.each(pS),i.snaps.each((m=>{((f,v)=>{((y,x)=>{let A=y.element;Bs(A,x.leftAttr),Bs(A,x.topAttr)})(f,v)})(o,m)}));let u=i.getTarget(o.element);l.reset(),i.onDrop(o,u)},Pv=o=>(r,i)=>{let l=u=>{i.setStartData(fT(r,u))};return Lo([$e(Eu(),(u=>{i.getStartData().each((()=>l(u)))})),...o(r,i,l)])};var m6=Object.freeze({__proto__:null,getData:o=>_.from(Qt(o.x,o.y)),getDelta:(o,r)=>Qt(r.left-o.left,r.top-o.top)});let hT=(o,r,i)=>[$e(gs(),((l,u)=>{if(u.event.raw.button!==0)return;u.stop();let m=()=>pT(l,_.some(y),o,r),f=y0(m,200),v={drop:m,delayDrop:f.schedule,forceDrop:m,move:x=>{f.cancel(),bS(l,o,r,m6,x)}},y=mT(l,o.blockerClass,(x=>Lo([$e(gs(),x.forceDrop),$e(Pg(),x.drop),$e(Nm(),((A,E)=>{x.move(E.event)})),$e(id(),x.delayDrop)]))(v));i(l),dT(l,y)}))],g6=[...hS,Xo("dragger",{handlers:Pv(hT)})];var vS=Object.freeze({__proto__:null,getData:o=>{let r=o.raw.touches;return r.length===1?(i=>{let l=i[0];return _.some(Qt(l.clientX,l.clientY))})(r):_.none()},getDelta:(o,r)=>Qt(r.left-o.left,r.top-o.top)});let Nt=(o,r,i)=>{let l=to(),u=m=>{pT(m,l.get(),o,r),l.clear()};return[$e(oc(),((m,f)=>{f.stop();let v=()=>u(m),y={drop:v,delayDrop:Qe,forceDrop:v,move:A=>{bS(m,o,r,vS,A)}},x=mT(m,o.blockerClass,(A=>Lo([$e(oc(),A.forceDrop),$e(Bc(),A.drop),$e(sc(),A.drop),$e(Sf(),((E,O)=>{A.move(O.event)}))]))(y));l.set(x),i(m),dT(m,x)})),$e(Sf(),((m,f)=>{f.stop(),bS(m,o,r,vS,f.event)})),$e(Bc(),((m,f)=>{f.stop(),u(m)})),$e(sc(),u)]},nC=g6,bT=[...hS,Xo("dragger",{handlers:Pv(Nt)})],f6=[...hS,Xo("dragger",{handlers:Pv(((o,r,i)=>[...hT(o,r,i),...Nt(o,r,i)]))})];var p6=Object.freeze({__proto__:null,mouse:nC,touch:bT,mouseOrTouch:f6}),h6=Object.freeze({__proto__:null,init:()=>{let o=_.none(),r=_.none(),i=ve({});return hr({readState:i,reset:()=>{o=_.none(),r=_.none()},update:(l,u)=>l.getData(u).bind((m=>((f,v)=>{let y=o.map((x=>f.getDelta(x,v)));return o=_.some(v),y})(l,m))),getStartData:()=>r,setStartData:l=>{r=_.some(l)}})}});let Kp=Cv({branchKey:"mode",branches:p6,name:"dragging",active:{events:(o,r)=>o.dragger.handlers(o,r)},extra:{snap:o=>({sensor:o.sensor,range:o.range,output:o.output,extra:_.from(o.extra)})},state:h6,apis:c6}),b6=["input","textarea"],vT=o=>{let r=Ma(o);return Ln(b6,r)},yS=(o,r)=>{let i=r.getRoot(o).getOr(o.element);$o(i,r.invalidClass),r.notify.each((l=>{vT(o.element)&&en(o.element,"aria-invalid",!1),l.getContainer(o).each((u=>{bg(u,l.validHtml)})),l.onValid(o)}))},yT=(o,r,i,l)=>{let u=r.getRoot(o).getOr(o.element);bs(u,r.invalidClass),r.notify.each((m=>{vT(o.element)&&en(o.element,"aria-invalid",!0),m.getContainer(o).each((f=>{bg(f,l)})),m.onInvalid(o,l)}))},fi=(o,r,i)=>r.validator.fold((()=>oa(Nn.value(!0))),(l=>l.validate(o))),Yp=(o,r,i)=>(r.notify.each((l=>{l.onValidate(o)})),fi(o,r).map((l=>o.getSystem().isConnected()?l.fold((u=>(yT(o,r,0,u),Nn.error(u))),(u=>(yS(o,r),Nn.value(u)))):Nn.error("No longer in system"))));var v6=Object.freeze({__proto__:null,markValid:yS,markInvalid:yT,query:fi,run:Yp,isInvalid:(o,r)=>{let i=r.getRoot(o).getOr(o.element);return Js(i,r.invalidClass)}}),y6=Object.freeze({__proto__:null,events:(o,r)=>o.validator.map((i=>Lo([$e(i.onEvent,(l=>{Yp(l,o).get(ht)}))].concat(i.validateOnLoad?[as((l=>{Yp(l,o).get(Qe)}))]:[])))).getOr({})}),C6=[Ke("invalidClass"),Te("getRoot",_.none),ci("notify",[Te("aria","alert"),Te("getContainer",_.none),Te("validHtml",""),Rn("onValid"),Rn("onInvalid"),Rn("onValidate")]),ci("validator",[Ke("validate"),Te("onEvent","input"),Te("validateOnLoad",!0)])];let CS=(o,r,i)=>{r.store.manager.onLoad(o,r,i)},CT=(o,r,i)=>{r.store.manager.onUnload(o,r,i)};var wT=Object.freeze({__proto__:null,onLoad:CS,onUnload:CT,setValue:(o,r,i,l)=>{r.store.manager.setValue(o,r,i,l)},getValue:(o,r,i)=>r.store.manager.getValue(o,r,i),getState:(o,r,i)=>i}),xT=Object.freeze({__proto__:null,events:(o,r)=>{let i=o.resetOnDom?[as(((l,u)=>{CS(l,o,r)})),Ru(((l,u)=>{CT(l,o,r)}))]:[Ip(o,r,CS)];return Lo(i)}});let ST=()=>{let o=Rt(null);return hr({set:o.set,get:o.get,isNotSet:()=>o.get()===null,clear:()=>{o.set(null)},readState:()=>({mode:"memory",value:o.get()})})},wS=()=>{let o=Rt({}),r=Rt({});return hr({readState:()=>({mode:"dataset",dataByValue:o.get(),dataByText:r.get()}),lookup:i=>qt(o.get(),i).orThunk((()=>qt(r.get(),i))),update:i=>{let l=o.get(),u=r.get(),m={},f={};Ot(i,(v=>{m[v.value]=v,qt(v,"meta").each((y=>{qt(y,"text").each((x=>{f[x]=v}))}))})),o.set({...l,...m}),r.set({...u,...f})},clear:()=>{o.set({}),r.set({})}})};var w6=Object.freeze({__proto__:null,memory:ST,dataset:wS,manual:()=>hr({readState:Qe}),init:o=>o.store.manager.state(o)});let kT=(o,r,i,l)=>{let u=r.store;i.update([l]),u.setValue(o,l),r.onSetValue(o,l)};var x6=[no("initialValue"),Ke("getFallbackEntry"),Ke("getDataKey"),Ke("setValue"),Xo("manager",{setValue:kT,getValue:(o,r,i)=>{let l=r.store,u=l.getDataKey(o);return i.lookup(u).getOrThunk((()=>l.getFallbackEntry(u)))},onLoad:(o,r,i)=>{r.store.initialValue.each((l=>{kT(o,r,i,l)}))},onUnload:(o,r,i)=>{i.clear()},state:wS})],S6=[Ke("getValue"),Te("setValue",Qe),no("initialValue"),Xo("manager",{setValue:(o,r,i,l)=>{r.store.setValue(o,l),r.onSetValue(o,l)},getValue:(o,r,i)=>r.store.getValue(o),onLoad:(o,r,i)=>{r.store.initialValue.each((l=>{r.store.setValue(o,l)}))},onUnload:Qe,state:ji.init})],k6=[no("initialValue"),Xo("manager",{setValue:(o,r,i,l)=>{i.set(l),r.onSetValue(o,l)},getValue:(o,r,i)=>i.get(),onLoad:(o,r,i)=>{r.store.initialValue.each((l=>{i.isNotSet()&&i.set(l)}))},onUnload:(o,r,i)=>{i.clear()},state:ST})],E6=[za("store",{mode:"memory"},pa("mode",{memory:k6,manual:S6,dataset:x6})),Rn("onSetValue"),Te("resetOnDom",!1)];let xt=Aa({fields:E6,name:"representing",active:xT,apis:wT,extra:{setValueFrom:(o,r)=>{let i=xt.getValue(r);xt.setValue(o,i)}},state:w6}),Jd=Aa({fields:C6,name:"invalidating",active:y6,apis:v6,extra:{validation:o=>r=>{let i=xt.getValue(r);return oa(o(i))}}});var ET=Object.freeze({__proto__:null,exhibit:(o,r)=>Nu({classes:[],styles:r.useFixed()?{}:{position:"relative"}})});let xS=ks([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),SS=(o,r,i,l,u,m)=>{let f=r.rect,v=f.x-i,y=f.y-l,x=u-(v+f.width),A=m-(y+f.height),E=_.some(v),O=_.some(y),B=_.some(x),I=_.some(A),X=_.none();return r.direction.fold((()=>qm(o,E,O,X,X)),(()=>qm(o,X,O,B,X)),(()=>qm(o,E,X,X,I)),(()=>qm(o,X,X,B,I)),(()=>qm(o,E,O,X,X)),(()=>qm(o,E,X,X,I)),(()=>qm(o,E,O,X,X)),(()=>qm(o,X,O,B,X)))},TT=(o,r)=>o.fold((()=>{let i=r.rect;return qm("absolute",_.some(i.x),_.some(i.y),_.none(),_.none())}),((i,l,u,m)=>SS("absolute",r,i,l,u,m)),((i,l,u,m)=>SS("fixed",r,i,l,u,m))),kS=(o,r)=>{let i=ut(Oo,r),l=o.fold(i,i,(()=>{let f=fn();return Oo(r).translate(-f.left,-f.top)})),u=fu(r),m=Ml(r);return wr(l.left,l.top,u,m)},T6=(o,r)=>r.fold((()=>o.fold(Wr,Wr,wr)),(i=>o.fold(ve(i),ve(i),(()=>{let l=ES(o,i.x,i.y);return wr(l.left,l.top,i.width,i.height)})))),ES=(o,r,i)=>{let l=Qt(r,i);return o.fold(ve(l),ve(l),(()=>{let u=fn();return l.translate(-u.left,-u.top)}))};xS.none;let A6=xS.relative,_6=xS.fixed,Lv=ks([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),O6=(o,r,i,l)=>{let u=o.bubble,m=u.offset,f=((J,ee,ue)=>{let ce=(Le,Ye)=>ee[Le].map((Dt=>{let nn=Le==="top"||Le==="bottom",sn=nn?ue.top:ue.left,Fn=(Le==="left"||Le==="top"?Math.max:Math.min)(Dt,Ye)+sn;return nn?Yt(Fn,J.y,J.bottom):Yt(Fn,J.x,J.right)})).getOr(Ye),ge=ce("left",J.x),Re=ce("top",J.y),Ne=ce("right",J.right),Ae=ce("bottom",J.bottom);return wr(ge,Re,Ne-ge,Ae-Re)})(l,o.restriction,m),v=o.x+m.left,y=o.y+m.top,x=wr(v,y,r,i),{originInBounds:A,sizeInBounds:E,visibleW:O,visibleH:B}=((J,ee)=>{let{x:ue,y:ce,right:ge,bottom:Re}=ee,{x:Ne,y:Ae,right:Le,bottom:Ye,width:Dt,height:nn}=J;return{originInBounds:Ne>=ue&&Ne<=ge&&Ae>=ce&&Ae<=Re,sizeInBounds:Le<=ge&&Le>=ue&&Ye<=Re&&Ye>=ce,visibleW:Math.min(Dt,Ne>=ue?ge-Ne:Le-ue),visibleH:Math.min(nn,Ae>=ce?Re-Ae:Ye-ce)}})(x,f),I=A&&E,X=I?x:((J,ee)=>{let{x:ue,y:ce,right:ge,bottom:Re}=ee,{x:Ne,y:Ae,width:Le,height:Ye}=J,Dt=Math.max(ue,ge-Le),nn=Math.max(ce,Re-Ye),sn=Yt(Ne,ue,Dt),Fn=Yt(Ae,ce,nn),fo=Math.min(sn+Le,ge)-sn,Zo=Math.min(Fn+Ye,Re)-Fn;return wr(sn,Fn,fo,Zo)})(x,f),W=X.width>0&&X.height>0,{maxWidth:K,maxHeight:V}=((J,ee,ue)=>{let ce=ve(ee.bottom-ue.y),ge=ve(ue.bottom-ee.y),Re=((Ye,Dt,nn,sn)=>Ye.fold(Dt,Dt,sn,sn,Dt,sn,nn,nn))(J,ge,ge,ce),Ne=ve(ee.right-ue.x),Ae=ve(ue.right-ee.x);return{maxWidth:((Ye,Dt,nn,sn)=>Ye.fold(Dt,sn,Dt,sn,nn,nn,Dt,sn))(J,Ae,Ae,Ne),maxHeight:Re}})(o.direction,X,l),U={rect:X,maxHeight:V,maxWidth:K,direction:o.direction,placement:o.placement,classes:{on:u.classesOn,off:u.classesOff},layout:o.label,testY:y};return I||o.alwaysFit?Lv.fit(U):Lv.nofit(U,O,B,W)},AT=["top","bottom","right","left"],Iv="data-alloy-transition-timer",D6=(o,r,i,l,u,m)=>{let f=((v,y,x)=>x.exists((A=>{let E=v.mode;return E==="all"||A[E]!==y[E]})))(l,u,m);if(f||((v,y)=>((x,A)=>hi(A,(E=>Js(x,E))))(v,y.classes))(o,l)){q(o,"position",i.position);let v=kS(r,o),y=TT(r,{...u,rect:v}),x=Kt(AT,(A=>y[A]));((A,E)=>{let O=B=>parseFloat(B).toFixed(3);return El(E,((B,I)=>!((X,W,K=me)=>Ra(X,W,K).getOr(X.isNone()&&W.isNone()))(A[I].map(O),B.map(O)))).isSome()})(i,x)&&(td(o,x),f&&((A,E)=>{dl(A,E.classes),Zs(A,Iv).each((O=>{clearTimeout(parseInt(O,10)),Bs(A,Iv)})),((O,B)=>{let I=ur(),X=ur(),W,K=ee=>{let ue=ee.raw.pseudoElement??"";return wn(ee.target,O)&&Ur(ue)&&Ln(AT,ee.raw.propertyName)},V=ee=>{if(Fs(ee)||K(ee)){I.clear(),X.clear();let ue=ee?.raw.type;(Fs(ue)||ue===Ig())&&(clearTimeout(W),Bs(O,Iv),ka(O,B.classes))}},U=G(O,rv(),(ee=>{K(ee)&&(U.unbind(),I.set(G(O,Ig(),V)),X.set(G(O,b0(),V)))})),J=(ee=>{let ue=Ne=>{let Ae=ga(ee,Ne).split(/\s*,\s*/);return pn(Ae,ti)},ce=Ne=>{if(Wn(Ne)&&/^[\d.]+/.test(Ne)){let Ae=parseFloat(Ne);return bc(Ne,"ms")?Ae:1e3*Ae}return 0},ge=ue("transition-delay"),Re=ue("transition-duration");return L(Re,((Ne,Ae,Le)=>{let Ye=ce(ge[Le])+ce(Ae);return Math.max(Ne,Ye)}),0)})(O);window.requestAnimationFrame((()=>{W=setTimeout(V,J+17),en(O,Iv,W)}))})(A,E)})(o,l),pf(o))}else ka(o,l.classes)},h1=(o,r,i)=>o[r]===void 0?i:o[r],R6=(o,r,i,l)=>{let u=((m,f,v,y)=>{Un(f,"max-height"),Un(f,"max-width");let x=(A=f,{width:Math.ceil(fu(A)),height:Ml(A)});var A;return((E,O,B,I,X,W)=>{let K=I.width,V=I.height,U=(J,ee,ue,ce,ge)=>{let Re=J(B,I,X,E,W),Ne=O6(Re,K,V,W);return Ne.fold(ve(Ne),((Ae,Le,Ye,Dt)=>(ge===Dt?Ye>ce||Le>ue:!ge&&Dt)?Ne:Lv.nofit(ee,ue,ce,ge)))};return L(O,((J,ee)=>{let ue=ut(U,ee);return J.fold(ve(J),ue)}),Lv.nofit({rect:B,maxHeight:I.height,maxWidth:I.width,direction:Np(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:B.y},-1,-1,!1)).fold(ht,ht)})(f,y.preference,m,x,v,y.bounds)})(o,r,i,l);return((m,f,v)=>{let y=TT(v.origin,f);v.transition.each((x=>{D6(m,v.origin,y,x,f,v.lastPlacement)})),QN(m,y)})(r,u,l),((m,f)=>{((v,y)=>{en(v,ac,y)})(m,f.placement)})(r,u),((m,f)=>{let v=f.classes;ka(m,v.off),dl(m,v.on)})(r,u),((m,f,v)=>{(0,v.maxHeightFunction)(m,f.maxHeight)})(r,u,l),((m,f,v)=>{(0,v.maxWidthFunction)(m,f.maxWidth)})(r,u,l),{layout:u.layout,placement:u.placement}},nb=ht,b1=()=>ci("layouts",[Ke("onLtr"),Ke("onRtl"),no("onBottomLtr"),no("onBottomRtl")]),Xp=(o,r,i,l,u,m,f)=>{let v=f.map(Ty).getOr(!1),y=r.layouts.map((O=>O.onLtr(o))),x=r.layouts.map((O=>O.onRtl(o))),A=v?r.layouts.bind((O=>O.onBottomLtr.map((B=>B(o))))).or(y).getOr(u):y.getOr(i),E=v?r.layouts.bind((O=>O.onBottomRtl.map((B=>B(o))))).or(x).getOr(m):x.getOr(l);return xg(A,E)(o)};var N6=[Ke("hotspot"),no("bubble"),Te("overrides",{}),b1(),Xo("placement",((o,r,i)=>{let l=r.hotspot,u=kS(i,l.element),m=Xp(o.element,r,pv(),Vd(),M0(),Uh(),_.some(r.hotspot.element));return _.some(nb({anchorBox:u,bubble:r.bubble.getOr(Rp()),overrides:r.overrides,layouts:m}))}))],M6=[Ke("x"),Ke("y"),Te("height",0),Te("width",0),Te("bubble",Rp()),Te("overrides",{}),b1(),Xo("placement",((o,r,i)=>{let l=ES(i,r.x,r.y),u=wr(l.left,l.top,r.width,r.height),m=Xp(o.element,r,Bp(),Vh(),Bp(),Vh(),_.none());return _.some(nb({anchorBox:u,bubble:r.bubble,overrides:r.overrides,layouts:m}))}))];let _T=ks([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),B6=o=>o.fold(ht,((r,i,l)=>r.translate(-i,-l))),P6=o=>o.fold(ht,ht),oC=o=>L(o,((r,i)=>r.translate(i.left,i.top)),Qt(0,0)),OT=o=>{let r=it(o,P6);return oC(r)},L6=_T.screen,I6=_T.absolute,DT=(o,r,i)=>{let l=sa(o.element),u=fn(l),m=((f,v,y)=>{let x=Li(y.root).dom;return _.from(x.frameElement).map(bt).filter((A=>{let E=sa(A),O=sa(f.element);return wn(E,O)})).map(Ii)})(o,0,i).getOr(u);return I6(m,u.left,u.top)},TS=(o,r,i,l)=>{let u=L6(Qt(o,r));return _.some(((m,f,v)=>({point:m,width:f,height:v}))(u,i,l))},RT=(o,r,i,l,u)=>o.map((m=>{let f=[r,m.point],v=(y=()=>OT(f),x=()=>OT(f),A=()=>(U=>{let J=it(U,B6);return oC(J)})(f),l.fold(y,x,A));var y,x,A;let E=(X=v.left,W=v.top,K=m.width,V=m.height,{x:X,y:W,width:K,height:V}),O=i.showAbove?M0():pv(),B=i.showAbove?Uh():Vd(),I=Xp(u,i,O,B,O,B,_.none());var X,W,K,V;return nb({anchorBox:E,bubble:i.bubble.getOr(Rp()),overrides:i.overrides,layouts:I})}));var NT=[Ke("node"),Ke("root"),no("bubble"),b1(),Te("overrides",{}),Te("showAbove",!1),Xo("placement",((o,r,i)=>{let l=DT(o,0,r);return r.node.filter(gr).bind((u=>{let m=u.dom.getBoundingClientRect(),f=TS(m.left,m.top,m.width,m.height),v=r.node.getOr(o.element);return RT(f,l,r,i,v)}))}))];let sC=(o,r)=>({element:o,offset:r}),AS=(o,r)=>oi(o)?sC(o,r):((i,l)=>{let u=fe(i);if(u.length===0)return sC(i,l);if(l<u.length)return sC(u[l],0);{let m=u[u.length-1],f=oi(m)?(v=>bf.get(v))(m).length:fe(m).length;return sC(m,f)}})(o,r),v1=o=>o.foffset!==void 0,rC=(o,r)=>r.getSelection.getOrThunk((()=>()=>(i=>(l=>_.from(l.getSelection()))(i).filter((l=>l.rangeCount>0)).bind(Cf))(o)))().map((i=>{if(v1(i)){let l=AS(i.start,i.soffset),u=AS(i.finish,i.foffset);return Bl.range(l.element,l.offset,u.element,u.offset)}return i}));var F6=[no("getSelection"),Ke("root"),no("bubble"),b1(),Te("overrides",{}),Te("showAbove",!1),Xo("placement",((o,r,i)=>{let l=Li(r.root).dom,u=DT(o,0,r),m=rC(l,r).bind((v=>{if(v1(v))return((x,A)=>(E=>{let O=E.getBoundingClientRect();return O.width>0||O.height>0?_.some(O).map(du):_.none()})(Ca(x,A)))(l,Bl.exactFromRange(v)).orThunk((()=>{let x=fm("\uFEFF");Gs(v.start,x);let A=Ag(l,Bl.exact(x,0,x,1));return _c(x),A})).bind((x=>TS(x.left,x.top,x.width,x.height)));{let y=_s(v,(A=>A.dom.getBoundingClientRect())),x={left:Math.min(y.firstCell.left,y.lastCell.left),right:Math.max(y.firstCell.right,y.lastCell.right),top:Math.min(y.firstCell.top,y.lastCell.top),bottom:Math.max(y.firstCell.bottom,y.lastCell.bottom)};return TS(x.left,x.top,x.right-x.left,x.bottom-x.top)}})),f=rC(l,r).bind((v=>v1(v)?Dr(v.start)?_.some(v.start):Rr(v.start):_.some(v.firstCell))).getOr(o.element);return RT(m,u,r,i,f)}))];let aC="link-layout",MT=o=>o.x+o.width,_S=(o,r)=>o.x-r.width,OS=(o,r)=>o.y-r.height+o.height,BT=o=>o.y,PT=(o,r,i)=>Ua(MT(o),BT(o),i.southeast(),Np(),"southeast",Za(o,{left:0,top:2}),aC),LT=(o,r,i)=>Ua(_S(o,r),BT(o),i.southwest(),zh(),"southwest",Za(o,{right:1,top:2}),aC),IT=(o,r,i)=>Ua(MT(o),OS(o,r),i.northeast(),$h(),"northeast",Za(o,{left:0,bottom:3}),aC),FT=(o,r,i)=>Ua(_S(o,r),OS(o,r),i.northwest(),Pm(),"northwest",Za(o,{right:1,bottom:3}),aC),HT=()=>[PT,LT,IT,FT],zT=()=>[LT,PT,FT,IT];var iC=[Ke("item"),b1(),Te("overrides",{}),Xo("placement",((o,r,i)=>{let l=kS(i,r.item.element),u=Xp(o.element,r,HT(),zT(),HT(),zT(),_.none());return _.some(nb({anchorBox:l,bubble:Rp(),overrides:r.overrides,layouts:u}))}))],H6=pa("type",{selection:F6,node:NT,hotspot:N6,submenu:iC,makeshift:M6});let z6=[Fa("classes",ms),nc("mode","all",["all","layout","placement"])],$6=[Te("useFixed",zt),no("getBounds")],V6=[Ci("anchor",H6),ci("transition",z6)],$T=(o,r,i,l,u,m)=>{let f=li("placement.info",Jt(V6),u),v=f.anchor,y=l.element,x=i.get(l.uid);Yx((()=>{q(y,"position","fixed");let A=Hs(y,"visibility");q(y,"visibility","hidden");let E=r.useFixed()?(()=>{let O=document.documentElement;return _6(0,0,O.clientWidth,O.clientHeight)})():(O=>{let B=Ii(O.element),I=O.element.dom.getBoundingClientRect();return A6(B.left,B.top,I.width,I.height)})(o);v.placement(o,v,E).each((O=>{let B=m.orThunk((()=>r.getBounds.map(Ve))),I=((X,W,K,V,U,J)=>((ee,ue,ce,ge,Re,Ne,Ae,Le)=>{let Ye=h1(Ae,"maxHeightFunction",vv()),Dt=h1(Ae,"maxWidthFunction",Qe),nn=ee.anchorBox,sn=ee.origin,Fn={bounds:T6(sn,Ne),origin:sn,preference:ge,maxHeightFunction:Ye,maxWidthFunction:Dt,lastPlacement:Re,transition:Le};return R6(nn,ue,ce,Fn)})(((ee,ue)=>((ce,ge)=>({anchorBox:ce,origin:ge}))(ee,ue))(W.anchorBox,X),V.element,W.bubble,W.layouts,U,K,W.overrides,J))(E,O,B,l,x,f.transition);i.set(l.uid,I)})),A.fold((()=>{Un(y,"visibility")}),(O=>{q(y,"visibility",O)})),Hs(y,"left").isNone()&&Hs(y,"top").isNone()&&Hs(y,"right").isNone()&&Hs(y,"bottom").isNone()&&Da(Hs(y,"position"),"fixed")&&Un(y,"position")}),y)};var U6=Object.freeze({__proto__:null,position:(o,r,i,l,u)=>{let m=_.none();$T(o,r,i,l,u,m)},positionWithinBounds:$T,getMode:(o,r,i)=>r.useFixed()?"fixed":"absolute",reset:(o,r,i,l)=>{let u=l.element;Ot(["position","left","right","top","bottom"],(m=>Un(u,m))),(m=>{Bs(m,ac)})(u),i.clear(l.uid)}});let Ki=Aa({fields:$6,name:"positioning",active:ET,apis:U6,state:Object.freeze({__proto__:null,init:()=>{let o={};return hr({readState:()=>o,clear:r=>{$t(r)?delete o[r]:o={}},set:(r,i)=>{o[r]=i},get:r=>qt(o,r)})}})});var Z6=Object.freeze({__proto__:null,events:o=>Lo([$e(Je(),((r,i)=>{let l=o.channels,u=rn(l),m=i,f=((v,y)=>y.universal?v:pn(v,(x=>Ln(y.channels,x))))(u,m);Ot(f,(v=>{let y=l[v],x=y.schema,A=li("channel["+v+`] data
Receiver: `+pr(r.element),x,m.data);y.onReceive(r,A)}))}))])}),W6=[Ci("channels",p0(Nn.value,fa([_u("onReceive"),Te("schema",gl())])))];let jc=Aa({fields:W6,name:"receiving",active:Z6});var j6=Object.freeze({__proto__:null,events:(o,r)=>{let i=(l,u)=>{o.updateState.each((m=>{let f=m(l,u);r.set(f)})),o.renderComponents.each((m=>{let f=m(u,r.get());(o.reuseDom?Yd:zy)(l,f)}))};return Lo([$e(Je(),((l,u)=>{let m=u;if(!m.universal){let f=o.channel;Ln(m.channels,f)&&i(l,m.data)}})),as(((l,u)=>{o.initialData.each((m=>{i(l,m)}))}))])}}),q6=Object.freeze({__proto__:null,getState:(o,r,i)=>i}),VT=[Ke("channel"),no("renderComponents"),no("updateState"),no("initialData"),Gr("reuseDom",!0)];let qc=Aa({fields:VT,name:"reflecting",active:j6,apis:q6,state:Object.freeze({__proto__:null,init:()=>{let o=Rt(_.none());return{readState:()=>o.get().getOr("none"),get:o.get,set:o.set,clear:()=>o.set(_.none())}}})}),UT=(o,r,i,l)=>{i.get().each((f=>{HE(o)}));let u=r.getAttachPoint(o);Uf(u,o);let m=o.getSystem().build(l);return Uf(o,m),i.set(m),m},ZT=(o,r,i,l)=>{let u=UT(o,r,i,l);return r.onOpen(o,u),u},WT=(o,r,i)=>{i.get().each((l=>{HE(o),Zf(o),r.onClose(o,l),i.clear()}))},DS=(o,r,i)=>i.isOpen(),jT=(o,r,i)=>{let l=r.getAttachPoint(o);q(o.element,"position",Ki.getMode(l)),((u,m,f)=>{Hs(u.element,m).fold((()=>{Bs(u.element,f)}),(v=>{en(u.element,f,v)})),q(u.element,m,"hidden")})(o,"visibility",r.cloakVisibilityAttr)},qT=(o,r,i)=>{(l=>Ho(["top","left","right","bottom"],(u=>Hs(l,u).isSome())))(o.element)||Un(o.element,"position"),((l,u,m)=>{Zs(l.element,m).fold((()=>Un(l.element,u)),(f=>q(l.element,u,f)))})(o,"visibility",r.cloakVisibilityAttr)};var G6=Object.freeze({__proto__:null,cloak:jT,decloak:qT,open:ZT,openWhileCloaked:(o,r,i,l,u)=>{jT(o,r),ZT(o,r,i,l),u(),qT(o,r)},close:WT,isOpen:DS,isPartOf:(o,r,i,l)=>DS(0,0,i)&&i.get().exists((u=>r.isPartOf(o,u,l))),getState:(o,r,i)=>i.get(),setContent:(o,r,i,l)=>i.get().map((()=>UT(o,r,i,l)))}),K6=Object.freeze({__proto__:null,events:(o,r)=>Lo([$e(Do(),((i,l)=>{WT(i,o,r)}))])}),Y6=[Rn("onOpen"),Rn("onClose"),Ke("isPartOf"),Ke("getAttachPoint"),Te("cloakVisibilityAttr","data-precloak-visibility")],GT=Object.freeze({__proto__:null,init:()=>{let o=to(),r=ve("not-implemented");return hr({readState:r,isOpen:o.isSet,clear:o.clear,set:o.set,get:o.get})}});let uo=Aa({fields:Y6,name:"sandboxing",active:K6,apis:G6,state:GT}),Fv=(o,r)=>r.getAnimationRoot.fold((()=>o.element),(i=>i(o))),jf=o=>o.dimension.property,Jp=(o,r)=>o.dimension.getDimension(r),ob=(o,r)=>{let i=Fv(o,r);ka(i,[r.shrinkingClass,r.growingClass])},RS=(o,r)=>{$o(o.element,r.openClass),bs(o.element,r.closedClass),q(o.element,jf(r),"0px"),pf(o.element)},NS=(o,r)=>{$o(o.element,r.closedClass),bs(o.element,r.openClass),Un(o.element,jf(r))},KT=(o,r,i,l)=>{i.setCollapsed(),q(o.element,jf(r),Jp(r,o.element)),ob(o,r),RS(o,r),r.onStartShrink(o),r.onShrunk(o)},lC=(o,r,i,l)=>{let u=l.getOrThunk((()=>Jp(r,o.element)));i.setCollapsed(),q(o.element,jf(r),u),pf(o.element);let m=Fv(o,r);$o(m,r.growingClass),bs(m,r.shrinkingClass),RS(o,r),r.onStartShrink(o)},YT=(o,r,i)=>{let l=Jp(r,o.element);(l==="0px"?KT:lC)(o,r,i,_.some(l))},XT=(o,r,i)=>{let l=Fv(o,r),u=Js(l,r.shrinkingClass),m=Jp(r,o.element);NS(o,r);let f=Jp(r,o.element);(u?()=>{q(o.element,jf(r),m),pf(o.element)}:()=>{RS(o,r)})(),$o(l,r.shrinkingClass),bs(l,r.growingClass),NS(o,r),q(o.element,jf(r),f),i.setExpanded(),r.onStartGrow(o)},JT=(o,r,i)=>{let l=Fv(o,r);return Js(l,r.growingClass)===!0},MS=(o,r,i)=>{let l=Fv(o,r);return Js(l,r.shrinkingClass)===!0};var X6=Object.freeze({__proto__:null,refresh:(o,r,i)=>{if(i.isExpanded()){Un(o.element,jf(r));let l=Jp(r,o.element);q(o.element,jf(r),l)}},grow:(o,r,i)=>{i.isExpanded()||XT(o,r,i)},shrink:(o,r,i)=>{i.isExpanded()&&YT(o,r,i)},immediateShrink:(o,r,i)=>{i.isExpanded()&&KT(o,r,i)},hasGrown:(o,r,i)=>i.isExpanded(),hasShrunk:(o,r,i)=>i.isCollapsed(),isGrowing:JT,isShrinking:MS,isTransitioning:(o,r,i)=>JT(o,r)||MS(o,r),toggleGrow:(o,r,i)=>{(i.isExpanded()?YT:XT)(o,r,i)},disableTransitions:ob,immediateGrow:(o,r,i)=>{i.isExpanded()||(NS(o,r),q(o.element,jf(r),Jp(r,o.element)),ob(o,r),i.setExpanded(),r.onStartGrow(o),r.onGrown(o))}}),QT=Object.freeze({__proto__:null,exhibit:(o,r,i)=>{let l=r.expanded;return Nu(l?{classes:[r.openClass],styles:{}}:{classes:[r.closedClass],styles:wi(r.dimension.property,"0px")})},events:(o,r)=>Lo([fd(Ig(),((i,l)=>{l.event.raw.propertyName===o.dimension.property&&(ob(i,o),r.isExpanded()&&Un(i.element,o.dimension.property),(r.isExpanded()?o.onGrown:o.onShrunk)(i))}))])}),eA=[Ke("closedClass"),Ke("openClass"),Ke("shrinkingClass"),Ke("growingClass"),no("getAnimationRoot"),Rn("onShrunk"),Rn("onStartShrink"),Rn("onGrown"),Rn("onStartGrow"),Te("expanded",!1),Ci("dimension",pa("property",{width:[Xo("property","width"),Xo("getDimension",(o=>hs(o)+"px"))],height:[Xo("property","height"),Xo("getDimension",(o=>Nr(o)+"px"))]}))];let Ul=Aa({fields:eA,name:"sliding",active:QT,apis:X6,state:Object.freeze({__proto__:null,init:o=>{let r=Rt(o.expanded);return hr({isExpanded:()=>r.get()===!0,isCollapsed:()=>r.get()===!1,setCollapsed:ut(r.set,!1),setExpanded:ut(r.set,!0),readState:()=>"expanded: "+r.get()})}})});var tA=Object.freeze({__proto__:null,events:(o,r)=>{let i=o.stream.streams.setup(o,r);return Lo([$e(o.event,i),Ru((()=>r.cancel()))].concat(o.cancelEvent.map((l=>[$e(l,(()=>r.cancel()))])).getOr([])))}});let BS=o=>{let r=Rt(null);return hr({readState:()=>({timer:r.get()!==null?"set":"unset"}),setTimer:i=>{r.set(i)},cancel:()=>{let i=r.get();i!==null&&i.cancel()}})};var J6=Object.freeze({__proto__:null,throttle:BS,init:o=>o.stream.streams.state(o)}),Q6=[Ci("stream",pa("mode",{throttle:[Ke("delay"),Te("stopEvent",!0),Xo("streams",{setup:(o,r)=>{let i=o.stream,l=sl(o.onStream,i.delay);return r.setTimer(l),(u,m)=>{l.throttle(u,m),i.stopEvent&&m.stop()}},state:BS})]})),Te("event","input"),no("cancelEvent"),_u("onStream")];let PS=Aa({fields:Q6,name:"streaming",active:tA,state:J6});var eM=Object.freeze({__proto__:null,exhibit:(o,r)=>Nu({attributes:Rm([{key:r.tabAttr,value:"true"}])})}),tM=[Te("tabAttr","data-alloy-tabstop")];let ko=Aa({fields:tM,name:"tabstopping",active:eM}),Hv=(o,r,i,l)=>{let u=i.get();i.set(l),((m,f,v)=>{f.toggleClass.each((y=>{v.get()?bs(m.element,y):$o(m.element,y)}))})(o,r,i),((m,f,v)=>{let y=f.aria;y.update(m,y,v.get())})(o,r,i),u!==l&&r.onToggled(o,l)},nA=(o,r,i)=>{Hv(o,r,i,!i.get())},oA=(o,r,i)=>{Hv(o,r,i,r.selected)};var nM=Object.freeze({__proto__:null,onLoad:oA,toggle:nA,isOn:(o,r,i)=>i.get(),on:(o,r,i)=>{Hv(o,r,i,!0)},off:(o,r,i)=>{Hv(o,r,i,!1)},set:Hv}),sA=Object.freeze({__proto__:null,exhibit:()=>Nu({}),events:(o,r)=>{let i=(l=o,u=r,m=nA,Wd((v=>{m(v,l,u)})));var l,u,m;let f=Ip(o,r,oA);return Lo(Vs([o.toggleOnExecute?[i]:[],[f]]))}});let rA=(o,r,i)=>{en(o.element,"aria-expanded",i)};var oM=[Te("selected",!1),no("toggleClass"),Te("toggleOnExecute",!0),Rn("onToggled"),za("aria",{mode:"none"},pa("mode",{pressed:[Te("syncWithExpanded",!1),Xo("update",((o,r,i)=>{en(o.element,"aria-pressed",i),r.syncWithExpanded&&rA(o,0,i)}))],checked:[Xo("update",((o,r,i)=>{en(o.element,"aria-checked",i)}))],expanded:[Xo("update",rA)],selected:[Xo("update",((o,r,i)=>{en(o.element,"aria-selected",i)}))],none:[Xo("update",Qe)]}))];let Zn=Aa({fields:oM,name:"toggling",active:sA,apis:nM,state:(y1=!1,{init:()=>{let o=Rt(y1);return{get:()=>o.get(),set:r=>o.set(r),clear:()=>o.set(y1),readState:()=>o.get()}}})});var y1;let sb=we("tooltip.exclusive"),zv=we("tooltip.show"),Qp=we("tooltip.hide"),$v=we("tooltip.immediateHide"),rb=we("tooltip.immediateShow"),LS=(o,r,i)=>{o.getSystem().broadcastOn([sb],{})};var aA=Object.freeze({__proto__:null,hideAllExclusive:LS,immediateOpenClose:(o,r,i,l)=>$n(o,l?rb:$v),isEnabled:(o,r,i)=>i.isEnabled(),setComponents:(o,r,i,l)=>{i.getTooltip().each((u=>{u.getSystem().isConnected()&&Cn.set(u,l)}))},setEnabled:(o,r,i,l)=>i.setEnabled(l)}),sM=Object.freeze({__proto__:null,events:(o,r)=>{let i=m=>{r.getTooltip().each((f=>{f.getSystem().isConnected()&&(Zf(f),o.onHide(m,f),r.clearTooltip())})),r.clearTimer()},l=m=>{if(!r.isShowing()&&r.isEnabled()){LS(m);let f=o.lazySink(m).getOrDie(),v=m.getSystem().build({dom:o.tooltipDom,components:o.tooltipComponents,events:Lo(o.mode==="normal"?[$e(xi(),(y=>{$n(m,zv)})),$e(id(),(y=>{$n(m,Qp)}))]:[]),behaviours:st([Cn.config({})])});r.setTooltip(v),Uf(f,v),o.onShow(m,v),Ki.position(f,v,{anchor:o.anchor(m)})}},u=m=>{r.getTooltip().each((f=>{let v=o.lazySink(m).getOrDie();Ki.position(v,f,{anchor:o.anchor(m)})}))};return Lo(Vs([[Ay((m=>{o.onSetup(m)})),$e(zv,(m=>{r.resetTimer((()=>{l(m)}),o.delayForShow())})),$e(Qp,(m=>{r.resetTimer((()=>{i(m)}),o.delayForHide())})),$e(rb,(m=>{r.resetTimer((()=>{l(m)}),0)})),$e($v,(m=>{r.resetTimer((()=>{i(m)}),0)})),$e(Je(),((m,f)=>{let v=f;v.universal||(Ln(v.channels,sb)||Ln(v.channels,Vc()))&&(v.data.closedTooltip&&r.isShowing()&&v.data.closedTooltip(),i(m))})),Ru((m=>{i(m)}))],(()=>{switch(o.mode){case"normal":return[$e(pl(),(m=>{$n(m,rb)})),$e(ie(),(m=>{$n(m,$v)})),$e(xi(),(m=>{$n(m,zv)})),$e(id(),(m=>{$n(m,Qp)}))];case"follow-highlight":return[$e(Ps(),((m,f)=>{$n(m,zv)})),$e($a(),(m=>{$n(m,Qp)}))];case"children-normal":return[$e(pl(),((m,f)=>{Mo(m.element).each((v=>{Xl(f.event.target,"[data-mce-tooltip]")&&r.getTooltip().fold((()=>{$n(m,rb)}),(y=>{r.isShowing()&&(o.onShow(m,y),u(m))}))}))})),$e(ie(),(m=>{Mo(m.element).fold((()=>{$n(m,$v)}),Qe)})),$e(xi(),(m=>{xo(m.element,"[data-mce-tooltip]:hover").each((f=>{r.getTooltip().fold((()=>{$n(m,zv)}),(v=>{r.isShowing()&&(o.onShow(m,v),u(m))}))}))})),$e(id(),(m=>{xo(m.element,"[data-mce-tooltip]:hover").fold((()=>{$n(m,Qp)}),Qe)}))];default:return[$e(pl(),((m,f)=>{Mo(m.element).each((v=>{Xl(f.event.target,"[data-mce-tooltip]")&&r.getTooltip().fold((()=>{$n(m,rb)}),(y=>{r.isShowing()&&(o.onShow(m,y),u(m))}))}))})),$e(ie(),(m=>{Mo(m.element).fold((()=>{$n(m,$v)}),Qe)}))]}})()]))}}),rM=[Ke("lazySink"),Ke("tooltipDom"),Te("exclusive",!0),Te("tooltipComponents",[]),rs("delayForShow",ve(300)),rs("delayForHide",ve(100)),rs("onSetup",Qe),nc("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),Te("anchor",(o=>({type:"hotspot",hotspot:o,layouts:{onLtr:ve([Yr,ba,Lr,Ta,Kr,Wa]),onRtl:ve([Yr,ba,Lr,Ta,Kr,Wa])},bubble:Hl(0,-2,{})}))),Rn("onHide"),Rn("onShow")],aM=Object.freeze({__proto__:null,init:()=>{let o=Rt(!0),r=to(),i=to(),l=()=>{r.on(clearTimeout)},u=ve("not-implemented");return hr({getTooltip:i.get,isShowing:i.isSet,setTooltip:i.set,clearTooltip:i.clear,clearTimer:l,resetTimer:(m,f)=>{l(),r.set(setTimeout(m,f))},readState:u,isEnabled:()=>o.get(),setEnabled:m=>o.set(m)})}});let is=Aa({fields:rM,name:"tooltipping",active:sM,state:aM,apis:aA}),qf=Aa({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:()=>Lo([Wg(w(),vn)]),exhibit:()=>Nu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})})}),Gf=o=>{let r=sr(o),i=fe(r),l=(f=>{let v=f.dom.attributes!==void 0?f.dom.attributes:[];return L(v,((y,x)=>x.name==="class"?y:{...y,[x.name]:x.value}),{})})(r),u=(f=>Array.prototype.slice.call(f.dom.classList,0))(r),m=i.length===0?{}:{innerHtml:gf(r)};return{tag:Ma(r),classes:u,attributes:l,...m}},go=o=>{let r=(i=>i.uid!==void 0)(o)&&Ds(o,"uid")?o.uid:f1("memento");return{get:i=>i.getSystem().getByUid(r).getOrDie(),getOpt:i=>i.getSystem().getByUid(r).toOptional(),asSpec:()=>({...o,uid:r})}},Oa=by,Qg=Vx,eh=(o,r)=>{let i={stopBackspace:!0,...r},l=(E=>{let O=to(),B=Rt(!1),I=y0((W=>{E.triggerEvent(lo(),W),B.set(!0)}),400),X=Rm([{key:oc(),value:W=>(Nh(W).each((K=>{I.cancel();let V={x:K.clientX,y:K.clientY,target:W.target};I.schedule(W),B.set(!1),O.set(V)})),_.none())},{key:Sf(),value:W=>(I.cancel(),Nh(W).each((K=>{O.on((V=>{((U,J)=>{let ee=Math.abs(U.clientX-J.x),ue=Math.abs(U.clientY-J.y);return ee>5||ue>5})(K,V)&&O.clear()}))})),_.none())},{key:Bc(),value:W=>(I.cancel(),O.get().filter((K=>wn(K.target,W.target))).map((K=>B.get()?(W.prevent(),!1):E.triggerEvent(Zt(),W))))}]);return{fireIfReady:(W,K)=>qt(X,K).bind((V=>V(W)))}})(i),u=it(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(E=>G(o,E,(O=>{l.fireIfReady(O,E).each((B=>{B&&O.kill()})),i.triggerEvent(E,O)&&O.kill()})))),m=to(),f=G(o,"paste",(E=>{l.fireIfReady(E,"paste").each((O=>{O&&E.kill()})),i.triggerEvent("paste",E)&&E.kill(),m.set(setTimeout((()=>{i.triggerEvent(Oe(),E)}),0))})),v=G(o,"keydown",(E=>{i.triggerEvent("keydown",E)?E.kill():i.stopBackspace&&(O=>O.raw.which===qg[0]&&!Ln(["input","textarea"],Ma(O.target))&&!xm(O.target,'[contenteditable="true"]'))(E)&&E.prevent()})),y=G(o,"focusin",(E=>{i.triggerEvent("focusin",E)&&E.kill()})),x=to(),A=G(o,"focusout",(E=>{i.triggerEvent("focusout",E)&&E.kill(),x.set(setTimeout((()=>{i.triggerEvent(ie(),E)}),0))}));return{unbind:()=>{Ot(u,(E=>{E.unbind()})),v.unbind(),y.unbind(),A.unbind(),f.unbind(),m.on(clearTimeout),x.on(clearTimeout)}}},Km=(o,r)=>{let i=qt(o,"target").getOr(r);return Rt(i)},C1=ks([{stopped:[]},{resume:["element"]},{complete:[]}]),IS=(o,r,i,l,u,m)=>{let f=o(r,l),v=((y,x)=>{let A=Rt(!1),E=Rt(!1);return{stop:()=>{A.set(!0)},cut:()=>{E.set(!0)},isStopped:A.get,isCut:E.get,event:y,setSource:x.set,getSource:x.get}})(i,u);return f.fold((()=>(m.logEventNoHandlers(r,l),C1.complete())),(y=>{let x=y.descHandler;return Vy(x)(v),v.isStopped()?(m.logEventStopped(r,y.element,x.purpose),C1.stopped()):v.isCut()?(m.logEventCut(r,y.element,x.purpose),C1.complete()):zo(y.element).fold((()=>(m.logNoParent(r,y.element,x.purpose),C1.complete())),(A=>(m.logEventResponse(r,y.element,x.purpose),C1.resume(A))))}))},iA=(o,r,i,l,u,m)=>IS(o,r,i,l,u,m).fold(vn,(f=>iA(o,r,i,f,u,m)),zt),FS=(o,r,i,l,u)=>{let m=Km(i,l);return iA(o,r,i,l,m,u)},Vv=()=>{let o=(()=>{let l={};return{registerId:(u,m,f)=>{Ao(f,((v,y)=>{let x=l[y]!==void 0?l[y]:{};x[m]=((A,E)=>({cHandler:ut.apply(void 0,[A.handler].concat(E)),purpose:A.purpose}))(v,u),l[y]=x}))},unregisterId:u=>{Ao(l,((m,f)=>{Sn(m,u)&&delete m[u]}))},filterByType:u=>qt(l,u).map((m=>Ni(m,((f,v)=>((y,x)=>({id:y,descHandler:x}))(v,f))))).getOr([]),find:(u,m,f)=>qt(l,m).bind((v=>yf(f,(y=>((x,A)=>Dv(A).bind((E=>qt(x,E))).map((E=>((O,B)=>({element:O,descHandler:B}))(A,E))))(v,y)),u)))}})(),r={},i=l=>{Dv(l.element).each((u=>{delete r[u],o.unregisterId(u)}))};return{find:(l,u,m)=>o.find(l,u,m),filter:l=>o.filterByType(l),register:l=>{let u=(f=>{let v=f.element;return Dv(v).getOrThunk((()=>((y,x)=>{let A=we(zN+"uid-");return Y0(x,A),A})(0,f.element)))})(l);Ds(r,u)&&((f,v)=>{let y=r[v];if(y!==f)throw new Error('The tagId "'+v+'" is already used by: '+pr(y.element)+`
Cannot use it for: `+pr(f.element)+`
The conflicting element is`+(gr(y.element)?" ":" not ")+"already in the DOM");i(f)})(l,u);let m=[l];o.registerId(m,u,l.events),r[u]=l},unregister:i,getById:l=>qt(r,l)}},w1=o=>{let r=W=>zo(o.element).fold(vn,(K=>wn(W,K))),i=Vv(),l=(W,K)=>i.find(r,W,K),u=eh(o.element,{triggerEvent:(W,K)=>Fc(W,K.target,(V=>((U,J,ee,ue)=>FS(U,J,ee,ee.target,ue))(l,W,K,V)))}),m={debugInfo:ve("real"),triggerEvent:(W,K,V)=>{Fc(W,K,(U=>FS(l,W,V,K,U)))},triggerFocus:(W,K)=>{Dv(W).fold((()=>{ct(W)}),(V=>{Fc(j(),W,(U=>(((J,ee,ue,ce,ge)=>{let Re=Km(ue,ce);IS(J,ee,ue,ce,Re,ge)})(l,j(),{originator:K,kill:Qe,prevent:Qe,target:W},W,U),!1)))}))},triggerEscape:(W,K)=>{m.triggerEvent("keydown",W.element,K.event)},getByUid:W=>I(W),getByDom:W=>X(W),build:qi,buildOrPatch:Qx,addToGui:W=>{y(W)},removeFromGui:W=>{x(W)},addToWorld:W=>{f(W)},removeFromWorld:W=>{v(W)},broadcast:W=>{E(W)},broadcastOn:(W,K)=>{O(W,K)},broadcastEvent:(W,K)=>{B(W,K)},isConnected:vn},f=W=>{W.connect(m),oi(W.element)||(i.register(W),Ot(W.components(),f),m.triggerEvent(Si(),W.element,{target:W.element}))},v=W=>{oi(W.element)||(Ot(W.components(),v),i.unregister(W)),W.disconnect()},y=W=>{Uf(o,W)},x=W=>{Zf(W)},A=W=>{let K=i.filter(Je());Ot(K,(V=>{let U=V.descHandler;Vy(U)(W)}))},E=W=>{A({universal:!0,data:W})},O=(W,K)=>{A({universal:!1,channels:W,data:K})},B=(W,K)=>((V,U)=>{let J=(ee=>{let ue=Rt(!1);return{stop:()=>{ue.set(!0)},cut:Qe,isStopped:ue.get,isCut:zt,event:ee,setSource:os("Cannot set source of a broadcasted event"),getSource:os("Cannot get source of a broadcasted event")}})(U);return Ot(V,(ee=>{let ue=ee.descHandler;Vy(ue)(J)})),J.isStopped()})(i.filter(W),K),I=W=>i.getById(W).fold((()=>Nn.error(new Error('Could not find component with uid: "'+W+'" in system.'))),Nn.value),X=W=>{let K=Dv(W).getOr("not found");return I(K)};return f(o),{root:o,element:o.element,destroy:()=>{u.unbind(),_c(o.element)},add:y,remove:x,getByUid:I,getByDom:X,addToWorld:f,removeFromWorld:v,broadcast:E,broadcastOn:O,broadcastEvent:B}},cC=()=>{let o=(r,i)=>{i.stop(),Nf(r)};return[$e(ku(),o),$e(Zt(),o),Hm(oc()),Hm(gs())]},uC=o=>Lo(Vs([o.map((r=>Wd(((i,l)=>{r(i),l.stop()})))).toArray(),cC()])),la=Wc({name:"Button",factory:o=>{let r=uC(o.action),i=o.dom.tag,l=u=>qt(o.dom,"attributes").bind((m=>qt(m,u)));return{uid:o.uid,dom:o.dom,components:o.components,events:r,behaviours:tb(o.buttonBehaviours,[un.config({}),Ft.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:i==="button"?{type:l("type").getOr("button"),...l("role").map((u=>({role:u}))).getOr({})}:{role:o.role.getOr(l("role").getOr("button"))}},eventOrder:o.eventOrder}},configFields:[Te("uid",void 0),Ke("dom"),Te("components",[]),eb("buttonBehaviours",[un,Ft]),no("action"),no("role"),Te("eventOrder",{})]}),dC=ve([Te("shell",!1),Ke("makeItem"),Te("setupItem",Qe),eb("listBehaviours",[Cn])]),iM=Du({name:"items",overrides:()=>({behaviours:st([Cn.config({})])})}),HS=ve([iM]),Uv=Vl({name:ve("CustomList")(),configFields:dC(),partFields:HS(),factory:(o,r,i,l)=>{let u=o.shell?{behaviours:[Cn.config({})],components:[]}:{behaviours:[],components:r};return{uid:o.uid,dom:o.dom,components:u.components,behaviours:Ti(o.listBehaviours,u.behaviours),apis:{setItems:(m,f)=>{var v;(v=m,o.shell?_.some(v):fs(v,o,"items")).fold((()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(y=>{let x=Cn.contents(y),A=f.length,E=A-x.length,O=E>0?_t(E,(()=>o.makeItem())):[],B=x.slice(A);Ot(B,(X=>Cn.remove(y,X))),Ot(O,(X=>Cn.append(y,X)));let I=Cn.contents(y);Ot(I,((X,W)=>{o.setupItem(m,X,f[W],W)}))}))}}}},apis:{setItems:(o,r,i)=>{o.setItems(r,i)}}}),Zv="aria-controls",Ym=()=>{let o=we(Zv);return{id:o,link:r=>{en(r,Zv,o)},unlink:r=>{Bs(r,Zv)}}},th=(o,r)=>wm(r,(i=>wn(i,o.element)),zt)||((i,l)=>(u=>f0(u,(m=>{if(!Dr(m))return!1;let f=ds(m,"id");return f!==void 0&&f.indexOf(Zv)>-1})).bind((m=>{let f=ds(m,"id"),v=yn(m);return xo(v,`[${Zv}="${f}"]`)})))(l).exists((u=>th(i,u))))(o,r),mC="alloy.item-hover",x1="alloy.item-focus",zS="alloy.item-toggled",Wv=o=>{(Mo(o.element).isNone()||un.isFocused(o))&&(un.isFocused(o)||un.focus(o),Wt(o,mC,{item:o}))},lA=o=>{Wt(o,x1,{item:o})},$S=ve(mC),cA=ve(x1),lM=ve(zS),VS=o=>o.role.fold((()=>o.toggling.map((r=>r.exclusive?"menuitemradio":"menuitemcheckbox")).getOr("menuitem")),ht);var ef=[Ke("data"),Ke("components"),Ke("dom"),Te("hasSubmenu",!1),no("toggling"),no("role"),eb("itemBehaviours",[Zn,un,Ft,xt]),Te("ignoreFocus",!1),Te("domModification",{}),Xo("builder",(o=>({dom:o.dom,domModification:{...o.domModification,attributes:{role:VS(o),...o.domModification.attributes,"aria-haspopup":o.hasSubmenu,...o.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:tb(o.itemBehaviours,[o.toggling.fold(Zn.revoke,(r=>Zn.config(((i,l)=>({aria:{mode:l?"selected":"checked"},...kl(i,((u,m)=>m!=="exclusive")),onToggled:(u,m)=>{jt(i.onToggled)&&i.onToggled(u,m),((f,v)=>{Wt(f,zS,{item:f,state:v})})(u,m)}}))(r,o.role.exists((i=>i==="option")))))),un.config({ignore:o.ignoreFocus,stopMousedown:o.ignoreFocus,onFocus:r=>{lA(r)}}),Ft.config({mode:"execution"}),xt.config({store:{mode:"memory",initialValue:o.data}}),on("item-type-events",[...cC(),$e(xi(),Wv),$e(kt(),un.focus)])]),components:o.components,eventOrder:o.eventOrder}))),Te("eventOrder",{})],cM=[Ke("dom"),Ke("components"),Xo("builder",(o=>({dom:o.dom,components:o.components,events:Lo([Mf(kt())])})))];let US=ve("item-widget"),gC=ve([Wi({name:"widget",overrides:o=>({behaviours:st([xt.config({store:{mode:"manual",getValue:r=>o.data,setValue:Qe}})])})})]),uA=[Ke("uid"),Ke("data"),Ke("components"),Ke("dom"),Te("autofocus",!1),Te("ignoreFocus",!1),eb("widgetBehaviours",[xt,un,Ft]),Te("domModification",{}),O0(gC()),Xo("builder",(o=>{let r=Ih(US(),o,gC()),i=A0(US(),o,r.internals()),l=m=>fs(m,o,"widget").map((f=>(Ft.focusIn(f),f))),u=(m,f)=>(Yg(f.event.target)||o.autofocus&&f.setSource(m.element),_.none());return{dom:o.dom,components:i,domModification:o.domModification,events:Lo([Wd(((m,f)=>{l(m).each((v=>{f.stop()}))})),$e(xi(),Wv),$e(kt(),((m,f)=>{o.autofocus?l(m):un.focus(m)}))]),behaviours:tb(o.widgetBehaviours,[xt.config({store:{mode:"memory",initialValue:o.data}}),un.config({ignore:o.ignoreFocus,onFocus:m=>{lA(m)}}),Ft.config({mode:"special",focusIn:o.autofocus?m=>{l(m)}:jg(),onLeft:u,onRight:u,onEscape:(m,f)=>un.isFocused(m)||o.autofocus?(o.autofocus&&f.setSource(m.element),_.none()):(un.focus(m),_.some(!0))})])}}))],dA=pa("type",{widget:uA,item:ef,separator:cM}),uM=ve([E0({factory:{sketch:o=>{let r=li("menu.spec item",dA,o);return r.builder(r)}},name:"items",unit:"item",defaults:(o,r)=>Sn(r,"uid")?r:{...r,uid:f1("item")},overrides:(o,r)=>({type:r.type,ignoreFocus:o.fakeFocus,domModification:{classes:[o.markers.item]}})})]),dM=ve([Po("role"),Ke("value"),Ke("items"),Ke("dom"),Ke("components"),Te("eventOrder",{}),gi("menuBehaviours",[Vn,xt,io,Ft]),za("movement",{mode:"menu",moveOnTab:!0},pa("mode",{grid:[Fg(),Xo("config",((o,r)=>({mode:"flatgrid",selector:"."+o.markers.item,initSize:{numColumns:r.initSize.numColumns,numRows:r.initSize.numRows},focusManager:o.focusManager})))],matrix:[Xo("config",((o,r)=>({mode:"matrix",selectors:{row:r.rowSelector,cell:"."+o.markers.item},previousSelector:r.previousSelector,focusManager:o.focusManager}))),Ke("rowSelector"),Te("previousSelector",_.none)],menu:[Te("moveOnTab",!0),Xo("config",((o,r)=>({mode:"menu",selector:"."+o.markers.item,moveOnTab:r.moveOnTab,focusManager:o.focusManager})))]})),Ci("markers",gy()),Te("fakeFocus",!1),Te("focusManager",V0()),Rn("onHighlight"),Rn("onDehighlight"),Te("showMenuRole",!0)]),Lu=ve("alloy.menu-focus"),Iu=Vl({name:"Menu",configFields:dM(),partFields:uM(),factory:(o,r,i,l)=>({uid:o.uid,dom:o.dom,markers:o.markers,behaviours:Ti(o.menuBehaviours,[Vn.config({highlightClass:o.markers.selectedItem,itemClass:o.markers.item,onHighlight:o.onHighlight,onDehighlight:o.onDehighlight}),xt.config({store:{mode:"memory",initialValue:o.value}}),io.config({find:_.some}),Ft.config(o.movement.config(o,o.movement))]),events:Lo([$e(cA(),((u,m)=>{let f=m.event;u.getSystem().getByDom(f.target).each((v=>{Vn.highlight(u,v),m.stop(),Wt(u,Lu(),{menu:u,item:v})}))})),$e($S(),((u,m)=>{let f=m.event.item;Vn.highlight(u,f)})),$e(lM(),((u,m)=>{let{item:f,state:v}=m.event;v&&ds(f.element,"role")==="menuitemradio"&&((y,x)=>{let A=aa(y.element,'[role="menuitemradio"][aria-checked="true"]');Ot(A,(E=>{wn(E,x.element)||y.getSystem().getByDom(E).each((O=>{Zn.off(O)}))}))})(u,f)}))]),components:r,eventOrder:o.eventOrder,...o.showMenuRole?{domModification:{attributes:{role:o.role.getOr("menu")}}}:{}})}),ZS=(o,r,i,l)=>qt(i,l).bind((u=>qt(o,u).bind((m=>{let f=ZS(o,r,i,m);return _.some([m].concat(f))})))).getOr([]),S1=o=>o.type==="prepared"?_.some(o.menu):_.none(),cc=()=>{let o=Rt({}),r=Rt({}),i=Rt({}),l=to(),u=Rt({}),m=y=>f(y).bind(S1),f=y=>qt(r.get(),y),v=y=>qt(o.get(),y);return{setMenuBuilt:(y,x)=>{r.set({...r.get(),[y]:{type:"prepared",menu:x}})},setContents:(y,x,A,E)=>{l.set(y),o.set(A),r.set(x),u.set(E);let O=((B,I)=>{let X={};Ao(B,((U,J)=>{Ot(U,(ee=>{X[ee]=J}))}));let W=I,K=lu(I,((U,J)=>({k:U,v:J}))),V=_s(K,((U,J)=>[J].concat(ZS(X,W,K,J))));return _s(X,(U=>qt(V,U).getOr([U])))})(E,A);i.set(O)},expand:y=>qt(o.get(),y).map((x=>{let A=qt(i.get(),y).getOr([]);return[x].concat(A)})),refresh:y=>qt(i.get(),y),collapse:y=>qt(i.get(),y).bind((x=>x.length>1?_.some(x.slice(1)):_.none())),lookupMenu:f,lookupItem:v,otherMenus:y=>{let x=u.get();return ro(rn(x),y)},getPrimary:()=>l.get().bind(m),getMenus:()=>r.get(),clear:()=>{o.set({}),r.set({}),i.set({}),l.clear()},isClear:()=>l.get().isNone(),getTriggeringPath:(y,x)=>{let A=pn(v(y).toArray(),(E=>m(E).isSome()));return qt(i.get(),y).bind((E=>{let O=In(A.concat(E));return(B=>{let I=[];for(let X=0;X<B.length;X++){let W=B[X];if(!W.isSome())return _.none();I.push(W.getOrDie())}return _.some(I)})(vo(O,((B,I)=>((X,W,K)=>m(X).bind((V=>(U=>El(o.get(),((J,ee)=>J===U)))(X).bind((U=>W(U).map((J=>({triggeredMenu:V,triggeringItem:J,triggeringPath:K}))))))))(B,x,O.slice(0,I+1)).fold((()=>Da(l.get(),B)?[]:[_.none()]),(X=>[_.some(X)])))))}))}}},Gc=S1,Yi=we("tiered-menu-item-highlight"),yd=we("tiered-menu-item-dehighlight"),WS=ve("collapse-item"),Xi=Wc({name:"TieredMenu",configFields:[rc("onExecute"),rc("onEscape"),_u("onOpenMenu"),_u("onOpenSubmenu"),Rn("onRepositionMenu"),Rn("onCollapseMenu"),Te("highlightOnOpen",ja.HighlightMenuAndItem),ha("data",[Ke("primary"),Ke("menus"),Ke("expansions")]),Te("fakeFocus",!1),Rn("onHighlightItem"),Rn("onDehighlightItem"),Rn("onHover"),Bm(),Ke("dom"),Te("navigateOnHover",!0),Te("stayInDom",!1),gi("tmenuBehaviours",[Ft,Vn,io,Cn]),Te("eventOrder",{})],apis:{collapseMenu:(o,r)=>{o.collapseMenu(r)},highlightPrimary:(o,r)=>{o.highlightPrimary(r)},repositionMenus:(o,r)=>{o.repositionMenus(r)}},factory:(o,r)=>{let i=to(),l=cc(),u=U=>xt.getValue(U).value,m=U=>_s(o.data.menus,((J,ee)=>vo(J.items,(ue=>ue.type==="separator"?[]:[ue.data.value])))),f=Vn.highlight,v=(U,J)=>{f(U,J),Vn.getHighlighted(J).orThunk((()=>Vn.getFirst(J))).each((ee=>{o.fakeFocus?Vn.highlight(J,ee):Zd(U,ee.element,kt())}))},y=(U,J)=>Mi(it(J,(ee=>U.lookupMenu(ee).bind((ue=>ue.type==="prepared"?_.some(ue.menu):_.none()))))),x=(U,J,ee)=>{let ue=y(J,J.otherMenus(ee));Ot(ue,(ce=>{ka(ce.element,[o.markers.backgroundMenu]),o.stayInDom||Cn.remove(U,ce)}))},A=(U,J)=>{let ee=(ue=>i.get().getOrThunk((()=>{let ce={},ge=aa(ue.element,`.${o.markers.item}`),Re=pn(ge,(Ne=>ds(Ne,"aria-haspopup")==="true"));return Ot(Re,(Ne=>{ue.getSystem().getByDom(Ne).each((Ae=>{let Le=u(Ae);ce[Le]=Ae}))})),i.set(ce),ce})))(U);Ao(ee,((ue,ce)=>{let ge=Ln(J,ce);en(ue.element,"aria-expanded",ge)}))},E=(U,J,ee)=>_.from(ee[0]).bind((ue=>J.lookupMenu(ue).bind((ce=>{if(ce.type==="notbuilt")return _.none();{let ge=ce.menu,Re=y(J,ee.slice(1));return Ot(Re,(Ne=>{bs(Ne.element,o.markers.backgroundMenu)})),gr(ge.element)||Cn.append(U,Pu(ge)),ka(ge.element,[o.markers.backgroundMenu]),v(U,ge),x(U,J,ee),_.some(ge)}})))),O;(function(U){U[U.HighlightSubmenu=0]="HighlightSubmenu",U[U.HighlightParent=1]="HighlightParent"})(O||(O={}));let B=(U,J,ee=O.HighlightSubmenu)=>{if(J.hasConfigured(Ut)&&Ut.isDisabled(J))return _.some(J);{let ue=u(J);return l.expand(ue).bind((ce=>(A(U,ce),_.from(ce[0]).bind((ge=>l.lookupMenu(ge).bind((Re=>{let Ne=((Ae,Le,Ye)=>{if(Ye.type==="notbuilt"){let Dt=Ae.getSystem().build(Ye.nbMenu());return l.setMenuBuilt(Le,Dt),Dt}return Ye.menu})(U,ge,Re);return gr(Ne.element)||Cn.append(U,Pu(Ne)),o.onOpenSubmenu(U,J,Ne,In(ce)),ee===O.HighlightSubmenu?(Vn.highlightFirst(Ne),E(U,l,ce)):(Vn.dehighlightAll(Ne),_.some(J))})))))))}},I=(U,J)=>{let ee=u(J);return l.collapse(ee).bind((ue=>(A(U,ue),E(U,l,ue).map((ce=>(o.onCollapseMenu(U,J,ce),ce))))))},X=U=>(J,ee)=>Mr(ee.getSource(),`.${o.markers.item}`).bind((ue=>J.getSystem().getByDom(ue).toOptional().bind((ce=>U(J,ce).map(vn))))),W=Lo([$e(Lu(),((U,J)=>{let ee=J.event.item;l.lookupItem(u(ee)).each((()=>{let ue=J.event.menu;Vn.highlight(U,ue);let ce=u(J.event.item);l.refresh(ce).each((ge=>x(U,l,ge)))}))})),Wd(((U,J)=>{let ee=J.event.target;U.getSystem().getByDom(ee).each((ue=>{u(ue).indexOf("collapse-item")===0&&I(U,ue),B(U,ue,O.HighlightSubmenu).fold((()=>{o.onExecute(U,ue)}),Qe)}))})),as(((U,J)=>{(ee=>{let ue=((ge,Re,Ne)=>_s(Ne,((Ae,Le)=>{let Ye=()=>Iu.sketch({...Ae,value:Le,markers:o.markers,fakeFocus:o.fakeFocus,onHighlight:(Dt,nn)=>{Wt(Dt,Yi,{menuComp:Dt,itemComp:nn})},onDehighlight:(Dt,nn)=>{Wt(Dt,yd,{menuComp:Dt,itemComp:nn})},focusManager:o.fakeFocus?kv():V0()});return Le===Re?{type:"prepared",menu:ge.getSystem().build(Ye())}:{type:"notbuilt",nbMenu:Ye}})))(ee,o.data.primary,o.data.menus),ce=m();return l.setContents(o.data.primary,ue,o.data.expansions,ce),l.getPrimary()})(U).each((ee=>{Cn.append(U,Pu(ee)),o.onOpenMenu(U,ee),o.highlightOnOpen===ja.HighlightMenuAndItem?v(U,ee):o.highlightOnOpen===ja.HighlightJustMenu&&f(U,ee)}))})),$e(Yi,((U,J)=>{o.onHighlightItem(U,J.event.menuComp,J.event.itemComp)})),$e(yd,((U,J)=>{o.onDehighlightItem(U,J.event.menuComp,J.event.itemComp)})),...o.navigateOnHover?[$e($S(),((U,J)=>{let ee=J.event.item;((ue,ce)=>{let ge=u(ce);l.refresh(ge).bind((Re=>(A(ue,Re),E(ue,l,Re))))})(U,ee),B(U,ee,O.HighlightParent),o.onHover(U,ee)}))]:[]]),K=U=>Vn.getHighlighted(U).bind(Vn.getHighlighted),V={collapseMenu:U=>{K(U).each((J=>{I(U,J)}))},highlightPrimary:U=>{l.getPrimary().each((J=>{v(U,J)}))},repositionMenus:U=>{l.getPrimary().bind((ee=>K(U).bind((ue=>{let ce=u(ue),ge=Os(l.getMenus()),Re=Mi(it(ge,Gc));return l.getTriggeringPath(ce,(Ne=>((Ae,Le,Ye)=>Mt(Le,(Dt=>{if(!Dt.getSystem().isConnected())return _.none();let nn=Vn.getCandidates(Dt);return kn(nn,(sn=>u(sn)===Ye))})))(0,Re,Ne)))})).map((ue=>({primary:ee,triggeringPath:ue}))))).fold((()=>{(ee=>_.from(ee.components()[0]).filter((ue=>ds(ue.element,"role")==="menu")))(U).each((ee=>{o.onRepositionMenu(U,ee,[])}))}),(({primary:ee,triggeringPath:ue})=>{o.onRepositionMenu(U,ee,ue)}))}};return{uid:o.uid,dom:o.dom,markers:o.markers,behaviours:Ti(o.tmenuBehaviours,[Ft.config({mode:"special",onRight:X(((U,J)=>Yg(J.element)?_.none():B(U,J,O.HighlightSubmenu))),onLeft:X(((U,J)=>Yg(J.element)?_.none():I(U,J))),onEscape:X(((U,J)=>I(U,J).orThunk((()=>o.onEscape(U,J).map((()=>U)))))),focusIn:(U,J)=>{l.getPrimary().each((ee=>{Zd(U,ee.element,kt())}))}}),Vn.config({highlightClass:o.markers.selectedMenu,itemClass:o.markers.menu}),io.config({find:U=>Vn.getHighlighted(U)}),Cn.config({})]),eventOrder:o.eventOrder,apis:V,events:W}},extraApis:{tieredData:(o,r,i)=>({primary:o,menus:r,expansions:i}),singleData:(o,r)=>({primary:o,menus:wi(o,r),expansions:{}}),collapseItem:o=>({value:we(WS()),meta:{text:o}})}}),nh=ve("sink"),mM=ve(Du({name:nh(),overrides:ve({dom:{tag:"div"},behaviours:st([Ki.config({useFixed:vn})]),events:Lo([Hm(zi()),Hm(gs()),Hm(ku())])})})),gM=fa([Te("isExtraPart",zt),ci("fireEventInstead",[Te("event",Lc())])]),jS=o=>{let r=li("Dismissal",gM,o);return{[pd()]:{schema:fa([Ke("target")]),onReceive:(i,l)=>{uo.isOpen(i)&&(uo.isPartOf(i,l.target)||r.isExtraPart(i,l.target)||r.fireEventInstead.fold((()=>uo.close(i)),(u=>$n(i,u.event))))}}}},mA=fa([ci("fireEventInstead",[Te("event",_p())]),jr("doReposition")]),fC=o=>{let r=li("Reposition",mA,o);return{[Ei()]:{onReceive:i=>{uo.isOpen(i)&&r.fireEventInstead.fold((()=>r.doReposition(i)),(l=>$n(i,l.event)))}}}},jv=(o,r)=>{let i=o.getHotspot(r).getOr(r),l="hotspot",u=o.getAnchorOverrides();return o.layouts.fold((()=>({type:l,hotspot:i,overrides:u})),(m=>({type:l,hotspot:i,overrides:u,layouts:m})))},qv=(o,r,i,l,u,m,f)=>((y,x,A,E,O,B,I)=>{let X=((K,V,U)=>(0,K.fetch)(U).map(V))(y,x,E),W=fA(E,y);return X.map((K=>K.bind((V=>{let U=V.menus[V.primary];return _.from(U).each((J=>{y.listRole.each((ee=>{J.role=ee}))})),_.from(Xi.sketch({...B.menu(),uid:f1(""),data:V,highlightOnOpen:I,onOpenMenu:(J,ee)=>{let ue=W().getOrDie();Ki.position(ue,ee,{anchor:A}),uo.decloak(O)},onOpenSubmenu:(J,ee,ue)=>{let ce=W().getOrDie();Ki.position(ce,ue,{anchor:{type:"submenu",item:ee}}),uo.decloak(O)},onRepositionMenu:(J,ee,ue)=>{let ce=W().getOrDie();Ki.position(ce,ee,{anchor:A}),Ot(ue,(ge=>{Ki.position(ce,ge.triggeredMenu,{anchor:{type:"submenu",item:ge.triggeringItem}})}))},onEscape:()=>(un.focus(E),uo.close(O),_.some(!0))}))}))))})(o,r,jv(o,i),i,l,u,f).map((y=>(y.fold((()=>{uo.isOpen(l)&&uo.close(l)}),(x=>{uo.cloak(l),uo.open(l,x),m(l)})),l))),fM=(o,r,i,l,u,m,f)=>(uo.close(l),oa(l)),gA=(o,r,i,l,u,m)=>{let f=br.getCoupled(i,"sandbox");return(uo.isOpen(f)?fM:qv)(o,r,i,f,l,u,m)},fA=(o,r)=>o.getSystem().getByUid(r.uid+"-"+nh()).map((i=>()=>Nn.value(i))).getOrThunk((()=>r.lazySink.fold((()=>()=>Nn.error(new Error("No internal sink is specified, nor could an external sink be found"))),(i=>()=>i(o))))),pA=o=>{uo.getState(o).each((r=>{Xi.repositionMenus(r)}))},qS=(o,r,i)=>{let l=Ym(),u=fA(r,o);return{dom:{tag:"div",classes:o.sandboxClasses,attributes:{id:l.id}},behaviours:tb(o.sandboxBehaviours,[xt.config({store:{mode:"memory",initialValue:r}}),uo.config({onOpen:(m,f)=>{let v=jv(o,r);l.link(r.element),o.matchWidth&&((y,x,A)=>{let E=io.getCurrent(x).getOr(x),O=hs(y.element);A?q(E.element,"min-width",O+"px"):((B,I)=>{Pa.set(B,I)})(E.element,O)})(v.hotspot,f,o.useMinWidth),o.onOpen(v,m,f),i!==void 0&&i.onOpen!==void 0&&i.onOpen(m,f)},onClose:(m,f)=>{l.unlink(r.element),u().getOr(f).element.dom.dispatchEvent(new window.FocusEvent("focusout")),i!==void 0&&i.onClose!==void 0&&i.onClose(m,f)},isPartOf:(m,f,v)=>th(f,v)||th(r,v),getAttachPoint:()=>u().getOrDie()}),io.config({find:m=>uo.getState(m).bind((f=>io.getCurrent(f)))}),jc.config({channels:{...jS({isExtraPart:zt}),...fC({doReposition:pA})}})])}},GS=()=>[Te("sandboxClasses",[]),eb("sandboxBehaviours",[io,jc,uo,xt])],KS=ve([Ke("dom"),Ke("fetch"),Rn("onOpen"),bl("onExecute"),Te("getHotspot",_.some),Te("getAnchorOverrides",ve({})),b1(),gi("dropdownBehaviours",[Zn,br,Ft,un]),Ke("toggleClass"),Te("eventOrder",{}),no("lazySink"),Te("matchWidth",!1),Te("useMinWidth",!1),no("role"),no("listRole")].concat(GS())),hA=ve([Hc({schema:[Bm(),Te("fakeFocus",!1)],name:"menu",defaults:o=>({onExecute:o.onExecute})}),mM()]),Kc=Vl({name:"Dropdown",configFields:KS(),partFields:hA(),factory:(o,r,i,l)=>{let u=y=>{uo.getState(y).each((x=>{Xi.highlightPrimary(x)}))},m=(y,x,A)=>gA(o,ht,y,l,x,A),f={expand:y=>{Zn.isOn(y)||m(y,Qe,ja.HighlightNone).get(Qe)},open:y=>{Zn.isOn(y)||m(y,Qe,ja.HighlightMenuAndItem).get(Qe)},refetch:y=>br.getExistingCoupled(y,"sandbox").fold((()=>m(y,Qe,ja.HighlightMenuAndItem).map(Qe)),(x=>qv(o,ht,y,x,l,Qe,ja.HighlightMenuAndItem).map(Qe))),isOpen:Zn.isOn,close:y=>{Zn.isOn(y)&&m(y,Qe,ja.HighlightMenuAndItem).get(Qe)},repositionMenus:y=>{Zn.isOn(y)&&(x=>{let A=br.getCoupled(x,"sandbox");pA(A)})(y)}},v=(y,x)=>(Nf(y),_.some(!0));return{uid:o.uid,dom:o.dom,components:r,behaviours:Ti(o.dropdownBehaviours,[Zn.config({toggleClass:o.toggleClass,aria:{mode:"expanded"}}),br.config({others:{sandbox:y=>qS(o,y,{onOpen:()=>Zn.on(y),onClose:()=>Zn.off(y)})}}),Ft.config({mode:"special",onSpace:v,onEnter:v,onDown:(y,x)=>{if(Kc.isOpen(y)){let A=br.getCoupled(y,"sandbox");u(A)}else Kc.open(y);return _.some(!0)},onEscape:(y,x)=>Kc.isOpen(y)?(Kc.close(y),_.some(!0)):_.none()}),un.config({})]),events:uC(_.some((y=>{m(y,u,ja.HighlightMenuAndItem).get(Qe)}))),eventOrder:{...o.eventOrder,[Xe()]:["disabling","toggling","alloy.base.behaviour"]},apis:f,domModification:{attributes:{"aria-haspopup":o.listRole.getOr("true"),...o.role.fold((()=>({})),(y=>({role:y}))),...o.dom.tag==="button"?{type:qt(o.dom,"attributes").bind((y=>qt(y,"type"))).getOr("button")}:{}}}}},apis:{open:(o,r)=>o.open(r),refetch:(o,r)=>o.refetch(r),expand:(o,r)=>o.expand(r),close:(o,r)=>o.close(r),isOpen:(o,r)=>o.isOpen(r),repositionMenus:(o,r)=>o.repositionMenus(r)}}),bA="form",pM=[gi("formBehaviours",[xt])],vA=o=>"<alloy.field."+o+">",hM=(o,r)=>({uid:o.uid,dom:o.dom,components:r,behaviours:Ti(o.formBehaviours,[xt.config({store:{mode:"manual",getValue:i=>{let l=dv(i,o);return _s(l,((u,m)=>u().bind((f=>{return v=io.getCurrent(f),y=new Error(`Cannot find a current component to extract the value from for form part '${m}': `+pr(f.element)),v.fold((()=>Nn.error(y)),Nn.value);var v,y})).map(xt.getValue)))},setValue:(i,l)=>{Ao(l,((u,m)=>{fs(i,o,m).each((f=>{io.getCurrent(f).each((v=>{xt.setValue(v,u)}))}))}))}}})]),apis:{getField:(i,l)=>fs(i,o,l).bind(io.getCurrent)}}),ab={getField:vd(((o,r,i)=>o.getField(r,i))),sketch:o=>{let r=(()=>{let m=[];return{field:(f,v)=>(m.push(f),T0(bA,vA(f),v)),record:ve(m)}})(),i=o(r),l=r.record(),u=it(l,(m=>Wi({name:m,pname:vA(m)})));return tC(bA,pM,u,hM,i)}},Cl=ve([Ke("dom"),Te("shell",!0),gi("toolbarBehaviours",[Cn])]),IL=ve([Du({name:"groups",overrides:()=>({behaviours:st([Cn.config({})])})})]),Fu=Vl({name:"Toolbar",configFields:Cl(),partFields:IL(),factory:(o,r,i,l)=>{let u=o.shell?{behaviours:[Cn.config({})],components:[]}:{behaviours:[],components:r};return{uid:o.uid,dom:o.dom,components:u.components,behaviours:Ti(o.toolbarBehaviours,u.behaviours),apis:{setGroups:(m,f)=>{var v;(v=m,o.shell?_.some(v):fs(v,o,"groups")).fold((()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(y=>{Cn.set(y,f)}))},refresh:Qe},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(o,r,i)=>{o.setGroups(r,i)}}}),k1=ve([Au(["toggledClass"]),Ke("lazySink"),jr("fetch"),qr("getBounds"),ci("fireDismissalEventInstead",[Te("event",Lc())]),b1(),Rn("onToggled")]),YS=ve([Hc({name:"button",overrides:o=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:st([Zn.config({toggleClass:o.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:o.onToggled})])})}),Hc({factory:Fu,schema:Cl(),name:"toolbar",overrides:o=>({toolbarBehaviours:st([Ft.config({mode:"cyclic",onEscape:r=>(fs(r,o,"button").each(un.focus),_.none())})])})})]),ib=to(),XS=(o,r)=>{let i=br.getCoupled(o,"toolbarSandbox");uo.isOpen(i)?uo.close(i):uo.open(i,r.toolbar())},JS=(o,r,i,l)=>{let u=i.getBounds.map((f=>f())),m=i.lazySink(o).getOrDie();Ki.positionWithinBounds(m,r,{anchor:{type:"hotspot",hotspot:o,layouts:l,overrides:{maxWidthFunction:F0()}}},u)},yA=(o,r,i,l,u)=>{Fu.setGroups(r,u),JS(o,r,i,l),Zn.on(o)},oh=Vl({name:"FloatingToolbarButton",factory:(o,r,i,l)=>({...la.sketch({...l.button(),action:u=>{XS(u,l)},buttonBehaviours:tb({dump:l.button().buttonBehaviours},[br.config({others:{toolbarSandbox:u=>((m,f,v)=>{let y=Ym();return{dom:{tag:"div",attributes:{id:y.id}},behaviours:st([Ft.config({mode:"special",onEscape:x=>(uo.close(x),_.some(!0))}),uo.config({onOpen:(x,A)=>{let E=ib.get().getOr(!1);v.fetch().get((O=>{yA(m,A,v,f.layouts,O),y.link(m.element),E||Ft.focusIn(A)}))},onClose:()=>{Zn.off(m),ib.get().getOr(!1)||un.focus(m),y.unlink(m.element)},isPartOf:(x,A,E)=>th(A,E)||th(m,E),getAttachPoint:()=>v.lazySink(m).getOrDie()}),jc.config({channels:{...jS({isExtraPart:zt,...v.fireDismissalEventInstead.map((x=>({fireEventInstead:{event:x.event}}))).getOr({})}),...fC({doReposition:()=>{uo.getState(br.getCoupled(m,"toolbarSandbox")).each((x=>{JS(m,x,v,f.layouts)}))}})}})])}})(u,i,o)}})])}),apis:{setGroups:(u,m)=>{uo.getState(br.getCoupled(u,"toolbarSandbox")).each((f=>{yA(u,f,o,i.layouts,m)}))},reposition:u=>{uo.getState(br.getCoupled(u,"toolbarSandbox")).each((m=>{JS(u,m,o,i.layouts)}))},toggle:u=>{XS(u,l)},toggleWithoutFocusing:u=>{((m,f)=>{ib.set(!0),XS(m,f),ib.clear()})(u,l)},getToolbar:u=>uo.getState(br.getCoupled(u,"toolbarSandbox")),isOpen:u=>uo.isOpen(br.getCoupled(u,"toolbarSandbox"))}}),configFields:k1(),partFields:YS(),apis:{setGroups:(o,r,i)=>{o.setGroups(r,i)},reposition:(o,r)=>{o.reposition(r)},toggle:(o,r)=>{o.toggle(r)},toggleWithoutFocusing:(o,r)=>{o.toggleWithoutFocusing(r)},getToolbar:(o,r)=>o.getToolbar(r),isOpen:(o,r)=>o.isOpen(r)}}),CA=ve([Te("prefix","form-field"),gi("fieldBehaviours",[io,xt])]),lb=ve([Du({schema:[Ke("dom")],name:"label"}),Du({factory:{sketch:o=>({uid:o.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:o.text}})},schema:[Ke("text")],name:"aria-descriptor"}),Wi({factory:{sketch:o=>{let r=((i,l)=>{let u={};return Ao(i,((m,f)=>{Ln(l,f)||(u[f]=m)})),u})(o,["factory"]);return o.factory.sketch(r)}},schema:[Ke("factory")],name:"field"})]),Bn=Vl({name:"FormField",configFields:CA(),partFields:lb(),factory:(o,r,i,l)=>{let u=Ti(o.fieldBehaviours,[io.config({find:v=>fs(v,o,"field")}),xt.config({store:{mode:"manual",getValue:v=>io.getCurrent(v).bind(xt.getValue),setValue:(v,y)=>{io.getCurrent(v).each((x=>{xt.setValue(x,y)}))}}})]),m=Lo([as(((v,y)=>{let x=Df(v,o,["label","field","aria-descriptor"]);x.field().each((A=>{let E=we(o.prefix);x.label().each((O=>{en(O.element,"for",E),en(A.element,"id",E)})),x["aria-descriptor"]().each((O=>{let B=we(o.prefix);en(O.element,"id",B),en(A.element,"aria-describedby",B)}))}))}))]),f={getField:v=>fs(v,o,"field"),getLabel:v=>fs(v,o,"label")};return{uid:o.uid,dom:o.dom,components:r,behaviours:u,events:m,apis:f}},apis:{getField:(o,r)=>o.getField(r),getLabel:(o,r)=>o.getLabel(r)}}),bM=ve([Te("field1Name","field1"),Te("field2Name","field2"),_u("onLockedChange"),Au(["lockClass"]),Te("locked",!1),eb("coupledFieldBehaviours",[io,xt]),rs("onInput",Qe)]),wA=(o,r)=>Wi({factory:Bn,name:o,overrides:i=>({fieldBehaviours:st([on("coupled-input-behaviour",[$e(Pc(),(l=>{((u,m,f)=>fs(u,m,f).bind(io.getCurrent))(l,i,r).each((u=>{fs(l,i,"lock").each((m=>{Zn.isOn(m)&&i.onLockedChange(l,u,m),i.onInput(l)}))}))}))])])})}),xA=ve([wA("field1","field2"),wA("field2","field1"),Wi({factory:la,schema:[Ke("dom")],name:"lock",overrides:o=>({buttonBehaviours:st([Zn.config({selected:o.locked,toggleClass:o.markers.lockClass,aria:{mode:"pressed"}})])})})]),ar=Vl({name:"FormCoupledInputs",configFields:bM(),partFields:xA(),factory:(o,r,i,l)=>({uid:o.uid,dom:o.dom,components:r,behaviours:tb(o.coupledFieldBehaviours,[io.config({find:_.some}),xt.config({store:{mode:"manual",getValue:u=>{let m=Hh(u,o,["field1","field2"]);return{[o.field1Name]:xt.getValue(m.field1()),[o.field2Name]:xt.getValue(m.field2())}},setValue:(u,m)=>{let f=Hh(u,o,["field1","field2"]);Ds(m,o.field1Name)&&xt.setValue(f.field1(),m[o.field1Name]),Ds(m,o.field2Name)&&xt.setValue(f.field2(),m[o.field2Name])}}})]),apis:{getField1:u=>fs(u,o,"field1"),getField2:u=>fs(u,o,"field2"),getLock:u=>fs(u,o,"lock")}}),apis:{getField1:(o,r)=>o.getField1(r),getField2:(o,r)=>o.getField2(r),getLock:(o,r)=>o.getLock(r)}}),QS=Wc({name:"HtmlSelect",configFields:[Ke("options"),gi("selectBehaviours",[un,xt]),Te("selectClasses",[]),Te("selectAttributes",{}),no("data")],factory:(o,r)=>{let i=it(o.options,(u=>({dom:{tag:"option",value:u.value,innerHtml:u.text}}))),l=o.data.map((u=>wi("initialValue",u))).getOr({});return{uid:o.uid,dom:{tag:"select",classes:o.selectClasses,attributes:o.selectAttributes},components:i,behaviours:Ti(o.selectBehaviours,[un.config({}),xt.config({store:{mode:"manual",getValue:u=>Bo(u.element),setValue:(u,m)=>{let f=Lt(o.options);kn(o.options,(v=>v.value===m)).isSome()?Hi(u.element,m):u.element.dom.selectedIndex===-1&&m===""&&f.each((v=>Hi(u.element,v.value)))},...l}})])}}}),Ls=Wc({name:"InlineView",configFields:[Ke("lazySink"),Rn("onShow"),Rn("onHide"),qr("onEscape"),gi("inlineBehaviours",[uo,xt,jc]),ci("fireDismissalEventInstead",[Te("event",Lc())]),ci("fireRepositionEventInstead",[Te("event",_p())]),Te("getRelated",_.none),Te("isExtraPart",zt),Te("eventOrder",_.none)],factory:(o,r)=>{let i=(f,v,y,x)=>{let A=o.lazySink(f).getOrDie();uo.openWhileCloaked(f,v,(()=>Ki.positionWithinBounds(A,f,y,x()))),xt.setValue(f,_.some({mode:"position",config:y,getBounds:x}))},l=(f,v,y,x)=>{let A=((E,O,B,I,X)=>{let W=()=>E.lazySink(O),K=I.type==="horizontal"?{layouts:{onLtr:()=>pv(),onRtl:()=>Vd()}}:{},V=U=>(J=>J.length===2)(U)?K:{};return Xi.sketch({dom:{tag:"div"},data:I.data,markers:I.menu.markers,highlightOnOpen:I.menu.highlightOnOpen,fakeFocus:I.menu.fakeFocus,onEscape:()=>(uo.close(O),E.onEscape.map((U=>U(O))),_.some(!0)),onExecute:()=>_.some(!0),onOpenMenu:(U,J)=>{Ki.positionWithinBounds(W().getOrDie(),J,B,X())},onOpenSubmenu:(U,J,ee,ue)=>{let ce=W().getOrDie();Ki.position(ce,ee,{anchor:{type:"submenu",item:J,...V(ue)}})},onRepositionMenu:(U,J,ee)=>{let ue=W().getOrDie();Ki.positionWithinBounds(ue,J,B,X()),Ot(ee,(ce=>{let ge=V(ce.triggeringPath);Ki.position(ue,ce.triggeredMenu,{anchor:{type:"submenu",item:ce.triggeringItem,...ge}})}))}})})(o,f,v,y,x);uo.open(f,A),xt.setValue(f,_.some({mode:"menu",menu:A}))},u=f=>{uo.isOpen(f)&&xt.getValue(f).each((v=>{switch(v.mode){case"menu":uo.getState(f).each(Xi.repositionMenus);break;case"position":let y=o.lazySink(f).getOrDie();Ki.positionWithinBounds(y,f,v.config,v.getBounds())}}))},m={setContent:(f,v)=>{uo.setContent(f,v)},showAt:(f,v,y)=>{let x=_.none;i(f,v,y,x)},showWithinBounds:i,showMenuAt:(f,v,y)=>{l(f,v,y,_.none)},showMenuWithinBounds:l,hide:f=>{uo.isOpen(f)&&(xt.setValue(f,_.none()),uo.close(f))},getContent:f=>uo.getState(f),reposition:u,isOpen:uo.isOpen};return{uid:o.uid,dom:o.dom,behaviours:Ti(o.inlineBehaviours,[uo.config({isPartOf:(f,v,y)=>th(v,y)||((x,A)=>o.getRelated(x).exists((E=>th(E,A))))(f,y),getAttachPoint:f=>o.lazySink(f).getOrDie(),onOpen:f=>{o.onShow(f)},onClose:f=>{o.onHide(f)}}),xt.config({store:{mode:"memory",initialValue:_.none()}}),jc.config({channels:{...jS({isExtraPart:r.isExtraPart,...o.fireDismissalEventInstead.map((f=>({fireEventInstead:{event:f.event}}))).getOr({})}),...fC({...o.fireRepositionEventInstead.map((f=>({fireEventInstead:{event:f.event}}))).getOr({}),doReposition:u})}})]),eventOrder:o.eventOrder,apis:m}},apis:{showAt:(o,r,i,l)=>{o.showAt(r,i,l)},showWithinBounds:(o,r,i,l,u)=>{o.showWithinBounds(r,i,l,u)},showMenuAt:(o,r,i,l)=>{o.showMenuAt(r,i,l)},showMenuWithinBounds:(o,r,i,l,u)=>{o.showMenuWithinBounds(r,i,l,u)},hide:(o,r)=>{o.hide(r)},isOpen:(o,r)=>o.isOpen(r),getContent:(o,r)=>o.getContent(r),setContent:(o,r,i)=>{o.setContent(r,i)},reposition:(o,r)=>{o.reposition(r)}}}),Gv=ve([Yo("type","text"),no("data"),Te("inputAttributes",{}),Te("inputStyles",{}),Te("tag","input"),Te("inputClasses",[]),Rn("onSetValue"),rs("fromInputValue",ht),rs("toInputValue",ht),Te("styles",{}),Te("eventOrder",{}),gi("inputBehaviours",[xt,un]),Te("selectOnFocus",!0)]),pC=o=>st([un.config({onFocus:o.selectOnFocus?r=>{let i=r.element,l=Bo(i);o.type!=="range"&&i.dom.setSelectionRange(0,l.length)}:Qe})]),SA=o=>({...pC(o),...Ti(o.inputBehaviours,[xt.config({store:{mode:"manual",...o.data.map((r=>({initialValue:r}))).getOr({}),getValue:r=>o.fromInputValue(Bo(r.element)),setValue:(r,i)=>{Bo(r.element)!==i&&Hi(r.element,o.toInputValue(i))}},onSetValue:o.onSetValue})])}),hC=o=>({tag:o.tag,attributes:{type:o.type,...o.inputAttributes},styles:o.inputStyles,classes:o.inputClasses}),Kf=Wc({name:"Input",configFields:Gv(),factory:(o,r)=>({uid:o.uid,dom:hC(o),components:[],behaviours:SA(o),eventOrder:o.eventOrder})}),e4=dd(US(),gC()),vM=ve([Ke("lazySink"),no("dragBlockClass"),rs("getBounds",Wr),Te("useTabstopAt",vn),Te("firstTabstop",0),Te("eventOrder",{}),gi("modalBehaviours",[Ft]),bl("onExecute"),rc("onEscape")]),E1={sketch:ht},t4=ve([Du({name:"draghandle",overrides:(o,r)=>({behaviours:st([Kp.config({mode:"mouse",getTarget:i=>Fi(i,'[role="dialog"]').getOr(i),blockerClass:o.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(r,null,2)).message),getBounds:o.getDragBounds})])})}),Wi({schema:[Ke("dom")],name:"title"}),Wi({factory:E1,schema:[Ke("dom")],name:"close"}),Wi({factory:E1,schema:[Ke("dom")],name:"body"}),Du({factory:E1,schema:[Ke("dom")],name:"footer"}),Hc({factory:{sketch:(o,r)=>({...o,dom:r.dom,components:r.components})},schema:[Te("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Te("components",[])],name:"blocker"})]),va=Vl({name:"ModalDialog",configFields:vM(),partFields:t4(),factory:(o,r,i,l)=>{let u=to(),m=we("modal-events"),f={...o.eventOrder,[Vi()]:[m].concat(o.eventOrder["alloy.system.attached"]||[])},v=bi();return{uid:o.uid,dom:o.dom,components:r,apis:{show:y=>{u.set(y);let x=o.lazySink(y).getOrDie(),A=l.blocker(),E=x.getSystem().build({...A,components:A.components.concat([Pu(y)]),behaviours:st([un.config({}),on("dialog-blocker-events",[fd(pl(),(()=>{Xg.isBlocked(y)||Ft.focusIn(y)}))])])});Uf(x,E),Ft.focusIn(y)},hide:y=>{u.clear(),zo(y.element).each((x=>{y.getSystem().getByDom(x).each((A=>{Zf(A)}))}))},getBody:y=>zg(y,o,"body"),getFooter:y=>fs(y,o,"footer"),setIdle:y=>{Xg.unblock(y)},setBusy:(y,x)=>{Xg.block(y,x)}},eventOrder:f,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Ti(o.modalBehaviours,[Cn.config({}),Ft.config({mode:"cyclic",onEnter:o.onExecute,onEscape:o.onEscape,useTabstopAt:o.useTabstopAt,firstTabstop:o.firstTabstop}),Xg.config({getRoot:u.get}),on(m,[as((y=>{let x=zg(y,o,"title").element,A=(E=>E.dom.textContent)(x);v.os.isMacOS()&&$t(A)?en(y.element,"aria-label",A):((E,O)=>{let B=Zs(E,"id").fold((()=>{let I=we("dialog-label");return en(O,"id",I),I}),ht);en(E,"aria-labelledby",B)})(y.element,x)}))])])}},apis:{show:(o,r)=>{o.show(r)},hide:(o,r)=>{o.hide(r)},getBody:(o,r)=>o.getBody(r),getFooter:(o,r)=>o.getFooter(r),setBusy:(o,r,i)=>{o.setBusy(r,i)},setIdle:(o,r)=>{o.setIdle(r)}}}),kA=Du({schema:[Ke("dom")],name:"label"}),sh=o=>Du({name:o+"-edge",overrides:r=>r.model.manager.edgeActions[o].fold((()=>({})),(i=>({events:Lo([H0(oc(),((l,u,m)=>i(l,m)),[r]),H0(gs(),((l,u,m)=>i(l,m)),[r]),H0(Nm(),((l,u,m)=>{m.mouseIsDown.get()&&i(l,m)}),[r])])})))}),EA=sh("top-left"),n4=sh("top"),cb=sh("top-right"),o4=sh("right"),yM=sh("bottom-right"),CM=sh("bottom"),TA=sh("bottom-left"),rh=sh("left"),s4=Wi({name:"thumb",defaults:ve({dom:{styles:{position:"absolute"}}}),overrides:o=>({events:Lo([Lp(oc(),o,"spectrum"),Lp(Sf(),o,"spectrum"),Lp(Bc(),o,"spectrum"),Lp(gs(),o,"spectrum"),Lp(Nm(),o,"spectrum"),Lp(Pg(),o,"spectrum")])})}),ub=o=>zp(o.event),bC=Wi({schema:[kr("mouseIsDown",(()=>Rt(!1)))],name:"spectrum",overrides:o=>{let r=o.model.manager,i=(l,u)=>r.getValueFromEvent(u).map((m=>r.setValueFrom(l,o,m)));return{behaviours:st([Ft.config({mode:"special",onLeft:(l,u)=>r.onLeft(l,o,ub(u)),onRight:(l,u)=>r.onRight(l,o,ub(u)),onUp:(l,u)=>r.onUp(l,o,ub(u)),onDown:(l,u)=>r.onDown(l,o,ub(u))}),ko.config({}),un.config({})]),events:Lo([$e(oc(),i),$e(Sf(),i),$e(gs(),i),$e(Nm(),((l,u)=>{o.mouseIsDown.get()&&i(l,u)}))])}}});var AA=[kA,rh,o4,n4,CM,EA,cb,TA,yM,s4,bC];let ah=ve("slider.change.value"),Kv=o=>{let r=o.event.raw;if((i=>i.type.indexOf("touch")!==-1)(r)){let i=r;return i.touches!==void 0&&i.touches.length===1?_.some(i.touches[0]).map((l=>Qt(l.clientX,l.clientY))):_.none()}{let i=r;return i.clientX!==void 0?_.some(i).map((l=>Qt(l.clientX,l.clientY))):_.none()}},T1=o=>o.model.minX,A1=o=>o.model.minY,Cd=o=>o.model.minX-1,vC=o=>o.model.minY-1,_1=o=>o.model.maxX,Ji=o=>o.model.maxY,ca=o=>o.model.maxX+1,yC=o=>o.model.maxY+1,CC=(o,r,i)=>r(o)-i(o),r4=o=>CC(o,_1,T1),wC=o=>CC(o,Ji,A1),xC=o=>r4(o)/2,O1=o=>wC(o)/2,D1=(o,r)=>r?o.stepSize*o.speedMultiplier:o.stepSize,a4=o=>o.snapToGrid,_A=o=>o.snapStart,OA=o=>o.rounded,Yv=(o,r)=>o[r+"-edge"]!==void 0,i4=o=>Yv(o,"left"),DA=o=>Yv(o,"right"),RA=o=>Yv(o,"top"),l4=o=>Yv(o,"bottom"),tf=o=>o.model.value.get(),Yf=(o,r)=>({x:o,y:r}),wd=(o,r)=>{Wt(o,ah(),{value:r})},db=(o,r,i,l)=>o<r?o:o>i?i:o===r?r-1:Math.max(r,o-l),SC=(o,r,i,l)=>o>i?o:o<r?r:o===i?i+1:Math.min(i,o+l),ih=(o,r,i)=>Math.max(r,Math.min(i,o)),mb=o=>{let{min:r,max:i,range:l,value:u,step:m,snap:f,snapStart:v,rounded:y,hasMinEdge:x,hasMaxEdge:A,minBound:E,maxBound:O,screenRange:B}=o,I=x?r-1:r,X=A?i+1:i;if(u<E)return I;if(u>O)return X;{let W=((V,U,J)=>Math.min(J,Math.max(V,U))-U)(u,E,O),K=ih(W/B*l+r,I,X);return f&&K>=r&&K<=i?((V,U,J,ee,ue)=>ue.fold((()=>{let ce=V-U,ge=Math.round(ce/ee)*ee;return ih(U+ge,U-1,J+1)}),(ce=>{let ge=(V-ce)%ee,Re=Math.round(ge/ee),Ne=Math.floor((V-ce)/ee),Ae=Math.floor((J-ce)/ee),Le=ce+Math.min(Ae,Ne+Re)*ee;return Math.max(ce,Le)})))(K,r,i,m,v):y?Math.round(K):K}},NA=o=>{let{min:r,max:i,range:l,value:u,hasMinEdge:m,hasMaxEdge:f,maxBound:v,maxOffset:y,centerMinEdge:x,centerMaxEdge:A}=o;return u<r?m?0:x:u>i?f?v:A:(u-r)/l*y},c4="top",MA="right",BA="bottom",kC="left",nf=o=>o.element.dom.getBoundingClientRect(),xd=(o,r)=>o[r],EC=o=>{let r=nf(o);return xd(r,kC)},PA=o=>{let r=nf(o);return xd(r,MA)},Xv=o=>{let r=nf(o);return xd(r,c4)},R1=o=>{let r=nf(o);return xd(r,BA)},u4=o=>{let r=nf(o);return xd(r,"width")},d4=o=>{let r=nf(o);return xd(r,"height")},LA=(o,r,i)=>(o+r)/2-i,m4=(o,r)=>{let i=nf(o),l=nf(r),u=xd(i,kC),m=xd(i,MA),f=xd(l,kC);return LA(u,m,f)},g4=(o,r)=>{let i=nf(o),l=nf(r),u=xd(i,c4),m=xd(i,BA),f=xd(l,c4);return LA(u,m,f)},TC=(o,r)=>{Wt(o,ah(),{value:r})},f4=(o,r,i)=>{let l={min:T1(r),max:_1(r),range:r4(r),value:i,step:D1(r),snap:a4(r),snapStart:_A(r),rounded:OA(r),hasMinEdge:i4(r),hasMaxEdge:DA(r),minBound:EC(o),maxBound:PA(o),screenRange:u4(o)};return mb(l)},IA=o=>(r,i,l)=>((u,m,f,v)=>{let y=(u>0?SC:db)(tf(f),T1(f),_1(f),D1(f,v));return TC(m,y),_.some(y)})(o,r,i,l).map(vn),p4=(o,r,i,l,u,m)=>{let f=((v,y,x,A,E)=>{let O=u4(v),B=A.bind((W=>_.some(m4(W,v)))).getOr(0),I=E.bind((W=>_.some(m4(W,v)))).getOr(O),X={min:T1(y),max:_1(y),range:r4(y),value:x,hasMinEdge:i4(y),hasMaxEdge:DA(y),minBound:EC(v),minOffset:0,maxBound:PA(v),maxOffset:O,centerMinEdge:B,centerMaxEdge:I};return NA(X)})(r,m,i,l,u);return EC(r)-EC(o)+f},wM=IA(-1),xM=IA(1),AC=_.none,h4=_.none,SM={"top-left":_.none(),top:_.none(),"top-right":_.none(),right:_.some(((o,r)=>{wd(o,ca(r))})),"bottom-right":_.none(),bottom:_.none(),"bottom-left":_.none(),left:_.some(((o,r)=>{wd(o,Cd(r))}))};var FL=Object.freeze({__proto__:null,setValueFrom:(o,r,i)=>{let l=f4(o,r,i);return TC(o,l),l},setToMin:(o,r)=>{let i=T1(r);TC(o,i)},setToMax:(o,r)=>{let i=_1(r);TC(o,i)},findValueOfOffset:f4,getValueFromEvent:o=>Kv(o).map((r=>r.left)),findPositionOfValue:p4,setPositionFromValue:(o,r,i,l)=>{let u=tf(i),m=p4(o,l.getSpectrum(o),u,l.getLeftEdge(o),l.getRightEdge(o),i),f=hs(r.element)/2;q(r.element,"left",m-f+"px")},onLeft:wM,onRight:xM,onUp:AC,onDown:h4,edgeActions:SM});let Jv=(o,r)=>{Wt(o,ah(),{value:r})},b4=(o,r,i)=>{let l={min:A1(r),max:Ji(r),range:wC(r),value:i,step:D1(r),snap:a4(r),snapStart:_A(r),rounded:OA(r),hasMinEdge:RA(r),hasMaxEdge:l4(r),minBound:Xv(o),maxBound:R1(o),screenRange:d4(o)};return mb(l)},FA=o=>(r,i,l)=>((u,m,f,v)=>{let y=(u>0?SC:db)(tf(f),A1(f),Ji(f),D1(f,v));return Jv(m,y),_.some(y)})(o,r,i,l).map(vn),Yc=(o,r,i,l,u,m)=>{let f=((v,y,x,A,E)=>{let O=d4(v),B=A.bind((W=>_.some(g4(W,v)))).getOr(0),I=E.bind((W=>_.some(g4(W,v)))).getOr(O),X={min:A1(y),max:Ji(y),range:wC(y),value:x,hasMinEdge:RA(y),hasMaxEdge:l4(y),minBound:Xv(v),minOffset:0,maxBound:R1(v),maxOffset:O,centerMinEdge:B,centerMaxEdge:I};return NA(X)})(r,m,i,l,u);return Xv(r)-Xv(o)+f},kM=_.none,EM=_.none,TM=FA(-1),AM=FA(1),_M={"top-left":_.none(),top:_.some(((o,r)=>{wd(o,vC(r))})),"top-right":_.none(),right:_.none(),"bottom-right":_.none(),bottom:_.some(((o,r)=>{wd(o,yC(r))})),"bottom-left":_.none(),left:_.none()};var gb=Object.freeze({__proto__:null,setValueFrom:(o,r,i)=>{let l=b4(o,r,i);return Jv(o,l),l},setToMin:(o,r)=>{let i=A1(r);Jv(o,i)},setToMax:(o,r)=>{let i=Ji(r);Jv(o,i)},findValueOfOffset:b4,getValueFromEvent:o=>Kv(o).map((r=>r.top)),findPositionOfValue:Yc,setPositionFromValue:(o,r,i,l)=>{let u=tf(i),m=Yc(o,l.getSpectrum(o),u,l.getTopEdge(o),l.getBottomEdge(o),i),f=Nr(r.element)/2;q(r.element,"top",m-f+"px")},onLeft:kM,onRight:EM,onUp:TM,onDown:AM,edgeActions:_M});let fb=(o,r)=>{Wt(o,ah(),{value:r})},_C=(o,r)=>({x:o,y:r}),pb=(o,r)=>(i,l,u)=>((m,f,v,y,x)=>{let A=m>0?SC:db,E=f?tf(y).x:A(tf(y).x,T1(y),_1(y),D1(y,x)),O=f?A(tf(y).y,A1(y),Ji(y),D1(y,x)):tf(y).y;return fb(v,_C(E,O)),_.some(E)})(o,r,i,l,u).map(vn),OC=pb(-1,!1),v4=pb(1,!1),OM=pb(-1,!0),DM=pb(1,!0),RM={"top-left":_.some(((o,r)=>{wd(o,Yf(Cd(r),vC(r)))})),top:_.some(((o,r)=>{wd(o,Yf(xC(r),vC(r)))})),"top-right":_.some(((o,r)=>{wd(o,Yf(ca(r),vC(r)))})),right:_.some(((o,r)=>{wd(o,Yf(ca(r),O1(r)))})),"bottom-right":_.some(((o,r)=>{wd(o,Yf(ca(r),yC(r)))})),bottom:_.some(((o,r)=>{wd(o,Yf(xC(r),yC(r)))})),"bottom-left":_.some(((o,r)=>{wd(o,Yf(Cd(r),yC(r)))})),left:_.some(((o,r)=>{wd(o,Yf(Cd(r),O1(r)))}))};var NM=Object.freeze({__proto__:null,setValueFrom:(o,r,i)=>{let l=f4(o,r,i.left),u=b4(o,r,i.top),m=_C(l,u);return fb(o,m),m},setToMin:(o,r)=>{let i=T1(r),l=A1(r);fb(o,_C(i,l))},setToMax:(o,r)=>{let i=_1(r),l=Ji(r);fb(o,_C(i,l))},getValueFromEvent:o=>Kv(o),setPositionFromValue:(o,r,i,l)=>{let u=tf(i),m=p4(o,l.getSpectrum(o),u.x,l.getLeftEdge(o),l.getRightEdge(o),i),f=Yc(o,l.getSpectrum(o),u.y,l.getTopEdge(o),l.getBottomEdge(o),i),v=hs(r.element)/2,y=Nr(r.element)/2;q(r.element,"left",m-v+"px"),q(r.element,"top",f-y+"px")},onLeft:OC,onRight:v4,onUp:OM,onDown:DM,edgeActions:RM});let Qd=Vl({name:"Slider",configFields:[Te("stepSize",1),Te("speedMultiplier",10),Te("onChange",Qe),Te("onChoose",Qe),Te("onInit",Qe),Te("onDragStart",Qe),Te("onDragEnd",Qe),Te("snapToGrid",!1),Te("rounded",!0),no("snapStart"),Ci("model",pa("mode",{x:[Te("minX",0),Te("maxX",100),kr("value",(o=>Rt(o.mode.minX))),Ke("getInitialValue"),Xo("manager",FL)],y:[Te("minY",0),Te("maxY",100),kr("value",(o=>Rt(o.mode.minY))),Ke("getInitialValue"),Xo("manager",gb)],xy:[Te("minX",0),Te("maxX",100),Te("minY",0),Te("maxY",100),kr("value",(o=>Rt({x:o.mode.minX,y:o.mode.minY}))),Ke("getInitialValue"),Xo("manager",NM)]})),gi("sliderBehaviours",[Ft,xt]),kr("mouseIsDown",(()=>Rt(!1)))],partFields:AA,factory:(o,r,i,l)=>{let u=V=>zg(V,o,"thumb"),m=V=>zg(V,o,"spectrum"),f=V=>fs(V,o,"left-edge"),v=V=>fs(V,o,"right-edge"),y=V=>fs(V,o,"top-edge"),x=V=>fs(V,o,"bottom-edge"),A=o.model,E=A.manager,O=(V,U)=>{E.setPositionFromValue(V,U,o,{getLeftEdge:f,getRightEdge:v,getTopEdge:y,getBottomEdge:x,getSpectrum:m})},B=(V,U)=>{A.value.set(U);let J=u(V);O(V,J)},I=V=>{let U=o.mouseIsDown.get();o.mouseIsDown.set(!1),U&&fs(V,o,"thumb").each((J=>{let ee=A.value.get();o.onChoose(V,J,ee)}))},X=(V,U)=>{U.stop(),o.mouseIsDown.set(!0),o.onDragStart(V,u(V))},W=(V,U)=>{U.stop(),o.onDragEnd(V,u(V)),I(V)},K=V=>{fs(V,o,"spectrum").map(Ft.focusIn)};return{uid:o.uid,dom:o.dom,components:r,behaviours:Ti(o.sliderBehaviours,[Ft.config({mode:"special",focusIn:K}),xt.config({store:{mode:"manual",getValue:V=>A.value.get(),setValue:B}}),jc.config({channels:{[e1()]:{onReceive:I}}})]),events:Lo([$e(ah(),((V,U)=>{((J,ee)=>{B(J,ee);let ue=u(J);o.onChange(J,ue,ee),_.some(!0)})(V,U.event.value)})),as(((V,U)=>{let J=A.getInitialValue();A.value.set(J);let ee=u(V);O(V,ee);let ue=m(V);o.onInit(V,ee,ue,A.value.get())})),$e(oc(),X),$e(Bc(),W),$e(gs(),((V,U)=>{K(V),X(V,U)})),$e(Pg(),W)]),apis:{resetToMin:V=>{E.setToMin(V,o)},resetToMax:V=>{E.setToMax(V,o)},setValue:B,refresh:O},domModification:{styles:{position:"relative"}}}},apis:{setValue:(o,r,i)=>{o.setValue(r,i)},resetToMin:(o,r)=>{o.resetToMin(r)},resetToMax:(o,r)=>{o.resetToMax(r)},refresh:(o,r)=>{o.refresh(r)}}}),HA="container",MM=[gi("slotBehaviours",[])],y4=o=>"<alloy.field."+o+">",DC=(o,r)=>{let i=A=>Fh(o),l=(A,E)=>(O,B)=>fs(O,o,B).map((I=>A(I,B))).getOr(E),u=(A,E)=>ds(A.element,"aria-hidden")!=="true",m=l(u,!1),f=l(((A,E)=>{if(u(A)){let O=A.element;q(O,"display","none"),en(O,"aria-hidden","true"),Wt(A,Mm(),{name:E,visible:!1})}})),v=(A=>(E,O)=>{Ot(O,(B=>A(E,B)))})(f),y=l(((A,E)=>{if(!u(A)){let O=A.element;Un(O,"display"),Bs(O,"aria-hidden"),Wt(A,Mm(),{name:E,visible:!0})}})),x={getSlotNames:i,getSlot:(A,E)=>fs(A,o,E),isShowing:m,hideSlot:f,hideAllSlots:A=>v(A,i()),showSlot:y};return{uid:o.uid,dom:o.dom,components:r,behaviours:mS(o.slotBehaviours),apis:x}},BM=_s({getSlotNames:(o,r)=>o.getSlotNames(r),getSlot:(o,r,i)=>o.getSlot(r,i),isShowing:(o,r,i)=>o.isShowing(r,i),hideSlot:(o,r,i)=>o.hideSlot(r,i),hideAllSlots:(o,r)=>o.hideAllSlots(r),showSlot:(o,r,i)=>o.showSlot(r,i)},(o=>vd(o))),Qi={...BM,sketch:o=>{let r=(()=>{let m=[];return{slot:(f,v)=>(m.push(f),T0(HA,y4(f),v)),record:ve(m)}})(),i=o(r),l=r.record(),u=it(l,(m=>Wi({name:m,pname:y4(m)})));return tC(HA,MM,u,DC,i)}},C4=(o,r,i)=>({within:o,extra:r,withinWidth:i}),zA=(o,r,i)=>{let l=L(o,((f,v)=>((y,x)=>{let A=i(y);return _.some({element:y,start:x,finish:x+A,width:A})})(v,f.len).fold(ve(f),(y=>({len:y.finish,list:f.list.concat([y])})))),{len:0,list:[]}).list,u=pn(l,(f=>f.finish<=r)),m=so(u,((f,v)=>f+v.width),0);return{within:u,extra:l.slice(u.length),withinWidth:m}},Xf=o=>it(o,(r=>r.element)),RC=(o,r)=>{let i=it(r,(l=>Pu(l)));Fu.setGroups(o,i)},$A=(o,r,i)=>{let l=r.builtGroups.get();if(l.length===0)return;let u=zg(o,r,"primary"),m=br.getCoupled(o,"overflowGroup");q(u.element,"visibility","hidden");let f=l.concat([m]),v=Mt(f,(x=>Mo(x.element).bind((A=>x.getSystem().getByDom(A).toOptional()))));i([]),RC(u,f);let y=((x,A,E,O)=>{let B=((K,V,U)=>{let J=zA(V,K,U);return J.extra.length===0?_.some(J):_.none()})(x,A,E).getOrThunk((()=>zA(A,x-E(O),E))),I=B.within,X=B.extra,W=B.withinWidth;return X.length===1&&X[0].width<=E(O)?((K,V,U)=>{let J=Xf(K.concat(V));return C4(J,[],U)})(I,X,W):X.length>=1?((K,V,U,J)=>{let ee=Xf(K).concat([U]);return C4(ee,Xf(V),J)})(I,X,O,W):((K,V,U)=>C4(Xf(K),[],U))(I,0,W)})(hs(u.element),r.builtGroups.get(),(x=>Math.ceil(x.element.dom.getBoundingClientRect().width)),m);y.extra.length===0?(Cn.remove(u,m),i([])):(RC(u,y.within),i(y.extra)),Un(u.element,"visibility"),pf(u.element),v.each(un.focus)},NC=ve([gi("splitToolbarBehaviours",[br]),kr("builtGroups",(()=>Rt([])))]),PM=ve([Au(["overflowToggledClass"]),qr("getOverflowBounds"),Ke("lazySink"),kr("overflowGroups",(()=>Rt([]))),Rn("onOpened"),Rn("onClosed")].concat(NC())),St=ve([Wi({factory:Fu,schema:Cl(),name:"primary"}),Hc({schema:Cl(),name:"overflow"}),Hc({name:"overflow-button"}),Hc({name:"overflow-group"})]),N1=ve([Ke("items"),Au(["itemSelector"]),gi("tgroupBehaviours",[Ft])]),LM=ve([E0({name:"items",unit:"item"})]),Qv=Vl({name:"ToolbarGroup",configFields:N1(),partFields:LM(),factory:(o,r,i,l)=>({uid:o.uid,dom:o.dom,components:r,behaviours:Ti(o.tgroupBehaviours,[Ft.config({mode:"flow",selector:o.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}})}),e2=o=>it(o,(r=>Pu(r))),MC=(o,r,i)=>{$A(o,i,(l=>{i.overflowGroups.set(l),r.getOpt(o).each((u=>{oh.setGroups(u,e2(l))}))}))},VA=Vl({name:"SplitFloatingToolbar",configFields:PM(),partFields:St(),factory:(o,r,i,l)=>{let u=go(oh.sketch({fetch:()=>$r((m=>{m(e2(o.overflowGroups.get()))})),layouts:{onLtr:()=>[Kr,Lr],onRtl:()=>[Lr,Kr],onBottomLtr:()=>[Wa,Ta],onBottomRtl:()=>[Ta,Wa]},getBounds:i.getOverflowBounds,lazySink:o.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:o.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(m,f)=>o[f?"onOpened":"onClosed"](m)}));return{uid:o.uid,dom:o.dom,components:r,behaviours:Ti(o.splitToolbarBehaviours,[br.config({others:{overflowGroup:()=>Qv.sketch({...l["overflow-group"](),items:[u.asSpec()]})}})]),apis:{setGroups:(m,f)=>{o.builtGroups.set(it(f,m.getSystem().build)),MC(m,u,o)},refresh:m=>MC(m,u,o),toggle:m=>{u.getOpt(m).each((f=>{oh.toggle(f)}))},toggleWithoutFocusing:m=>{u.getOpt(m).each(oh.toggleWithoutFocusing)},isOpen:m=>u.getOpt(m).map(oh.isOpen).getOr(!1),reposition:m=>{u.getOpt(m).each((f=>{oh.reposition(f)}))},getOverflow:m=>u.getOpt(m).bind(oh.getToolbar)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(o,r,i)=>{o.setGroups(r,i)},refresh:(o,r)=>{o.refresh(r)},reposition:(o,r)=>{o.reposition(r)},toggle:(o,r)=>{o.toggle(r)},toggleWithoutFocusing:(o,r)=>{o.toggle(r)},isOpen:(o,r)=>o.isOpen(r),getOverflow:(o,r)=>o.getOverflow(r)}}),UA=ve([Au(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Rn("onOpened"),Rn("onClosed")].concat(NC())),ZA=ve([Wi({factory:Fu,schema:Cl(),name:"primary"}),Wi({factory:Fu,schema:Cl(),name:"overflow",overrides:o=>({toolbarBehaviours:st([Ul.config({dimension:{property:"height"},closedClass:o.markers.closedClass,openClass:o.markers.openClass,shrinkingClass:o.markers.shrinkingClass,growingClass:o.markers.growingClass,onShrunk:r=>{fs(r,o,"overflow-button").each((i=>{Zn.off(i)})),o.onClosed(r)},onGrown:r=>{o.onOpened(r)},onStartGrow:r=>{fs(r,o,"overflow-button").each(Zn.on)}}),Ft.config({mode:"acyclic",onEscape:r=>(fs(r,o,"overflow-button").each(un.focus),_.some(!0))})])})}),Hc({name:"overflow-button",overrides:o=>({buttonBehaviours:st([Zn.config({toggleClass:o.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),Hc({name:"overflow-group"})]),t2=(o,r,i)=>{fs(o,r,"overflow-button").each((l=>{fs(o,r,"overflow").each((u=>{if(w4(o,r),Ul.hasShrunk(u)){let m=r.onOpened;r.onOpened=f=>{i||Ft.focusIn(u),m(f),r.onOpened=m}}else{let m=r.onClosed;r.onClosed=f=>{i||un.focus(l),m(f),r.onClosed=m}}Ul.toggleGrow(u)}))}))},w4=(o,r)=>{fs(o,r,"overflow").each((i=>{$A(o,r,(l=>{let u=it(l,(m=>Pu(m)));Fu.setGroups(i,u)})),fs(o,r,"overflow-button").each((l=>{Ul.hasGrown(i)&&Zn.on(l)})),Ul.refresh(i)}))},BC=Vl({name:"SplitSlidingToolbar",configFields:UA(),partFields:ZA(),factory:(o,r,i,l)=>{let u="alloy.toolbar.toggle";return{uid:o.uid,dom:o.dom,components:r,behaviours:Ti(o.splitToolbarBehaviours,[br.config({others:{overflowGroup:m=>Qv.sketch({...l["overflow-group"](),items:[la.sketch({...l["overflow-button"](),action:f=>{$n(m,u)}})]})}}),on("toolbar-toggle-events",[$e(u,(m=>{t2(m,o,!1)}))])]),apis:{setGroups:(m,f)=>{((v,y)=>{let x=it(y,v.getSystem().build);o.builtGroups.set(x)})(m,f),w4(m,o)},refresh:m=>w4(m,o),toggle:m=>{t2(m,o,!1)},toggleWithoutFocusing:m=>{t2(m,o,!0)},isOpen:m=>((f,v)=>fs(f,v,"overflow").map(Ul.hasGrown).getOr(!1))(m,o)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(o,r,i)=>{o.setGroups(r,i)},refresh:(o,r)=>{o.refresh(r)},toggle:(o,r)=>{o.toggle(r)},isOpen:(o,r)=>o.isOpen(r)}}),IM=Wc({name:"TabButton",configFields:[Te("uid",void 0),Ke("value"),Sr("dom","dom",Tp((()=>({attributes:{role:"tab",id:we("aria"),"aria-selected":"false"}}))),gl()),no("action"),Te("domModification",{}),gi("tabButtonBehaviours",[un,Ft,xt]),Ke("view")],factory:(o,r)=>({uid:o.uid,dom:o.dom,components:o.components,events:uC(o.action),behaviours:Ti(o.tabButtonBehaviours,[un.config({}),Ft.config({mode:"execution",useSpace:!0,useEnter:!0}),xt.config({store:{mode:"memory",initialValue:o.value}})]),domModification:o.domModification})}),FM=ve([Ke("tabs"),Ke("dom"),Te("clickToDismiss",!1),gi("tabbarBehaviours",[Vn,Ft]),Au(["tabClass","selectedClass"])]),WA=E0({factory:IM,name:"tabs",unit:"tab",overrides:o=>{let r=(l,u)=>{Vn.dehighlight(l,u),Wt(l,ao(),{tabbar:l,button:u})},i=(l,u)=>{Vn.highlight(l,u),Wt(l,Op(),{tabbar:l,button:u})};return{action:l=>{let u=l.getSystem().getByUid(o.uid).getOrDie(),m=Vn.isHighlighted(u,l);(m&&o.clickToDismiss?r:m?Qe:i)(u,l)},domModification:{classes:[o.markers.tabClass]}}}}),HM=ve([WA]),jA=Vl({name:"Tabbar",configFields:FM(),partFields:HM(),factory:(o,r,i,l)=>({uid:o.uid,dom:o.dom,components:r,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Ti(o.tabbarBehaviours,[Vn.config({highlightClass:o.markers.selectedClass,itemClass:o.markers.tabClass,onHighlight:(u,m)=>{en(m.element,"aria-selected","true")},onDehighlight:(u,m)=>{en(m.element,"aria-selected","false")}}),Ft.config({mode:"flow",getInitial:u=>Vn.getHighlighted(u).map((m=>m.element)),selector:"."+o.markers.tabClass,executeOnMove:!0})])})}),x4=Wc({name:"Tabview",configFields:[gi("tabviewBehaviours",[Cn])],factory:(o,r)=>({uid:o.uid,dom:o.dom,behaviours:Ti(o.tabviewBehaviours,[Cn.config({})]),domModification:{attributes:{role:"tabpanel"}}})}),qA=ve([Te("selectFirst",!0),Rn("onChangeTab"),Rn("onDismissTab"),Te("tabs",[]),gi("tabSectionBehaviours",[])]),PC=Wi({factory:jA,schema:[Ke("dom"),ha("markers",[Ke("tabClass"),Ke("selectedClass")])],name:"tabbar",defaults:o=>({tabs:o.tabs})}),LC=Wi({factory:x4,name:"tabview"}),IC=ve([PC,LC]),Xc=Vl({name:"TabSection",configFields:qA(),partFields:IC(),factory:(o,r,i,l)=>{let u=(m,f)=>{fs(m,o,"tabbar").each((v=>{f(v).each(Nf)}))};return{uid:o.uid,dom:o.dom,components:r,behaviours:mS(o.tabSectionBehaviours),events:Lo(Vs([o.selectFirst?[as(((m,f)=>{u(m,Vn.getFirst)}))]:[],[$e(Op(),((m,f)=>{(v=>{let y=xt.getValue(v);fs(v,o,"tabview").each((x=>{kn(o.tabs,(A=>A.value===y)).each((A=>{let E=A.view();Zs(v.element,"id").each((O=>{en(x.element,"aria-labelledby",O)})),Cn.set(x,E),o.onChangeTab(x,v,E)}))}))})(f.event.button)})),$e(ao(),((m,f)=>{let v=f.event.button;o.onDismissTab(m,v)}))]])),apis:{getViewItems:m=>fs(m,o,"tabview").map((f=>Cn.contents(f))).getOr([]),showTab:(m,f)=>{u(m,(v=>{let y=Vn.getCandidates(v);return kn(y,(x=>xt.getValue(x)===f)).filter((x=>!Vn.isHighlighted(v,x)))}))}}}},apis:{getViewItems:(o,r)=>o.getViewItems(r),showTab:(o,r,i)=>{o.showTab(r,i)}}}),n2=(o,r,i)=>{let l=xt.getValue(i);xt.setValue(r,l),zM(r)},GA=(o,r)=>{let i=o.element,l=Bo(i),u=i.dom;ds(i,"type")!=="number"&&r(u,l)},zM=o=>{GA(o,((r,i)=>r.setSelectionRange(i.length,i.length)))},KA=ve("alloy.typeahead.itemexecute"),$M=ve([no("lazySink"),Ke("fetch"),Te("minChars",5),Te("responseTime",1e3),Rn("onOpen"),Te("getHotspot",_.some),Te("getAnchorOverrides",ve({})),Te("layouts",_.none()),Te("eventOrder",{}),Ap("model",{},[Te("getDisplayText",(o=>o.meta!==void 0&&o.meta.text!==void 0?o.meta.text:o.value)),Te("selectsOver",!0),Te("populateFromBrowse",!0)]),Rn("onSetValue"),bl("onExecute"),Rn("onItemExecute"),Te("inputClasses",[]),Te("inputAttributes",{}),Te("inputStyles",{}),Te("matchWidth",!0),Te("useMinWidth",!1),Te("dismissOnBlur",!0),Au(["openClass"]),no("initialData"),no("listRole"),gi("typeaheadBehaviours",[un,xt,PS,Ft,Zn,br]),kr("lazyTypeaheadComp",(()=>Rt(_.none))),kr("previewing",(()=>Rt(!0)))].concat(Gv()).concat(GS())),VM=ve([Hc({schema:[Bm()],name:"menu",overrides:o=>({fakeFocus:!0,onHighlightItem:(r,i,l)=>{o.previewing.get()?o.lazyTypeaheadComp.get().each((u=>{((m,f,v)=>{if(m.selectsOver){let y=xt.getValue(f),x=m.getDisplayText(y),A=xt.getValue(v);return m.getDisplayText(A).indexOf(x)===0?_.some((()=>{n2(0,f,v),((E,O)=>{GA(E,((B,I)=>B.setSelectionRange(O,I.length)))})(f,x.length)})):_.none()}return _.none()})(o.model,u,l).fold((()=>{o.model.selectsOver?(Vn.dehighlight(i,l),o.previewing.set(!0)):o.previewing.set(!1)}),(m=>{m(),o.previewing.set(!1)}))})):o.lazyTypeaheadComp.get().each((u=>{o.model.populateFromBrowse&&n2(o.model,u,l),Zs(l.element,"id").each((m=>en(u.element,"aria-activedescendant",m)))}))},onExecute:(r,i)=>o.lazyTypeaheadComp.get().map((l=>(Wt(l,KA(),{item:i}),!0))),onHover:(r,i)=>{o.previewing.set(!1),o.lazyTypeaheadComp.get().each((l=>{o.model.populateFromBrowse&&n2(o.model,l,i)}))}})})]),S4=Vl({name:"Typeahead",configFields:$M(),partFields:VM(),factory:(o,r,i,l)=>{let u=(E,O,B)=>{o.previewing.set(!1);let I=br.getCoupled(E,"sandbox");if(uo.isOpen(I))io.getCurrent(I).each((X=>{Vn.getHighlighted(X).fold((()=>{B(X)}),(()=>{Yh(I,X.element,"keydown",O)}))}));else{let X=W=>{io.getCurrent(W).each(B)};qv(o,f(E),E,I,l,X,ja.HighlightMenuAndItem).get(Qe)}},m=pC(o),f=E=>O=>O.map((B=>{let I=Os(B.menus),X=vo(I,(W=>pn(W.items,(K=>K.type==="item"))));return xt.getState(E).update(it(X,(W=>W.data))),B})),v=E=>io.getCurrent(E),y="typeaheadevents",x=[un.config({}),xt.config({onSetValue:o.onSetValue,store:{mode:"dataset",getDataKey:E=>Bo(E.element),getFallbackEntry:E=>({value:E,meta:{}}),setValue:(E,O)=>{Hi(E.element,o.model.getDisplayText(O))},...o.initialData.map((E=>wi("initialValue",E))).getOr({})}}),PS.config({stream:{mode:"throttle",delay:o.responseTime,stopEvent:!1},onStream:(E,O)=>{let B=br.getCoupled(E,"sandbox");if(un.isFocused(E)&&Bo(E.element).length>=o.minChars){let I=v(B).bind((W=>Vn.getHighlighted(W).map(xt.getValue)));o.previewing.set(!0);let X=W=>{v(B).each((K=>{I.fold((()=>{o.model.selectsOver&&Vn.highlightFirst(K)}),(V=>{Vn.highlightBy(K,(U=>xt.getValue(U).value===V.value)),Vn.getHighlighted(K).orThunk((()=>(Vn.highlightFirst(K),_.none())))}))}))};qv(o,f(E),E,B,l,X,ja.HighlightJustMenu).get(Qe)}},cancelEvent:Es()}),Ft.config({mode:"special",onDown:(E,O)=>(u(E,O,Vn.highlightFirst),_.some(!0)),onEscape:E=>{let O=br.getCoupled(E,"sandbox");return uo.isOpen(O)?(uo.close(O),_.some(!0)):_.none()},onUp:(E,O)=>(u(E,O,Vn.highlightLast),_.some(!0)),onEnter:E=>{let O=br.getCoupled(E,"sandbox"),B=uo.isOpen(O);if(B&&!o.previewing.get())return v(O).bind((I=>Vn.getHighlighted(I))).map((I=>(Wt(E,KA(),{item:I}),!0)));{let I=xt.getValue(E);return $n(E,Es()),o.onExecute(O,E,I),B&&uo.close(O),_.some(!0)}}}),Zn.config({toggleClass:o.markers.openClass,aria:{mode:"expanded"}}),br.config({others:{sandbox:E=>qS(o,E,{onOpen:()=>Zn.on(E),onClose:()=>{o.lazyTypeaheadComp.get().each((O=>Bs(O.element,"aria-activedescendant"))),Zn.off(E)}})}}),on(y,[as((E=>{o.lazyTypeaheadComp.set(_.some(E))})),Ru((E=>{o.lazyTypeaheadComp.set(_.none())})),Wd((E=>{let O=Qe;gA(o,f(E),E,l,O,ja.HighlightMenuAndItem).get(Qe)})),$e(KA(),((E,O)=>{let B=br.getCoupled(E,"sandbox");n2(o.model,E,O.event.item),$n(E,Es()),o.onItemExecute(E,B,O.event.item,xt.getValue(E)),uo.close(B),zM(E)}))].concat(o.dismissOnBlur?[$e(ie(),(E=>{let O=br.getCoupled(E,"sandbox");Mo(O.element).isNone()&&uo.close(O)}))]:[]))],A={[hl()]:[xt.name(),PS.name(),y],...o.eventOrder};return{uid:o.uid,dom:hC(Xn(o,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...m,...Ti(o.typeaheadBehaviours,x)},eventOrder:A}}});var Hu,o2,UM=tinymce.util.Tools.resolve("tinymce.ThemeManager"),s2=tinymce.util.Tools.resolve("tinymce.util.Delay"),r2=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ZM=tinymce.util.Tools.resolve("tinymce.EditorManager"),M1=tinymce.util.Tools.resolve("tinymce.Env");(function(o){o.default="wrap",o.floating="floating",o.sliding="sliding",o.scrolling="scrolling"})(Hu||(Hu={})),(function(o){o.auto="auto",o.top="top",o.bottom="bottom"})(o2||(o2={}));let Uo=o=>r=>r.options.get(o),a2=o=>r=>_.from(o(r)),k4=o=>{let r=M1.deviceType.isPhone(),i=M1.deviceType.isTablet()||r,l=o.options.register,u=f=>Wn(f)||f===!1,m=f=>Wn(f)||Yn(f);l("skin",{processor:f=>Wn(f)||f===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:m,default:Math.max(o.getElement().offsetHeight,400)}),l("width",{processor:m,default:r2.DOM.getStyle(o.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:f=>Wn(f)||Ar(f),default:!r}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:f=>Ar(f)||Wn(f)||lr(f)?{value:f,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),_t(9,(f=>{l("toolbar"+(f+1),{processor:"string"})})),l("toolbar_mode",{processor:"string",default:i?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:o2.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:o.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:u,default:"#top"}),l("anchor_bottom",{processor:u,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:f=>f==="both"||Ar(f),default:!M1.deviceType.isTouch()}),l("sidebar_show",{processor:"string"}),l("help_accessibility",{processor:"boolean",default:o.hasPlugin("help")}),l("default_font_stack",{processor:"string[]",default:[]})},YA=Uo("readonly"),hb=Uo("disabled"),FC=Uo("height"),HC=Uo("width"),zC=a2(Uo("min_width")),E4=a2(Uo("min_height")),$C=a2(Uo("max_width")),T4=a2(Uo("max_height")),XA=a2(Uo("style_formats")),JA=Uo("style_formats_merge"),bb=Uo("style_formats_autohide"),A4=Uo("content_langs"),_4=Uo("removed_menuitems"),lh=Uo("toolbar_mode"),O4=Uo("toolbar_groups"),VC=Uo("toolbar_location"),WM=Uo("fixed_toolbar_container"),jM=Uo("fixed_toolbar_container_target"),QA=Uo("toolbar_persist"),UC=Uo("toolbar_sticky_offset"),e_=Uo("menubar"),B1=Uo("toolbar"),t_=Uo("file_picker_callback"),D4=Uo("file_picker_validator_handler"),Ai=Uo("font_size_input_default_unit"),n_=Uo("file_picker_types"),R4=Uo("typeahead_urls"),N4=Uo("anchor_top"),o_=Uo("anchor_bottom"),M4=Uo("draggable_modal"),B4=Uo("statusbar"),s_=Uo("elementpath"),P4=Uo("branding"),r_=Uo("resize"),a_=Uo("paste_as_text"),L4=Uo("sidebar_show"),i_=Uo("promotion"),l_=Uo("help_accessibility"),I4=Uo("default_font_stack"),F4=Uo("skin"),ZC=o=>o.options.get("skin")===!1,WC=o=>o.options.get("menubar")!==!1,c_=o=>{let r=o.options.get("skin_url");if(ZC(o))return r;if(r)return o.documentBaseURI.toAbsolute(r);{let i=o.options.get("skin");return ZM.baseURL+"/skins/ui/"+i}},u_=o=>o.options.get("line_height_formats").split(" "),jC=o=>{let r=B1(o),i=Wn(r),l=lr(r)&&r.length>0;return!vb(o)&&(l||i||r===!0)},qC=o=>{let r=_t(9,(l=>o.options.get("toolbar"+(l+1)))),i=pn(r,Wn);return Rs(i.length>0,i)},vb=o=>qC(o).fold((()=>{let r=B1(o);return Ss(r,Wn)&&r.length>0}),vn),of=o=>VC(o)===o2.bottom,H4=o=>{if(!o.inline)return _.none();let r=WM(o)??"";if(r.length>0)return xo(Ys(),r);let i=jM(o);return $t(i)?_.some(bt(i)):_.none()},P1=o=>o.inline&&H4(o).isSome(),GC=o=>H4(o).getOrThunk((()=>Ns(yn(bt(o.getElement()))))),z4=o=>o.inline&&!WC(o)&&!jC(o)&&!vb(o),Xm=o=>(o.options.get("toolbar_sticky")||o.inline)&&!P1(o)&&!z4(o),ch=o=>!P1(o)&&o.options.get("ui_mode")==="split",d_=o=>{let r=o.options.get("menu");return _s(r,(i=>({...i,items:i.items})))};var m_=Object.freeze({__proto__:null,get ToolbarMode(){return Hu},get ToolbarLocation(){return o2},register:k4,getSkinUrl:c_,getSkinUrlOption:o=>_.from(o.options.get("skin_url")),isReadOnly:YA,isDisabled:hb,getSkin:F4,isSkinDisabled:ZC,getHeightOption:FC,getWidthOption:HC,getMinWidthOption:zC,getMinHeightOption:E4,getMaxWidthOption:$C,getMaxHeightOption:T4,getUserStyleFormats:XA,shouldMergeStyleFormats:JA,shouldAutoHideStyleFormats:bb,getLineHeightFormats:u_,getContentLanguages:A4,getRemovedMenuItems:_4,isMenubarEnabled:WC,isMultipleToolbars:vb,isToolbarEnabled:jC,isToolbarPersist:QA,getMultipleToolbarsOption:qC,getUiContainer:GC,useFixedContainer:P1,isSplitUiMode:ch,getToolbarMode:lh,isDraggableModal:M4,isDistractionFree:z4,isStickyToolbar:Xm,getStickyToolbarOffset:UC,getToolbarLocation:VC,isToolbarLocationBottom:of,getToolbarGroups:O4,getMenus:d_,getMenubar:e_,getToolbar:B1,getFilePickerCallback:t_,getFilePickerTypes:n_,useTypeaheadUrls:R4,getAnchorTop:N4,getAnchorBottom:o_,getFilePickerValidatorHandler:D4,getFontSizeInputDefaultUnit:Ai,useStatusBar:B4,useElementPath:s_,promotionEnabled:i_,useBranding:P4,getResize:r_,getPasteAsText:a_,getSidebarShow:L4,useHelpAccessibility:l_,getDefaultFontStack:I4});let qM=["visible","hidden","clip"],g_=o=>Gu(o).length>0&&!Ln(qM,o),f_=o=>{if(Pi(o)){let r=ga(o,"overflow-x"),i=ga(o,"overflow-y");return g_(r)||g_(i)}return!1},$4=o=>o.plugins.fullscreen&&o.plugins.fullscreen.isFullscreen(),sf=(o,r)=>ch(o)?((i,l)=>{let u=kg(l,f_),m=u.length===0?Go(l).map(ma).map((f=>kg(f,f_))).getOr([]):u;return Lt(m).map((f=>({element:f,others:m.slice(1),isFullscreen:()=>$4(i)})))})(o,r):_.none(),Jf=o=>{let r=[...it(o.others,Br),Wr()];return o.isFullscreen()?Wr():((i,l)=>L(l,((u,m)=>ml(u,m)),i))(Br(o.element),r)},{entries:p_,setPrototypeOf:Qf,isFrozen:h_,getPrototypeOf:b_,getOwnPropertyDescriptor:GM}=Object,{freeze:Jc,seal:uc,create:yb}=Object,{apply:KC,construct:i2}=typeof Reflect<"u"&&Reflect;Jc||(Jc=function(o){return o}),uc||(uc=function(o){return o}),KC||(KC=function(o,r,i){return o.apply(r,i)}),i2||(i2=function(o,r){return new o(...r)});let Jm=Qc(Array.prototype.forEach),uh=Qc(Array.prototype.lastIndexOf),v_=Qc(Array.prototype.pop),l2=Qc(Array.prototype.push),y_=Qc(Array.prototype.splice),em=Qc(String.prototype.toLowerCase),c2=Qc(String.prototype.toString),C_=Qc(String.prototype.match),Cb=Qc(String.prototype.replace),w_=Qc(String.prototype.indexOf),x_=Qc(String.prototype.trim),Sd=Qc(Object.prototype.hasOwnProperty),dc=Qc(RegExp.prototype.test),u2=(S_=TypeError,function(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return i2(S_,r)});var S_;function Qc(o){return function(r){r instanceof RegExp&&(r.lastIndex=0);for(var i=arguments.length,l=new Array(i>1?i-1:0),u=1;u<i;u++)l[u-1]=arguments[u];return KC(o,r,l)}}function Jo(o,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:em;Qf&&Qf(o,null);let l=r.length;for(;l--;){let u=r[l];if(typeof u=="string"){let m=i(u);m!==u&&(h_(r)||(r[l]=m),u=m)}o[u]=!0}return o}function V4(o){for(let r=0;r<o.length;r++)Sd(o,r)||(o[r]=null);return o}function tm(o){let r=yb(null);for(let[i,l]of p_(o))Sd(o,i)&&(Array.isArray(l)?r[i]=V4(l):l&&typeof l=="object"&&l.constructor===Object?r[i]=tm(l):r[i]=l);return r}function wb(o,r){for(;o!==null;){let i=GM(o,r);if(i){if(i.get)return Qc(i.get);if(typeof i.value=="function")return Qc(i.value)}o=b_(o)}return function(){return null}}let k_=Jc(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),YC=Jc(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),XC=Jc(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),E_=Jc(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),JC=Jc(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),KM=Jc(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),QC=Jc(["#text"]),T_=Jc(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),U4=Jc(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),A_=Jc(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ew=Jc(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),__=uc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),YM=uc(/<%[\w\W]*|[\w\W]*%>/gm),XM=uc(/\$\{[\w\W]*/gm),O_=uc(/^data-[\-\w.\u00B7-\uFFFF]+$/),d2=uc(/^aria-[\-\w]+$/),D_=uc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),m2=uc(/^(?:\w+script|data):/i),Z4=uc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),W4=uc(/^html$/i),R_=uc(/^[a-z][.\w]*(-[.\w]+)+$/i);var N_=Object.freeze({__proto__:null,ARIA_ATTR:d2,ATTR_WHITESPACE:Z4,CUSTOM_ELEMENT:R_,DATA_ATTR:O_,DOCTYPE_NAME:W4,ERB_EXPR:YM,IS_ALLOWED_URI:D_,IS_SCRIPT_OR_DATA:m2,MUSTACHE_EXPR:__,TMPLIT_EXPR:XM});let JM=function(){return typeof window>"u"?null:window};var M_=(function o(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:JM(),i=ke=>o(ke);if(i.version="3.2.6",i.removed=[],!r||!r.document||r.document.nodeType!==9||!r.Element)return i.isSupported=!1,i;let{document:l}=r,u=l,m=u.currentScript,{DocumentFragment:f,HTMLTemplateElement:v,Node:y,Element:x,NodeFilter:A,NamedNodeMap:E=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:O,DOMParser:B,trustedTypes:I}=r,X=x.prototype,W=wb(X,"cloneNode"),K=wb(X,"remove"),V=wb(X,"nextSibling"),U=wb(X,"childNodes"),J=wb(X,"parentNode");if(typeof v=="function"){let ke=l.createElement("template");ke.content&&ke.content.ownerDocument&&(l=ke.content.ownerDocument)}let ee,ue="",{implementation:ce,createNodeIterator:ge,createDocumentFragment:Re,getElementsByTagName:Ne}=l,{importNode:Ae}=u,Le={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};i.isSupported=typeof p_=="function"&&typeof J=="function"&&ce&&ce.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:Ye,ERB_EXPR:Dt,TMPLIT_EXPR:nn,DATA_ATTR:sn,ARIA_ATTR:Fn,IS_SCRIPT_OR_DATA:fo,ATTR_WHITESPACE:Zo,CUSTOM_ELEMENT:tn}=N_,{IS_ALLOWED_URI:Wo}=N_,cn=null,vs=Jo({},[...k_,...YC,...XC,...JC,...QC]),po=null,ya=Jo({},[...T_,...U4,...A_,...ew]),Io=Object.seal(yb(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),gc=null,tl=null,ql=!0,dp=!0,jb=!1,Cx=!0,ig=!1,r0=!0,Gl=!1,qb=!1,Gb=!1,mp=!1,Kb=!1,a0=!1,sy=!0,ry=!1,Sh=!0,gp=!1,jn={},ou=null,fc=Jo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ZR=null,cE=Jo({},["audio","video","img","source","image","track"]),uE=null,i0=Jo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),wx="http://www.w3.org/1998/Math/MathML",l0="http://www.w3.org/2000/svg",lg="http://www.w3.org/1999/xhtml",Yb=lg,dE=!1,mE=null,gE=Jo({},[wx,l0,lg],c2),xx=Jo({},["mi","mo","mn","ms","mtext"]),Sx=Jo({},["annotation-xml"]),gP=Jo({},["title","style","font","a","script"]),Xb=null,fE=["application/xhtml+xml","text/html"],xl=null,Jb=null,fP=l.createElement("form"),pE=function(ke){return ke instanceof RegExp||ke instanceof Function},hE=function(){let ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!Jb||Jb!==ke){if(ke&&typeof ke=="object"||(ke={}),ke=tm(ke),Xb=fE.indexOf(ke.PARSER_MEDIA_TYPE)===-1?"text/html":ke.PARSER_MEDIA_TYPE,xl=Xb==="application/xhtml+xml"?c2:em,cn=Sd(ke,"ALLOWED_TAGS")?Jo({},ke.ALLOWED_TAGS,xl):vs,po=Sd(ke,"ALLOWED_ATTR")?Jo({},ke.ALLOWED_ATTR,xl):ya,mE=Sd(ke,"ALLOWED_NAMESPACES")?Jo({},ke.ALLOWED_NAMESPACES,c2):gE,uE=Sd(ke,"ADD_URI_SAFE_ATTR")?Jo(tm(i0),ke.ADD_URI_SAFE_ATTR,xl):i0,ZR=Sd(ke,"ADD_DATA_URI_TAGS")?Jo(tm(cE),ke.ADD_DATA_URI_TAGS,xl):cE,ou=Sd(ke,"FORBID_CONTENTS")?Jo({},ke.FORBID_CONTENTS,xl):fc,gc=Sd(ke,"FORBID_TAGS")?Jo({},ke.FORBID_TAGS,xl):tm({}),tl=Sd(ke,"FORBID_ATTR")?Jo({},ke.FORBID_ATTR,xl):tm({}),jn=!!Sd(ke,"USE_PROFILES")&&ke.USE_PROFILES,ql=ke.ALLOW_ARIA_ATTR!==!1,dp=ke.ALLOW_DATA_ATTR!==!1,jb=ke.ALLOW_UNKNOWN_PROTOCOLS||!1,Cx=ke.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ig=ke.SAFE_FOR_TEMPLATES||!1,r0=ke.SAFE_FOR_XML!==!1,Gl=ke.WHOLE_DOCUMENT||!1,mp=ke.RETURN_DOM||!1,Kb=ke.RETURN_DOM_FRAGMENT||!1,a0=ke.RETURN_TRUSTED_TYPE||!1,Gb=ke.FORCE_BODY||!1,sy=ke.SANITIZE_DOM!==!1,ry=ke.SANITIZE_NAMED_PROPS||!1,Sh=ke.KEEP_CONTENT!==!1,gp=ke.IN_PLACE||!1,Wo=ke.ALLOWED_URI_REGEXP||D_,Yb=ke.NAMESPACE||lg,xx=ke.MATHML_TEXT_INTEGRATION_POINTS||xx,Sx=ke.HTML_INTEGRATION_POINTS||Sx,Io=ke.CUSTOM_ELEMENT_HANDLING||{},ke.CUSTOM_ELEMENT_HANDLING&&pE(ke.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Io.tagNameCheck=ke.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ke.CUSTOM_ELEMENT_HANDLING&&pE(ke.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Io.attributeNameCheck=ke.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ke.CUSTOM_ELEMENT_HANDLING&&typeof ke.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Io.allowCustomizedBuiltInElements=ke.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ig&&(dp=!1),Kb&&(mp=!0),jn&&(cn=Jo({},QC),po=[],jn.html===!0&&(Jo(cn,k_),Jo(po,T_)),jn.svg===!0&&(Jo(cn,YC),Jo(po,U4),Jo(po,ew)),jn.svgFilters===!0&&(Jo(cn,XC),Jo(po,U4),Jo(po,ew)),jn.mathMl===!0&&(Jo(cn,JC),Jo(po,A_),Jo(po,ew))),ke.ADD_TAGS&&(cn===vs&&(cn=tm(cn)),Jo(cn,ke.ADD_TAGS,xl)),ke.ADD_ATTR&&(po===ya&&(po=tm(po)),Jo(po,ke.ADD_ATTR,xl)),ke.ADD_URI_SAFE_ATTR&&Jo(uE,ke.ADD_URI_SAFE_ATTR,xl),ke.FORBID_CONTENTS&&(ou===fc&&(ou=tm(ou)),Jo(ou,ke.FORBID_CONTENTS,xl)),Sh&&(cn["#text"]=!0),Gl&&Jo(cn,["html","head","body"]),cn.table&&(Jo(cn,["tbody"]),delete gc.tbody),ke.TRUSTED_TYPES_POLICY){if(typeof ke.TRUSTED_TYPES_POLICY.createHTML!="function")throw u2('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ke.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw u2('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ee=ke.TRUSTED_TYPES_POLICY,ue=ee.createHTML("")}else ee===void 0&&(ee=(function(Pn,dn){if(typeof Pn!="object"||typeof Pn.createPolicy!="function")return null;let Ts=null,tr="data-tt-policy-suffix";dn&&dn.hasAttribute(tr)&&(Ts=dn.getAttribute(tr));let jo="dompurify"+(Ts?"#"+Ts:"");try{return Pn.createPolicy(jo,{createHTML:nl=>nl,createScriptURL:nl=>nl})}catch{return console.warn("TrustedTypes policy "+jo+" could not be created."),null}})(I,m)),ee!==null&&typeof ue=="string"&&(ue=ee.createHTML(""));Jc&&Jc(ke),Jb=ke}},kx=Jo({},[...YC,...XC,...E_]),bE=Jo({},[...JC,...KM]),cg=function(ke){l2(i.removed,{element:ke});try{J(ke).removeChild(ke)}catch{K(ke)}},Qb=function(ke,Pn){try{l2(i.removed,{attribute:Pn.getAttributeNode(ke),from:Pn})}catch{l2(i.removed,{attribute:null,from:Pn})}if(Pn.removeAttribute(ke),ke==="is")if(mp||Kb)try{cg(Pn)}catch{}else try{Pn.setAttribute(ke,"")}catch{}},WR=function(ke){let Pn=null,dn=null;if(Gb)ke="<remove></remove>"+ke;else{let jo=C_(ke,/^[\r\n\t ]+/);dn=jo&&jo[0]}Xb==="application/xhtml+xml"&&Yb===lg&&(ke='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ke+"</body></html>");let Ts=ee?ee.createHTML(ke):ke;if(Yb===lg)try{Pn=new B().parseFromString(Ts,Xb)}catch{}if(!Pn||!Pn.documentElement){Pn=ce.createDocument(Yb,"template",null);try{Pn.documentElement.innerHTML=dE?ue:Ts}catch{}}let tr=Pn.body||Pn.documentElement;return ke&&dn&&tr.insertBefore(l.createTextNode(dn),tr.childNodes[0]||null),Yb===lg?Ne.call(Pn,Gl?"html":"body")[0]:Gl?Pn.documentElement:tr},vE=function(ke){return ge.call(ke.ownerDocument||ke,ke,A.SHOW_ELEMENT|A.SHOW_COMMENT|A.SHOW_TEXT|A.SHOW_PROCESSING_INSTRUCTION|A.SHOW_CDATA_SECTION,null)},ay=function(ke){return ke instanceof O&&(typeof ke.nodeName!="string"||typeof ke.textContent!="string"||typeof ke.removeChild!="function"||!(ke.attributes instanceof E)||typeof ke.removeAttribute!="function"||typeof ke.setAttribute!="function"||typeof ke.namespaceURI!="string"||typeof ke.insertBefore!="function"||typeof ke.hasChildNodes!="function")},jR=function(ke){return typeof y=="function"&&ke instanceof y};function fp(ke,Pn,dn){Jm(ke,(Ts=>{Ts.call(i,Pn,dn,Jb)}))}let qR=function(ke){let Pn=null;if(fp(Le.beforeSanitizeElements,ke,null),ay(ke))return cg(ke),!0;let dn=xl(ke.nodeName);if(fp(Le.uponSanitizeElement,ke,{tagName:dn,allowedTags:cn}),r0&&ke.hasChildNodes()&&!jR(ke.firstElementChild)&&dc(/<[/\w!]/g,ke.innerHTML)&&dc(/<[/\w!]/g,ke.textContent)||ke.nodeType===7||r0&&ke.nodeType===8&&dc(/<[/\w]/g,ke.data))return cg(ke),!0;if(!cn[dn]||gc[dn]){if(!gc[dn]&&KR(dn)&&(Io.tagNameCheck instanceof RegExp&&dc(Io.tagNameCheck,dn)||Io.tagNameCheck instanceof Function&&Io.tagNameCheck(dn)))return!1;if(Sh&&!ou[dn]){let Ts=J(ke)||ke.parentNode,tr=U(ke)||ke.childNodes;if(tr&&Ts)for(let jo=tr.length-1;jo>=0;--jo){let nl=W(tr[jo],!0);nl.__removalCount=(ke.__removalCount||0)+1,Ts.insertBefore(nl,V(ke))}}return cg(ke),!0}return ke instanceof x&&!(function(Ts){let tr=J(Ts);tr&&tr.tagName||(tr={namespaceURI:Yb,tagName:"template"});let jo=em(Ts.tagName),nl=em(tr.tagName);return!!mE[Ts.namespaceURI]&&(Ts.namespaceURI===l0?tr.namespaceURI===lg?jo==="svg":tr.namespaceURI===wx?jo==="svg"&&(nl==="annotation-xml"||xx[nl]):!!kx[jo]:Ts.namespaceURI===wx?tr.namespaceURI===lg?jo==="math":tr.namespaceURI===l0?jo==="math"&&Sx[nl]:!!bE[jo]:Ts.namespaceURI===lg?!(tr.namespaceURI===l0&&!Sx[nl])&&!(tr.namespaceURI===wx&&!xx[nl])&&!bE[jo]&&(gP[jo]||!kx[jo]):!(Xb!=="application/xhtml+xml"||!mE[Ts.namespaceURI]))})(ke)?(cg(ke),!0):dn!=="noscript"&&dn!=="noembed"&&dn!=="noframes"||!dc(/<\/no(script|embed|frames)/i,ke.innerHTML)?(ig&&ke.nodeType===3&&(Pn=ke.textContent,Jm([Ye,Dt,nn],(Ts=>{Pn=Cb(Pn,Ts," ")})),ke.textContent!==Pn&&(l2(i.removed,{element:ke.cloneNode()}),ke.textContent=Pn)),fp(Le.afterSanitizeElements,ke,null),!1):(cg(ke),!0)},GR=function(ke,Pn,dn){if(sy&&(Pn==="id"||Pn==="name")&&(dn in l||dn in fP))return!1;if(!(dp&&!tl[Pn]&&dc(sn,Pn))){if(!(ql&&dc(Fn,Pn))){if(!po[Pn]||tl[Pn]){if(!(KR(ke)&&(Io.tagNameCheck instanceof RegExp&&dc(Io.tagNameCheck,ke)||Io.tagNameCheck instanceof Function&&Io.tagNameCheck(ke))&&(Io.attributeNameCheck instanceof RegExp&&dc(Io.attributeNameCheck,Pn)||Io.attributeNameCheck instanceof Function&&Io.attributeNameCheck(Pn))||Pn==="is"&&Io.allowCustomizedBuiltInElements&&(Io.tagNameCheck instanceof RegExp&&dc(Io.tagNameCheck,dn)||Io.tagNameCheck instanceof Function&&Io.tagNameCheck(dn))))return!1}else if(!uE[Pn]){if(!dc(Wo,Cb(dn,Zo,""))){if((Pn!=="src"&&Pn!=="xlink:href"&&Pn!=="href"||ke==="script"||w_(dn,"data:")!==0||!ZR[ke])&&!(jb&&!dc(fo,Cb(dn,Zo,"")))){if(dn)return!1}}}}}return!0},KR=function(ke){return ke!=="annotation-xml"&&C_(ke,tn)},YR=function(ke){fp(Le.beforeSanitizeAttributes,ke,null);let{attributes:Pn}=ke;if(!Pn||ay(ke))return;let dn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:po,forceKeepAttr:void 0},Ts=Pn.length;for(;Ts--;){let tr=Pn[Ts],{name:jo,namespaceURI:nl,value:kh}=tr,ug=xl(jo),yE=kh,pc=jo==="value"?yE:x_(yE);if(dn.attrName=ug,dn.attrValue=pc,dn.keepAttr=!0,dn.forceKeepAttr=void 0,fp(Le.uponSanitizeAttribute,ke,dn),pc=dn.attrValue,!ry||ug!=="id"&&ug!=="name"||(Qb(jo,ke),pc="user-content-"+pc),r0&&dc(/((--!?|])>)|<\/(style|title)/i,pc)){Qb(jo,ke);continue}if(dn.forceKeepAttr)continue;if(!dn.keepAttr){Qb(jo,ke);continue}if(!Cx&&dc(/\/>/i,pc)){Qb(jo,ke);continue}ig&&Jm([Ye,Dt,nn],(JR=>{pc=Cb(pc,JR," ")}));let XR=xl(ke.nodeName);if(GR(XR,ug,pc)){if(ee&&typeof I=="object"&&typeof I.getAttributeType=="function"&&!nl)switch(I.getAttributeType(XR,ug)){case"TrustedHTML":pc=ee.createHTML(pc);break;case"TrustedScriptURL":pc=ee.createScriptURL(pc)}if(pc!==yE)try{nl?ke.setAttributeNS(nl,jo,pc):ke.setAttribute(jo,pc),ay(ke)?cg(ke):v_(i.removed)}catch{Qb(jo,ke)}}else Qb(jo,ke)}fp(Le.afterSanitizeAttributes,ke,null)},pP=function ke(Pn){let dn=null,Ts=vE(Pn);for(fp(Le.beforeSanitizeShadowDOM,Pn,null);dn=Ts.nextNode();)fp(Le.uponSanitizeShadowNode,dn,null),qR(dn),YR(dn),dn.content instanceof f&&ke(dn.content);fp(Le.afterSanitizeShadowDOM,Pn,null)};return i.sanitize=function(ke){let Pn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dn=null,Ts=null,tr=null,jo=null;if(dE=!ke,dE&&(ke="<!-->"),typeof ke!="string"&&!jR(ke)){if(typeof ke.toString!="function")throw u2("toString is not a function");if(typeof(ke=ke.toString())!="string")throw u2("dirty is not a string, aborting")}if(!i.isSupported)return ke;if(qb||hE(Pn),i.removed=[],typeof ke=="string"&&(gp=!1),gp){if(ke.nodeName){let ug=xl(ke.nodeName);if(!cn[ug]||gc[ug])throw u2("root node is forbidden and cannot be sanitized in-place")}}else if(ke instanceof y)dn=WR("<!---->"),Ts=dn.ownerDocument.importNode(ke,!0),Ts.nodeType===1&&Ts.nodeName==="BODY"||Ts.nodeName==="HTML"?dn=Ts:dn.appendChild(Ts);else{if(!mp&&!ig&&!Gl&&ke.indexOf("<")===-1)return ee&&a0?ee.createHTML(ke):ke;if(dn=WR(ke),!dn)return mp?null:a0?ue:""}dn&&Gb&&cg(dn.firstChild);let nl=vE(gp?ke:dn);for(;tr=nl.nextNode();)qR(tr),YR(tr),tr.content instanceof f&&pP(tr.content);if(gp)return ke;if(mp){if(Kb)for(jo=Re.call(dn.ownerDocument);dn.firstChild;)jo.appendChild(dn.firstChild);else jo=dn;return(po.shadowroot||po.shadowrootmode)&&(jo=Ae.call(u,jo,!0)),jo}let kh=Gl?dn.outerHTML:dn.innerHTML;return Gl&&cn["!doctype"]&&dn.ownerDocument&&dn.ownerDocument.doctype&&dn.ownerDocument.doctype.name&&dc(W4,dn.ownerDocument.doctype.name)&&(kh="<!DOCTYPE "+dn.ownerDocument.doctype.name+`>
`+kh),ig&&Jm([Ye,Dt,nn],(ug=>{kh=Cb(kh,ug," ")})),ee&&a0?ee.createHTML(kh):kh},i.setConfig=function(){hE(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),qb=!0},i.clearConfig=function(){Jb=null,qb=!1},i.isValidAttribute=function(ke,Pn,dn){Jb||hE({});let Ts=xl(ke),tr=xl(Pn);return GR(Ts,tr,dn)},i.addHook=function(ke,Pn){typeof Pn=="function"&&l2(Le[ke],Pn)},i.removeHook=function(ke,Pn){if(Pn!==void 0){let dn=uh(Le[ke],Pn);return dn===-1?void 0:y_(Le[ke],dn,1)[0]}return v_(Le[ke])},i.removeHooks=function(ke){Le[ke]=[]},i.removeAllHooks=function(){Le={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},i})();let B_=o=>M_().sanitize(o);var _i=tinymce.util.Tools.resolve("tinymce.util.I18n");let QM={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-disc":!0,"list-bull-default":!0,"list-bull-square":!0},P_="temporary-placeholder",tw=o=>()=>qt(o,P_).getOr("!not found!"),xb=(o,r)=>{let i=o.toLowerCase();if(_i.isRtl()){let l=((u,m)=>bc(u,m)?u:((f,v)=>f+v)(u,m))(i,"-rtl");return Sn(r,l)?l:i}return i},nw=(o,r)=>qt(r,xb(o,r)),ow=(o,r)=>{let i=r();return nw(o,i).getOrThunk(tw(i))},L_=()=>on("add-focusable",[as((o=>{Cp(o.element,"svg").each((r=>en(r,"focusable","false")))}))]),I_=(o,r,i,l)=>{let u=(f=>!!_i.isRtl()&&Sn(QM,f))(r)?["tox-icon--flip"]:[],m=qt(i,xb(r,i)).or(l).getOrThunk(tw(i));return{dom:{tag:o.tag,attributes:o.attributes??{},classes:o.classes.concat(u),innerHtml:m},behaviours:st([...o.behaviours??[],L_()]),eventOrder:o.eventOrder??{}}},zu=(o,r,i,l=_.none())=>I_(r,o,i(),l),e8={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},sw=Wc({name:"Notification",factory:o=>{let r=we("notification-text"),i=go({dom:Gf(`<p id=${r}>${B_(o.backstageProvider.translate(o.text))}</p>`),behaviours:st([Cn.config({})])}),l=E=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${E}%`}}}),u=E=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${E}%`}}),m=go({dom:{tag:"div",classes:o.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(0)]},u(0)],behaviours:st([Cn.config({})])}),f={updateProgress:(E,O)=>{E.getSystem().isConnected()&&m.getOpt(E).each((B=>{Cn.set(B,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(O)]},u(O)])}))},updateText:(E,O)=>{if(E.getSystem().isConnected()){let B=i.get(E);Cn.set(B,[xs(O)])}}},v=Vs([o.icon.toArray(),[o.level],_.from(e8[o.level]).toArray()]),y=go(la.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":o.backstageProvider.translate("Close")}},components:[zu("close",{tag:"span",classes:["tox-icon"]},o.iconProvider)],buttonBehaviours:st([ko.config({}),is.config({...o.backstageProvider.tooltips.getConfig({tooltipText:o.backstageProvider.translate("Close")})})]),action:E=>{o.onAction(E)}})),x=((E,O,B)=>{let I=B(),X=kn(E,(W=>Sn(I,xb(W,I))));return I_({tag:"div",classes:["tox-notification__icon"]},X.getOr(P_),I,_.none())})(v,0,o.iconProvider),A=[x,{dom:{tag:"div",classes:["tox-notification__body"]},components:[i.asSpec()],behaviours:st([Cn.config({})])}];return{uid:o.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":r},classes:["tox-notification","tox-notification--in",`tox-notification--${o.level}`]},behaviours:st([ko.config({}),un.config({}),Ft.config({mode:"special",onEscape:E=>(o.onAction(E),_.some(!0))})]),components:A.concat(o.progress?[m.asSpec()]:[]).concat([y.asSpec()]),apis:f}},configFields:[nc("level","info",["success","error","warning","warn","info"]),Ke("progress"),no("icon"),Ke("onAction"),Ke("text"),Ke("iconProvider"),Ke("backstageProvider")],apis:{updateProgress:(o,r,i)=>{o.updateProgress(r,i)},updateText:(o,r,i)=>{o.updateText(r,i)}}});var F_=(o,r,i,l)=>{let u=r.backstage.shared,m=()=>bt(o.queryCommandValue("ToggleView")===""?o.getContentAreaContainer():o.getContainer()),f=()=>{let y=Br(m());return _.some(y)},v=y=>{f().each((x=>{Ot(y,(A=>{Un(A.element,"width"),hs(A.element)>x.width&&q(A.element,"width",x.width+"px")}))}))};return{open:(y,x,A)=>{let E=()=>{l.on((I=>{x();let X=A();(W=>{Cn.remove(W,O),B()})(I),((W,K)=>{fe(W.element).length===0?((V,U)=>{Ls.hide(V),l.clear(),U&&o.focus()})(W,K):((V,U)=>{U&&Ft.focusIn(V)})(W,K)})(I,X)}))},O=qi(sw.sketch({text:y.text,level:Ln(["success","error","warning","warn","info"],y.type)?y.type:void 0,progress:y.progressBar===!0,icon:y.icon,onAction:E,iconProvider:u.providers.icons,backstageProvider:u.providers}));if(l.isSet()){let I=Pu(O);l.on((X=>{Cn.append(X,I),Ls.reposition(X),O.hasConfigured($s)&&$s.refresh(X),v(X.components())}))}else{let I=qi(Ls.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:u.getSink,fireDismissalEventInstead:{},...u.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:st([Ft.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Cn.config({}),...Xm(o)&&u.header.isPositionedAtTop()?[]:[$s.config({contextual:{lazyContext:()=>_.some(Br(m())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:V=>sf(o,V.element).map((U=>({bounds:Jf(U),optScrollEnv:_.some({currentScrollTop:U.element.dom.scrollTop,scrollElmTop:Ii(U.element).top})}))).getOrThunk((()=>({bounds:Wr(),optScrollEnv:_.none()})))})]])})),X=Pu(O),W={maxHeightFunction:Fm()},K={...u.anchors.banner(),overrides:W};l.set(I),i.add(I),Ls.showWithinBounds(I,X,{anchor:K},f)}Yn(y.timeout)&&y.timeout>0&&s2.setEditorTimeout(o,(()=>{E()}),y.timeout);let B=()=>{l.on((I=>{Ls.reposition(I),I.hasConfigured($s)&&$s.refresh(I),v(I.components())}))};return{close:E,reposition:B,text:I=>{sw.updateText(O,I)},settings:y,getEl:()=>O.element.dom,progressBar:{value:I=>{sw.updateProgress(O,I)}}}},close:y=>{y.close()},getArgs:y=>y.settings}},j4;(function(o){o[o.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",o[o.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(j4||(j4={}));var nm=j4;let q4="tox-menu-nav__js",rw="tox-collection__item",H_="tox-swatch",t8={normal:q4,color:H_},aw="tox-collection__item--enabled",z_="tox-collection__item-icon",G4="tox-collection__item-label",$_="tox-collection__item-caret",L1="tox-collection__item--active",V_="tox-collection__item-container",ep="tox-collection__item-container--row",U_=o=>qt(t8,o).getOr(q4),n8=o=>o==="color"?"tox-swatches":"tox-menu",tp=o=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:n8(o),tieredMenu:"tox-tiered-menu"}),np=o=>{let r=tp(o);return{backgroundMenu:r.backgroundMenu,selectedMenu:r.selectedMenu,menu:r.menu,selectedItem:r.selectedItem,item:U_(o)}},o8=(o,r,i)=>{let l=tp(i);return{tag:"div",classes:Vs([[l.menu,`tox-menu-${r}-column`],o?[l.hasIcons]:[]])}},dh=[Iu.parts.items({})],g2=(o,r,i)=>{let l=tp(i);return{dom:{tag:"div",classes:Vs([[l.tieredMenu]])},markers:np(i)}},Z_=we("refetch-trigger-event"),$u=we("redirect-menu-item-interaction"),K4="tox-menu__searcher",f2=o=>xo(o.element,`.${K4}`).bind((r=>o.getSystem().getByDom(r).toOptional())),Y4=f2,W_=o=>({fetchPattern:xt.getValue(o),selectionStart:o.element.dom.selectionStart,selectionEnd:o.element.dom.selectionEnd}),iw=o=>{let r=(u,m)=>(m.cut(),_.none()),i=(u,m)=>{let f={interactionEvent:m.event,eventType:m.event.raw.type};return Wt(u,$u,f),_.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[rw]},components:[Kf.sketch({inputClasses:[K4,"tox-textfield"],inputAttributes:{...o.placeholder.map((u=>({placeholder:o.i18n(u)}))).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:st([on(l,[$e(Pc(),(u=>{$n(u,Z_)})),$e(zi(),((u,m)=>{m.event.raw.key==="Escape"&&m.stop()}))]),Ft.config({mode:"special",onLeft:r,onRight:r,onSpace:r,onEnter:i,onEscape:i,onUp:i,onDown:i})]),eventOrder:{keydown:[l,Ft.name()]}})]}},p2="tox-collection--results__js",j_=o=>o.dom?{...o,dom:{...o.dom,attributes:{...o.dom.attributes??{},id:we("aria-item-search-result-id"),"aria-selected":"false"}}}:o,q_="Use arrow keys to navigate.",I1=(o,r)=>i=>{let l=Ya(i,r);return it(l,(u=>({dom:o,components:u})))},lw=(o,r)=>{let i=[],l=[];return Ot(o,((u,m)=>{r(u,m)?(l.length>0&&i.push(l),l=[],(Sn(u.dom,"innerHtml")||u.components&&u.components.length>0)&&l.push(u)):l.push(u)})),l.length>0&&i.push(l),it(i,(u=>({dom:{tag:"div",classes:["tox-collection__group"]},components:u})))},cw=(o,r,i)=>Iu.parts.items({preprocess:l=>{let u=it(l,i);return o!=="auto"&&o>1?I1({tag:"div",classes:["tox-collection__group"]},o)(u):lw(u,((m,f)=>r[f].type==="separator"))}}),X4=(o,r,i=!0)=>{return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(o===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{...(l=r,Ho(l,(u=>u.type==="widget"))?{"aria-label":_i.translate(q_)}:{})}},components:[cw(o,r,ht)]};var l},Sb=o=>Ho(o,(r=>"icon"in r&&r.icon!==void 0)),Qm=o=>(console.error(Rc(o)),console.log(o),_.none()),J4=(o,r,i,l,u)=>{let m=(f=i,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Iu.parts.items({preprocess:v=>lw(v,((y,x)=>f[x].type==="separator"))})]});var f;return{value:o,dom:m.dom,components:m.components,items:i}},uw=(o,r,i,l,u)=>{if(u.menuType==="color"){let m=(f=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"],attributes:{"aria-label":_i.translate(q_)}},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Iu.parts.items({preprocess:f!=="auto"?I1({tag:"div",classes:["tox-swatches__row"]},f):ht})]}]}))(l);return{value:o,dom:m.dom,components:m.components,items:i}}if(u.menuType==="imageselector"&&l!=="auto"){let m=(f=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[Iu.parts.items({preprocess:f!=="auto"?I1({tag:"div",classes:["tox-image-selector__row"]},f):ht})]}]}))(l);return{value:o,dom:m.dom,components:m.components,items:i}}if(u.menuType==="normal"&&l==="auto"){let m=X4(l,i);return{value:o,dom:m.dom,components:m.components,items:i}}if(u.menuType==="normal"||u.menuType==="searchable"){let m=u.menuType!=="searchable"?X4(l,i):u.searchMode.searchMode==="search-with-field"?((f,v,y)=>{let x=we("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(f===1?["tox-collection--list"]:["tox-collection--grid"])},components:[iw({i18n:_i.translate,placeholder:y.placeholder}),{dom:{tag:"div",classes:[...f===1?["tox-collection--list"]:["tox-collection--grid"],p2],attributes:{id:x}},components:[cw(f,v,j_)]}]}})(l,i,u.searchMode):((f,v)=>{let y=we("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",p2].concat(f===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:y}},components:[cw(f,v,j_)]}})(l,i);return{value:o,dom:m.dom,components:m.components,items:i}}if(u.menuType==="listpreview"&&l!=="auto"){let m=(f=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Iu.parts.items({preprocess:I1({tag:"div",classes:["tox-collection__group"]},f)})]}))(l);return{value:o,dom:m.dom,components:m.components,items:i}}return{value:o,dom:o8(r,l,u.menuType),components:dh,items:i}},ir=fr("type"),Q4=fr("name"),dw=fr("label"),eg=fr("text"),G_=fr("title"),F1=fr("icon"),mw=fr("url"),H1=fr("value"),ek=jr("fetch"),s8=jr("getSubmenuItems"),z1=jr("onAction"),r8=jr("onItemAction"),$1=rs("onSetup",(()=>Qe)),tk=Po("name"),op=Po("text"),K_=Po("role"),eu=Po("icon"),V1=Po("tooltip"),Y_=Po("chevronTooltip"),h2=Po("label"),nk=Po("shortcut"),a8=qr("select"),U1=Gr("active",!1),i8=Gr("borderless",!1),om=Gr("enabled",!0),kb=Gr("primary",!1),gw=o=>Te("columns",o),fw=Te("meta",{}),ok=rs("onAction",Qe),sp=o=>Yo("type",o),sk=o=>Sr("name","name",wu((()=>we(`${o}-name`))),ms),l8=[ir,eg,Fl("level",["info","warn","error","success"]),F1,Te("url","")],c8=Jt(l8),u8=[ir,eg,om,sk("button"),eu,i8,zd("buttonType",["primary","secondary","toolbar"]),kb,Yo("context","mode:design")],d8=Jt(u8),Z1=[ir,Q4],kd=Z1.concat([h2]),m8=Z1.concat([dw,om,Yo("context","mode:design")]),pw=Jt(m8),g8=sd,f8=kd.concat([gw("auto"),Yo("context","mode:design")]),p8=Jt(f8),h8=xu([H1,eg,F1]),b8=kd.concat([Yo("storageKey","default"),Yo("context","mode:design")]),v8=Jt(b8),X_=ms,y8=Jt(kd),C8=ms,rk=Z1.concat([Yo("tag","textarea"),fr("scriptId"),fr("scriptUrl"),qr("onFocus"),za("settings",void 0,Dg)]),W1=Z1.concat([Yo("tag","textarea"),jr("init")]),w8=Fd((o=>ss("customeditor.old",fa(W1),o).orThunk((()=>ss("customeditor.new",fa(rk),o))))),x8=ms,rf=[om,op,K_,nk,Sr("value","value",wu((()=>we("menuitem-value"))),gl()),fw,Yo("context","mode:design")],J_=Jt([ir,Q4].concat(rf)),S8=sd,j1=[sk("button"),eu,nc("align","end",["start","end"]),kb,om,zd("buttonType",["primary","secondary"]),Yo("context","mode:design")],Q_=[...j1,eg],hw=[Fl("type",["submit","cancel","custom"]),...Q_],eO=[Fl("type",["menu"]),op,V1,eu,Fa("items",J_),...j1],tO=[...j1,Fl("type",["togglebutton"]),V1,eu,op,Gr("active",!1)],rp=pa("type",{submit:hw,cancel:hw,custom:hw,menu:eO,togglebutton:tO}),ap=kd.concat([Yo("context","mode:design"),Po("dropAreaLabel"),Po("buttonLabel"),Po("allowedFileTypes"),ad("allowedFileExtensions",ms)]),nO=Jt(ap),Eb=Il(wf),k8=o=>[ir,Mg("columns"),o],ak=[ir,fr("html"),nc("presets","presentation",["presentation","document"]),rs("onInit",Qe),Gr("stretched",!1)],oO=Jt(ak),ik=kd.concat([Gr("border",!1),Gr("sandboxed",!0),Gr("streamContent",!1),Gr("transparent",!0)]),bw=Jt(ik),sO=ms,Ed=Jt(Z1.concat([Po("height")])),lk=Jt([fr("url"),Qs("zoom"),Qs("cachedWidth"),Qs("cachedHeight")]),E8=kd.concat([Po("inputMode"),Po("placeholder"),Gr("maximized",!1),om,Yo("context","mode:design")]),T8=Jt(E8),A8=ms,_8=o=>[ir,dw,o,nc("align","start",["start","center","end"]),Po("for")],b2=[eg,H1],O8=[eg,Fa("items",Nc(0,(()=>ck)))],ck=rd([Jt(b2),Jt(O8)]),uk=kd.concat([Fa("items",ck),om,Yo("context","mode:design")]),D8=Jt(uk),dk=ms,mk=kd.concat([Bg("items",[eg,H1]),Mc("size",1),om,Yo("context","mode:design")]),R8=Jt(mk),rO=ms,aO=kd.concat([Gr("constrain",!0),om,Yo("context","mode:design")]),N8=Jt(aO),gk=Jt([fr("width"),fr("height")]),iO=Z1.concat([dw,Mc("min",0),Mc("max",0)]),M8=Jt(iO),B8=Ep,P8=[ir,Fa("header",ms),Fa("cells",Il(ms))],L8=Jt(P8),I8=kd.concat([Po("placeholder"),Gr("maximized",!1),om,Yo("context","mode:design"),Ha("spellcheck",sd)]),lO=Jt(I8),cO=ms,F8=[Yo("buttonType","default"),Po("text"),Po("tooltip"),Po("icon"),za("search",!1,rd([sd,Jt([Po("placeholder")])],(o=>Ar(o)?o?_.some({placeholder:_.none()}):_.none():_.some(o)))),jr("fetch"),rs("onSetup",(()=>Qe)),Yo("context","mode:design")],fk=Jt([ir,...F8]),pk=o=>ss("menubutton",fk,o),uO=[Fl("type",["directory","leaf"]),G_,fr("id"),Ha("menu",fk),Po("customStateIcon"),Po("customStateIconTooltip")],dO=Jt(uO),mO=uO.concat([Fa("children",Nc(0,(()=>Dm("type",{directory:vw,leaf:dO}))))]),vw=Jt(mO),gO=Dm("type",{directory:vw,leaf:dO}),fO=[ir,Fa("items",gO),qr("onLeafAction"),qr("onToggleExpand"),Su("defaultExpandedIds",[],ms),Po("defaultSelectedId")],pO=Jt(fO),H8=kd.concat([nc("filetype","file",["image","media","file"]),om,Po("picker_text"),Yo("context","mode:design")]),z8=Jt(H8),hO=Jt([H1,fw]),v2=o=>Sr("items","items",{tag:"required",process:{}},Il(Fd((r=>ss(`Checking item of ${o}`,y2,r).fold((i=>Nn.error(Rc(i))),(i=>Nn.value(i))))))),y2=Om((()=>{return Dm("type",{alertbanner:c8,bar:Jt((o=v2("bar"),[ir,o])),button:d8,checkbox:pw,colorinput:v8,colorpicker:y8,dropzone:nO,grid:Jt(k8(v2("grid"))),iframe:bw,input:T8,listbox:D8,selectbox:R8,sizeinput:N8,slider:M8,textarea:lO,urlinput:z8,customeditor:w8,htmlpanel:oO,imagepreview:Ed,collection:p8,label:Jt(_8(v2("label"))),table:L8,tree:pO,panel:hk});var o})),bO=[ir,Te("classes",[]),Fa("items",y2)],hk=Jt(bO),vO=[sk("tab"),G_,Fa("items",y2)],$8=[ir,Bg("tabs",vO)],bk=Jt($8),V8=Q_,yO=rp,CO=Jt([fr("title"),Ci("body",Dm("type",{panel:hk,tabpanel:bk})),Yo("size","normal"),Su("buttons",[],yO),Te("initialData",{}),rs("onAction",Qe),rs("onChange",Qe),rs("onSubmit",Qe),rs("onClose",Qe),rs("onCancel",Qe),rs("onTabChange",Qe)]),q1=Jt([Fl("type",["cancel","custom"]),...V8]),U8=Jt([fr("title"),fr("url"),Qs("height"),Qs("width"),ad("buttons",q1),rs("onAction",Qe),rs("onCancel",Qe),rs("onClose",Qe),rs("onMessage",Qe)]),C2=o=>nr(o)?[o].concat(vo(Os(o),C2)):lr(o)?vo(o,C2):[],yw=o=>Wn(o.type)&&Wn(o.name),Z8={checkbox:g8,colorinput:X_,colorpicker:C8,dropzone:Eb,input:A8,iframe:sO,imagepreview:lk,selectbox:rO,sizeinput:gk,slider:B8,listbox:dk,size:gk,textarea:cO,urlinput:hO,customeditor:x8,collection:h8,togglemenuitem:S8},wO=o=>{let r=(l=>pn(C2(l),yw))(o),i=vo(r,(l=>(u=>_.from(Z8[u.type]))(l).fold((()=>[]),(u=>[Ci(l.name,u)]))));return Jt(i)},vk=o=>({internalDialog:Ia(ss("dialog",CO,o)),dataValidator:wO(o),initialData:o.initialData??{}}),mh={open:(o,r)=>{let i=vk(r);return o(i.internalDialog,i.initialData,i.dataValidator)},openUrl:(o,r)=>o(Ia(ss("dialog",U8,r))),redial:o=>vk(o)},Cw=Jt([ir,op]),xO=Jt([sp("autocompleteitem"),U1,om,fw,H1,op,eu]);Jt([ir,fr("trigger"),Mc("minChars",1),gw(1),Mc("maxResults",10),qr("matches"),ek,z1,Su("highlightOn",[],ms)]);let Tb=[om,V1,eu,op,$1,Yo("context","mode:design")],SO=Jt([ir,z1,nk].concat(Tb)),ww=o=>ss("toolbarbutton",SO,o),xw=[U1].concat(Tb),kO=Jt(xw.concat([ir,z1,nk])),EO=o=>ss("ToggleButton",kO,o),Ab=[rs("predicate",zt),nc("scope","node",["node","editor"]),nc("position","selection",["node","selection","line"])],W8=Tb.concat([sp("contextformbutton"),Yo("align","end"),kb,z1,kr("original",ht)]),j8=xw.concat([sp("contextformbutton"),Yo("align","end"),kb,z1,kr("original",ht)]),q8=Tb.concat([sp("contextformbutton")]),G8=xw.concat([sp("contextformtogglebutton")]),Sw=[h2,Fa("commands",pa("type",{contextformbutton:W8,contextformtogglebutton:j8})),Ha("launch",pa("type",{contextformbutton:q8,contextformtogglebutton:G8})),rs("onInput",Qe),rs("onSetup",Qe)],K8=[...Ab,...Sw,Fl("type",["contextform"]),rs("initValue",ve("")),Po("placeholder")],w2=[...Ab,...Sw,Fl("type",["contextsliderform"]),rs("initValue",ve(0)),rs("min",ve(0)),rs("max",ve(100))],TO=[...Ab,...Sw,Fl("type",["contextsizeinputform"]),rs("initValue",ve({width:"",height:""}))],Y8=pa("type",{contextform:K8,contextsliderform:w2,contextsizeinputform:TO}),X8=Tb.concat([sp("contexttoolbarbutton")]),yk=Jt([sp("contexttoolbar"),ci("launch",X8),Ci("items",rd([ms,xu([Po("name"),Po("label"),Fa("items",ms)])]))].concat(Ab)),J8=o=>({name:o.name.getOrUndefined(),label:o.label.getOrUndefined(),items:o.items}),Q8=[ir,fr("src"),Po("alt"),Su("classes",[],ms)],eB=Jt(Q8),tB=[ir,eg,tk,Su("classes",["tox-collection__item-label"],ms)],nB=Jt(tB),Ck=Om((()=>Dm("type",{cardimage:eB,cardtext:nB,cardcontainer:oB}))),oB=Jt([ir,Yo("direction","horizontal"),Yo("align","left"),Yo("valign","middle"),Fa("items",Ck)]),sB=Jt([ir,h2,Fa("items",Ck),$1,ok].concat(rf)),rB=Jt([ir,U1,eu,h2].concat(rf)),kw=[ir,fr("fancytype"),ok],aB=[Te("initData",{})].concat(kw),iB=[qr("select"),Ap("initData",{},[Gr("allowCustomColors",!0),Yo("storageKey","default"),ad("colors",gl())])].concat(kw),AO=[qr("select"),ha("initData",[Mg("columns"),Su("items",[],gl())])].concat(kw),lB=pa("fancytype",{inserttable:aB,colorswatch:iB,imageselect:AO}),_O=Jt([ir,U1,mw,h2,V1].concat(rf)),OO=Jt([ir,U1,F1,dw,V1,H1].concat(rf)),wk=Jt([ir,$1,ok,eu].concat(rf)),cB=Jt([ir,s8,$1,eu].concat(rf)),DO=Jt([ir,eu,U1,$1,z1].concat(rf)),uB=Jt([eu,V1,rs("onShow",Qe),rs("onHide",Qe),$1]),x2=Jt([ir,Ci("items",rd([xu([Q4,Fa("items",ms)]),ms]))].concat(Tb)),dB=Jt([ir,V1,Y_,eu,op,a8,ek,$1,nc("presets","normal",["normal","color","listpreview"]),gw(1),z1,r8,Yo("context","mode:design")]),RO=[op,eu,Po("tooltip"),nc("buttonType","secondary",["primary","secondary"]),Gr("borderless",!1),jr("onAction"),Yo("context","mode:design")],NO={button:[...RO,eg,Fl("type",["button"])],togglebutton:[...RO,Gr("active",!1),Fl("type",["togglebutton"])]},xk=[Fl("type",["group"]),Su("buttons",[],pa("type",NO))],MO=pa("type",{...NO,group:xk}),mB=Jt([Su("buttons",[],MO),jr("onShow"),jr("onHide")]),S2=(o,r,i)=>{let l=aa(o.element,"."+i);if(l.length>0){let u=Ja(l,(m=>{let f=m.dom.getBoundingClientRect().top,v=l[0].dom.getBoundingClientRect().top;return Math.abs(f-v)>r})).getOr(l.length);return _.some({numColumns:u,numRows:Math.ceil(l.length/u)})}return _.none()},k2=o=>((r,i)=>st([on(r,i)]))(we("unnamed-events"),o),BO=o=>Ut.config({disabled:o,disableClass:"tox-collection__item--state-disabled"}),gh=o=>Ut.config({disabled:o}),E2=o=>Ut.config({disabled:o,disableClass:"tox-tbtn--disabled",useNative:!1}),_b=(o,r)=>{let i=o.getApi(r);return l=>{l(i)}},tg=(o,r)=>as((i=>{jt(o.onBeforeSetup)&&o.onBeforeSetup(i),_b(o,i)((l=>{let u=o.onSetup(l);jt(u)&&r.set(u)}))})),G1=(o,r)=>Ru((i=>_b(o,i)(r.get()))),Sk=(o,r,i)=>Ru((l=>(i.set(xt.getValue(l)),_b(o,l)(r.get())))),PO="silver.uistate",T2="setDisabled",LO="init",gB=["switchmode",LO],A2=(o,r)=>{let i=o.mainUi.outerContainer,l=[o.mainUi.mothership,...o.uiMotherships];r===T2&&Ot(l,(u=>{u.broadcastOn([pd()],{target:i.element})})),Ot(l,(u=>{u.broadcastOn([PO],r)}))},IO=(o,r)=>{o.on("init SwitchMode",(i=>{A2(r,i.type)})),o.on("DisabledStateChange",(i=>{if(!i.isDefaultPrevented()){let l=i.state?T2:LO;A2(r,l),i.state||o.nodeChanged()}})),o.on("NodeChange",(i=>{let l=o.ui.isEnabled()?i.type:T2;A2(r,l)})),YA(o)&&o.mode.set("readonly")},ea=o=>jc.config({channels:{[PO]:{onReceive:(r,i)=>{if(i===T2||i==="setEnabled")return void Ut.set(r,i===T2);let{contextType:l,shouldDisable:u}=o();(l!=="mode"||Ln(gB,i))&&Ut.set(r,u)}}}}),kk=(o,r)=>Wd(((i,l)=>{_b(o,i)(o.onAction),o.triggersSubmenu||r!==nm.CLOSE_ON_EXECUTE||(i.getSystem().isConnected()&&$n(i,Do()),l.stop())})),FO={[Xe()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Ob=Mi,K1=(o,r,i,l)=>{let u=Rt(Qe);return{type:"item",dom:r.dom,components:Ob(r.optComponents),data:o.data,eventOrder:FO,hasSubmenu:o.triggersSubmenu,itemBehaviours:st([on("item-events",[kk(o,i),tg(o,u),G1(o,u)]),BO((()=>!o.enabled||l.checkUiComponentContext(o.context).shouldDisable)),ea((()=>l.checkUiComponentContext(o.context))),Cn.config({})].concat(o.itemBehaviours))}},fh=o=>({value:o.value,meta:{text:o.text.getOr(""),...o.meta}}),fB=(o,r)=>{let i=rl("div");return bs(i,"tox-image-selector-loading-spinner"),{dom:{tag:o.tag,attributes:o.attributes??{},classes:o.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:r},classes:["tox-image-selector-image-img"]}}]},...o.checkMark.toArray()],behaviours:st([...o.behaviours??[],on("render-image-events",[as((l=>{var u;u=l.element,bs(u,"tox-image-selector-loading-spinner-wrapper"),Ks(u,i),xo(l.element,"img").each((m=>{vg(m).catch((f=>{console.error(f)})).finally((()=>{(f=>{$o(f,"tox-image-selector-loading-spinner-wrapper"),_c(i)})(l.element)}))}))}))])])}},Ek=o=>{let r=M1.os.isMacOS()||M1.os.isiOS(),i=r?{alt:"\u2325",ctrl:"\u2303",shift:"\u21E7",meta:"\u2318",access:"\u2303\u2325"}:{meta:"Ctrl",access:"Shift+Alt"},l=o.split("+"),u=it(l,(m=>{let f=m.toLowerCase().trim();return Sn(i,f)?i[f]:m}));return r?u.join(""):u.join("+")},Ew=(o,r,i=[z_])=>zu(o,{tag:"div",classes:i},r),Tk=o=>({dom:{tag:"div",classes:[G4]},components:[xs(_i.translate(o))]}),Ak=(o,r)=>({dom:{tag:"div",classes:r,innerHtml:o}}),pB=(o,r)=>({dom:{tag:"div",classes:[G4]},components:[{dom:{tag:o.tag,styles:o.styles},components:[xs(_i.translate(r))]}]}),hB=o=>({dom:{tag:"div",classes:["tox-collection__item-accessory"]},components:[xs(Ek(o))]}),_k=o=>Ew("checkmark",o,["tox-collection__item-checkmark"]),Tw=(o,r)=>{let i=o.map((l=>({attributes:{id:we("menu-item"),"aria-label":_i.translate(l)}}))).getOr({});return{tag:"div",classes:[q4,rw].concat(r),...i}},Aw=o=>({dom:{tag:"label"},components:[xs(o)]}),Db=(o,r,i,l=_.none())=>o.presets==="color"?((u,m,f)=>{let v=u.value,y=u.iconContent.map((A=>((E,O,B)=>{let I=O();return nw(E,I).or(B).getOrThunk(tw(I))})(A,m.icons,f))),x=u.ariaLabel.map((A=>({"aria-label":m.translate(A),"data-mce-name":A}))).getOr({});return{dom:(()=>{let A=H_,E=y.getOr(""),O={tag:"div",attributes:x,classes:[A]};return v==="custom"?{...O,tag:"button",classes:[...O.classes,"tox-swatches__picker-btn"],innerHtml:E}:v==="remove"?{...O,classes:[...O.classes,"tox-swatch--remove"],innerHtml:E}:$t(v)?{...O,attributes:{...O.attributes,"data-mce-color":v},styles:{"background-color":v},innerHtml:E}:O})(),optComponents:[]}})(o,r,l):o.presets==="img"?(u=>{var m,f;return{dom:Tw(u.ariaLabel,["tox-collection__item-image-selector"]),optComponents:[_.some((m=u.iconContent.getOrDie(),f={tag:"div",classes:["tox-collection__item-image"],checkMark:u.checkMark},fB(f,m))),u.labelContent.map(Aw)]}})(o):((u,m,f,v)=>{let y={tag:"div",classes:[z_]},x=f?u.iconContent.map((B=>zu(B,y,m.icons,v))).orThunk((()=>_.some({dom:y}))):_.none(),A=u.checkMark,E=_.from(u.meta).fold((()=>Tk),(B=>Sn(B,"style")?ut(pB,B.style):Tk)),O=u.htmlContent.fold((()=>u.textContent.map(E)),(B=>_.some(Ak(B,[G4]))));return{dom:Tw(u.ariaLabel,[]),optComponents:[x,O,u.shortcutContent.map(hB),A,u.caret,u.labelContent.map(Aw)]}})(o,r,i,l),HO=(o,r,i)=>qt(o,"tooltipWorker").map((l=>[is.config({lazySink:r.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:u=>({type:"submenu",item:u,overrides:{maxHeightFunction:Fm}}),mode:"follow-highlight",onShow:(u,m)=>{l((f=>{is.setComponents(u,[YE({element:bt(f)})])}))}})])).getOrThunk((()=>i.map((l=>[is.config({...r.providers.tooltips.getConfig({tooltipText:l}),mode:"follow-highlight"})])).getOr([]))),zO=(o,r)=>{let i=(l=>r2.DOM.encode(l))(_i.translate(o));if(r.length>0){let l=new RegExp((u=>u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(r),"gi");return i.replace(l,(u=>`<span class="tox-autocompleter-highlight">${u}</span>`))}return i},$O=(o,r)=>it(o,(i=>{switch(i.type){case"cardcontainer":return((m,f)=>{let v=m.direction==="vertical"?"tox-collection__item-container--column":ep,y=m.align==="left"?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right";return{dom:{tag:"div",classes:[V_,v,y,(()=>{switch(m.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}})()]},components:f}})(i,$O(i.items,r));case"cardimage":return((m,f,v)=>({dom:{tag:"img",classes:f,attributes:{src:m,alt:v.getOr("")}}}))(i.src,i.classes,i.alt);case"cardtext":let l=i.name.exists((m=>Ln(r.cardText.highlightOn,m))),u=l?_.from(r.cardText.matchText).getOr(""):"";return Ak(zO(i.text,u),i.classes)}})),VO=(o,r,i,l,u,m,f,v=!0)=>{let y=Db({presets:i,textContent:r?o.text:_.none(),htmlContent:_.none(),labelContent:o.label,ariaLabel:o.text,iconContent:o.icon,shortcutContent:r?o.shortcut:_.none(),checkMark:r?_.some(_k(f.icons)):_.none(),caret:_.none(),value:o.value},f,v),x=o.text.filter(ve(!r)).map((A=>is.config(f.tooltips.getConfig({tooltipText:f.translate(A)}))));return Xn(K1({context:o.context,data:fh(o),enabled:o.enabled,getApi:A=>({setActive:E=>{Zn.set(A,E)},isActive:()=>Zn.isOn(A),isEnabled:()=>!Ut.isDisabled(A),setEnabled:E=>Ut.set(A,!E)}),onAction:A=>l(o.value),onSetup:A=>(A.setActive(u),Qe),triggersSubmenu:!1,itemBehaviours:[...x.toArray()]},y,m,f),{toggling:{toggleClass:aw,toggleOnExecute:!1,selected:o.active,exclusive:!0}})},UO=o=>({value:WO(o)}),Ok=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Dk=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ZO=o=>Ok.test(o)||Dk.test(o),WO=o=>yo(o,"#").toUpperCase(),Rk=o=>{let r=o.toString(16);return(r.length===1?"0"+r:r).toUpperCase()},el=o=>{let r=Rk(o.red)+Rk(o.green)+Rk(o.blue);return UO(r)},mc=(o,r,i)=>({hue:o,saturation:r,value:i}),_w=o=>{let r=0,i=0,l=0,u=o.red/255,m=o.green/255,f=o.blue/255,v=Math.min(u,Math.min(m,f)),y=Math.max(u,Math.max(m,f));return v===y?(l=v,mc(0,0,100*l)):(r=u===v?3:f===v?1:5,r=60*(r-(u===v?m-f:f===v?u-m:f-u)/(y-v)),i=(y-v)/y,l=y,mc(Math.round(r),Math.round(100*i),Math.round(100*l)))},Ow=Math.min,Dw=Math.max,Y1=Math.round,bB=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,jO=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,ng=(o,r,i,l)=>({red:o,green:r,blue:i,alpha:l}),Nk=o=>{let r=parseInt(o,10);return r.toString()===o&&r>=0&&r<=255},_2=o=>{let r,i,l,u=(o.hue||0)%360,m=o.saturation/100,f=o.value/100;if(m=Dw(0,Ow(m,1)),f=Dw(0,Ow(f,1)),m===0)return r=i=l=Y1(255*f),ng(r,i,l,1);let v=u/60,y=f*m,x=y*(1-Math.abs(v%2-1)),A=f-y;switch(Math.floor(v)){case 0:r=y,i=x,l=0;break;case 1:r=x,i=y,l=0;break;case 2:r=0,i=y,l=x;break;case 3:r=0,i=x,l=y;break;case 4:r=x,i=0,l=y;break;case 5:r=y,i=0,l=x;break;default:r=i=l=0}return r=Y1(255*(r+A)),i=Y1(255*(i+A)),l=Y1(255*(l+A)),ng(r,i,l,1)},X1=o=>{let r=(m=>{let f=(y=>({value:y.value.replace(Ok,((A,E,O,B)=>E+E+O+O+B+B))}))(m),v=Dk.exec(f.value);return v===null?["FFFFFF","FF","FF","FF"]:v})(o),i=parseInt(r[1],16),l=parseInt(r[2],16),u=parseInt(r[3],16);return ng(i,l,u,1)},Mk=(o,r,i,l)=>{let u=parseInt(o,10),m=parseInt(r,10),f=parseInt(i,10),v=parseFloat(l);return ng(u,m,f,v)},J1=o=>{let r=bB.exec(o);if(r!==null)return _.some(Mk(r[1],r[2],r[3],"1"));let i=jO.exec(o);return i!==null?_.some(Mk(i[1],i[2],i[3],i[4])):_.none()},qO=o=>`rgba(${o.red},${o.green},${o.blue},${o.alpha})`,GO=ng(255,0,0,1),sm=o=>el(_2(o)),Zl=(o,r)=>{o.dispatch("ResizeContent",r)},Rb=(o,r)=>{o.dispatch("TextColorChange",r)},tu=(o,r)=>o.dispatch("ResolveName",{name:r.nodeName.toLowerCase(),target:r}),KO=o=>{o.dispatch("ContextToolbarClose")},Qo=(o,r)=>()=>{o(),r()},wl=(o,r=vn)=>og(o,"NodeChange",(i=>{i.setEnabled(o.selection.isEditable()&&r())})),rm=(o,r)=>i=>{let l=wl(o)(i),u=((m,f)=>v=>{let y=ur(),x=()=>{v.setActive(m.formatter.match(f));let A=m.formatter.formatChanged(f,v.setActive);y.set(A)};return m.initialized?x():m.once("init",x),()=>{m.off("init",x),y.clear()}})(o,r)(i);return()=>{l(),u()}},og=(o,r,i)=>l=>{let u=()=>i(l),m=()=>{i(l),o.on(r,u)};return o.initialized?m():o.once("init",m),()=>{o.off("init",m),o.off(r,u)}},Bk=o=>r=>()=>{o.undoManager.transact((()=>{o.focus(),o.execCommand("mceToggleFormat",!1,r.format)}))},Wl=(o,r)=>()=>o.execCommand(r);var ip=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");let YO={},Rw=o=>qt(YO,o).getOrThunk((()=>{let r=`tinymce-custom-colors-${o}`,i=ip.getItem(r);if(Fs(i)){let u=ip.getItem("tinymce-custom-colors");ip.setItem(r,$t(u)?u:"[]")}let l=((u,m=10)=>{let f=ip.getItem(u),v=Wn(f)?JSON.parse(f):[],y=m-(x=v).length<0?x.slice(0,m):x;var x;let A=E=>{y.splice(E,1)};return{add:E=>{((O,B)=>{let I=lt(O,B);return I===-1?_.none():_.some(I)})(y,E).each(A),y.unshift(E),y.length>m&&y.pop(),ip.setItem(u,JSON.stringify(y))},state:()=>y.slice(0)}})(r,10);return YO[o]=l,l})),XO=(o,r)=>{Rw(o).add(r)},Nw="forecolor",Mw="hilitecolor",Bw=o=>{let r=[];for(let i=0;i<o.length;i+=2)r.push({text:o[i+1],value:o[i],icon:"checkmark",type:"choiceitem"});return r},am=o=>r=>r.options.get(o),Nb="#000000",Pw=(o,r)=>r===Nw&&o.options.isSet("color_map_foreground")?am("color_map_foreground")(o):r===Mw&&o.options.isSet("color_map_background")?am("color_map_background")(o):o.options.isSet("color_map_raw")?am("color_map_raw")(o):am("color_map")(o),Pk=(o,r="default")=>Math.max(5,Math.ceil(Math.sqrt(Pw(o,r).length))),JO=(o,r)=>{let i=am("color_cols")(o),l=Pk(o,r);return i===Pk(o)?l:i},QO=(o,r="default")=>Math.round(r===Nw?am("color_cols_foreground")(o):r===Mw?am("color_cols_background")(o):am("color_cols")(o)),e5=am("custom_colors"),t5=am("color_default_foreground"),vB=am("color_default_background"),n5=(o,r)=>{let i=bt(o.selection.getStart()),l=r==="hilitecolor"?yf(i,(u=>{if(Dr(u)){let m=ga(u,"background-color");return Rs((f=>J1(f).exists((v=>v.alpha!==0)))(m),m)}return _.none()})).getOr("rgba(0, 0, 0, 0)"):ga(i,"color");return J1(l).map((u=>"#"+el(u).value))},Lk=o=>{let r="choiceitem",i={type:r,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return o?[i,{type:r,text:"Custom color",icon:"color-picker",value:"custom"}]:[i]},Ik=(o,r,i,l)=>{i==="custom"?s5(o)((u=>{u.each((m=>{XO(r,m),o.execCommand("mceApplyTextcolor",r,m),l(m)}))}),n5(o,r).getOr(Nb)):i==="remove"?(l(""),o.execCommand("mceRemoveTextcolor",r)):(l(i),o.execCommand("mceApplyTextcolor",r,i))},Lw=(o,r,i)=>o.concat((l=>it(Rw(l).state(),(u=>({type:"choiceitem",text:u,icon:"checkmark",value:u}))))(r).concat(Lk(i))),Mb=(o,r,i)=>l=>{l(Lw(o,r,i))},Fk=(o,r,i)=>{let l=r==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";o.setIconFill(l,i)},o5=(o,r)=>{o.setTooltip(r)},Hk=(o,r)=>i=>{let l=n5(o,r);return Da(l,i.toUpperCase())},Iw=(o,r,i)=>{if(Ur(i))return r==="forecolor"?"Text color":"Background color";let l=r==="forecolor"?"Text color {0}":"Background color {0}",u=Lw(Pw(o,r),r,!1),m=kn(u,(f=>f.value===i)).getOr({text:""}).text;return o.translate([l,o.translate(m)])},Fw=(o,r,i,l)=>{o.ui.registry.addSplitButton(r,{tooltip:Iw(o,i,l.get()),chevronTooltip:r==="forecolor"?"Text color menu":"Background color menu",presets:"color",icon:r==="forecolor"?"text-color":"highlight-bg-color",select:Hk(o,i),columns:QO(o,i),fetch:Mb(Pw(o,i),i,e5(o)),onAction:u=>{Ik(o,i,l.get(),Qe)},onItemAction:(u,m)=>{Ik(o,i,m,(f=>{l.set(f),Rb(o,{name:r,color:f})}))},onSetup:u=>{Fk(u,r,l.get());let m=f=>{f.name===r&&(Fk(u,f.name,f.color),o5(u,Iw(o,i,f.color)))};return o.on("TextColorChange",m),Qo(wl(o)(u),(()=>{o.off("TextColorChange",m)}))}})},zk=(o,r,i,l,u)=>{o.ui.registry.addNestedMenuItem(r,{text:l,icon:r==="forecolor"?"text-color":"highlight-bg-color",onSetup:m=>(o5(m,Iw(o,i,u.get())),Fk(m,r,u.get()),wl(o)(m)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:Hk(o,i),initData:{storageKey:i},onAction:m=>{Ik(o,i,m.value,(f=>{u.set(f),Rb(o,{name:r,color:f})}))}}]})},s5=o=>(r,i)=>{let l=!1,u={colorpicker:i};o.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:u,onAction:(m,f)=>{f.name==="hex-valid"&&(l=f.value)},onSubmit:m=>{let f=m.getData().colorpicker;l?(r(_.from(f)),m.close()):o.windowManager.alert(o.translate(["Invalid hex color code: {0}",f]))},onClose:Qe,onCancel:()=>{r(_.none())}})},Hw=(o,r,i,l,u,m,f,v)=>{let y=Sb(r),x=yB(r,i,l,u!=="color"?"normal":"color",m,f,v);return uw(o,y,x,l,{menuType:u})},yB=(o,r,i,l,u,m,f)=>Mi(it(o,(v=>{return v.type==="choiceitem"?(y=v,ss("choicemenuitem",rB,y)).fold(Qm,(x=>_.some(VO(x,i===1,l,r,m(x.value),u,f,Sb(o))))):v.type==="imageitem"?(x=>ss("imagemenuitem",_O,x))(v).fold(Qm,(x=>_.some(((A,E,O,B,I)=>{let X=Db({presets:"img",textContent:_.none(),htmlContent:_.none(),ariaLabel:A.tooltip,iconContent:_.some(A.url),labelContent:A.label,shortcutContent:_.none(),checkMark:_.some(_k(I.icons)),caret:_.none(),value:A.value},I,!0),W=A.tooltip.map((K=>is.config(I.tooltips.getConfig({tooltipText:I.translate(K)}))));return Xn(K1({context:A.context,data:fh(A),enabled:A.enabled,getApi:K=>({setActive:V=>{Zn.set(K,V)},isActive:()=>Zn.isOn(K),isEnabled:()=>!Ut.isDisabled(K),setEnabled:V=>Ut.set(K,!V)}),onAction:K=>{E(A.value),K.setActive(!0)},onSetup:K=>(K.setActive(O),Qe),triggersSubmenu:!1,itemBehaviours:[...W.toArray()]},X,B,I),{toggling:{toggleClass:aw,toggleOnExecute:!1,selected:A.active,exclusive:!0}})})(x,r,m(x.value),u,f)))):v.type==="resetimage"?(x=>ss("resetimageitem",OO,x))(v).fold(Qm,(x=>_.some(VO({...x,type:"choiceitem",text:x.tooltip,icon:_.some(x.icon),label:_.some(x.label)},i===1,l,r,m(x.value),u,f,Sb(o))))):_.none();var y}))),O2=(o,r)=>{let i=np(r);return o===1?{mode:"menu",moveOnTab:!0}:o==="auto"?{mode:"grid",selector:"."+i.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[r],previousSelector:l=>r==="color"?xo(l.element,"[aria-checked=true]"):_.none()}},r5=we("cell-over"),a5=we("cell-execute"),i5=(o,r,i)=>{let l=m=>Wt(m,a5,{row:o,col:r}),u=(m,f)=>{f.stop(),l(m)};return qi({dom:{tag:"div",attributes:{role:"button","aria-label":i}},behaviours:st([on("insert-table-picker-cell",[$e(xi(),un.focus),$e(Xe(),l),$e(ku(),u),$e(Zt(),u)]),Zn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),un.config({onFocus:m=>Wt(m,r5,{row:o,col:r})})])})},im=o=>vo(o,(r=>it(r,Pu))),l5=(o,r)=>xs(`${r}x${o}`),$k={inserttable:(o,r)=>{let i=(f=>(v,y)=>f.shared.providers.translate(["{0} columns, {1} rows",y,v]))(r),l=(f=>{let v=[];for(let y=0;y<10;y++){let x=[];for(let A=0;A<10;A++){let E=f(y+1,A+1);x.push(i5(y,A,E))}v.push(x)}return v})(i),u=l5(0,0),m=go({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[u],behaviours:st([Cn.config({})])});return{type:"widget",data:{value:we("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[e4.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:im(l).concat(m.asSpec()),behaviours:st([on("insert-table-picker",[as((f=>{Cn.set(m.get(f),[u])})),z0(r5,((f,v,y)=>{let{row:x,col:A}=y.event;((E,O,B)=>{for(let I=0;I<10;I++)for(let X=0;X<10;X++)Zn.set(E[I][X],I<=O&&X<=B)})(l,x,A),Cn.set(m.get(f),[l5(x+1,A+1)])})),z0(a5,((f,v,y)=>{let{row:x,col:A}=y.event;$n(f,Do()),o.onAction({numRows:x+1,numColumns:A+1})}))]),Ft.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:(o,r)=>{let i=((v,y)=>{let x=v.initData.allowCustomColors&&y.colorinput.hasCustomColors();return v.initData.colors.fold((()=>Lw(y.colorinput.getColors(v.initData.storageKey),v.initData.storageKey,x)),(A=>A.concat(Lk(x))))})(o,r),l=r.colorinput.getColorCols(o.initData.storageKey),u="color",m=Hw(we("menu-value"),i,(v=>{o.onAction({value:v})}),l,u,nm.CLOSE_ON_EXECUTE,o.select.getOr(zt),r.shared.providers),f={...m,markers:np(u),movement:O2(l,u),showMenuRole:!1};return{type:"widget",data:{value:we("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[e4.widget(Iu.sketch(f))]}},imageselect:(o,r)=>{let i="imageselector",l=o.initData.columns,u=Hw(we("menu-value"),o.initData.items,(f=>{o.onAction({value:f})}),l,i,nm.CLOSE_ON_EXECUTE,o.select.getOr(zt),r.shared.providers),m={...u,markers:np(i),movement:O2(l,i),showMenuRole:!1};return{type:"widget",data:{value:we("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[e4.widget(Iu.sketch(m))]}}},Vk=o=>({type:"separator",dom:{tag:"div",classes:[rw,"tox-collection__group-heading"]},components:o.text.map(xs).toArray()}),Uk=(o,r,i)=>{Y4(o).each((l=>{var u;((m,f)=>{Zs(f.element,"id").each((v=>en(m.element,"aria-activedescendant",v)))})(l,i),(Js((u=r).element,p2)?_.some(u.element):xo(u.element,"."+p2)).each((m=>{Zs(m,"id").each((f=>en(l.element,"aria-controls",f)))}))})),en(i.element,"aria-selected","true")},CB=(o,r,i)=>{en(i.element,"aria-selected","false")},c5=o=>br.getExistingCoupled(o,"sandbox").bind(f2).map(W_).map((r=>r.fetchPattern)).getOr("");var D2;(function(o){o[o.ContentFocus=0]="ContentFocus",o[o.UiFocus=1]="UiFocus"})(D2||(D2={}));let u5=(o,r,i,l,u)=>{let m=i.shared.providers,f=y=>u?{...y,shortcut:_.none(),icon:y.text.isSome()?_.none():y.icon}:y;switch(o.type){case"menuitem":return(v=o,ss("menuitem",wk,v)).fold(Qm,(y=>_.some(((x,A,E,O=!0)=>{let B=Db({presets:"normal",iconContent:x.icon,textContent:x.text,htmlContent:_.none(),labelContent:_.none(),ariaLabel:x.text,caret:_.none(),checkMark:_.none(),shortcutContent:x.shortcut},E,O);return K1({context:x.context,data:fh(x),getApi:I=>({isEnabled:()=>!Ut.isDisabled(I),setEnabled:X=>Ut.set(I,!X)}),enabled:x.enabled,onAction:x.onAction,onSetup:x.onSetup,triggersSubmenu:!1,itemBehaviours:[]},B,A,E)})(f(y),r,m,l))));case"nestedmenuitem":return(y=>ss("nestedmenuitem",cB,y))(o).fold(Qm,(y=>_.some(((x,A,E,O=!0,B=!1)=>{let I=B?(X=E.icons,Ew("chevron-down",X,[$_])):(K=>Ew("chevron-right",K,[$_]))(E.icons);var X;let W=Db({presets:"normal",iconContent:x.icon,textContent:x.text,htmlContent:_.none(),ariaLabel:x.text,labelContent:_.none(),caret:_.some(I),checkMark:_.none(),shortcutContent:x.shortcut},E,O);return K1({context:x.context,data:fh(x),getApi:K=>({isEnabled:()=>!Ut.isDisabled(K),setEnabled:V=>Ut.set(K,!V),setIconFill:(V,U)=>{xo(K.element,`svg path[class="${V}"], rect[class="${V}"]`).each((J=>{en(J,"fill",U)}))},setTooltip:V=>{let U=E.translate(V);en(K.element,"aria-label",U)}}),enabled:x.enabled,onAction:Qe,onSetup:x.onSetup,triggersSubmenu:!0,itemBehaviours:[]},W,A,E)})(f(y),r,m,l,u))));case"togglemenuitem":return(y=>ss("togglemenuitem",DO,y))(o).fold(Qm,(y=>_.some(((x,A,E,O=!0)=>{let B=Db({iconContent:x.icon,textContent:x.text,htmlContent:_.none(),labelContent:_.none(),ariaLabel:x.text,checkMark:_.some(_k(E.icons)),caret:_.none(),shortcutContent:x.shortcut,presets:"normal",meta:x.meta},E,O);return Xn(K1({context:x.context,data:fh(x),enabled:x.enabled,getApi:I=>({setActive:X=>{Zn.set(I,X)},isActive:()=>Zn.isOn(I),isEnabled:()=>!Ut.isDisabled(I),setEnabled:X=>Ut.set(I,!X)}),onAction:x.onAction,onSetup:x.onSetup,triggersSubmenu:!1,itemBehaviours:[]},B,A,E),{toggling:{toggleClass:aw,toggleOnExecute:!1,selected:x.active},role:x.role.getOrUndefined()})})(f(y),r,m,l))));case"separator":return(y=>ss("separatormenuitem",Cw,y))(o).fold(Qm,(y=>_.some(Vk(y))));case"fancymenuitem":return(y=>ss("fancymenuitem",lB,y))(o).fold(Qm,(y=>((x,A)=>qt($k,x.fancytype).map((E=>E(x,A))))(y,i)));default:return console.error("Unknown item in general menu",o),_.none()}var v},wB=(o,r,i,l,u,m,f)=>{let v=l===1,y=!v||Sb(o);return Mi(it(o,(x=>{switch(x.type){case"separator":return(A=x,ss("Autocompleter.Separator",Cw,A)).fold(Qm,(E=>_.some(Vk(E))));case"cardmenuitem":return(E=>ss("cardmenuitem",sB,E))(x).fold(Qm,(E=>_.some(((O,B,I,X)=>{let W={dom:Tw(O.label,[]),optComponents:[_.some({dom:{tag:"div",classes:[V_,ep]},components:$O(O.items,X)})]};return K1({context:"mode:design",data:fh({text:_.none(),...O}),enabled:O.enabled,getApi:K=>({isEnabled:()=>!Ut.isDisabled(K),setEnabled:V=>{Ut.set(K,!V),Ot(aa(K.element,"*"),(U=>{K.getSystem().getByDom(U).each((J=>{J.hasConfigured(Ut)&&Ut.set(J,!V)}))}))}}),onAction:O.onAction,onSetup:O.onSetup,triggersSubmenu:!1,itemBehaviours:_.from(X.itemBehaviours).getOr([])},W,B,I.providers)})({...E,onAction:O=>{E.onAction(O),i(E.value,E.meta)}},u,m,{itemBehaviours:HO(E.meta,m,_.none()),cardText:{matchText:r,highlightOn:f}}))));default:return(E=>ss("Autocompleter.Item",xO,E))(x).fold(Qm,(E=>_.some(((O,B,I,X,W,K,V,U=!0)=>{let J=Db({presets:X,textContent:_.none(),htmlContent:I?O.text.map((ue=>zO(ue,B))):_.none(),ariaLabel:O.text,labelContent:_.none(),iconContent:O.icon,shortcutContent:_.none(),checkMark:_.none(),caret:_.none(),value:O.value},V.providers,U,O.icon),ee=O.text.filter((ue=>!I&&ue!==""));return K1({context:"mode:design",data:fh(O),enabled:O.enabled,getApi:ve({}),onAction:ue=>W(O.value,O.meta),onSetup:ve(Qe),triggersSubmenu:!1,itemBehaviours:HO(O,V,ee)},J,K,V.providers)})(E,r,v,"normal",i,u,m,y))))}var A})))},d5=(o,r,i,l,u,m)=>{let f=Sb(r),v=Mi(it(r,(x=>{let A=E=>u5(E,i,l,(O=>u?!Sn(O,"text"):f)(E),u);return x.type==="nestedmenuitem"&&x.getSubmenuItems().length<=0?A({...x,enabled:!1}):A(x)}))),y=(x=>x.searchMode==="no-search"?{menuType:"normal"}:{menuType:"searchable",searchMode:x})(m);return(u?J4:uw)(o,f,v,1,y)},Zk=o=>Xi.singleData(o.value,o),xB=o=>wp(bt(o.startContainer),o.startOffset,bt(o.endContainer),o.endOffset),SB=(o,r)=>{let i=we("autocompleter"),l=Rt(!1),u=Rt(!1),m=to(),f=qi(Ls.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:i}},components:[],fireDismissalEventInstead:{},inlineBehaviours:st([on("dismissAutocompleter",[$e(Lc(),(()=>E())),$e(Ps(),((I,X)=>{Zs(X.event.target,"id").each((W=>en(bt(o.getBody()),"aria-activedescendant",W)))}))])]),lazySink:r.getSink})),v=()=>Ls.isOpen(f),y=u.get,x=()=>{if(v()){Ls.hide(f),o.dom.remove(i,!1);let I=bt(o.getBody());Zs(I,"aria-owns").filter((X=>X===i)).each((()=>{Bs(I,"aria-owns"),Bs(I,"aria-activedescendant")}))}},A=()=>Ls.getContent(f).bind((I=>cs(I.components(),0))),E=()=>o.execCommand("mceAutocompleterClose"),O=I=>{let X=(W=>{let K=Mt(W,(V=>_.from(V.columns))).getOr(1);return vo(W,(V=>{let U=V.items;return wB(U,V.matchText,((J,ee)=>{let ue={hide:()=>E(),reload:ce=>{x(),o.execCommand("mceAutocompleterReload",!1,{fetchOptions:ce})}};o.execCommand("mceAutocompleterRefreshActiveRange"),m.get().each((ce=>{l.set(!0),V.onAction(ue,ce,J,ee),l.set(!1)}))}),K,nm.BUBBLE_TO_SANDBOX,r,V.highlightOn)}))})(I);X.length>0?(((W,K)=>{let V=Mt(W,(U=>_.from(U.columns))).getOr(1);Ls.showMenuAt(f,{anchor:{type:"selection",getSelection:()=>m.get().map(xB),root:bt(o.getBody())}},((U,J,ee,ue)=>{let ce=O2(J,ue),ge=np(ue);return{data:Zk({...U,movement:ce,menuBehaviours:k2(J!=="auto"?[]:[as(((Re,Ne)=>{S2(Re,4,ge.item).each((({numColumns:Ae,numRows:Le})=>{Ft.setGridSize(Re,Le,Ae)}))}))])}),menu:{markers:np(ue),fakeFocus:ee===D2.ContentFocus}}})(uw("autocompleter-value",!0,K,V,{menuType:"normal"}),V,D2.ContentFocus,"normal")),A().each(Vn.highlightFirst)})(I,X),en(bt(o.getBody()),"aria-owns",i),o.inline||B()):x()},B=()=>{o.dom.get(i)&&o.dom.remove(i,!1);let I=o.getDoc().documentElement,X=o.selection.getNode(),W=(K=>Dh(K,!0))(f.element);Bd(W,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${X.offsetTop}px`,left:`${X.offsetLeft}px`}),o.dom.add(I,W.dom),xo(W,'[role="menu"]').each((K=>{Un(K,"position"),Un(K,"max-height")}))};o.on("AutocompleterStart",(({lookupData:I})=>{u.set(!0),l.set(!1),O(I)})),o.on("AutocompleterUpdate",(({lookupData:I})=>O(I))),o.on("AutocompleterUpdateActiveRange",(({range:I})=>m.set(I))),o.on("AutocompleterEnd",(()=>{x(),u.set(!1),l.set(!1),m.clear()})),((I,X)=>{let W=(V,U)=>{Wt(V,zi(),{raw:U})},K=()=>I.getMenu().bind(Vn.getHighlighted);X.on("keydown",(V=>{let U=V.which;I.isActive()&&(I.isMenuOpen()?U===13?(K().each(Nf),V.preventDefault()):U===40?(K().fold((()=>{I.getMenu().each(Vn.highlightFirst)}),(J=>{W(J,V)})),V.preventDefault(),V.stopImmediatePropagation()):U!==37&&U!==38&&U!==39||K().each((J=>{W(J,V),V.preventDefault(),V.stopImmediatePropagation()})):U!==13&&U!==38&&U!==40||I.cancelIfNecessary())})),X.on("NodeChange",(()=>{!I.isActive()||I.isProcessingAction()||X.queryCommandState("mceAutoCompleterInRange")||I.cancelIfNecessary()}))})({cancelIfNecessary:E,isMenuOpen:v,isActive:y,isProcessingAction:l.get,getMenu:A},o)};var kB=tinymce.util.Tools.resolve("tinymce.html.Entities");let R2=(o,r,i,l)=>{let u=m5(o,r,i,l);return Bn.sketch(u)},m5=(o,r,i,l)=>({dom:Wk(i),components:o.toArray().concat([r]),fieldBehaviours:st(l)}),Wk=o=>({tag:"div",classes:["tox-form__group"].concat(o)}),lp=(o,r)=>Bn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[xs(r.translate(o))]}),jl=we("form-component-change"),g5=we("form-component-input"),N2=we("form-close"),ph=we("form-cancel"),sg=we("form-action"),af=we("form-submit"),Bb=we("form-block"),jk=we("form-unblock"),qk=we("form-tabchange"),Gk=we("form-resize"),f5=(o,r,i)=>{let l=o.label.map((E=>lp(E,r))),u=r.icons(),m=E=>(O,B)=>{Mr(B.event.target,"[data-collection-item-value]").each((I=>{E(O,B,I,ds(I,"data-collection-item-value"))}))},f=m(((E,O,B,I)=>{O.stop(),r.checkUiComponentContext("mode:design").shouldDisable||r.isDisabled()||Wt(E,sg,{name:o.name,value:I})})),v=[$e(xi(),m(((E,O,B)=>{ct(B,!0)}))),$e(ku(),f),$e(Zt(),f),$e(pl(),m(((E,O,B)=>{xo(E.element,"."+L1).each((I=>{$o(I,L1)})),bs(B,L1)}))),$e(Lg(),m((E=>{xo(E.element,"."+L1).each((O=>{$o(O,L1),Gn(O)}))}))),Wd(m(((E,O,B,I)=>{Wt(E,sg,{name:o.name,value:I})})))],y=(E,O)=>it(aa(E.element,".tox-collection__item"),O),x=Bn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(o.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:ht},behaviours:st([Ut.config({disabled:()=>r.checkUiComponentContext(o.context).shouldDisable,onDisabled:E=>{y(E,(O=>{bs(O,"tox-collection__item--state-disabled"),en(O,"aria-disabled",!0)}))},onEnabled:E=>{y(E,(O=>{$o(O,"tox-collection__item--state-disabled"),Bs(O,"aria-disabled")}))}}),ea((()=>r.checkUiComponentContext(o.context))),Cn.config({}),is.config({...r.tooltips.getConfig({tooltipText:"",onShow:E=>{xo(E.element,"."+L1+"[data-mce-tooltip]").each((O=>{Zs(O,"data-mce-tooltip").each((B=>{is.setComponents(E,r.tooltips.getComponents({tooltipText:B}))}))}))}}),mode:"children-keyboard-focus",anchor:E=>({type:"node",node:xo(E.element,"."+L1).orThunk((()=>mr(".tox-collection__item"))),root:E.element,layouts:{onLtr:ve([Yr,ba,Lr,Ta,Kr,Wa]),onRtl:ve([Yr,ba,Lr,Ta,Kr,Wa])},bubble:Hl(0,-2,{})})}),xt.config({store:{mode:"memory",initialValue:i.getOr([])},onSetValue:(E,O)=>{((B,I)=>{let X=r.checkUiComponentContext("mode:design").shouldDisable||r.isDisabled()?" tox-collection__item--state-disabled":"",W=it(I,(U=>{let J=_i.translate(U.text),ee=o.columns===1?`<div class="tox-collection__item-label">${J}</div>`:"",ue=`<div class="tox-collection__item-icon">${(Re=>u[Re]??Re)(U.icon)}</div>`,ce={_:" "," - ":" ","-":" "},ge=J.replace(/\_| \- |\-/g,(Re=>ce[Re]));return`<div data-mce-tooltip="${ge}" class="tox-collection__item${X}" tabindex="-1" data-collection-item-value="${kB.encodeAllRaw(U.value)}" aria-label="${ge}">${ue}${ee}</div>`})),K=o.columns!=="auto"&&o.columns>1?Ya(W,o.columns):[W],V=it(K,(U=>`<div class="tox-collection__group">${U.join("")}</div>`));bg(B.element,V.join(""))})(E,O),o.columns==="auto"&&S2(E,5,"tox-collection__item").each((({numRows:B,numColumns:I})=>{Ft.setGridSize(E,B,I)})),$n(E,Gk)}}),ko.config({}),Ft.config((A=o.columns,A===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:A==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:`.${rw}`}})),on("collection-events",v)]),eventOrder:{[Xe()]:["disabling","alloy.base.behaviour","collection-events"],[pl()]:["collection-events","tooltipping"]}});var A;return R2(l,x,["tox-form__group--collection"],[])},Kk=we("color-input-change"),zw=we("color-swatch-change"),$w=we("color-picker-cancel"),hh=()=>io.config({find:_.some}),Yk=o=>io.config({find:r=>Be(r.element,o).bind((i=>r.getSystem().getByDom(i).toOptional()))}),EB=Jt([Te("preprocess",ht),Te("postprocess",ht)]),p5=(o,r)=>{let i=li("RepresentingConfigs.memento processors",EB,r);return xt.config({store:{mode:"manual",getValue:l=>{let u=o.get(l),m=xt.getValue(u);return i.postprocess(m)},setValue:(l,u)=>{let m=i.preprocess(u),f=o.get(l);xt.setValue(f,m)}}})},bh=(o,r,i)=>xt.config({store:{mode:"manual",...o.map((l=>({initialValue:l}))).getOr({}),getValue:r,setValue:i}}),h5=(o,r,i)=>bh(o,(l=>r(l.element)),((l,u)=>i(l.element,u))),Vw=o=>xt.config({store:{mode:"memory",initialValue:o}}),Uw=we("rgb-hex-update"),b5=we("slider-update"),v5=we("palette-update"),y5=we("valid-input"),C5=we("invalid-input"),w5=we("validating-input"),Xk="colorcustom.rgb.",TB={isEnabled:vn,setEnabled:Qe,immediatelyShow:Qe,immediatelyHide:Qe},x5=(o,r,i,l,u,m)=>{let f=(B,I)=>{let X=I.get();B!==X.isEnabled()&&(X.setEnabled(B),B?X.immediatelyShow():X.immediatelyHide())},v=(B,I,X)=>Jd.config({invalidClass:r("invalid"),notify:{onValidate:W=>{Wt(W,w5,{type:B})},onValid:W=>{f(!1,X),Wt(W,y5,{type:B,value:xt.getValue(W)})},onInvalid:W=>{f(!0,X),Wt(W,C5,{type:B,value:xt.getValue(W)})}},validator:{validate:W=>{let K=xt.getValue(W),V=I(K)?Nn.value(!0):Nn.error(o("aria.input.invalid"));return oa(V)},validateOnLoad:!1}}),y=(B,I,X,W,K)=>{let V=Rt(TB),U=o(Xk+"range"),J=Bn.parts.label({dom:{tag:"label"},components:[xs(X)]}),ee=Bn.parts.field({data:K,factory:Kf,inputAttributes:{type:"text","aria-label":W,...I==="hex"?{"aria-live":"polite"}:{}},inputClasses:[r("textfield")],inputBehaviours:st([v(I,B,V),ko.config({}),is.config({...u({tooltipText:"",onSetup:Ae=>{V.set({isEnabled:()=>is.isEnabled(Ae),setEnabled:Le=>is.setEnabled(Ae,Le),immediatelyShow:()=>is.immediateOpenClose(Ae,!0),immediatelyHide:()=>is.immediateOpenClose(Ae,!1)}),is.setEnabled(Ae,!1)},onShow:(Ae,Le)=>{is.setComponents(Ae,[{dom:{tag:"p",classes:[r("rgb-warning-note")]},components:[xs(o(I==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:Ae=>{Jd.isInvalid(Ae)&&Jd.run(Ae).get(Qe)}}),ue=we("aria-invalid"),ce=go(m("invalid",_.some(ue),"warning")),ge=[J,ee,go({dom:{tag:"div",classes:[r("invalid-icon")]},components:[ce.asSpec()]}).asSpec()],Re=I!=="hex"?[Bn.parts["aria-descriptor"]({text:U})]:[],Ne=ge.concat(Re);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[r("rgb-container")]},components:Ne}},x=(B,I)=>{let X=I.red,W=I.green,K=I.blue;xt.setValue(B,{red:X,green:W,blue:K})},A=go({dom:{tag:"div",classes:[r("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),E=(B,I)=>{A.getOpt(B).each((X=>{q(X.element,"background-color","#"+I.value)}))};return Wc({factory:()=>{let B={red:Rt(_.some(255)),green:Rt(_.some(255)),blue:Rt(_.some(255)),hex:Rt(_.some("ffffff"))},I=ge=>B[ge].get(),X=(ge,Re)=>{B[ge].set(Re)},W=ge=>{let Re=ge.red,Ne=ge.green,Ae=ge.blue;X("red",_.some(Re)),X("green",_.some(Ne)),X("blue",_.some(Ae))},K=(ge,Re)=>{let Ne=Re.event;Ne.type!=="hex"?X(Ne.type,_.none()):l(ge)},V=(ge,Re)=>{let Ne=Re.event;(Ae=>Ae.type==="hex")(Ne)?((Ae,Le)=>{i(Ae);let Ye=UO(Le);X("hex",_.some(Ye.value));let Dt=X1(Ye);x(Ae,Dt),W(Dt),Wt(Ae,Uw,{hex:Ye}),E(Ae,Ye)})(ge,Ne.value):((Ae,Le,Ye)=>{let Dt=parseInt(Ye,10);X(Le,_.some(Dt)),I("red").bind((nn=>I("green").bind((sn=>I("blue").map((Fn=>ng(nn,sn,Fn,1))))))).each((nn=>{let sn=((Fn,fo)=>{let Zo=el(fo);return ab.getField(Fn,"hex").each((tn=>{un.isFocused(tn)||xt.setValue(Fn,{hex:Zo.value})})),Zo})(Ae,nn);Wt(Ae,Uw,{hex:sn}),E(Ae,sn)}))})(ge,Ne.type,Ne.value)},U=ge=>({label:o(Xk+ge+".label"),description:o(Xk+ge+".description")}),J=U("red"),ee=U("green"),ue=U("blue"),ce=U("hex");return Xn(ab.sketch((ge=>({dom:{tag:"form",classes:[r("rgb-form")],attributes:{"aria-label":o("aria.color.picker")}},components:[ge.field("red",Bn.sketch(y(Nk,"red",J.label,J.description,255))),ge.field("green",Bn.sketch(y(Nk,"green",ee.label,ee.description,255))),ge.field("blue",Bn.sketch(y(Nk,"blue",ue.label,ue.description,255))),ge.field("hex",Bn.sketch(y(ZO,"hex",ce.label,ce.description,"ffffff"))),A.asSpec()],formBehaviours:st([Jd.config({invalidClass:r("form-invalid")}),on("rgb-form-events",[$e(y5,V),$e(C5,K),$e(w5,K)])])}))),{apis:{updateHex:(ge,Re)=>{xt.setValue(ge,{hex:Re.value}),((Ne,Ae)=>{let Le=X1(Ae);x(Ne,Le),W(Le)})(ge,Re),E(ge,Re)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(B,I,X)=>{B.updateHex(I,X)}},extraApis:{}})},S5=(o,r,i,l)=>Wc({name:"ColourPicker",configFields:[Ke("dom"),Te("onValidHex",Qe),Te("onInvalidHex",Qe)],factory:m=>{let f=x5(o,r,m.onValidHex,m.onInvalidHex,i,l),v=((K,V)=>{let U=Qd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[V("sv-palette-spectrum")]}}),J=Qd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[V("sv-palette-thumb")],innerHtml:`<div class=${V("sv-palette-inner-thumb")} role="presentation"></div>`}}),ee=(ce,ge)=>{let{width:Re,height:Ne}=ce,Ae=ce.getContext("2d");if(Ae===null)return;Ae.fillStyle=ge,Ae.fillRect(0,0,Re,Ne);let Le=Ae.createLinearGradient(0,0,Re,0);Le.addColorStop(0,"rgba(255,255,255,1)"),Le.addColorStop(1,"rgba(255,255,255,0)"),Ae.fillStyle=Le,Ae.fillRect(0,0,Re,Ne);let Ye=Ae.createLinearGradient(0,0,0,Ne);Ye.addColorStop(0,"rgba(0,0,0,0)"),Ye.addColorStop(1,"rgba(0,0,0,1)"),Ae.fillStyle=Ye,Ae.fillRect(0,0,Re,Ne)};return Wc({factory:ce=>{let ge=ve({x:0,y:0}),Re=st([io.config({find:_.some}),un.config({})]);return Qd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":K(["Saturation {0}%, Brightness {1}%",0,0])},classes:[V("sv-palette")]},model:{mode:"xy",getInitialValue:ge},rounded:!1,components:[U,J],onChange:(Ne,Ae,Le)=>{Yn(Le)||en(Ne.element,"aria-valuetext",K(["Saturation {0}%, Brightness {1}%",Math.floor(Le.x),Math.floor(100-Le.y)])),Wt(Ne,v5,{value:Le})},onInit:(Ne,Ae,Le,Ye)=>{ee(Le.element.dom,qO(GO))},sliderBehaviours:Re})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(ce,ge,Re)=>{((Ne,Ae)=>{let Le=Ne.components()[0].element.dom,Ye=mc(Ae,100,100),Dt=_2(Ye);ee(Le,qO(Dt))})(ge,Re)},setThumb:(ce,ge,Re)=>{((Ne,Ae)=>{let Le=_w(X1(Ae));Qd.setValue(Ne,{x:Le.saturation,y:100-Le.value}),en(Ne.element,"aria-valuetext",K(["Saturation {0}%, Brightness {1}%",Le.saturation,Le.value]))})(ge,Re)}},extraApis:{}})})(o,r),y={paletteRgba:Rt(GO),paletteHue:Rt(0)},x=go(((K,V)=>{let U=Qd.parts.spectrum({dom:{tag:"div",classes:[V("hue-slider-spectrum")],attributes:{role:"presentation"}}}),J=Qd.parts.thumb({dom:{tag:"div",classes:[V("hue-slider-thumb")],attributes:{role:"presentation"}}});return Qd.sketch({dom:{tag:"div",classes:[V("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ve(0)},components:[U,J],sliderBehaviours:st([un.config({})]),onChange:(ee,ue,ce)=>{en(ee.element,"aria-valuenow",Math.floor(360-3.6*ce)),Wt(ee,b5,{value:ce})}})})(0,r)),A=go(v.sketch({})),E=go(f.sketch({})),O=(K,V,U)=>{A.getOpt(K).each((J=>{v.setHue(J,U)}))},B=(K,V)=>{E.getOpt(K).each((U=>{f.updateHex(U,V)}))},I=(K,V,U)=>{x.getOpt(K).each((J=>{Qd.setValue(J,(ee=>100-ee/360*100)(U))}))},X=(K,V)=>{A.getOpt(K).each((U=>{v.setThumb(U,V)}))},W=(K,V,U,J)=>{((ee,ue)=>{let ce=X1(ee);y.paletteRgba.set(ce),y.paletteHue.set(ue)})(V,U),Ot(J,(ee=>{ee(K,V,U)}))};return{uid:m.uid,dom:m.dom,components:[A.asSpec(),x.asSpec(),E.asSpec()],behaviours:st([on("colour-picker-events",[$e(Uw,(()=>{let K=[O,I,X];return(V,U)=>{let J=U.event.hex,ee=(ue=>_w(X1(ue)))(J);W(V,J,ee.hue,K)}})()),$e(v5,(()=>{let K=[B];return(V,U)=>{let J=U.event.value,ee=y.paletteHue.get(),ue=mc(ee,J.x,100-J.y),ce=sm(ue);W(V,ce,ee,K)}})()),$e(b5,(()=>{let K=[O,B];return(V,U)=>{let J=(Re=>(100-Re)/100*360)(U.event.value),ee=y.paletteRgba.get(),ue=_w(ee),ce=mc(J,ue.saturation,ue.value),ge=sm(ce);W(V,ge,J,K)}})())]),io.config({find:K=>E.getOpt(K)}),Ft.config({mode:"acyclic"})])}}}),AB={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"};var _B=tinymce.util.Tools.resolve("tinymce.Resource");let k5=o=>Sn(o,"init");var lf=tinymce.util.Tools.resolve("tinymce.util.Tools");let Jk=we("browse.files.event"),OB=(o,r,i)=>{let l=(x,A)=>{A.stop()},u=x=>(A,E)=>{Ot(x,(O=>{O(A,E)}))},m=go({dom:{tag:"input",attributes:{type:"file",accept:o.allowedFileTypes.getOr("image/*")},styles:{display:"none"}},behaviours:st([on("input-file-events",[Hm(ku()),Hm(Zt())])])}),f=o.label.map((x=>lp(x,r))),v=Bn.parts.field({factory:la,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[xs(r.translate(o.buttonLabel.getOr("Browse for an image"))),m.asSpec()],action:x=>{m.get(x).element.dom.click()},buttonBehaviours:st([hh(),Vw(i.getOr([])),ko.config({}),gh((()=>r.checkUiComponentContext(o.context).shouldDisable)),ea((()=>r.checkUiComponentContext(o.context)))])}),y={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:st([Ut.config({disabled:()=>r.checkUiComponentContext(o.context).shouldDisable}),ea((()=>r.checkUiComponentContext(o.context))),Zn.config({toggleClass:"dragenter",toggleOnExecute:!1}),on("dropzone-events",[$e("dragenter",u([l,Zn.toggle])),$e("dragleave",u([l,Zn.toggle])),$e("dragover",l),$e("drop",u([l,(x,A)=>{if(!Ut.isDisabled(x)){let E=A.event.raw;Wt(x,Jk,{files:E.dataTransfer?.files})}}])),$e($d(),((x,A)=>{let E=A.event.raw.target;Wt(x,Jk,{files:E.files})}))])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[xs(r.translate(o.dropAreaLabel.getOr("Drop an image here")))]},v]}]};return R2(f,y,["tox-form__group--stretched"],[on("handle-files",[$e(Jk,((x,A)=>{Bn.getField(x).each((E=>{var O,B;O=E,(B=A.event.files)&&(xt.setValue(O,((I,X,W)=>{let K=lf.explode(X.getOption("images_file_types"));return pn(dt(I),(V=>W.fold((()=>Ho(K,(U=>bc(V.name.toLowerCase(),`.${U.toLowerCase()}`)))),(U=>Ho(U,(J=>bc(V.name.toLowerCase(),`.${J.toLowerCase()}`)))))))})(B,r,o.allowedFileExtensions)),Wt(O,jl,{name:o.name}))}))}))])])},Qk=we("alloy-fake-before-tabstop"),Pb=we("alloy-fake-after-tabstop"),E5=o=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:o},behaviours:st([un.config({ignore:!0}),ko.config({})])}),T5=(o,r)=>({dom:{tag:"div",classes:["tox-navobj",...o.getOr([])]},components:[E5([Qk]),r,E5([Pb])],behaviours:st([Yk(1)])}),A5=(o,r)=>{Wt(o,zi(),{raw:{which:9,shiftKey:r}})},DB=(o,r)=>{let i=r.element;Js(i,Qk)?A5(o,!0):Js(i,Pb)&&A5(o,!1)},M2=o=>xm(o,["."+Qk,"."+Pb].join(","),zt),Zw=we("update-dialog"),_5=we("update-title"),O5=we("update-body"),D5=we("update-footer"),R5=we("body-send-message"),Ww=we("dialog-focus-shifted"),e3=bi().browser,B2=e3.isSafari(),t3=e3.isFirefox(),N5=B2||t3,RB=e3.isChromium(),NB=({scrollTop:o,scrollHeight:r,clientHeight:i})=>Math.ceil(o)+i>=r,n3=(o,r)=>o.scrollTo(0,r==="bottom"?99999999:r),M5=(o,r,i)=>{let l=o.dom;_.from(l.contentDocument).fold(i,(u=>{let m=0,f=((y,x)=>{let A=y.body;return _.from(!/^<!DOCTYPE (html|HTML)/.test(x)&&(!RB&&!B2||$t(A)&&(A.scrollTop!==0||Math.abs(A.scrollHeight-A.clientHeight)>1))?A:y.documentElement)})(u,r).map((y=>(m=y.scrollTop,y))).forall(NB),v=()=>{let y=l.contentWindow;$t(y)&&(f?n3(y,"bottom"):!f&&N5&&m!==0&&n3(y,m))};B2&&l.addEventListener("load",v,{once:!0}),u.open(),u.write(r),u.close(),B2||v()}))},MB=Rs(N5,B2?500:200).map((o=>((r,i)=>{let l=null,u=null;return{cancel:()=>{To(l)||(clearTimeout(l),l=null,u=null)},throttle:(...m)=>{u=m,To(l)&&(l=setTimeout((()=>{let f=u;l=null,u=null,r.apply(null,f)}),i))}}})(M5,o))),o3=we("toolbar.button.execute"),vh=we("common-button-display-events"),B5={[Xe()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Vi()]:["toolbar-button-events",vh],[hl()]:["toolbar-button-events","dropdown-events","tooltipping"],[gs()]:["focusing","alloy.base.behaviour",vh]},s3=o=>q(o.element,"width",ga(o.element,"width")),jw=(o,r,i)=>zu(o,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:i},r),r3=(o,r)=>jw(o,r,[]),yh=(o,r)=>jw(o,r,[Cn.config({})]),P5=(o,r,i)=>({dom:{tag:"span",classes:[`${r}__select-label`]},components:[xs(i.translate(o))],behaviours:st([Cn.config({})])}),Td=we("update-menu-text"),Q1=we("update-menu-icon"),L5=we("update-tooltip-text"),a3=(o,r,i,l)=>{let u=Rt(Qe),m=Rt(o.tooltip),f=o.text.map((W=>go(P5(W,r,i.providers)))),v=o.icon.map((W=>go(yh(W,i.providers.icons)))),y=(W,K)=>{let V=xt.getValue(W);return un.focus(V),Wt(V,"keydown",{raw:K.event.raw}),Kc.close(V),_.some(!0)},x=o.role.fold((()=>({})),(W=>({role:W}))),A=_.from(o.listRole).map((W=>({listRole:W}))).getOr({}),E=o.ariaLabel.fold((()=>({})),(W=>({"aria-label":i.providers.translate(W)}))),O=zu("chevron-down",{tag:"div",classes:[`${r}__select-chevron`]},i.providers.icons),B=we("common-button-display-events"),I="dropdown-events";return go(Kc.sketch({...o.uid?{uid:o.uid}:{},...x,...A,dom:{tag:"button",classes:[r,`${r}--select`].concat(it(o.classes,(W=>`${r}--${W}`))),attributes:{...E,...$t(l)?{"data-mce-name":l}:{}}},components:Ob([v.map((W=>W.asSpec())),f.map((W=>W.asSpec())),_.some(O)]),matchWidth:!0,useMinWidth:!0,onOpen:(W,K,V)=>{o.searchable&&(U=>{Y4(U).each((J=>un.focus(J)))})(V)},dropdownBehaviours:st([...o.dropdownBehaviours,gh((()=>o.disabled||i.providers.checkUiComponentContext(o.context).shouldDisable)),ea((()=>i.providers.checkUiComponentContext(o.context))),qf.config({}),Cn.config({}),...o.tooltip.map((W=>is.config(i.providers.tooltips.getConfig({tooltipText:i.providers.translate(W),onShow:K=>{if(Ra(m.get(),o.tooltip,((V,U)=>U!==V)).getOr(!1)){let V=i.providers.translate(m.get().getOr(""));is.setComponents(K,i.providers.tooltips.getComponents({tooltipText:V}))}}})))).toArray(),on(I,[tg(o,u),G1(o,u)]),on(B,[as(((W,K)=>{o.listRole!=="listbox"&&s3(W)}))]),on("update-dropdown-width-variable",[$e($i(),((W,K)=>Kc.close(W)))]),on("menubutton-update-display-text",[$e(Td,((W,K)=>{f.bind((V=>V.getOpt(W))).each((V=>{Cn.set(V,[xs(i.providers.translate(K.event.text))])}))})),$e(Q1,((W,K)=>{v.bind((V=>V.getOpt(W))).each((V=>{Cn.set(V,[yh(K.event.icon,i.providers.icons)])}))})),$e(L5,((W,K)=>{let V=i.providers.translate(K.event.text);en(W.element,"aria-label",V),m.set(_.some(K.event.text))}))])]),eventOrder:Xn(B5,{[gs()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Vi()]:["toolbar-button-events",is.name(),I,B]}),sandboxBehaviours:st([Ft.config({mode:"special",onLeft:y,onRight:y}),on("dropdown-sandbox-events",[$e(Z_,((W,K)=>{(V=>{let U=xt.getValue(V),J=f2(V).map(W_);Kc.refetch(U).get((()=>{let ee=br.getCoupled(U,"sandbox");J.each((ue=>f2(ee).each((ce=>((ge,Re)=>{xt.setValue(ge,Re.fetchPattern),ge.element.dom.selectionStart=Re.selectionStart,ge.element.dom.selectionEnd=Re.selectionEnd})(ce,ue)))))}))})(W),K.stop()})),$e($u,((W,K)=>{((V,U)=>{(J=>uo.getState(J).bind(Vn.getHighlighted).bind(Vn.getHighlighted))(V).each((J=>{((ee,ue,ce,ge)=>{let Re={...ge,target:ue};ee.getSystem().triggerEvent(ce,ue,Re)})(V,J.element,U.event.eventType,U.event.interactionEvent)}))})(W,K),K.stop()}))])]),lazySink:i.getSink,toggleClass:`${r}--active`,parts:{menu:{...g2(0,o.columns,o.presets),fakeFocus:o.searchable,...o.listRole==="listbox"?{}:{onHighlightItem:Uk,onCollapseMenu:(W,K,V)=>{Vn.getHighlighted(V).each((U=>{Uk(W,V,U)}))},onDehighlightItem:CB}}},getAnchorOverrides:()=>({maxHeightFunction:(W,K)=>{vv()(W,K-10)}}),fetch:W=>$r(ut(o.fetch,W))})).asSpec()},I5=o=>o.type==="separator",BB={type:"separator"},F5=(o,r)=>{let i=((l,u)=>{let m=L(l,((f,v)=>(y=>Wn(y))(v)?v===""?f:v==="|"?f.length>0&&!I5(f[f.length-1])?f.concat([BB]):f:Sn(u,v.toLowerCase())?f.concat([u[v.toLowerCase()]]):f:f.concat([v])),[]);return m.length>0&&I5(m[m.length-1])&&m.pop(),m})(Wn(o)?o.split(" "):o,r);return so(i,((l,u)=>{if((m=>Sn(m,"getSubmenuItems"))(u)){let m=(v=>{let y=qt(v,"value").getOrThunk((()=>we("generated-menu-item")));return Xn({value:y},v)})(u),f=((v,y)=>{let x=v.getSubmenuItems(),A=F5(x,y);return{item:v,menus:Xn(A.menus,{[v.value]:A.items}),expansions:Xn(A.expansions,{[v.value]:v.value})}})(m,r);return{menus:Xn(l.menus,f.menus),items:[f.item,...l.items],expansions:Xn(l.expansions,f.expansions)}}return{...l,items:[u,...l.items]}}),{menus:{},expansions:{},items:[]})},Lb=(o,r,i,l)=>{let u=we("primary-menu"),m=F5(o,i.shared.providers.menuItems());if(m.items.length===0)return _.none();let f=(E=>E.search.fold((()=>({searchMode:"no-search"})),(O=>({searchMode:"search-with-field",placeholder:O.placeholder}))))(l),v=d5(u,m.items,r,i,l.isHorizontalMenu,f),y=(E=>E.search.fold((()=>({searchMode:"no-search"})),(O=>({searchMode:"search-with-results"}))))(l),x=_s(m.menus,((E,O)=>d5(O,E,r,i,!1,y))),A=Xn(x,wi(u,v));return _.from(Xi.tieredData(u,A,m.expansions))},qw=o=>!Sn(o,"items"),H5="data-value",z5=(o,r,i,l,u)=>it(i,(m=>qw(m)?{type:"togglemenuitem",...u?{}:{role:"option"},text:m.text,value:m.value,active:m.value===l,onAction:()=>{xt.setValue(o,m.value),Wt(o,jl,{name:r}),un.focus(o)}}:{type:"nestedmenuitem",text:m.text,getSubmenuItems:()=>z5(o,r,m.items,l,u)})),i3=(o,r)=>Mt(o,(i=>qw(i)?Rs(i.value===r,i):i3(i.items,r))),Gw=o=>{let r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},i=o.value.toFixed((l=o.unit)in r?r[l]:1);var l;return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+o.unit},Kw=o=>{let r=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(o);if(r!==null){let i=parseFloat(r[1]),l=r[2];return Nn.value({value:i,unit:l})}return Nn.error(o)},$5=(o,r)=>{let i={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=u=>Sn(i,u);return o.unit===r?_.some(o.value):l(o.unit)&&l(r)?i[o.unit]===i[r]?_.some(o.value):_.some(o.value/i[o.unit]*i[r]):_.none()},Yw=o=>_.none(),Ib=(o,r)=>{let i=Kw(o).toOptional(),l=Kw(r).toOptional();return Ra(i,l,((u,m)=>$5(u,m.unit).map((f=>m.value/f)).map((f=>{return v=f,y=m.unit,x=>$5(x,y).map((A=>({value:A*v,unit:y})));var v,y})).getOr(Yw))).getOr(Yw)},l3=(o,r)=>{let i=o.label.map((O=>lp(O,r))),l=[Ut.config({disabled:()=>o.disabled||r.checkUiComponentContext(o.context).shouldDisable}),ea((()=>r.checkUiComponentContext(o.context))),Ft.config({mode:"execution",useEnter:o.multiline!==!0,useControlEnter:o.multiline===!0,execute:O=>($n(O,af),_.some(!0))}),on("textfield-change",[$e(Pc(),((O,B)=>{Wt(O,jl,{name:o.name})})),$e(Oe(),((O,B)=>{Wt(O,jl,{name:o.name})}))]),ko.config({})],u=o.validation.map((O=>Jd.config({getRoot:B=>Rr(B.element),invalidClass:"tox-invalid",validator:{validate:B=>{let I=xt.getValue(B),X=O.validator(I);return oa(X===!0?Nn.value(I):Nn.error(X))},validateOnLoad:O.validateOnLoad}}))).toArray(),m=o.placeholder.fold(ve({}),(O=>({placeholder:r.translate(O)}))),f=o.inputMode.fold(ve({}),(O=>({inputmode:O}))),v={...o.spellcheck.fold(ve({}),(O=>({spellcheck:O}))),...m,...f,"data-mce-name":o.name},y=Bn.parts.field({tag:o.multiline===!0?"textarea":"input",...o.data.map((O=>({data:O}))).getOr({}),inputAttributes:v,inputClasses:[o.classname],inputBehaviours:st(Vs([l,u])),selectOnFocus:!1,factory:Kf}),x=o.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[y]}:y,A=(o.flex?["tox-form__group--stretched"]:[]).concat(o.maximized?["tox-form-group--maximize"]:[]),E=[Ut.config({disabled:()=>o.disabled||r.checkUiComponentContext(o.context).shouldDisable,onDisabled:O=>{Bn.getField(O).each(Ut.disable)},onEnabled:O=>{Bn.getField(O).each(Ut.enable)}}),ea((()=>r.checkUiComponentContext(o.context)))];return R2(i,x,A,E)},V5=o=>({isEnabled:()=>!Ut.isDisabled(o),setEnabled:r=>Ut.set(o,!r),setActive:r=>{let i=o.element;r?(bs(i,"tox-tbtn--enabled"),en(i,"aria-pressed",!0)):($o(i,"tox-tbtn--enabled"),Bs(i,"aria-pressed"))},isActive:()=>Js(o.element,"tox-tbtn--enabled"),setTooltip:r=>{Wt(o,L5,{text:r})},setText:r=>{Wt(o,Td,{text:r})},setIcon:r=>Wt(o,Q1,{icon:r})}),P2=(o,r,i,l,u=!0,m)=>{let f=o.buttonType==="bordered"?["bordered"]:[];return a3({text:o.text,icon:o.icon,tooltip:o.tooltip,ariaLabel:o.tooltip,searchable:o.search.isSome(),role:l,fetch:(v,y)=>{let x={pattern:o.search.isSome()?c5(v):""};o.fetch((A=>{y(Lb(A,nm.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:o.search}))}),x,V5(v))},onSetup:o.onSetup,getApi:v=>V5(v),columns:1,presets:"normal",classes:f,dropdownBehaviours:[...u?[ko.config({})]:[]],context:o.context},r,i.shared,m)},U5=(o,r,i)=>{let l=m=>f=>{let v=!f.isActive();f.setActive(v),m.storage.set(v),i.shared.getSink().each((y=>{r().getOpt(y).each((x=>{ct(x.element),Wt(x,sg,{name:m.name,value:m.storage.get()})}))}))},u=m=>f=>{f.setActive(m.storage.get())};return m=>{m(it(o,(f=>{let v=f.text.fold((()=>({})),(y=>({text:y})));return{type:f.type,active:!1,...v,context:f.context,onAction:l(f),onSetup:u(f)}})))}},Z5=o=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":o}},components:[xs(o)]}),W5=(o,r,i)=>{o.customStateIcon.each((l=>r.push(q5(l,i.shared.providers.icons,o.customStateIconTooltip.fold((()=>[]),(u=>[is.config(i.shared.providers.tooltips.getConfig({tooltipText:u}))])),["tox-icon-custom-state"]))))},j5=we("leaf-label-event-id"),c3=({leaf:o,onLeafAction:r,visible:i,treeId:l,selectedId:u,backstage:m})=>{let f=o.menu.map((y=>P2(y,"tox-mbtn",m,_.none(),i))),v=[Z5(o.title)];return W5(o,v,m),f.each((y=>v.push(y))),la.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(i?["tox-tree--leaf__label--visible"]:[])},components:v,role:"treeitem",action:y=>{r(o.id),y.getSystem().broadcastOn([`update-active-item-${l}`],{value:o.id})},eventOrder:{[zi()]:[j5,"keying"]},buttonBehaviours:st([...i?[ko.config({})]:[],Zn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),jc.config({channels:{[`update-active-item-${l}`]:{onReceive:(y,x)=>{(x.value===o.id?Zn.on:Zn.off)(y)}}}}),on(j5,[as(((y,x)=>{u.each((A=>{(A===o.id?Zn.on:Zn.off)(y)}))})),$e(zi(),((y,x)=>{let A=x.event.raw.code==="ArrowLeft",E=x.event.raw.code==="ArrowRight";A?(Fi(y.element,".tox-tree--directory").each((O=>{y.getSystem().getByDom(O).each((B=>{Cp(O,".tox-tree--directory__label").each((I=>{B.getSystem().getByDom(I).each(un.focus)}))}))})),x.stop()):E&&x.stop()}))])])})},q5=(o,r,i,l,u)=>zu(o,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(l||[]),behaviours:i,attributes:u},r),G5=we("directory-label-event-id"),PB=({directory:o,visible:r,noChildren:i,backstage:l})=>{let u=o.menu.map((y=>P2(y,"tox-mbtn",l,_.none()))),m=[{dom:{tag:"div",classes:["tox-chevron"]},components:[(f=l.shared.providers.icons,q5("chevron-right",f,[]))]},Z5(o.title)];var f;W5(o,m,l),u.each((y=>{m.push(y)}));let v=y=>{Fi(y.element,".tox-tree--directory").each((x=>{y.getSystem().getByDom(x).each((A=>{let E=!Zn.isOn(A);Zn.toggle(A),Wt(y,"expand-tree-node",{expanded:E,node:o.id})}))}))};return la.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(r?["tox-tree--directory__label--visible"]:[])},components:m,action:v,eventOrder:{[zi()]:[G5,"keying"]},buttonBehaviours:st([...r?[ko.config({})]:[],on(G5,[$e(zi(),((y,x)=>{let A=x.event.raw.code==="ArrowRight",E=x.event.raw.code==="ArrowLeft";A&&i&&x.stop(),(A||E)&&Fi(y.element,".tox-tree--directory").each((O=>{y.getSystem().getByDom(O).each((B=>{!Zn.isOn(B)&&A||Zn.isOn(B)&&E?(v(y),x.stop()):E&&!Zn.isOn(B)&&(Fi(B.element,".tox-tree--directory").each((I=>{Cp(I,".tox-tree--directory__label").each((X=>{B.getSystem().getByDom(X).each(un.focus)}))})),x.stop())}))}))}))])])})},LB=({children:o,onLeafAction:r,visible:i,treeId:l,expandedIds:u,selectedId:m,backstage:f})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:o.map((v=>v.type==="leaf"?c3({leaf:v,selectedId:m,onLeafAction:r,visible:i,treeId:l,backstage:f}):Xw({directory:v,expandedIds:u,selectedId:m,onLeafAction:r,labelTabstopping:i,treeId:l,backstage:f}))),behaviours:st([Ul.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:i}),Cn.config({})])}),K5=we("directory-event-id"),Xw=({directory:o,onLeafAction:r,labelTabstopping:i,treeId:l,backstage:u,expandedIds:m,selectedId:f})=>{let{children:v}=o,y=Rt(m),x=m.includes(o.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[PB({directory:o,visible:i,noChildren:o.children.length===0,backstage:u}),LB({children:v,expandedIds:m,selectedId:f,onLeafAction:r,visible:x,treeId:l,backstage:u})],behaviours:st([on(K5,[as(((A,E)=>{Zn.set(A,x)})),$e("expand-tree-node",((A,E)=>{let{expanded:O,node:B}=E.event;y.set(O?[...y.get(),B]:y.get().filter((I=>I!==B)))}))]),Zn.config({...o.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(A,E)=>{let O=A.components()[1],B=(I=E,v.map((X=>X.type==="leaf"?c3({leaf:X,selectedId:f,onLeafAction:r,visible:I,treeId:l,backstage:u}):Xw({directory:X,expandedIds:y.get(),selectedId:f,onLeafAction:r,labelTabstopping:I,treeId:l,backstage:u}))));var I;E?Ul.grow(O):Ul.shrink(O),Cn.set(O,B)}})])}},IB=we("tree-event-id"),L2=(o,r,i=[],l,u,m,f)=>{let v=r.fold((()=>({})),(A=>({action:A}))),y={buttonBehaviours:st([BO((()=>!o.enabled||f.checkUiComponentContext(o.context).shouldDisable)),ea((()=>f.checkUiComponentContext(o.context))),ko.config({}),...m.map((A=>is.config(f.tooltips.getConfig({tooltipText:f.translate(A)})))).toArray(),on("button press",[Xh("click")])].concat(i)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...v},x=Xn(y,{dom:l});return Xn(x,{components:u})},Y5=(o,r,i,l=[],u)=>{let m={tag:"button",classes:["tox-tbtn"],attributes:{...o.tooltip.map((y=>({"aria-label":i.translate(y)}))).getOr({}),"data-mce-name":u}},f=o.icon.map((y=>r3(y,i.icons))),v=Ob([f]);return L2(o,r,l,m,v,o.tooltip,i)},Jw=o=>{switch(o){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];default:return["tox-button","tox-button--secondary"]}},u3=(o,r,i,l=[],u=[])=>{let m=i.translate(o.text),f=o.icon.map((E=>r3(E,i.icons))),v=[f.getOrThunk((()=>xs(m)))],y=o.buttonType.getOr(o.primary||o.borderless?"primary":"secondary"),x={tag:"button",classes:[...Jw(y),...f.isSome()?["tox-button--icon"]:[],...o.borderless?["tox-button--naked"]:[],...u],attributes:{"aria-label":m,"data-mce-name":o.text}},A=o.icon.map(ve(m));return L2(o,r,l,x,v,A,i)},X5=(o,r,i,l=[],u=[])=>{let m=u3(o,_.some(r),i,l,u);return la.sketch(m)},J5=(o,r)=>i=>{r==="custom"?Wt(i,sg,{name:o,value:{}}):r==="submit"?$n(i,af):r==="cancel"?$n(i,ph):console.error("Unknown button type: ",r)},Qw=(o,r,i)=>{if(((l,u)=>u==="menu")(0,r)){let l=()=>f,u=o,m={...o,buttonType:"default",type:"menubutton",search:_.none(),onSetup:v=>(v.setEnabled(o.enabled),Qe),fetch:U5(u.items,l,i)},f=go(P2(m,"tox-tbtn",i,_.none(),!0,o.text.or(o.tooltip).getOrUndefined()));return f.asSpec()}if(((l,u)=>u==="custom"||u==="cancel"||u==="submit")(0,r)){let l=J5(o.name,r),u={...o,context:r==="cancel"?"any":o.context,borderless:!1};return X5(u,l,i.shared.providers,[])}if(((l,u)=>u==="togglebutton")(0,r))return((l,u,m)=>{let f=l.icon.map((K=>yh(K,u.icons))).map(go),v=l.buttonType.getOr(l.primary?"primary":"secondary"),y={...l,name:l.name??"",primary:v==="primary",tooltip:l.tooltip,enabled:l.enabled??!1,borderless:!1},x=y.tooltip.or(l.text).map((K=>({"aria-label":u.translate(K)}))).getOr({}),A=Jw(v??"secondary"),E=l.icon.isSome()&&l.text.isSome(),O={tag:"button",classes:[...A.concat(l.icon.isSome()?["tox-button--icon"]:[]),...l.active?["tox-button--enabled"]:[],...E?["tox-button--icon-and-text"]:[]],attributes:{...x,...$t(m)?{"data-mce-name":m}:{}}},B=u.translate(l.text.getOr("")),I=xs(B),X=[...Ob([f.map((K=>K.asSpec()))]),...l.text.isSome()?[I]:[]],W=L2(y,_.some((K=>{Wt(K,sg,{name:l.name,value:{setIcon:V=>{f.map((U=>U.getOpt(K).each((J=>{Cn.set(J,[yh(V,u.icons)])}))))}}})})),[],O,X,l.tooltip,u);return la.sketch(W)})(o,i.shared.providers,o.text.or(o.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",r),new Error("Unknown footer button type")},FB={type:"separator"},d3=o=>({type:"menuitem",value:o.url,text:o.title,meta:{attach:o.attach},onAction:Qe}),ex=(o,r)=>({type:"menuitem",value:r,text:o,meta:{attach:void 0},onAction:Qe}),Q5=(o,r)=>(i=>it(i,d3))(((i,l)=>pn(l,(u=>u.type===i)))(o,r)),eD=o=>Q5("header",o.targets),HB=o=>Q5("anchor",o.targets),zB=o=>_.from(o.anchorTop).map((r=>ex("<top>",r))).toArray(),$B=o=>_.from(o.anchorBottom).map((r=>ex("<bottom>",r))).toArray(),tx=(o,r)=>{let i=o.toLowerCase();return pn(r,(l=>{let u=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,m=l.value??"";return _r(u.toLowerCase(),i)||_r(m.toLowerCase(),i)}))},m3=we("aria-invalid"),ua=o=>(r,i,l,u,m)=>qt(i,"name").fold((()=>o(i,u,_.none(),m)),(f=>r.field(f,o(i,u,qt(l,f),m)))),VB={bar:ua(((o,r)=>((i,l)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:it(i.items,l.interpreter)}))(o,r.shared))),collection:ua(((o,r,i)=>f5(o,r.shared.providers,i))),alertbanner:ua(((o,r)=>((i,l)=>{let u=ow(i.icon,l.icons);return Xd.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${i.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:i.url?void 0:u},components:i.url?[la.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:u,attributes:{title:l.translate(i.iconTooltip)}},action:m=>Wt(m,sg,{name:"alert-banner",value:i.url}),buttonBehaviours:st([L_()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:l.translate(i.text)}}]})})(o,r.shared.providers))),input:ua(((o,r,i)=>((l,u,m)=>l3({name:l.name,multiline:!1,label:l.label,inputMode:l.inputMode,placeholder:l.placeholder,flex:!1,disabled:!l.enabled,classname:"tox-textfield",validation:_.none(),maximized:l.maximized,data:m,context:l.context,spellcheck:_.none()},u))(o,r.shared.providers,i))),textarea:ua(((o,r,i)=>((l,u,m)=>l3({name:l.name,multiline:!0,label:l.label,inputMode:_.none(),placeholder:l.placeholder,flex:!0,disabled:!l.enabled,classname:"tox-textarea",validation:_.none(),maximized:l.maximized,data:m,context:l.context,spellcheck:l.spellcheck},u))(o,r.shared.providers,i))),label:ua(((o,r,i,l)=>((u,m,f)=>{let v="tox-label",y=u.align==="center"?[`${v}--center`]:[],x=u.align==="end"?[`${v}--end`]:[],A=go({dom:{tag:"label",classes:[v,...y,...x]},components:[xs(m.providers.translate(u.label))]}),E=it(u.items,m.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[A.asSpec(),...E],behaviours:st([hh(),Cn.config({}),(O=_.none(),h5(O,gf,bg)),Ft.config({mode:"acyclic"}),on("label",[as((B=>{u.for.each((I=>{f(I).each((X=>{A.getOpt(B).each((W=>{let K=ds(X.element,"id")??we("form-field");en(X.element,"id",K),en(W.element,"for",K)}))}))}))}))])])};var O})(o,r.shared,l))),iframe:(bD=(o,r,i)=>((l,u,m)=>{let f="tox-dialog__iframe",v=l.transparent?[]:[`${f}--opaque`],y=l.border?["tox-navobj-bordered"]:[],x={...l.label.map((B=>({title:B}))).getOr({}),...m.map((B=>({srcdoc:B}))).getOr({}),...l.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},A=((B,I)=>{let X=Rt(B.getOr(""));return{getValue:W=>X.get(),setValue:(W,K)=>{if(X.get()!==K){let V=W.element,U=()=>en(V,"srcdoc",K);I?MB.fold(ve(M5),(J=>J.throttle))(V,K,U):U()}X.set(K)}}})(m,l.streamContent),E=l.label.map((B=>lp(B,u))),O=Bn.parts.field({factory:{sketch:B=>T5(_.from(y),{uid:B.uid,dom:{tag:"iframe",attributes:x,classes:[f,...v]},behaviours:st([ko.config({}),un.config({}),bh(m,A.getValue,A.setValue),jc.config({channels:{[Ww]:{onReceive:(I,X)=>{X.newFocus.each((W=>{Rr(I.element).each((K=>{(wn(I.element,W)?bs:$o)(K,"tox-navobj-bordered-focus")}))}))}}}})])})}});return R2(E,O,["tox-form__group--stretched"],[])})(o,r.shared.providers,i),(o,r,i,l,u)=>{let m=Xn(r,{source:"dynamic"});return ua(bD)(o,m,i,l,u)}),button:ua(((o,r)=>((i,l)=>{let u=J5(i.name,"custom");return m=_.none(),f=Bn.parts.field({factory:la,...u3(i,_.some(u),l,[Vw(""),hh()])}),R2(m,f,[],[]);var m,f})(o,r.shared.providers))),checkbox:ua(((o,r,i)=>((l,u,m)=>{let f=E=>(E.element.dom.click(),_.some(!0)),v=Bn.parts.field({factory:{sketch:ht},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:st([hh(),Ut.config({disabled:()=>!l.enabled||u.checkUiComponentContext(l.context).shouldDisable,onDisabled:E=>{Rr(E.element).each((O=>bs(O,"tox-checkbox--disabled")))},onEnabled:E=>{Rr(E.element).each((O=>$o(O,"tox-checkbox--disabled")))}}),ko.config({}),un.config({}),h5(m,bu,Ld),Ft.config({mode:"special",onEnter:f,onSpace:f,stopSpaceKeyup:!0}),on("checkbox-events",[$e($d(),((E,O)=>{Wt(E,jl,{name:l.name})}))])])}),y=Bn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[xs(u.translate(l.label))],behaviours:st([qf.config({})])}),x=E=>zu(E==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+E]},u.icons),A=go({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[x("checked"),x("unchecked")]});return Bn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[v,A.asSpec(),y],fieldBehaviours:st([Ut.config({disabled:()=>!l.enabled||u.checkUiComponentContext(l.context).shouldDisable}),ea((()=>u.checkUiComponentContext(l.context)))])})})(o,r.shared.providers,i))),colorinput:ua(((o,r,i)=>((l,u,m,f)=>{let v=Bn.parts.field({factory:Kf,inputClasses:["tox-textfield"],data:f,onSetValue:E=>Jd.run(E).get(Qe),inputBehaviours:st([Ut.config({disabled:()=>u.providers.isDisabled()||u.providers.checkUiComponentContext(l.context).shouldDisable}),ea((()=>u.providers.checkUiComponentContext(l.context))),ko.config({}),Jd.config({invalidClass:"tox-textbox-field-invalid",getRoot:E=>Rr(E.element),notify:{onValid:E=>{let O=xt.getValue(E);Wt(E,Kk,{color:O})}},validator:{validateOnLoad:!1,validate:E=>{let O=xt.getValue(E);if(O.length===0)return oa(Nn.value(!0));{let B=rl("span");q(B,"background-color",O);let I=Hs(B,"background-color").fold((()=>Nn.error("blah")),(X=>Nn.value(O)));return oa(I)}}}})]),selectOnFocus:!1}),y=l.label.map((E=>lp(E,u.providers))),x=(E,O)=>{Wt(E,zw,{value:O})},A=go(((E,O)=>Kc.sketch({dom:E.dom,components:E.components,toggleClass:"mce-active",dropdownBehaviours:st([gh((()=>O.providers.isDisabled()||O.providers.checkUiComponentContext(E.context).shouldDisable)),ea((()=>O.providers.checkUiComponentContext(E.context))),qf.config({}),ko.config({})]),layouts:E.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:O.getSink,fetch:B=>$r((I=>E.fetch(I))).map((I=>_.from(Zk(Xn(Hw(we("menu-value"),I,(X=>{E.onItemAction(B,X)}),E.columns,E.presets,nm.CLOSE_ON_EXECUTE,zt,O.providers),{movement:O2(E.columns,E.presets)}))))),parts:{menu:g2(0,0,E.presets)}}))({dom:{tag:"span",attributes:{"aria-label":u.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Kr,Lr,Yr],onLtr:()=>[Lr,Kr,Yr]},components:[],fetch:Mb(m.getColors(l.storageKey),l.storageKey,m.hasCustomColors()),columns:m.getColorCols(l.storageKey),presets:"color",onItemAction:(E,O)=>{A.getOpt(E).each((B=>{O==="custom"?m.colorPicker((I=>{I.fold((()=>$n(B,$w)),(X=>{x(B,X),XO(l.storageKey,X)}))}),"#ffffff"):x(B,O==="remove"?"":O)}))},context:l.context},u));return Bn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:y.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[v,A.asSpec()]}]),fieldBehaviours:st([on("form-field-events",[$e(Kk,((E,O)=>{A.getOpt(E).each((B=>{q(B.element,"background-color",O.event.color)})),Wt(E,jl,{name:l.name})})),$e(zw,((E,O)=>{Bn.getField(E).each((B=>{xt.setValue(B,O.event.value),io.getCurrent(E).each(un.focus)}))})),$e($w,((E,O)=>{Bn.getField(E).each((B=>{io.getCurrent(E).each(un.focus)}))}))])])})})(o,r.shared,r.colorinput,i))),colorpicker:ua(((o,r,i)=>((l,u,m)=>{let f=x=>"tox-"+x,v=S5((x=>A=>Wn(A)?x.translate(AB[A]):x.translate(A))(u),f,u.tooltips.getConfig,((x,A,E=x,O=x)=>zu(E,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+x],attributes:{title:u.translate(O),"aria-live":"polite",...A.fold((()=>({})),(B=>({id:B})))}},u.icons))),y=go(v.sketch({dom:{tag:"div",classes:[f("color-picker-container")],attributes:{role:"presentation"}},onValidHex:x=>{Wt(x,sg,{name:"hex-valid",value:!0})},onInvalidHex:x=>{Wt(x,sg,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[y.asSpec()],behaviours:st([bh(m,(x=>{let A=y.get(x);return io.getCurrent(A).bind((E=>xt.getValue(E).hex)).map((E=>"#"+yo(E,"#"))).getOr("")}),((x,A)=>{let E=_.from(/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(A)).bind((B=>cs(B,1))),O=y.get(x);io.getCurrent(O).fold((()=>{console.log("Can not find form")}),(B=>{xt.setValue(B,{hex:E.getOr("")}),ab.getField(B,"hex").each((I=>{$n(I,Pc())}))}))})),hh()])}})(0,r.shared.providers,i))),dropzone:ua(((o,r,i)=>OB(o,r.shared.providers,i))),grid:ua(((o,r)=>((i,l)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${i.columns}col`]},components:it(i.items,l.interpreter)}))(o,r.shared))),listbox:ua(((o,r,i)=>((l,u,m)=>{let f=Ho(l.items,(O=>!qw(O))),v=u.shared.providers,y=m.bind((O=>i3(l.items,O))).orThunk((()=>Lt(l.items).filter(qw))),x=l.label.map((O=>lp(O,v))),A=Bn.parts.field({dom:{},factory:{sketch:O=>a3({context:l.context,uid:O.uid,text:y.map((B=>B.text)),icon:_.none(),tooltip:_.none(),role:Rs(!f,"combobox"),...f?{}:{listRole:"listbox"},ariaLabel:l.label,fetch:(B,I)=>{let X=z5(B,l.name,l.items,xt.getValue(B),f);I(Lb(X,nm.CLOSE_ON_EXECUTE,u,{isHorizontalMenu:!1,search:_.none()}))},onSetup:ve(Qe),getApi:ve({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[ko.config({}),bh(y.map((B=>B.value)),(B=>ds(B.element,H5)),((B,I)=>{i3(l.items,I).each((X=>{en(B.element,H5,X.value),Wt(B,Td,{text:X.text})}))}))]},"tox-listbox",u.shared)}}),E={dom:{tag:"div",classes:["tox-listboxfield"]},components:[A]};return Bn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Vs([x.toArray(),[E]]),fieldBehaviours:st([Ut.config({disabled:()=>!l.enabled||v.checkUiComponentContext(l.context).shouldDisable,onDisabled:O=>{Bn.getField(O).each(Ut.disable)},onEnabled:O=>{Bn.getField(O).each(Ut.enable)}})])})})(o,r,i))),selectbox:ua(((o,r,i)=>((l,u,m)=>{let f=it(l.items,(E=>({text:u.translate(E.text),value:E.value}))),v=l.label.map((E=>lp(E,u))),y=Bn.parts.field({dom:{},...m.map((E=>({data:E}))).getOr({}),selectAttributes:{size:l.size},options:f,factory:QS,selectBehaviours:st([Ut.config({disabled:()=>!l.enabled||u.checkUiComponentContext(l.context).shouldDisable}),ko.config({}),on("selectbox-change",[$e($d(),((E,O)=>{Wt(E,jl,{name:l.name})}))])])}),x=l.size>1?_.none():_.some(zu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},u.icons)),A={dom:{tag:"div",classes:["tox-selectfield"]},components:Vs([[y],x.toArray()])};return Bn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Vs([v.toArray(),[A]]),fieldBehaviours:st([Ut.config({disabled:()=>!l.enabled||u.checkUiComponentContext(l.context).shouldDisable,onDisabled:E=>{Bn.getField(E).each(Ut.disable)},onEnabled:E=>{Bn.getField(E).each(Ut.enable)}}),ea((()=>u.checkUiComponentContext(l.context)))])})})(o,r.shared.providers,i))),sizeinput:ua(((o,r)=>((i,l)=>{let u=Yw,m=we("ratio-event"),f=K=>zu(K,{tag:"span",classes:["tox-icon","tox-lock-icon__"+K]},l.icons),v=()=>!i.enabled||l.checkUiComponentContext(i.context).shouldDisable,y=ea((()=>l.checkUiComponentContext(i.context))),x=i.label.getOr("Constrain proportions"),A=l.translate(x),E=ar.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":A,"data-mce-name":x}},components:[f("lock"),f("unlock")],buttonBehaviours:st([Ut.config({disabled:v}),y,ko.config({}),is.config(l.tooltips.getConfig({tooltipText:A}))])}),O=K=>({dom:{tag:"div",classes:["tox-form__group"]},components:K}),B=K=>Bn.parts.field({factory:Kf,inputClasses:["tox-textfield"],inputBehaviours:st([Ut.config({disabled:v}),y,ko.config({}),on("size-input-events",[$e(pl(),((V,U)=>{Wt(V,m,{isField1:K})})),$e($d(),((V,U)=>{Wt(V,jl,{name:i.name})}))])]),selectOnFocus:!1}),I=K=>({dom:{tag:"label",classes:["tox-label"]},components:[xs(l.translate(K))]}),X=ar.parts.field1(O([Bn.parts.label(I("Width")),B(!0)])),W=ar.parts.field2(O([Bn.parts.label(I("Height")),B(!1)]));return ar.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[X,W,O([I("\xA0"),E])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(K,V,U)=>{Kw(xt.getValue(K)).each((J=>{u(J).each((ee=>{xt.setValue(V,Gw(ee))}))}))},coupledFieldBehaviours:st([Ut.config({disabled:v,onDisabled:K=>{ar.getField1(K).bind(Bn.getField).each(Ut.disable),ar.getField2(K).bind(Bn.getField).each(Ut.disable),ar.getLock(K).each(Ut.disable)},onEnabled:K=>{ar.getField1(K).bind(Bn.getField).each(Ut.enable),ar.getField2(K).bind(Bn.getField).each(Ut.enable),ar.getLock(K).each(Ut.enable)}}),ea((()=>l.checkUiComponentContext("mode:design"))),on("size-input-events2",[$e(m,((K,V)=>{let U=V.event.isField1,J=U?ar.getField1(K):ar.getField2(K),ee=U?ar.getField2(K):ar.getField1(K),ue=J.map(xt.getValue).getOr(""),ce=ee.map(xt.getValue).getOr("");u=Ib(ue,ce)}))])])})})(o,r.shared.providers))),slider:ua(((o,r,i)=>((l,u,m)=>{let f=Qd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[xs(u.translate(l.label))]}),v=Qd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),y=Qd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Qd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:l.min,maxX:l.max,getInitialValue:ve(m.getOrThunk((()=>(Math.abs(l.max)-Math.abs(l.min))/2)))},components:[f,v,y],sliderBehaviours:st([hh(),un.config({})]),onChoose:(x,A,E)=>{Wt(x,jl,{name:l.name,value:E})},onChange:(x,A,E)=>{Wt(x,jl,{name:l.name,value:E})}})})(o,r.shared.providers,i))),urlinput:ua(((o,r,i)=>((l,u,m,f)=>{let v=u.shared.providers,y=V=>{let U=xt.getValue(V);m.addToHistory(U.value,l.filetype)},x={...f.map((V=>({initialData:V}))).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{type:"url"},minChars:0,responseTime:0,fetch:V=>{let U=((ee,ue,ce)=>{let ge=xt.getValue(ue),Re=ge?.meta?.text??ge.value;return ce.getLinkInformation().fold((()=>[]),(Ne=>{let Ae=tx(Re,(Ye=>it(Ye,(Dt=>ex(Dt,Dt))))(ce.getHistory(ee)));return ee==="file"?(Le=[Ae,tx(Re,eD(Ne)),tx(Re,Vs([zB(Ne),HB(Ne),$B(Ne)]))],L(Le,((Ye,Dt)=>Ye.length===0||Dt.length===0?Ye.concat(Dt):Ye.concat(FB,Dt)),[])):Ae;var Le}))})(l.filetype,V,m),J=Lb(U,nm.BUBBLE_TO_SANDBOX,u,{isHorizontalMenu:!1,search:_.none()});return oa(J)},getHotspot:V=>W.getOpt(V),onSetValue:(V,U)=>{V.hasConfigured(Jd)&&Jd.run(V).get(Qe)},typeaheadBehaviours:st([...m.getValidationHandler().map((V=>Jd.config({getRoot:U=>Rr(U.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(U,J)=>{O.getOpt(U).each((ee=>{en(ee.element,"title",v.translate(J))}))}},validator:{validate:U=>{let J=xt.getValue(U);return Vr((ee=>{V({type:l.filetype,url:J.value},(ue=>{if(ue.status==="invalid"){en(U.element,"aria-errormessage",m3);let ce=Nn.error(ue.message);ee(ce)}else{Bs(U.element,"aria-errormessage");let ce=Nn.value(ue.message);ee(ce)}}))}))},validateOnLoad:!1}}))).toArray(),Ut.config({disabled:()=>!l.enabled||v.checkUiComponentContext(l.context).shouldDisable}),ko.config({}),on("urlinput-events",[$e(Pc(),(V=>{let U=Bo(V.element),J=U.trim();J!==U&&Hi(V.element,J),l.filetype==="file"&&Wt(V,jl,{name:l.name})})),$e($d(),(V=>{Wt(V,jl,{name:l.name}),y(V)})),$e(Oe(),(V=>{Wt(V,jl,{name:l.name}),y(V)}))])]),eventOrder:{[Pc()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:V=>V.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:u.shared.getSink,parts:{menu:g2(0,0,"normal")},onExecute:(V,U,J)=>{Wt(U,af,{})},onItemExecute:(V,U,J,ee)=>{y(V),Wt(V,jl,{name:l.name})}},A=Bn.parts.field({...x,factory:S4}),E=l.label.map((V=>lp(V,v))),O=go(((V,U,J=V,ee=V)=>zu(J,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+V],attributes:{title:v.translate(ee),"aria-live":"polite",...U.fold((()=>({})),(ue=>({id:ue})))}},v.icons))("invalid",_.some(m3),"warning")),B=go({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[O.asSpec()]}),I=m.getUrlPicker(l.filetype),X=we("browser.url.event"),W=go({dom:{tag:"div",classes:["tox-control-wrap"]},components:[A,B.asSpec()],behaviours:st([Ut.config({disabled:()=>!l.enabled||v.checkUiComponentContext(l.context).shouldDisable})])}),K=go(X5({context:l.context,name:l.name,icon:_.some("browse"),text:l.picker_text.or(l.label).getOr(""),enabled:l.enabled,primary:!1,buttonType:_.none(),borderless:!0},(V=>$n(V,X)),v,[],["tox-browse-url"]));return Bn.sketch({dom:Wk([]),components:E.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Vs([[W.asSpec()],I.map((()=>K.asSpec())).toArray()])}]),fieldBehaviours:st([Ut.config({disabled:()=>!l.enabled||v.checkUiComponentContext(l.context).shouldDisable,onDisabled:V=>{Bn.getField(V).each(Ut.disable),K.getOpt(V).each(Ut.disable)},onEnabled:V=>{Bn.getField(V).each(Ut.enable),K.getOpt(V).each(Ut.enable)}}),ea((()=>v.checkUiComponentContext(l.context))),on("url-input-events",[$e(X,(V=>{io.getCurrent(V).each((U=>{let J=xt.getValue(U),ee={fieldname:l.name,...J};I.each((ue=>{ue(ee).get((ce=>{xt.setValue(U,ce),Wt(V,jl,{name:l.name})}))}))}))}))])])})})(o,r,r.urlinput,i))),customeditor:ua((o=>{let r=to(),i=go({dom:{tag:o.tag}}),l=to(),u=!k5(o)&&o.onFocus.isSome()?[un.config({onFocus:m=>{o.onFocus.each((f=>{f(m.element.dom)}))}}),ko.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:st([on("custom-editor-events",[as((m=>{i.getOpt(m).each((f=>{(k5(o)?o.init(f.element.dom):_B.load(o.scriptId,o.scriptUrl).then((v=>v(f.element.dom,o.settings)))).then((v=>{l.on((y=>{v.setValue(y)})),l.clear(),r.set(v)}))}))}))]),bh(_.none(),(()=>r.get().fold((()=>l.get().getOr("")),(m=>m.getValue()))),((m,f)=>{r.get().fold((()=>l.set(f)),(v=>v.setValue(f)))})),hh()].concat(u)),components:[i.asSpec()]}})),htmlpanel:ua(((o,r)=>((i,l)=>{let u=["tox-form__group",...i.stretched?["tox-form__group--stretched"]:[]],m=on("htmlpanel",[as((f=>{i.onInit(f.element.dom)}))]);return i.presets==="presentation"?Xd.sketch({dom:{tag:"div",classes:u,innerHtml:i.html},containerBehaviours:st([is.config({...l.tooltips.getConfig({tooltipText:"",onShow:f=>{xo(f.element,"[data-mce-tooltip]:hover").orThunk((()=>Mo(f.element))).each((v=>{Zs(v,"data-mce-tooltip").each((y=>{is.setComponents(f,l.tooltips.getComponents({tooltipText:y}))}))}))}}),mode:"children-normal",anchor:f=>({type:"node",node:xo(f.element,"[data-mce-tooltip]:hover").orThunk((()=>Mo(f.element).filter((v=>Zs(v,"data-mce-tooltip").isSome())))),root:f.element,layouts:{onLtr:ve([Yr,ba,Lr,Ta,Kr,Wa]),onRtl:ve([Yr,ba,Lr,Ta,Kr,Wa])},bubble:Hl(0,-2,{})})}),m])}):Xd.sketch({dom:{tag:"div",classes:u,innerHtml:i.html,attributes:{role:"document"}},containerBehaviours:st([ko.config({}),un.config({}),m])})})(o,r.shared.providers))),imagepreview:ua(((o,r,i)=>((l,u)=>{let m=Rt(u.getOr({url:""})),f=go({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:u.map((A=>({src:A.url}))).getOr({})}}),v=go({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[f.asSpec()]}),y={};l.height.each((A=>y.height=A));let x=u.map((A=>({url:A.url,zoom:_.from(A.zoom),cachedWidth:_.from(A.cachedWidth),cachedHeight:_.from(A.cachedHeight)})));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:y,attributes:{role:"presentation"}},components:[v.asSpec()],behaviours:st([hh(),bh(x,(()=>m.get()),((A,E)=>{let O={url:E.url};E.zoom.each((I=>O.zoom=I)),E.cachedWidth.each((I=>O.cachedWidth=I)),E.cachedHeight.each((I=>O.cachedHeight=I)),m.set(O);let B=()=>{let{cachedWidth:I,cachedHeight:X,zoom:W}=O;if(!Hr(I)&&!Hr(X)){if(Hr(W)){let V=((U,J,ee)=>{let ue=hs(U),ce=Nr(U);return Math.min(ue/J,ce/ee,1)})(A.element,I,X);O.zoom=V}let K=((V,U,J,ee,ue)=>{let ce=J*ue,ge=ee*ue,Re=Math.max(0,V/2-ce/2),Ne=Math.max(0,U/2-ge/2);return{left:Re.toString()+"px",top:Ne.toString()+"px",width:ce.toString()+"px",height:ge.toString()+"px"}})(hs(A.element),Nr(A.element),I,X,O.zoom);v.getOpt(A).each((V=>{Bd(V.element,K)}))}};f.getOpt(A).each((I=>{let X=I.element;E.url!==ds(X,"src")&&(en(X,"src",E.url),$o(A.element,"tox-imagepreview__loaded")),B(),vg(X).then((W=>{A.getSystem().isConnected()&&(bs(A.element,"tox-imagepreview__loaded"),O.cachedWidth=W.dom.naturalWidth,O.cachedHeight=W.dom.naturalHeight,B())}))}))}))])}})(o,i))),table:ua(((o,r)=>((i,l)=>{let u=v=>({dom:{tag:"td",innerHtml:l.translate(v)}});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(f=i.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:it(f,(v=>({dom:{tag:"th",innerHtml:l.translate(v)}})))}]}),(m=i.cells,{dom:{tag:"tbody"},components:it(m,(v=>({dom:{tag:"tr"},components:it(v,u)})))})],behaviours:st([ko.config({}),un.config({})])};var m,f})(o,r.shared.providers))),tree:ua(((o,r)=>((i,l)=>{let u=i.onLeafAction.getOr(Qe),m=i.onToggleExpand.getOr(Qe),f=i.defaultExpandedIds,v=Rt(f),y=Rt(i.defaultSelectedId),x=we("tree-id"),A=(E,O)=>i.items.map((B=>B.type==="leaf"?c3({leaf:B,selectedId:E,onLeafAction:u,visible:!0,treeId:x,backstage:l}):Xw({directory:B,selectedId:E,onLeafAction:u,expandedIds:O,labelTabstopping:!0,treeId:x,backstage:l})));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:A(y.get(),v.get()),behaviours:st([Ft.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),on(IB,[$e("expand-tree-node",((E,O)=>{let{expanded:B,node:I}=O.event;v.set(B?[...v.get(),I]:v.get().filter((X=>X!==I))),m(v.get(),{expanded:B,node:I})}))]),jc.config({channels:{[`update-active-item-${x}`]:{onReceive:(E,O)=>{y.set(_.some(O.value)),Cn.set(E,A(_.some(O.value),v.get()))}}}}),Cn.config({})])}})(o,r))),panel:ua(((o,r)=>((i,l)=>({dom:{tag:"div",classes:i.classes},components:it(i.items,l.shared.interpreter)}))(o,r)))},UB={field:(o,r)=>r,record:ve([])},tD=(o,r,i,l,u)=>{let m=Xn(l,{shared:{interpreter:f=>g3(o,f,i,m,u)}});return g3(o,r,i,m,u)},g3=(o,r,i,l,u)=>qt(VB,r.type).fold((()=>(console.error(`Unknown factory type "${r.type}", defaulting to container: `,r),r)),(m=>m(o,r,i,l,u))),nD=(o,r,i,l)=>g3(UB,o,r,i,l),I2={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},ZB=(o,r,i)=>{let l={maxHeightFunction:Fm()};return()=>i()?{type:"node",root:Ns(yn(o())),node:_.from(o()),bubble:Hl(12,12,I2),layouts:{onRtl:()=>[Ug],onLtr:()=>[Xr]},overrides:l}:{type:"hotspot",hotspot:r(),bubble:Hl(-12,12,I2),layouts:{onRtl:()=>[Lr,Kr,Yr],onLtr:()=>[Kr,Lr,Yr]},overrides:l}},WB=(o,r,i,l)=>{let u={maxHeightFunction:Fm()};return()=>l()?{type:"node",root:Ns(yn(r())),node:_.from(r()),bubble:Hl(12,12,I2),layouts:{onRtl:()=>[zc],onLtr:()=>[zc]},overrides:u}:o?{type:"node",root:Ns(yn(r())),node:_.from(r()),bubble:Hl(0,-Ml(r()),I2),layouts:{onRtl:()=>[ba],onLtr:()=>[ba]},overrides:u}:{type:"hotspot",hotspot:i(),bubble:Hl(0,0,I2),layouts:{onRtl:()=>[ba],onLtr:()=>[ba]},overrides:u}},jB=(o,r,i)=>()=>i()?{type:"node",root:Ns(yn(o())),node:_.from(o()),layouts:{onRtl:()=>[zc],onLtr:()=>[zc]}}:{type:"hotspot",hotspot:r(),layouts:{onRtl:()=>[Yr],onLtr:()=>[Yr]}},qB=(o,r)=>()=>({type:"selection",root:r(),getSelection:()=>{let i=o.selection.getRng(),l=o.model.table.getSelectedCells();if(l.length>1){let u=l[0],m=l[l.length-1],f={firstCell:bt(u),lastCell:bt(m)};return _.some(f)}return _.some(Bl.range(bt(i.startContainer),i.startOffset,bt(i.endContainer),i.endOffset))}}),GB=o=>r=>({type:"node",root:o(),node:r}),oD=(o,r,i,l)=>{let u=P1(o),m=()=>bt(o.getBody()),f=()=>bt(o.getContentAreaContainer()),v=()=>u||!l();return{inlineDialog:ZB(f,r,v),inlineBottomDialog:WB(o.inline,f,i,v),banner:jB(f,r,v),cursor:qB(o,m),node:GB(m)}},KB=o=>(r,i)=>{s5(o)(r,i)},YB=o=>()=>e5(o),XB=o=>r=>Pw(o,r),JB=o=>r=>QO(o,r),QB=o=>()=>M4(o),F2=o=>Ds(o,"items"),f3=o=>Ds(o,"format"),sD=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],rD=o=>L(o,((r,i)=>{if(Sn(i,"items")){let l=rD(i.items);return{customFormats:r.customFormats.concat(l.customFormats),formats:r.formats.concat([{title:i.title,items:l.formats}])}}if(Sn(i,"inline")||(l=>Sn(l,"block"))(i)||(l=>Sn(l,"selector"))(i)){let l=`custom-${Wn(i.name)?i.name:i.title.toLowerCase()}`;return{customFormats:r.customFormats.concat([{name:l,format:i}]),formats:r.formats.concat([{title:i.title,format:l,icon:i.icon}])}}return{...r,formats:r.formats.concat(i)}}),{customFormats:[],formats:[]}),aD=o=>XA(o).map((r=>{let i=((l,u)=>{let m=rD(u),f=v=>{Ot(v,(y=>{l.formatter.has(y.name)||l.formatter.register(y.name,y.format)}))};return l.formatter?f(m.customFormats):l.on("init",(()=>{f(m.customFormats)})),m.formats})(o,r);return JA(o)?sD.concat(i):i})).getOr(sD),iD=(o,r,i)=>({...o,type:"formatter",isSelected:r(o.format),getStylePreview:i(o.format)}),lD=(o,r,i,l)=>{let u=m=>it(m,(f=>F2(f)?(v=>{let y=u(v.items);return{...v,type:"submenu",getStyleItems:ve(y)}})(f):f3(f)?(v=>iD(v,i,l))(f):(v=>{let y=rn(v);return y.length===1&&Ln(y,"title")})(f)?{...f,type:"separator"}:(v=>{let y=Wn(v.name)?v.name:we(v.title),x=`custom-${y}`,A={...v,type:"formatter",format:x,isSelected:i(x),getStylePreview:l(x)};return o.formatter.register(y,A),A})(f)));return u(r)},e7=o=>{let r=0,i=l=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[xs(l.tooltipText)]}];return{getConfig:l=>({delayForShow:()=>r>0?60:300,delayForHide:ve(300),exclusive:!0,lazySink:o,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:i(l),onShow:(u,m)=>{r++,l.onShow&&l.onShow(u,m)},onHide:(u,m)=>{r--,l.onHide&&l.onHide(u,m)},onSetup:l.onSetup}),getComponents:i}},p3=lf.trim,h3=o=>r=>!!((i=>$t(i)&&i.nodeType===1)(r)&&(r.contentEditable===o||r.getAttribute("data-mce-contenteditable")===o)),cD=h3("true"),t7=h3("false"),nx=(o,r,i,l,u)=>({type:o,title:r,url:i,level:l,attach:u}),uD=o=>o.innerText||o.textContent,n7=o=>(r=>r&&r.nodeName==="A"&&(r.id||r.name)!==void 0)(o)&&mD(o),dD=o=>o&&/^(H[1-6])$/.test(o.nodeName),mD=o=>(r=>{let i=r;for(;i=i.parentNode;){let l=i.contentEditable;if(l&&l!=="inherit")return cD(i)}return!1})(o)&&!t7(o),o7=o=>dD(o)&&mD(o),s7=o=>{let r=(i=>i.id?i.id:we("h"))(o);return nx("header",uD(o)??"","#"+r,(i=>dD(i)?parseInt(i.nodeName.substr(1),10):0)(o),(()=>{o.id=r}))},r7=o=>{let r=o.id||o.name,i=uD(o);return nx("anchor",i||"#"+r,"#"+r,0,Qe)},a7=o=>p3(o.title).length>0,i7=o=>{let r=(i=>it(aa(bt(i),"h1,h2,h3,h4,h5,h6,a:not([href])"),(u=>u.dom)))(o);return pn((i=>it(pn(i,o7),s7))(r).concat((i=>it(pn(i,n7),r7))(r)),a7)},ox="tinymce-url-history",H2=o=>Wn(o)&&/^https?/.test(o),sx=o=>nr(o)&&El(o,(r=>{return!(lr(i=r)&&i.length<=5&&hi(i,H2));var i})).isNone(),rx=()=>{let o=ip.getItem(ox);if(o===null)return{};let r;try{r=JSON.parse(o)}catch(i){if(i instanceof SyntaxError)return console.log("Local storage "+ox+" was not valid JSON",i),{};throw i}return sx(r)?r:(console.log("Local storage "+ox+" was not valid format",r),{})},gD=o=>{let r=rx();return qt(r,o).getOr([])},l7=(o,r)=>{if(!H2(o))return;let i=rx(),l=qt(i,r).getOr([]),u=pn(l,(m=>m!==o));i[r]=[o].concat(u).slice(0,5),(m=>{if(!sx(m))throw new Error(`Bad format for history:
`+JSON.stringify(m));ip.setItem(ox,JSON.stringify(m))})(i)},fD=o=>!!o,b3=o=>_s(lf.makeMap(o,/[, ]/),fD),z2=o=>_.from(t_(o)),$2=o=>_.from(o).filter(Wn).getOrUndefined(),pD=o=>({getHistory:gD,addToHistory:l7,getLinkInformation:()=>(r=>R4(r)?_.some({targets:i7(r.getBody()),anchorTop:$2(N4(r)),anchorBottom:$2(o_(r))}):_.none())(o),getValidationHandler:()=>(r=>_.from(D4(r)))(o),getUrlPicker:r=>((i,l)=>((u,m)=>{let f=(v=>{let y=_.from(n_(v)).filter(fD).map(b3);return z2(v).fold(zt,(x=>y.fold(vn,(A=>rn(A).length>0&&A))))})(u);return Ar(f)?f?z2(u):_.none():f[m]?z2(u):_.none()})(i,l).map((u=>m=>$r((f=>{let v={filetype:l,fieldname:m.fieldname,..._.from(m.meta).getOr({})};u.call(i,((y,x)=>{if(!Wn(y))throw new Error("Expected value to be string");if(x!==void 0&&!nr(x))throw new Error("Expected meta to be a object");f({value:y,meta:x})}),m.value,v)})))))(o,r)}),c7={skipFocus:"ToggleToolbarDrawer skipFocus is deprecated see migration guide: https://www.tiny.cloud/docs/tinymce/latest/migration-from-7x/"},u7=Qe,d7=zt,hD=ve([]);var bD,m7=Object.freeze({__proto__:null,setup:u7,isDocked:d7,getBehaviours:hD});let v3=ve(we("toolbar-height-change")),cf={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},vD="tox-tinymce--toolbar-sticky-on",yD="tox-tinymce--toolbar-sticky-off",ax=(o,r)=>Ln($s.getModes(o),r),y3=o=>{let r=o.element;Rr(r).each((i=>{let l="padding-"+$s.getModes(o)[0];if($s.isDocked(o)){let u=hs(i);q(r,"width",u+"px"),q(i,l,(m=>Ml(m)+(parseInt(ga(m,"margin-top"),10)||0)+(parseInt(ga(m,"margin-bottom"),10)||0))(r)+"px")}else Un(r,"width"),Un(i,l)}))},CD=(o,r)=>{r?($o(o,cf.fadeOutClass),dl(o,[cf.transitionClass,cf.fadeInClass])):($o(o,cf.fadeInClass),dl(o,[cf.fadeOutClass,cf.transitionClass]))},C3=(o,r)=>{let i=bt(o.getContainer());r?(bs(i,vD),$o(i,yD)):(bs(i,yD),$o(i,vD))},wD=(o,r)=>{let i=to(),l=r.getSink,u=v=>{l().each((y=>v(y.element)))},m=v=>{o.inline||y3(v),C3(o,$s.isDocked(v)),v.getSystem().broadcastOn([Ei()],{}),l().each((y=>y.getSystem().broadcastOn([Ei()],{})))},f=o.inline?[]:[jc.config({channels:{[v3()]:{onReceive:y3}}})];return[un.config({}),$s.config({contextual:{lazyContext:v=>{let y=Ml(v.element),x=o.inline?o.getContentAreaContainer():o.getContainer();return _.from(x).map((A=>{let E=Br(bt(A));return sf(o,v.element).fold((()=>{let O=E.height-y,B=E.y+(ax(v,"top")?0:y);return wr(E.x,B,E.width,O)}),(O=>{let B=ml(E,Jf(O)),I=ax(v,"top")?B.y:B.y+y;return wr(B.x,I,B.width,B.height-y)}))}))},onShow:()=>{u((v=>CD(v,!0)))},onShown:v=>{u((y=>ka(y,[cf.transitionClass,cf.fadeInClass]))),i.get().each((y=>{((x,A)=>{let E=sa(A);qs(E).filter((O=>!wn(A,O))).filter((O=>wn(O,bt(E.dom.body))||vc(x,O))).each((()=>ct(A)))})(v.element,y),i.clear()}))},onHide:v=>{((y,x)=>Mo(y).orThunk((()=>x().toOptional().bind((A=>Mo(A.element))))))(v.element,l).fold(i.clear,i.set),u((y=>CD(y,!1)))},onHidden:()=>{u((v=>ka(v,[cf.transitionClass])))},...cf},lazyViewport:v=>sf(o,v.element).fold((()=>{let y=Wr(),x=UC(o),A=y.y+(ax(v,"top")&&!$4(o)?x:0),E=y.height-(ax(v,"bottom")?x:0);return{bounds:wr(y.x,A,y.width,E),optScrollEnv:_.none()}}),(y=>({bounds:Jf(y),optScrollEnv:_.some({currentScrollTop:y.element.dom.scrollTop,scrollElmTop:Ii(y.element).top})}))),modes:[r.header.getDockingMode()],onDocked:m,onUndocked:m}),...f]};var g7=Object.freeze({__proto__:null,setup:(o,r,i)=>{o.inline||(r.header.isPositionedAtTop()||o.on("ResizeEditor",(()=>{i().each($s.reset)})),o.on("ResizeWindow ResizeEditor",(()=>{i().each(y3)})),o.on("SkinLoaded",(()=>{i().each((l=>{$s.isDocked(l)?$s.reset(l):$s.refresh(l)}))})),o.on("FullscreenStateChanged",(()=>{i().each($s.reset)}))),o.on("AfterScrollIntoView",(l=>{i().each((u=>{$s.refresh(u);let m=u.element;vm(m)&&((f,v)=>{let y=sa(v),x=Li(v).dom.innerHeight,A=fn(y),E=bt(f.elm),O=yu(E),B=Nr(E),I=O.y,X=I+B,W=Ii(v),K=Nr(v),V=W.top,U=V+K,J=Math.abs(V-A.top)<2,ee=Math.abs(U-(A.top+x))<2;if(J&&I<U)hf(A.left,I-K,y);else if(ee&&X>V){let ue=I-x+B+K;hf(A.left,ue,y)}})(l,m)}))})),o.on("PostRender",(()=>{C3(o,!1)}))},isDocked:o=>o().map($s.isDocked).getOr(!1),getBehaviours:wD}),lm=Wc({factory:(o,r)=>{let i={focus:Ft.focusIn,setMenus:(l,u)=>{let m=it(u,(f=>{let v={type:"menubutton",text:f.text,fetch:x=>{x(f.getItems())},context:"any"},y=pk(v).mapError((x=>Rc(x))).getOrDie();return P2(y,"tox-mbtn",r.backstage,_.some("menuitem"))}));Cn.set(l,m)}};return{uid:o.uid,dom:o.dom,components:[],behaviours:st([Cn.config({}),on("menubar-events",[as((l=>{o.onSetup(l)})),$e(xi(),((l,u)=>{xo(l.element,".tox-mbtn--active").each((m=>{Mr(u.event.target,".tox-mbtn").each((f=>{wn(m,f)||l.getSystem().getByDom(m).each((v=>{l.getSystem().getByDom(f).each((y=>{Kc.expand(y),Kc.close(v),un.focus(y)}))}))}))}))})),$e(Tu(),((l,u)=>{u.event.prevFocus.bind((m=>l.getSystem().getByDom(m).toOptional())).each((m=>{u.event.newFocus.bind((f=>l.getSystem().getByDom(f).toOptional())).each((f=>{Kc.isOpen(m)&&(Kc.expand(f),Kc.close(m))}))}))}))]),Ft.config({mode:"flow",selector:".tox-mbtn",onEscape:l=>(o.onEscape(l),_.some(!0))}),ko.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ke("dom"),Ke("uid"),Ke("onEscape"),Ke("backstage"),Te("onSetup",Qe)],apis:{focus:(o,r)=>{o.focus(r)},setMenus:(o,r,i)=>{o.setMenus(r,i)}}});let f7=o=>({element:()=>o.element.dom}),p7=(o,r)=>{let i=it(rn(r),(l=>{let u=r[l],m=Ia((f=>ss("sidebar",uB,f))(u));return{name:l,getApi:f7,onSetup:m.onSetup,onShow:m.onShow,onHide:m.onHide}}));return it(i,(l=>{let u=Rt(Qe);return o.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:k2([tg(l,u),G1(l,u),$e(Mm(),((m,f)=>{let v=f.event;kn(i,(x=>x.name===v.name)).each((x=>{(v.visible?x.onShow:x.onHide)(x.getApi(m))}))}))])})}))},w3=o=>Qi.sketch((r=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:p7(r,o),slotBehaviours:k2([as((i=>Qi.hideAllSlots(i)))])}))),ta=(o,r)=>{en(o,"role",r)},h7=o=>io.getCurrent(o).bind((r=>Ul.isGrowing(r)||Ul.hasGrown(r)?io.getCurrent(r).bind((i=>kn(Qi.getSlotNames(i),(l=>Qi.isShowing(i,l))))):_.none())),x3=we("FixSizeEvent"),S3=we("AutoSizeEvent"),xD=o=>io.getCurrent(o).each((r=>ct(r.element,!0))),b7=(o,r,i)=>{let l=Rt(!1),u=to(),m=v=>{var y;l.get()&&(!(x=>x.type==="focusin")(y=v)||!(y.composed?Lt(y.composedPath()):_.from(y.target)).map(bt).filter(Dr).exists((x=>Js(x,"mce-pastebin"))))&&(v.preventDefault(),xD(r()),o.editorManager.setActive(o))};o.inline||o.on("PreInit",(()=>{o.dom.bind(o.getWin(),"focusin",m),o.on("BeforeExecCommand",(v=>{v.command.toLowerCase()==="mcefocus"&&v.value!==!0&&m(v)}))}));let f=v=>{v!==l.get()&&(l.set(v),((y,x,A,E)=>{let O=x.element;if(((B,I)=>{let X="tabindex",W=`data-mce-${X}`;_.from(B.iframeElement).map(bt).each((K=>{I?(Zs(K,X).each((V=>en(K,W,V))),en(K,X,-1)):(Bs(K,X),Zs(K,W).each((V=>{en(K,X,V),Bs(K,W)})))}))})(y,A),A)Xg.block(x,(B=>(I,X)=>({dom:{tag:"div",attributes:{"aria-label":B.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Gf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}))(E)),Un(O,"display"),Bs(O,"aria-hidden"),y.hasFocus()&&xD(x);else{let B=io.getCurrent(x).exists((I=>No(I.element)));Xg.unblock(x),q(O,"display","none"),en(O,"aria-hidden","true"),B&&y.focus()}})(o,r(),v,i.providers),((y,x)=>{y.dispatch("AfterProgressState",{state:x})})(o,v))};o.on("ProgressState",(v=>{if(u.on(clearTimeout),Yn(v.time)){let y=s2.setEditorTimeout(o,(()=>f(v.state)),v.time);u.set(y)}else f(v.state),u.clear()}))},SD=o=>{let r=o.label.isNone()?o.title.fold((()=>({})),(i=>({attributes:{"aria-label":i}}))):o.label.fold((()=>({})),(i=>({attributes:{"aria-label":i}})));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(o.label.isSome()?["tox-toolbar__group_with_label"]:[]),...r},components:[...o.label.map((i=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[xs(i)]}))).toArray(),Qv.parts.items({})],items:o.items,markers:{itemSelector:".tox-tbtn:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:st([ko.config({}),un.config({ignore:!0})])}},ix=o=>Qv.sketch(SD(o)),kD=(o,r)=>{let i=as((l=>{let u=it(o.initGroups,ix);Fu.setGroups(l,u)}));return st([E2((()=>o.providers.checkUiComponentContext("any").shouldDisable)),ea((()=>o.providers.checkUiComponentContext("any"))),Ft.config({mode:r,onEscape:o.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),on("toolbar-events",[i])])},ED=o=>{let r=o.cyclicKeying?"cyclic":"acyclic";return{uid:o.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":SD({title:_.none(),label:_.none(),items:[]}),"overflow-button":Y5({context:"any",name:"more",icon:_.some("more-drawer"),enabled:!0,tooltip:_.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:_.none(),borderless:!1},_.none(),o.providers,[],"overflow-button")},splitToolbarBehaviours:kD(o,r)}},v7=o=>{let r=ED(o),i=VA.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return VA.sketch({...r,lazySink:o.getSink,getOverflowBounds:()=>{let l=o.moreDrawerData.lazyHeader().element,u=yu(l),m=Ba(l),f=yu(m),v=Math.max(m.dom.scrollHeight,f.height);return wr(u.x+4,f.y,u.width-8,v)},parts:{...r.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:o.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:l=>o.onToggled(l,!0),onClosed:l=>o.onToggled(l,!1)})},y7=o=>{let r=BC.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),i=BC.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=ED(o);return BC.sketch({...l,components:[r,i],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>{u.getSystem().broadcastOn([v3()],{type:"opened"}),o.onToggled(u,!0)},onClosed:u=>{u.getSystem().broadcastOn([v3()],{type:"closed"}),o.onToggled(u,!1)}})},k3=o=>{let r=o.cyclicKeying?"cyclic":"acyclic";return Fu.sketch({uid:o.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(o.type===Hu.scrolling?["tox-toolbar--scrolling"]:[])},components:[Fu.parts.groups({})],toolbarBehaviours:kD(o,r)})},TD=(o,r)=>((i,l)=>{let u=i.type==="togglebutton",m=i.icon.map((W=>yh(W,l.icons))).map(go),f={...i,name:u?i.text.getOr(i.icon.getOr("")):i.text??i.icon.getOr(""),primary:i.buttonType==="primary",buttonType:_.from(i.buttonType),tooltip:i.tooltip,icon:i.icon,enabled:!0,borderless:i.borderless},v=Jw(i.buttonType??"secondary"),y=u?i.text.map(l.translate):_.some(l.translate(i.text)),x=y.map(xs),A=f.tooltip.or(y).map((W=>({"aria-label":l.translate(W)}))).getOr({}),E=m.map((W=>W.asSpec())),O=Ob([E,x]),B=i.icon.isSome()&&x.isSome(),I={tag:"button",classes:v.concat(...i.icon.isSome()&&!B?["tox-button--icon"]:[]).concat(...B?["tox-button--icon-and-text"]:[]).concat(...i.borderless?["tox-button--naked"]:[]).concat(...i.type==="togglebutton"&&i.active?["tox-button--enabled"]:[]),attributes:A},X=L2(f,_.some((W=>{let K=V=>{m.map((U=>U.getOpt(W).each((J=>{Cn.set(J,[yh(V,l.icons)])}))))};return u?i.onAction({setIcon:K,setActive:V=>{let U=W.element;V?(bs(U,"tox-button--enabled"),en(U,"aria-pressed",!0)):($o(U,"tox-button--enabled"),Bs(U,"aria-pressed"))},isActive:()=>Js(W.element,"tox-button--enabled"),focus:()=>ct(W.element)}):i.type==="button"?i.onAction({setIcon:K}):void 0})),[],I,O,i.tooltip,l);return la.sketch(X)})(o,r),AD=bi().deviceType,C7=AD.isPhone(),w7=AD.isTablet();var Fb=Vl({name:"silver.View",configFields:[Ke("viewConfig")],partFields:[Du({factory:{sketch:o=>{let r=!1,i=it(o.buttons,(l=>l.type==="group"?(r=!0,((u,m)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:it(u.buttons,(f=>TD(f,m)))}))(l,o.providers)):TD(l,o.providers)));return{uid:o.uid,dom:{tag:"div",classes:[r?"tox-view__toolbar":"tox-view__header",...C7||w7?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:st([un.config({}),Ft.config({mode:"flow",selector:"button, .tox-button",focusInside:tt.OnEnterOrSpaceMode})]),components:r?i:[Xd.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Xd.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:i})]}}},schema:[Ke("buttons"),Ke("providers")],name:"header"}),Du({factory:{sketch:o=>({uid:o.uid,behaviours:st([un.config({}),ko.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}})},schema:[],name:"pane"})],factory:(o,r,i,l)=>{let u={getPane:m=>Oa.getPart(m,o,"pane"),getOnShow:m=>o.viewConfig.onShow,getOnHide:m=>o.viewConfig.onHide};return{uid:o.uid,dom:o.dom,components:r,behaviours:st([un.config({}),Ft.config({mode:"cyclic",focusInside:tt.OnEnterOrSpaceMode})]),apis:u}},apis:{getPane:(o,r)=>o.getPane(r),getOnShow:(o,r)=>o.getOnShow(r),getOnHide:(o,r)=>o.getOnHide(r)}});let x7=(o,r,i)=>Ni(r,((l,u)=>{let m=Ia(ss("view",mB,l));return o.slot(u,Fb.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:m,components:[...m.buttons.length>0?[Fb.parts.header({buttons:m.buttons,providers:i})]:[],Fb.parts.pane({})]}))})),S7=(o,r)=>Qi.sketch((i=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:x7(i,o,r),slotBehaviours:k2([as((l=>Qi.hideAllSlots(l)))])}))),_D=o=>kn(Qi.getSlotNames(o),(r=>Qi.isShowing(o,r))),OD=(o,r,i)=>{Qi.getSlot(o,r).each((l=>{Fb.getPane(l).each((u=>{var m;i(l)((m=u.element.dom,{getContainer:ve(m)}))}))}))};var lx=Wc({factory:(o,r)=>{let i={setViews:(l,u)=>{Cn.set(l,[S7(u,r.backstage.shared.providers)])},whichView:l=>io.getCurrent(l).bind(_D),toggleView:(l,u,m,f)=>io.getCurrent(l).exists((v=>{let y=_D(v),x=y.exists((E=>f===E)),A=Qi.getSlot(v,f).isSome();return A&&(Qi.hideAllSlots(v),x?((E=>{let O=E.element;q(O,"display","none"),en(O,"aria-hidden","true")})(l),u()):(m(),(E=>{let O=E.element;Un(O,"display"),Bs(O,"aria-hidden")})(l),Qi.showSlot(v,f),((E,O)=>{OD(E,O,Fb.getOnShow)})(v,f)),y.each((E=>((O,B)=>OD(O,B,Fb.getOnHide))(v,E)))),A}))};return{uid:o.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:st([Cn.config({}),io.config({find:l=>{let u=Cn.contents(l);return Lt(u)}})]),apis:i}},name:"silver.ViewWrapper",configFields:[Ke("backstage")],apis:{setViews:(o,r,i)=>o.setViews(r,i),toggleView:(o,r,i,l,u)=>o.toggleView(r,i,l,u),whichView:(o,r)=>o.whichView(r)}});let k7=Qg.optional({factory:lm,name:"menubar",schema:[Ke("backstage")]}),E7=Qg.optional({factory:{sketch:o=>Uv.sketch({uid:o.uid,dom:o.dom,listBehaviours:st([Ft.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>k3({type:o.type,uid:we("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:o.providers,onEscape:()=>(o.onEscape(),_.some(!0))}),setupItem:(r,i,l,u)=>{Fu.setGroups(i,l)},shell:!0})},name:"multiple-toolbar",schema:[Ke("dom"),Ke("onEscape")]}),T7=Qg.optional({factory:{sketch:o=>(i=>i.type===Hu.sliding?y7:i.type===Hu.floating?v7:k3)(o)({type:o.type,uid:o.uid,onEscape:()=>(o.onEscape(),_.some(!0)),onToggled:(i,l)=>o.onToolbarToggled(l),cyclicKeying:!1,initGroups:[],getSink:o.getSink,providers:o.providers,moreDrawerData:{lazyToolbar:o.lazyToolbar,lazyMoreButton:o.lazyMoreButton,lazyHeader:o.lazyHeader},attributes:o.attributes})},name:"toolbar",schema:[Ke("dom"),Ke("onEscape"),Ke("getSink")]}),DD=Qg.optional({factory:{sketch:o=>{let r=o.editor,i=o.sticky?wD:hD;return{uid:o.uid,dom:o.dom,components:o.components,behaviours:st(i(r,o.sharedBackstage))}}},name:"header",schema:[Ke("dom")]}),A7=Qg.optional({factory:{sketch:o=>{let r=o.promotionLink?[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:"\u{1F49D} Get all features"}}]:[];return{uid:o.uid,dom:o.dom,components:r}}},name:"promotion",schema:[Ke("dom"),Ke("promotionLink")]}),RD=Qg.optional({name:"socket",schema:[Ke("dom")]}),_7=Qg.optional({factory:{sketch:o=>({uid:o.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:st([ko.config({}),un.config({}),Ul.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:r=>{io.getCurrent(r).each(Qi.hideAllSlots),$n(r,S3)},onGrown:r=>{$n(r,S3)},onStartGrow:r=>{Wt(r,x3,{width:Hs(r.element,"width").getOr("")})},onStartShrink:r=>{Wt(r,x3,{width:hs(r.element)+"px"})}}),Cn.config({}),io.config({find:r=>{let i=Cn.contents(r);return Lt(i)}})])}],behaviours:st([Yk(0),on("sidebar-sliding-events",[$e(x3,((r,i)=>{q(r.element,"width",i.event.width)})),$e(S3,((r,i)=>{Un(r.element,"width")}))])])})},name:"sidebar",schema:[Ke("dom")]}),ND=Qg.optional({factory:{sketch:o=>({uid:o.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:st([Cn.config({}),Xg.config({focus:!1}),io.config({find:r=>Lt(r.components())})]),components:[]})},name:"throbber",schema:[Ke("dom")]}),O7=Qg.optional({factory:lx,name:"viewWrapper",schema:[Ke("backstage")]}),MD=Qg.optional({factory:{sketch:o=>({uid:o.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:o.components})},name:"editorContainer",schema:[]});var es=Vl({name:"OuterContainer",factory:(o,r,i)=>{let l=!1,u=f=>{hu(f,".tox-statusbar").each((v=>{ga(v,"display")==="none"&&ds(v,"aria-hidden")==="true"?(Un(v,"display"),Bs(v,"aria-hidden")):(q(v,"display","none"),en(v,"aria-hidden","true"))}))},m={getSocket:f=>Oa.getPart(f,o,"socket"),setSidebar:(f,v,y)=>{Oa.getPart(f,o,"sidebar").each((x=>((A,E,O)=>{io.getCurrent(A).each((B=>{Cn.set(B,[w3(E)]);let I=O?.toLowerCase();Wn(I)&&Sn(E,I)&&io.getCurrent(B).each((X=>{Qi.showSlot(X,I),Ul.immediateGrow(B),Un(B.element,"width"),ta(A.element,"region")}))}))})(x,v,y)))},toggleSidebar:(f,v)=>{Oa.getPart(f,o,"sidebar").each((y=>((x,A)=>{io.getCurrent(x).each((E=>{io.getCurrent(E).each((O=>{Ul.hasGrown(E)?Qi.isShowing(O,A)?(Ul.shrink(E),ta(x.element,"presentation")):(Qi.hideAllSlots(O),Qi.showSlot(O,A),ta(x.element,"region")):(Qi.hideAllSlots(O),Qi.showSlot(O,A),Ul.grow(E),ta(x.element,"region"))}))}))})(y,v)))},whichSidebar:f=>Oa.getPart(f,o,"sidebar").bind(h7).getOrNull(),getHeader:f=>Oa.getPart(f,o,"header"),getToolbar:f=>Oa.getPart(f,o,"toolbar"),setToolbar:(f,v)=>{Oa.getPart(f,o,"toolbar").each((y=>{let x=it(v,ix);y.getApis().setGroups(y,x)}))},setToolbars:(f,v)=>{Oa.getPart(f,o,"multiple-toolbar").each((y=>{let x=it(v,(A=>it(A,ix)));Uv.setItems(y,x)}))},refreshToolbar:f=>{Oa.getPart(f,o,"toolbar").each((v=>v.getApis().refresh(v)))},toggleToolbarDrawer:f=>{Oa.getPart(f,o,"toolbar").each((v=>{or(v.getApis().toggle,(y=>y(v)))}))},toggleToolbarDrawerWithoutFocusing:f=>{Oa.getPart(f,o,"toolbar").each((v=>{or(v.getApis().toggleWithoutFocusing,(y=>y(v)))}))},isToolbarDrawerToggled:f=>Oa.getPart(f,o,"toolbar").bind((v=>_.from(v.getApis().isOpen).map((y=>y(v))))).getOr(!1),getThrobber:f=>Oa.getPart(f,o,"throbber"),focusToolbar:f=>{Oa.getPart(f,o,"toolbar").orThunk((()=>Oa.getPart(f,o,"multiple-toolbar"))).each((v=>{Ft.focusIn(v)}))},setMenubar:(f,v)=>{Oa.getPart(f,o,"menubar").each((y=>{lm.setMenus(y,v)}))},focusMenubar:f=>{Oa.getPart(f,o,"menubar").each((v=>{lm.focus(v)}))},setViews:(f,v)=>{Oa.getPart(f,o,"viewWrapper").each((y=>{lx.setViews(y,v)}))},toggleView:(f,v)=>Oa.getPart(f,o,"viewWrapper").exists((y=>lx.toggleView(y,(()=>m.showMainView(f)),(()=>m.hideMainView(f)),v))),whichView:f=>Oa.getPart(f,o,"viewWrapper").bind(lx.whichView).getOrNull(),hideMainView:f=>{l=m.isToolbarDrawerToggled(f),l&&m.toggleToolbarDrawer(f),Oa.getPart(f,o,"editorContainer").each((v=>{let y=v.element;u(y),q(y,"display","none"),en(y,"aria-hidden","true")}))},showMainView:f=>{l&&m.toggleToolbarDrawer(f),Oa.getPart(f,o,"editorContainer").each((v=>{let y=v.element;u(y),Un(y,"display"),Bs(y,"aria-hidden")}))}};return{uid:o.uid,dom:o.dom,components:r,apis:m,behaviours:o.behaviours}},configFields:[Ke("dom"),Ke("behaviours")],partFields:[DD,k7,T7,E7,RD,_7,A7,ND,O7,MD],apis:{getSocket:(o,r)=>o.getSocket(r),setSidebar:(o,r,i,l)=>{o.setSidebar(r,i,l)},toggleSidebar:(o,r,i)=>{o.toggleSidebar(r,i)},whichSidebar:(o,r)=>o.whichSidebar(r),getHeader:(o,r)=>o.getHeader(r),getToolbar:(o,r)=>o.getToolbar(r),setToolbar:(o,r,i)=>{o.setToolbar(r,i)},setToolbars:(o,r,i)=>{o.setToolbars(r,i)},refreshToolbar:(o,r)=>o.refreshToolbar(r),toggleToolbarDrawer:(o,r)=>{o.toggleToolbarDrawer(r)},toggleToolbarDrawerWithoutFocusing:(o,r)=>{o.toggleToolbarDrawerWithoutFocusing(r)},isToolbarDrawerToggled:(o,r)=>o.isToolbarDrawerToggled(r),getThrobber:(o,r)=>o.getThrobber(r),setMenubar:(o,r,i)=>{o.setMenubar(r,i)},focusMenubar:(o,r)=>{o.focusMenubar(r)},focusToolbar:(o,r)=>{o.focusToolbar(r)},setViews:(o,r,i)=>{o.setViews(r,i)},toggleView:(o,r,i)=>o.toggleView(r,i),whichView:(o,r)=>o.whichView(r)}});let BD={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code suggestededits revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image video link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},E3=o=>o.split(" "),PD=(o,r)=>{let i={...BD,...r.menus},l=rn(r.menus).length>0,u=r.menubar===void 0||r.menubar===!0?E3("file edit view insert format tools table help"):E3(r.menubar===!1?"":r.menubar),m=pn(u,(v=>{let y=Sn(BD,v);return l?y||qt(r.menus,v).exists((x=>Sn(x,"items"))):y})),f=it(m,(v=>{let y=i[v];return((x,A,E)=>{let O=_4(E).split(/[ ,]/);return{text:x.title,getItems:()=>vo(x.items,(B=>{let I=B.toLowerCase();return I.trim().length===0||Ho(O,(X=>X===I))?[]:I==="separator"||I==="|"?[{type:"separator"}]:A.menuItems[I]?[A.menuItems[I]]:[]}))}})({title:y.title,items:E3(y.items)},r,o)}));return pn(f,(v=>v.getItems().length>0&&Ho(v.getItems(),(y=>Wn(y)||y.type!=="separator"))))},LD=(o,r,i)=>(o.on("remove",(()=>i.unload(r))),i.load(r)),cx=(o,r,i,l)=>(o.on("remove",(()=>l.unloadRawCss(r))),l.loadRawCss(r,i)),D7=o=>_.from(tinymce.Resource.get(o)).filter(Wn),T3=(o,r,i="")=>{let l=(m=>{let f=F4(m);return f?_.from(f):_.none()})(o).map((m=>((f,v)=>"ui/"+f+"/"+v)(m,`${r}.css`))),u=l.bind(D7);return Ra(l,u,((m,f)=>({_kind:"load-raw",key:m,css:f}))).getOrThunk((()=>{let m=o.editorManager.suffix;return{_kind:"load-stylesheet",url:i+`/${r}${m}.css`}}))},R7=(o,r)=>{let i=o.ui.styleSheetLoader,l=T3(o,"skin",r);switch(l._kind){case"load-raw":let{key:u,css:m}=l;return cx(o,u,m,i),Promise.resolve();case"load-stylesheet":let{url:f}=l;return LD(o,f,i);default:return Promise.resolve()}},N7=(o,r)=>{var i;if(i=bt(o.getElement()),!Go(i).isSome())return Promise.resolve();{let l=r2.DOM.styleSheetLoader,u=T3(o,"skin.shadowdom",r);switch(u._kind){case"load-raw":let{key:m,css:f}=u;return cx(o,m,f,l),Promise.resolve();case"load-stylesheet":let{url:v}=u;return LD(o,v,l);default:return Promise.resolve()}}},ID=(o,r)=>(async(i,l)=>{let u=c_(l);if(await((m,f,v)=>{let y=T3(m,f?"content.inline":"content",v);switch(y._kind){case"load-raw":let{key:x,css:A}=y;return f?cx(m,x,A,m.ui.styleSheetLoader):m.on("PostRender",(()=>{cx(m,x,A,m.dom.styleSheetLoader)})),Promise.resolve();case"load-stylesheet":let{url:E}=y;return v&&m.contentCSS.push(E),Promise.resolve();default:return Promise.resolve()}})(l,i,u),!ZC(l)&&Wn(u))return Promise.all([R7(l,u),N7(l,u)]).then()})(o,r).then((i=>{let l=()=>{i._skinLoaded=!0,(u=>{u.dispatch("SkinLoaded")})(i)};return()=>{i.initialized?l():i.on("init",l)}})(r),(i=>()=>((l,u)=>{l.dispatch("SkinLoadError",u)})(i,{message:"Skin could not be loaded"}))(r)),M7=ut(ID,!1),B7=ut(ID,!0),A3=o=>({isEnabled:()=>!Ut.isDisabled(o),setEnabled:r=>Ut.set(o,!r),setText:r=>Wt(o,Td,{text:r}),setIcon:r=>Wt(o,Q1,{icon:r})}),P7=o=>({setActive:r=>{Zn.set(o,r)},isActive:()=>Zn.isOn(o),isEnabled:()=>!Ut.isDisabled(o),setEnabled:r=>Ut.set(o,!r),setText:r=>Wt(o,Td,{text:r}),setIcon:r=>Wt(o,Q1,{icon:r})}),L7=(o,r)=>o.map((i=>({"aria-label":r.translate(i)}))).getOr({}),I7=we("focus-button"),_3=(o,r,i,l,u,m,f)=>{let v=r.map((x=>go(P5(x,"tox-tbtn",u)))),y=o.map((x=>go(yh(x,u.icons))));return{dom:{tag:"button",classes:["tox-tbtn"].concat(r.isSome()?["tox-tbtn--select"]:[]),attributes:{...L7(i,u),...$t(f)?{"data-mce-name":f}:{}}},components:Ob([y.map((x=>x.asSpec())),v.map((x=>x.asSpec()))]),eventOrder:{[gs()]:["focusing","alloy.base.behaviour",vh],[Vi()]:[vh,"toolbar-group-button-events"],[hl()]:[vh,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:st([E2((()=>u.checkUiComponentContext(m).shouldDisable)),ea((()=>u.checkUiComponentContext(m))),on(vh,[as(((x,A)=>s3(x))),$e(Td,((x,A)=>{v.bind((E=>E.getOpt(x))).each((E=>{Cn.set(E,[xs(u.translate(A.event.text))])}))})),$e(Q1,((x,A)=>{y.bind((E=>E.getOpt(x))).each((E=>{Cn.set(E,[yh(A.event.icon,u.icons)])}))})),$e(gs(),((x,A)=>{A.event.prevent(),$n(x,I7)}))])].concat(l.getOr([])))}},FD=(o,r,i,l)=>{let u=Rt(Qe),m=_3(o.icon,o.text,o.tooltip,_.none(),i,o.context,l);return la.sketch({dom:m.dom,components:m.components,eventOrder:B5,buttonBehaviours:{...st([on("toolbar-button-events",[(f={onAction:o.onAction,getApi:r.getApi},Wd(((v,y)=>{_b(f,v)((x=>{Wt(v,o3,{buttonApi:x}),f.onAction(x)}))}))),tg(r,u),G1(r,u)]),...o.tooltip.map((v=>is.config(i.tooltips.getConfig({tooltipText:i.translate(v)+o.shortcut.map((y=>` (${Ek(y)})`)).getOr("")})))).toArray(),E2((()=>!o.enabled||i.checkUiComponentContext(o.context).shouldDisable)),ea((()=>i.checkUiComponentContext(o.context)))].concat(r.toolbarButtonBehaviours)),[vh]:m.buttonBehaviours?.[vh]}});var f},V2=(o,r,i,l)=>FD(o,{toolbarButtonBehaviours:i.length>0?[on("toolbarButtonWith",i)]:[],getApi:A3,onSetup:o.onSetup},r,l),U2=(o,r,i,l)=>FD(o,{toolbarButtonBehaviours:[Cn.config({}),Zn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(i.length>0?[on("toolbarToggleButtonWith",i)]:[]),getApi:P7,onSetup:o.onSetup},r,l),F7=(o,r,i)=>l=>$r((u=>r.fetch(u))).map((u=>_.from(Zk(Xn(Hw(we("menu-value"),u,(m=>{r.onItemAction(o(l),m)}),r.columns,r.presets,nm.CLOSE_ON_EXECUTE,r.select.getOr(zt),i),{movement:O2(r.columns,r.presets),menuBehaviours:k2(r.columns!=="auto"?[]:[as(((m,f)=>{S2(m,4,U_(r.presets)).each((({numRows:v,numColumns:y})=>{Ft.setGridSize(m,v,y)}))}))])}))))),Z2=o=>{Ls.getContent(o).each((r=>{xo(r.element,".tox-toolbar-slider__input,.tox-toolbar-textfield").fold((()=>Ft.focusIn(r)),ct)}))},HD=we("forward-slide"),ux=we("backward-slide"),O3=we("change-slide-event"),D3="tox-pop--resizing",W2=(o,r,i)=>Ur(i)?o.translate(r):o.translate([r,o.translate(i)]),dx=(o,r)=>{let i=(m,f,v,y)=>{let x=o.shared.providers.translate(m.title);if(m.type==="separator")return _.some({type:"separator",text:x});if(m.type==="submenu"){let A=vo(m.getStyleItems(),(E=>l(E,f,y)));return f===0&&A.length<=0?_.none():_.some({type:"nestedmenuitem",text:x,enabled:A.length>0,getSubmenuItems:()=>vo(m.getStyleItems(),(E=>l(E,f,y)))})}return _.some({type:"togglemenuitem",text:x,icon:m.icon,active:m.isSelected(y),enabled:!v,onAction:r.onAction(m),...m.getStylePreview().fold((()=>({})),(A=>({meta:{style:A}})))})},l=(m,f,v)=>{let y=m.type==="formatter"&&r.isInvalid(m);return f===0?y?[]:i(m,f,!1,v).toArray():i(m,f,y,v).toArray()},u=m=>{let f=r.getCurrentValue(),v=r.shouldHide?0:1;return vo(m,(y=>l(y,v,f)))};return{validateItems:u,getFetch:(m,f)=>(v,y)=>{let x=f(),A=u(x);y(Lb(A,nm.CLOSE_ON_EXECUTE,m,{isHorizontalMenu:!1,search:_.none()}))}}},rg=(o,r)=>{let i=r.dataset,l=i.type==="basic"?()=>it(i.data,(u=>iD(u,r.isSelectedFor,r.getPreviewFor))):i.getData;return{items:dx(o,r),getStyleItems:l}},Hb=(o,r,i,l,u,m)=>{let{items:f,getStyleItems:v}=rg(r,i),y=Rt(i.tooltip);return a3({context:"mode:design",text:i.icon.isSome()?_.none():i.text,icon:i.icon,ariaLabel:_.some(i.tooltip),tooltip:_.none(),role:_.none(),fetch:f.getFetch(r,v),onSetup:x=>{let A=E=>x.setTooltip(W2(o,l(E.value),E.value));return o.on(u,A),Qo(og(o,"NodeChange",(E=>{let O=E.getComponent();i.updateText(O),Ut.set(E.getComponent(),!o.selection.isEditable()||v().length===0)}))(x),(()=>o.off(u,A)))},getApi:x=>({getComponent:ve(x),setTooltip:A=>{let E=r.shared.providers.translate(A);en(x.element,"aria-label",E),y.set(A)}}),columns:1,presets:"normal",classes:i.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[is.config({...r.shared.providers.tooltips.getConfig({tooltipText:r.shared.providers.translate(i.tooltip),onShow:x=>{if(i.tooltip!==y.get()){let A=r.shared.providers.translate(y.get());is.setComponents(x,r.shared.providers.tooltips.getComponents({tooltipText:A}))}}})})]},"tox-tbtn",r.shared,m)};var e0;(function(o){o[o.SemiColon=0]="SemiColon",o[o.Space=1]="Space"})(e0||(e0={}));let R3=(o,r,i)=>{let l=(u=((m,f)=>f===e0.SemiColon?m.replace(/;$/,"").split(";"):m.split(" "))(o.options.get(r),i),it(u,(m=>{let f=m,v=m,y=m.split("=");return y.length>1&&(f=y[0],v=y[1]),{title:f,format:v}})));var u;return{type:"basic",data:l}},zD=ve("Alignment {0}"),$D="left",N3=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],VD=o=>{let r={type:"basic",data:N3};return{tooltip:W2(o,zD(),$D),text:_.none(),icon:_.some("align-left"),isSelectedFor:i=>()=>o.formatter.match(i),getCurrentValue:_.none,getPreviewFor:i=>_.none,onAction:i=>()=>kn(N3,(l=>l.format===i.format)).each((l=>o.execCommand(l.command))),updateText:i=>{let l=kn(N3,(u=>o.formatter.match(u.format))).fold(ve($D),(u=>u.title.toLowerCase()));Wt(i,Q1,{icon:`align-${l}`}),((u,m)=>{u.dispatch("AlignTextUpdate",m)})(o,{value:l})},dataset:r,shouldHide:!1,isInvalid:i=>!o.formatter.canApply(i.format)}},UD=(o,r)=>{let i=r(),l=it(i,(u=>u.format));return _.from(o.formatter.closest(l)).bind((u=>kn(i,(m=>m.format===u))))},ZD=ve("Block {0}"),M3="Paragraph",WD=o=>{let r=R3(o,"block_formats",e0.SemiColon);return{tooltip:W2(o,ZD(),M3),text:_.some(M3),icon:_.none(),isSelectedFor:i=>()=>o.formatter.match(i),getCurrentValue:_.none,getPreviewFor:i=>()=>{let l=o.formatter.get(i);return l?_.some({tag:l.length>0&&(l[0].inline||l[0].block)||"div",styles:o.dom.parseStyle(o.formatter.getCssText(i))}):_.none()},onAction:Bk(o),updateText:i=>{let l=UD(o,(()=>r.data)).fold(ve(M3),(u=>u.title));Wt(i,Td,{text:l}),((u,m)=>{u.dispatch("BlocksTextUpdate",m)})(o,{value:l})},dataset:r,shouldHide:!1,isInvalid:i=>!o.formatter.canApply(i.format)}},jD=ve("Font {0}"),B3="System Font",qD=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],t0=o=>{let r=o.split(/\s*,\s*/);return it(r,(i=>i.replace(/^['"]+|['"]+$/g,"")))},Ch=(o,r)=>r.length>0&&hi(r,(i=>o.indexOf(i.toLowerCase())>-1)),GD=o=>{let r=()=>{let l=x=>x?t0(x)[0]:"",u=o.queryCommandValue("FontName"),m=i.data,f=u?u.toLowerCase():"",v=I4(o);return{matchOpt:kn(m,(x=>{let A=x.format;return A.toLowerCase()===f||l(A).toLowerCase()===l(f).toLowerCase()})).orThunk((()=>Rs(((x,A)=>{if(x.indexOf("-apple-system")===0||A.length>0){let E=t0(x.toLowerCase());return Ch(E,qD)||Ch(E,A)}return!1})(f,v),{title:B3,format:f}))),font:u}},i=R3(o,"font_family_formats",e0.SemiColon);return{tooltip:W2(o,jD(),B3),text:_.some(B3),icon:_.none(),isSelectedFor:l=>u=>u.exists((m=>m.format===l)),getCurrentValue:()=>{let{matchOpt:l}=r();return l},getPreviewFor:l=>()=>_.some({tag:"div",styles:l.indexOf("dings")===-1?{"font-family":l}:{}}),onAction:l=>()=>{o.undoManager.transact((()=>{o.focus(),o.execCommand("FontName",!1,l.format)}))},updateText:l=>{let{matchOpt:u,font:m}=r(),f=u.fold(ve(m),(v=>v.title));Wt(l,Td,{text:f}),((v,y)=>{v.dispatch("FontFamilyTextUpdate",y)})(o,{value:f})},dataset:i,shouldHide:!1,isInvalid:zt}};var j2=tinymce.util.Tools.resolve("tinymce.util.VK");let P3=ve("Font size {0}"),q2="12pt",H7={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},n0={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},o0=(o,r)=>/[0-9.]+px$/.test(o)?((i,l)=>{let u=Math.pow(10,l);return Math.round(i*u)/u})(72*parseInt(o,10)/96,r||0)+"pt":qt(n0,o).getOr(o),z7=o=>qt(H7,o).getOr(""),KD=o=>{let r=()=>{let u=_.none(),m=l.data,f=o.queryCommandValue("FontSize");if(f)for(let v=3;u.isNone()&&v>=0;v--){let y=o0(f,v),x=z7(y);u=kn(m,(A=>A.format===f||A.format===y||A.format===x))}return{matchOpt:u,size:f}},i=ve(_.none),l=R3(o,"font_size_formats",e0.Space);return{tooltip:W2(o,P3(),q2),text:_.some(q2),icon:_.none(),isSelectedFor:u=>m=>m.exists((f=>f.format===u)),getPreviewFor:i,getCurrentValue:()=>{let{matchOpt:u}=r();return u},onAction:u=>()=>{o.undoManager.transact((()=>{o.focus(),o.execCommand("FontSize",!1,u.format)}))},updateText:u=>{let{matchOpt:m,size:f}=r(),v=m.fold(ve(f),(y=>y.title));Wt(u,Td,{text:v}),((y,x)=>{y.dispatch("FontSizeTextUpdate",x)})(o,{value:v})},dataset:l,shouldHide:!1,isInvalid:zt}},YD=o=>Ur(o)?"Formats":"Format {0}",XD=(o,r)=>{let i="Formats";return{tooltip:W2(o,YD(""),""),text:_.some(i),icon:_.none(),isSelectedFor:l=>()=>o.formatter.match(l),getCurrentValue:_.none,getPreviewFor:l=>()=>{let u=o.formatter.get(l);return u!==void 0?_.some({tag:u.length>0&&(u[0].inline||u[0].block)||"div",styles:o.dom.parseStyle(o.formatter.getCssText(l))}):_.none()},onAction:Bk(o),updateText:l=>{let u=v=>F2(v)?vo(v.items,u):f3(v)?[{title:v.title,format:v.format}]:[],m=vo(aD(o),u),f=UD(o,ve(m)).fold(ve({title:i,tooltipLabel:""}),(v=>({title:v.title,tooltipLabel:v.title})));Wt(l,Td,{text:f.title}),((v,y)=>{v.dispatch("StylesTextUpdate",y)})(o,{value:f.tooltipLabel})},shouldHide:bb(o),isInvalid:l=>!o.formatter.canApply(l.format),dataset:r}},$7=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],G2=(o,r)=>(i,l,u,m)=>{let f=o(i).mapError((v=>Rc(v))).getOrDie();return r(f,l,u,m)},V7={button:G2(ww,((o,r,i,l)=>((u,m,f)=>V2(u,m,[],f))(o,r.shared.providers,l))),togglebutton:G2(EO,((o,r,i,l)=>((u,m,f)=>U2(u,m,[],f))(o,r.shared.providers,l))),menubutton:G2(pk,((o,r,i,l)=>P2(o,"tox-tbtn",r,_.none(),!1,l))),splitbutton:G2((o=>ss("SplitButton",dB,o)),((o,r,i,l)=>((u,m,f)=>{let v=Rt(Qe),y=Rt(u.tooltip.getOr("")),x=((V,U,J)=>ee=>{let ue=ee.getSystem(),ce=ee.element,ge=()=>{let Ne=Js(ce,"tox-split-button__chevron");return{mainOpt:Ne?z(ce).bind((Ae=>ue.getByDom(Ae).toOptional())):_.some(ee),chevronOpt:Ne?_.some(ee):te(ce).bind((Ae=>ue.getByDom(Ae).toOptional().filter((Le=>Js(Le.element,"tox-split-button__chevron")))))}},Re=Ne=>{let{mainOpt:Ae,chevronOpt:Le}=ge();Ae.each(Ne),Le.each(Ne)};return{isEnabled:()=>{let{mainOpt:Ne}=ge();return Ne.exists((Ae=>!Ut.isDisabled(Ae)))},setEnabled:Ne=>Re((Ae=>Ut.set(Ae,!Ne))),setText:Ne=>{let{mainOpt:Ae}=ge();Ae.each((Le=>Wt(Le,Td,{text:Ne})))},setIcon:Ne=>{let{mainOpt:Ae}=ge();Ae.each((Le=>Wt(Le,Q1,{icon:Ne})))},setIconFill:(Ne,Ae)=>Re((Le=>{xo(Le.element,`svg path[class="${Ne}"], rect[class="${Ne}"]`).each((Ye=>{en(Ye,"fill",Ae)}))})),isActive:()=>{let{mainOpt:Ne}=ge();return Ne.exists((Ae=>Zn.isOn(Ae)))},setActive:Ne=>{let{mainOpt:Ae}=ge();Ae.each((Le=>Zn.set(Le,Ne)))},setTooltip:Ne=>{V.set(Ne);let{mainOpt:Ae,chevronOpt:Le}=ge();Ae.each((Dt=>en(Dt.element,"aria-label",U.providers.translate(Ne))));let Ye=J.chevronTooltip.map((Dt=>U.providers.translate(Dt))).getOr(U.providers.translate(Ne));Le.each((Dt=>en(Dt.element,"aria-label",Ye)))}}})(y,m,u),A=we("tox-split-menu"),E=Rt(!1),O=()=>u.tooltip.map((V=>m.providers.translate(V))).getOr(m.providers.translate("Text color")),B=()=>u.chevronTooltip.map((V=>m.providers.translate(V))).getOrThunk((()=>{let V=O();return m.providers.translate(["{0} menu",V])})),I=(V,U)=>{E.set(V),en(U.element,"aria-expanded",String(V))},X=Kc.sketch({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:ow("chevron-down",m.providers.icons),attributes:{"aria-label":B(),...$t(f)?{"data-mce-name":f+"-chevron"}:{},"aria-haspopup":"menu","aria-expanded":String(E.get()),"aria-controls":A}},components:[],toggleClass:"tox-tbtn--enabled",dropdownBehaviours:st([on("split-dropdown-events",[as(((V,U)=>s3(V))),tg({getApi:x,onSetup:u.onSetup},v),$e("alloy-dropdown-open",(V=>I(!0,V))),$e("alloy-dropdown-close",(V=>I(!1,V)))]),E2((()=>m.providers.checkUiComponentContext(u.context).shouldDisable)),ea((()=>m.providers.checkUiComponentContext(u.context))),qf.config({}),is.config(m.providers.tooltips.getConfig({tooltipText:B(),onShow:V=>{if(y.get()!==u.tooltip.getOr("")){let U=u.chevronTooltip.map((J=>m.providers.translate(J))).getOr(`${m.providers.translate(y.get())} menu`);is.setComponents(V,m.providers.tooltips.getComponents({tooltipText:U}))}}}))]),lazySink:m.getSink,fetch:F7(x,u,m.providers),getHotspot:V=>z(V.element).bind((U=>V.getSystem().getByDom(U).toOptional())),onOpen:(V,U,J)=>{Vn.highlightBy(J,(ee=>Js(ee.element,"tox-collection__item--active"))),Vn.getHighlighted(J).each(Ft.focusIn)},parts:{menu:{...g2(0,u.columns,u.presets),dom:{...g2(0,u.columns,u.presets).dom,tag:"div",attributes:{id:A}}}}}),W=_3(u.icon,u.text,_.none(),_.some([Zn.config({toggleClass:"tox-tbtn--enabled",aria:u.presets==="color"?{mode:"none"}:{mode:"pressed"},toggleOnExecute:!1}),...u.tooltip.isSome()?[is.config(m.providers.tooltips.getConfig({tooltipText:m.providers.translate(u.tooltip.getOr("")),onShow:V=>{if(y.get()!==u.tooltip.getOr("")){let U=m.providers.translate(y.get());is.setComponents(V,m.providers.tooltips.getComponents({tooltipText:U}))}}}))]:[]]),m.providers,u.context,f);return[la.sketch({dom:{...W.dom,classes:["tox-tbtn","tox-split-button__main"].concat(u.text.isSome()?["tox-tbtn--select"]:[]),attributes:{"aria-label":O(),...$t(f)?{"data-mce-name":f}:{}}},components:W.components,eventOrder:W.eventOrder,buttonBehaviours:W.buttonBehaviours,action:V=>{if(u.onAction){let U=x(V);U.isEnabled()&&u.onAction(U)}}}),X]})(o,r.shared,l))),grouptoolbarbutton:G2((o=>ss("GroupToolbarButton",x2,o)),((o,r,i,l)=>{let u=i.ui.registry.getAll().buttons,m={[Kh]:r.shared.header.isPositionedAtTop()?Ud.TopToBottom:Ud.BottomToTop};if(lh(i)===Hu.floating)return((f,v,y,x,A)=>{let E=v.shared,O=Rt(Qe),B={toolbarButtonBehaviours:[],getApi:A3,onSetup:f.onSetup},I=[on("toolbar-group-button-events",[tg(B,O),G1(B,O)]),...f.tooltip.map((X=>is.config(v.shared.providers.tooltips.getConfig({tooltipText:v.shared.providers.translate(X)})))).toArray()];return oh.sketch({lazySink:E.getSink,fetch:()=>$r((X=>{X(it(y(f.items),ix))})),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:_3(f.icon,f.text,f.tooltip,_.some(I),E.providers,f.context,A),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:x}}}})})(o,r,(f=>s0(i,{buttons:u,toolbar:f,allowToolbarGroups:!1},r,_.none())),m,l);throw new Error("Toolbar groups are only supported when using floating toolbar mode")}))},JD={styles:(o,r)=>{let i={type:"advanced",...r.styles};return Hb(o,r,XD(o,i),YD,"StylesTextUpdate","styles")},fontsize:(o,r)=>Hb(o,r,KD(o),P3,"FontSizeTextUpdate","fontsize"),fontsizeinput:(o,r)=>((i,l,u,m)=>{let f=_.none(),v=og(i,"NodeChange SwitchMode DisabledStateChange",(J=>{let ee=J.getComponent();f=_.some(ee),u.updateInputValue(ee),Ut.set(ee,!i.selection.isEditable()||hb(i))})),y=J=>({getComponent:ve(J)}),x=Rt(Qe),A=we("custom-number-input-events"),E=(J,ee,ue)=>{let ce=f.map((Le=>xt.getValue(Le))).getOr(""),ge=u.getNewValue(ce,J),Re=ce.length-`${ge}`.length,Ne=f.map((Le=>Le.element.dom.selectionStart-Re)),Ae=f.map((Le=>Le.element.dom.selectionEnd-Re));u.onAction(ge,ue),f.each((Le=>{xt.setValue(Le,ge),ee&&(Ne.each((Ye=>Le.element.dom.selectionStart=Ye)),Ae.each((Ye=>Le.element.dom.selectionEnd=Ye)))}))},O=(J,ee)=>E(((ue,ce)=>ue-ce),J,ee),B=(J,ee)=>E(((ue,ce)=>ue+ce),J,ee),I=J=>Rr(J.element).fold(_.none,(ee=>(ct(ee),_.some(!0)))),X=J=>No(J.element)?(ot(J.element).each((ee=>ct(ee))),_.some(!0)):_.none(),W=(J,ee,ue,ce)=>{let ge=Rt(Qe),Re=l.shared.providers.translate(ue),Ne=we("altExecuting"),Ae=og(i,"NodeChange SwitchMode DisabledStateChange",(Ye=>{Ut.set(Ye.getComponent(),!i.selection.isEditable()||hb(i))})),Le=Ye=>{Ut.isDisabled(Ye)||J(!0)};return la.sketch({dom:{tag:"button",attributes:{"aria-label":Re,"data-mce-name":ee},classes:ce.concat(ee)},components:[r3(ee,l.shared.providers.icons)],buttonBehaviours:st([Ut.config({}),is.config(l.shared.providers.tooltips.getConfig({tooltipText:Re})),on(Ne,[tg({onSetup:Ae,getApi:y},ge),G1({getApi:y},ge),$e(zi(),((Ye,Dt)=>{Dt.event.raw.keyCode!==j2.SPACEBAR&&Dt.event.raw.keyCode!==j2.ENTER||Ut.isDisabled(Ye)||J(!1)})),$e(ku(),Le),$e(Bc(),Le)])]),eventOrder:{[zi()]:[Ne,"keying"],[ku()]:[Ne,"alloy.base.behaviour"],[Bc()]:[Ne,"alloy.base.behaviour"],[Vi()]:["alloy.base.behaviour",Ne,"tooltipping"],[hl()]:[Ne,"tooltipping"]}})},K=go(W((J=>O(!1,J)),"minus","Decrease font size",[])),V=go(W((J=>B(!1,J)),"plus","Increase font size",[])),U=go({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Kf.sketch({inputBehaviours:st([Ut.config({}),on(A,[tg({onSetup:v,getApi:y},x),G1({getApi:y},x)]),on("input-update-display-text",[$e(Td,((J,ee)=>{xt.setValue(J,ee.event.text)})),$e(Lg(),(J=>{u.onAction(xt.getValue(J))})),$e($d(),(J=>{u.onAction(xt.getValue(J))}))]),Ft.config({mode:"special",onEnter:J=>(E(ht,!0,!0),_.some(!0)),onEscape:I,onUp:J=>(B(!0,!1),_.some(!0)),onDown:J=>(O(!0,!1),_.some(!0)),onLeft:(J,ee)=>(ee.cut(),_.none()),onRight:(J,ee)=>(ee.cut(),_.none())})])})],behaviours:st([un.config({}),Ft.config({mode:"special",onEnter:X,onSpace:X,onEscape:I}),on("input-wrapper-events",[$e(xi(),(J=>{Ot([K,V],(ee=>{let ue=bt(ee.get(J).element.dom);No(ue)&&Gn(ue)}))}))])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...$t(m)?{"data-mce-name":m}:{}}},components:[K.asSpec(),U.asSpec(),V.asSpec()],behaviours:st([un.config({}),Ft.config({mode:"flow",focusInside:tt.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:J=>No(J.element)?_.none():(ct(J.element),_.some(!0))})])}})(o,r,(i=>{let l=()=>i.queryCommandValue("FontSize");return{updateInputValue:u=>Wt(u,Td,{text:l()}),onAction:(u,m)=>i.execCommand("FontSize",!1,u,{skip_focus:!m}),getNewValue:(u,m)=>{ri(u,["unsupportedLength","empty"]);let f=l(),v=ri(u,["unsupportedLength","empty"]).or(ri(f,["unsupportedLength","empty"])),y=v.map((B=>B.value)).getOr(16),x=Ai(i),A=v.map((B=>B.unit)).filter((B=>B!=="")).getOr(x),E=m(y,(B=>({em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}})[B]??{step:1})(A).step),O=`${(B=>B>=0)(E)?E:y}${A}`;return O!==f&&((B,I)=>{B.dispatch("FontSizeInputTextUpdate",I)})(i,{value:O}),O}}})(o),"fontsizeinput"),fontfamily:(o,r)=>Hb(o,r,GD(o),jD,"FontFamilyTextUpdate","fontfamily"),blocks:(o,r)=>Hb(o,r,WD(o),ZD,"BlocksTextUpdate","blocks"),align:(o,r)=>Hb(o,r,VD(o),zD,"AlignTextUpdate","align"),navigateback:(o,r)=>{let i=Ia(ww({type:"button",icon:"chevron-left",tooltip:"Back",onAction:Qe}));return V2(i,r.shared.providers,[$e(o3,(l=>{$n(l,ux)}))])}},s0=(o,r,i,l)=>{let u=(f=>{let v=f.toolbar,y=f.buttons;return v===!1?[]:v===void 0||v===!0?(x=>{let A=it($7,(E=>{let O=pn(E.items,(B=>Sn(x,B)||Sn(JD,B)));return{name:E.name,items:O}}));return pn(A,(E=>E.items.length>0))})(y):Wn(v)?(x=>{let A=x.split("|");return it(A,(E=>({items:E.trim().split(" ")})))})(v):(x=>Ss(x,(A=>(Sn(A,"name")||Sn(A,"label"))&&Sn(A,"items"))))(v)?v:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])})(r),m=it(u,(f=>{let v=vo(f.items,(y=>y.trim().length===0?[]:((x,A,E,O,B,I)=>qt(A,E.toLowerCase()).orThunk((()=>I.bind((X=>Mt(X,(W=>qt(A,W+E.toLowerCase()))))))).fold((()=>qt(JD,E.toLowerCase()).map((X=>X(x,B)))),(X=>X.type!=="grouptoolbarbutton"||O?((W,K,V,U)=>qt(V7,W.type).fold((()=>(console.error("skipping button defined by",W),_.none())),(J=>_.some(J(W,K,V,U)))))(X,B,x,E.toLowerCase()):(console.warn(`Ignoring the '${E}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),_.none()))))(o,r.buttons,y,r.allowToolbarGroups,i,l).map((x=>Array.isArray(x)?x:[x])).getOr([])));return{title:_.from(o.translate(f.name)),label:Rs(f.label!==void 0,o.translate(f.label)),items:v}}));return pn(m,(f=>f.items.length>0))},L3=(o,r,i,l)=>{let u=r.mainUi.outerContainer,m=i.toolbar,f=i.buttons;if(Ss(m,Wn)){let v=m.map((y=>{let x={toolbar:y,buttons:f,allowToolbarGroups:i.allowToolbarGroups};return s0(o,x,l,_.none())}));es.setToolbars(u,v)}else es.setToolbar(u,s0(o,i,l,_.none()))},QD=bi(),eR=QD.os.isiOS()&&QD.os.version.major<=12;var U7=Object.freeze({__proto__:null,render:(o,r,i,l,u)=>{let{mainUi:m,uiMotherships:f}=r,v=Rt(0),y=m.outerContainer;M7(o);let x=bt(u.targetNode),A=Ns(yn(x));Wm(x,m.mothership),((I,X,W)=>{ch(I)&&Wm(W.mainUi.mothership.element,W.popupUi.mothership),Hy(X,W.dialogUi.mothership)})(o,A,r),o.on("PostRender",(()=>{es.setSidebar(y,i.sidebar,L4(o)),es.setViews(y,i.views)})),o.on("SkinLoaded",(()=>{L3(o,r,i,l),v.set(o.getWin().innerWidth),es.setMenubar(y,PD(o,i)),((I,X)=>{let{uiMotherships:W}=X,K=I.dom,V=I.getWin(),U=I.getDoc().documentElement,J=Rt(Qt(V.innerWidth,V.innerHeight)),ee=Rt(Qt(U.offsetWidth,U.offsetHeight)),ue=()=>{let Ne=J.get();Ne.left===V.innerWidth&&Ne.top===V.innerHeight||(J.set(Qt(V.innerWidth,V.innerHeight)),Zl(I))},ce=()=>{let Ne=I.getDoc().documentElement,Ae=ee.get();Ae.left===Ne.offsetWidth&&Ae.top===Ne.offsetHeight||(ee.set(Qt(Ne.offsetWidth,Ne.offsetHeight)),Zl(I))},ge=Ne=>{((Ae,Le)=>{Ae.dispatch("ScrollContent",Le)})(I,Ne)};K.bind(V,"resize",ue),K.bind(V,"scroll",ge);let Re=se(bt(I.getBody()),"load",ce);I.on("hide",(()=>{Ot(W,(Ne=>{q(Ne.element,"display","none")}))})),I.on("show",(()=>{Ot(W,(Ne=>{Un(Ne.element,"display")}))})),I.on("NodeChange",ce),I.on("remove",(()=>{Re.unbind(),K.unbind(V,"resize",ue),K.unbind(V,"scroll",ge),V=null}))})(o,r)}));let E=es.getSocket(y).getOrDie("Could not find expected socket element");if(eR){Bd(E.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});let I=(W=>{let K=null;return{cancel:()=>{To(K)||(clearTimeout(K),K=null)},throttle:(...V)=>{To(K)&&(K=setTimeout((()=>{K=null,W.apply(null,V)}),20))}}})((()=>{o.dispatch("ScrollContent")})),X=G(E.element,"scroll",I.throttle);o.on("remove",X.unbind)}IO(o,r),o.addCommand("ToggleSidebar",((I,X)=>{es.toggleSidebar(y,X),(W=>{W.dispatch("ToggleSidebar")})(o)})),o.addQueryValueHandler("ToggleSidebar",(()=>es.whichSidebar(y)??"")),o.addCommand("ToggleView",((I,X)=>{if(es.toggleView(y,X)){let W=y.element;m.mothership.broadcastOn([pd()],{target:W}),Ot(f,(K=>{K.broadcastOn([pd()],{target:W})})),To(es.whichView(y))&&(o.focus(),o.nodeChanged(),es.refreshToolbar(y)),(K=>{K.dispatch("ToggleView")})(o)}})),o.addQueryValueHandler("ToggleView",(()=>es.whichView(y)??""));let O=lh(o);O!==Hu.sliding&&O!==Hu.floating||o.on("ResizeWindow ResizeEditor ResizeContent",(()=>{let I=o.getWin().innerWidth;I!==v.get()&&(es.refreshToolbar(r.mainUi.outerContainer),v.set(I))}));let B={setEnabled:I=>{A2(r,I?"setEnabled":"setDisabled")},isEnabled:()=>!Ut.isDisabled(y)};return{iframeContainer:E.element.dom,editorContainer:y.element.dom,api:B}}});let I3=o=>Yn(o)?o+"px":o,zb=(o,r,i)=>{let l=r.filter((m=>o<m)),u=i.filter((m=>o>m));return l.or(u).getOr(o)},Z7=o=>{let r=HC(o),i=zC(o),l=$C(o);return(u=r,/^[0-9\.]+(|px)$/i.test(""+u)?_.some(parseInt(""+u,10)):_.none()).map((m=>zb(m,i,l)));var u},{ToolbarLocation:K2,ToolbarMode:tR}=m_,W7=(o,r,i,l,u)=>{let{mainUi:m,uiMotherships:f}=i,v=r2.DOM,y=P1(o),x=Xm(o),A=$C(o).or(Z7(o)),E=l.shared.header,O=E.isPositionedAtTop,B=lh(o),I=B===tR.sliding||B===tR.floating,X=Rt(!1),W=()=>X.get()&&!o.removed,K=ee=>I?ee.fold(ve(0),(ue=>ue.components().length>1?Nr(ue.components()[1].element):0)):0,V=()=>{Ot(f,(ee=>{ee.broadcastOn([Ei()],{})}))},U=ee=>{if(!W())return;y||u.on((ge=>{let Re=A.getOrThunk((()=>Zr().width-ym(r).left-10));q(ge.element,"max-width",Re+"px")}));let ue=fn(),ce=!(y||y||!(Ii(m.outerContainer.element).left+fu(m.outerContainer.element)>=window.innerWidth-40||Hs(m.outerContainer.element,"width").isSome())||(q(m.outerContainer.element,"position","absolute"),q(m.outerContainer.element,"left","0px"),Un(m.outerContainer.element,"width"),0));if(I&&es.refreshToolbar(m.outerContainer),!y){let ge=fn(),Re=Rs(ue.left!==ge.left,ue);((Ne,Ae)=>{u.on((Le=>{let Ye=es.getToolbar(m.outerContainer),Dt=K(Ye),nn=Br(r),sn=((tn,Wo)=>ch(tn)?Ea(Wo):_.none())(o,m.outerContainer.element),Fn=sn.fold((()=>nn.x),(tn=>{let Wo=Br(tn);return wn(tn,Ys())?nn.x:nn.x-Wo.x})),fo=Rs(Ne,Math.ceil(m.outerContainer.element.dom.getBoundingClientRect().width)).filter((tn=>tn>150)).map((tn=>{let Wo=Ae.getOr(fn()),cn=window.innerWidth-(Fn-Wo.left),vs=Math.max(Math.min(tn,cn),150);return cn<tn&&q(m.outerContainer.element,"width",vs+"px"),{width:vs+"px"}})).getOr({width:"max-content"}),Zo={position:"absolute",left:Math.round(Fn)+"px",top:sn.fold((()=>O()?Math.max(nn.y-Nr(Le.element)+Dt,0):nn.bottom),(tn=>{let Wo=Br(tn),cn=tn.dom.scrollTop??0,vs=wn(tn,Ys())?Math.max(nn.y-Nr(Le.element)+Dt,0):nn.y-Wo.y+cn-Nr(Le.element)+Dt;return O()?vs:nn.bottom}))+"px"};Bd(m.outerContainer.element,{...Zo,...fo})}))})(ce,Re),Re.each((Ne=>{hf(Ne.left,ge.top)}))}x&&u.on(ee),V()},J=()=>!(y||!x||!W())&&u.get().exists((ee=>{let ue=E.getDockingMode(),ce=(Re=>{switch(VC(o)){case K2.auto:let Ne=es.getToolbar(m.outerContainer),Ae=K(Ne),Le=Nr(Re.element)-Ae,Ye=Br(r);if(Ye.y>Le)return"top";{let Dt=Ba(r),nn=Math.max(Dt.dom.scrollHeight,Nr(Dt));return Ye.bottom<nn-Le||Wr().bottom<Ye.bottom-Le?"bottom":"top"}case K2.bottom:return"bottom";case K2.top:default:return"top"}})(ee);return ce!==ue&&(ge=ce,u.on((Re=>{$s.setModes(Re,[ge]),E.setDockingMode(ge);let Ne=O()?Ud.TopToBottom:Ud.BottomToTop;en(Re.element,Kh,Ne)})),!0);var ge}));return{isVisible:W,isPositionedAtTop:O,show:()=>{X.set(!0),q(m.outerContainer.element,"display","flex"),v.addClass(o.getBody(),"mce-edit-focus"),Ot(f,(ee=>{Un(ee.element,"display")})),J(),ch(o)?U((ee=>$s.isDocked(ee)?$s.reset(ee):$s.refresh(ee))):U($s.refresh)},hide:()=>{X.set(!1),q(m.outerContainer.element,"display","none"),v.removeClass(o.getBody(),"mce-edit-focus"),Ot(f,(ee=>{q(ee.element,"display","none")}))},update:U,updateMode:()=>{J()&&U($s.reset)},repositionPopups:V}},nR=(o,r)=>{let i=Br(o);return{pos:r?i.y:i.bottom,bounds:i}};var j7=Object.freeze({__proto__:null,render:(o,r,i,l,u)=>{let{mainUi:m}=r,f=to(),v=bt(u.targetNode),y=W7(o,v,r,l,f),x=QA(o);B7(o);let A=()=>{if(f.isSet())return void y.show();f.set(es.getHeader(m.outerContainer).getOrDie());let O=GC(o);ch(o)?(Wm(v,m.mothership),Wm(v,r.popupUi.mothership)):Hy(O,m.mothership),Hy(O,r.dialogUi.mothership);let B=()=>{L3(o,r,i,l),es.setMenubar(m.outerContainer,PD(o,i)),y.show(),((I,X,W,K)=>{let V=Rt(nR(X,W.isPositionedAtTop())),U=ce=>{let{pos:ge,bounds:Re}=nR(X,W.isPositionedAtTop()),{pos:Ne,bounds:Ae}=V.get(),Le=Re.height!==Ae.height||Re.width!==Ae.width;V.set({pos:ge,bounds:Re}),Le&&Zl(I,ce),W.isVisible()&&(Ne!==ge?W.update($s.reset):Le&&(W.updateMode(),W.repositionPopups()))};K||(I.on("activate",W.show),I.on("deactivate",W.hide)),I.on("SkinLoaded ResizeWindow",(()=>W.update($s.reset))),I.on("NodeChange keydown",(ce=>{requestAnimationFrame((()=>U(ce)))}));let J=0,ee=sl((()=>W.update($s.refresh)),33);I.on("ScrollWindow",(()=>{let ce=fn().left;ce!==J&&(J=ce,ee.throttle()),W.updateMode()})),ch(I)&&I.on("ElementScroll",(ce=>{W.update($s.refresh)}));let ue=ur();ue.set(se(bt(I.getBody()),"load",(ce=>U(ce.raw)))),I.on("remove",(()=>{ue.clear()}))})(o,v,y,x),o.nodeChanged()};x?o.once("SkinLoaded",B):B()};o.on("show",A),o.on("hide",y.hide),x||(o.on("focus",A),o.on("blur",y.hide)),o.on("init",(()=>{(o.hasFocus()||x)&&A()})),IO(o,r);let E={show:A,hide:y.hide,setEnabled:O=>{A2(r,O?"setEnabled":"setDisabled")},isEnabled:()=>!Ut.isDisabled(m.outerContainer)};return{editorContainer:m.outerContainer.element.dom,api:E}}});let F3="contexttoolbar-hide",H3=(o,r,i)=>({setInputEnabled:l=>{!l&&i&&ct(i),Ut.set(o,!l)},isInputEnabled:()=>!Ut.isDisabled(o),hide:()=>{$n(o,Do())},back:()=>{$n(o,ux)},getValue:()=>r.get().getOrThunk((()=>xt.getValue(o))),setValue:l=>{o.getSystem().isConnected()?xt.setValue(o,l):r.set(l)}}),mx=(o,r,i)=>{let l=zo(o.element).bind((u=>o.getSystem().getByDom(u).toOptional()));return H3(l.getOr(o),r,i)},z3=(o,r,i)=>$e(o3,((l,u)=>{let m=o.get(l),f=H3(m,i,l.element);r.onAction(f,u.event.buttonApi)})),$3=(o,r,i,l)=>{let u=it(r,(m=>go(((f,v,y,x)=>(A=>A.type==="contextformtogglebutton")(v)?((A,E,O,B)=>{let{primary:I,...X}=E.original,W=Ia(EO({...X,type:"togglebutton",onAction:Qe}));return U2(W,O,[z3(A,E,B)])})(f,v,y,x):((A,E,O,B)=>{let{primary:I,...X}=E.original,W=Ia(ww({...X,type:"button",onAction:Qe}));return V2(W,O,[z3(A,E,B)])})(f,v,y,x))(o,m,i,l))));return{asSpecs:()=>it(u,(m=>m.asSpec())),findPrimary:m=>Mt(r,((f,v)=>f.primary?_.from(u[v]).bind((y=>y.getOpt(m))).filter(ns(Ut.isDisabled)):_.none()))}},q7=(o,r,i,l)=>{let{width:u,height:m}=o.initValue(),f=Yw,v=we("ratio-event"),y=ce=>H3(ce,l),x=ce=>zu(ce,{tag:"span",classes:["tox-icon","tox-lock-icon__"+ce]},r.icons),A=()=>!1,E=o.label.getOr("Constrain proportions"),O=r.translate(E),B=ar.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-lock-context-form-size-input","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":O,"data-mce-name":E}},components:[x("lock"),x("unlock")],buttonBehaviours:st([Ut.config({disabled:A}),ko.config({}),is.config(r.tooltips.getConfig({tooltipText:O}))])}),I=ce=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:ce}),X=ce=>Fi(ce.element,"div.tox-focusable-wrapper").fold(_.none,(ge=>(ct(ge),_.some(!0)))),W=ce=>Bn.parts.field({factory:Kf,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:ce?u:m,inputBehaviours:st([Ut.config({disabled:A}),ko.config({}),on("size-input-toolbar-events",[$e(pl(),((ge,Re)=>{Wt(ge,v,{isField1:ce})}))]),Ft.config({mode:"special",onEnter:i,onEscape:X})]),selectOnFocus:!1}),K=ce=>({dom:{tag:"label",classes:["tox-label"]},components:[xs(r.translate(ce))]}),V=ce=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[ce],behaviours:st([ko.config({}),un.config({}),Ft.config({mode:"special",onEnter:ge=>xo(ge.element,"input").fold(_.none,(Re=>(ct(Re),_.some(!0))))})])}),U=V(ar.parts.field1(I([Bn.parts.label(K("Width:")),W(!0)]))),J=V(ar.parts.field2(I([Bn.parts.label(K("Height:")),W(!1)]))),ee=Rt(Qe),ue=[tg({onBeforeSetup:ce=>xo(ce.element,"input").each(ct),onSetup:o.onSetup,getApi:y},ee),Sk({getApi:y},ee,l)];return ar.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[U,I([B]),J],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(ce,ge,Re)=>{Kw(xt.getValue(ce)).each((Ne=>{f(Ne).each((Ae=>{xt.setValue(ge,Gw(Ae))}))}))},onInput:ce=>$n(ce,g5),coupledFieldBehaviours:st([un.config({}),Ft.config({mode:"flow",focusInside:tt.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),Ut.config({disabled:A,onDisabled:ce=>{ar.getField1(ce).bind(Bn.getField).each(Ut.disable),ar.getField2(ce).bind(Bn.getField).each(Ut.disable),ar.getLock(ce).each(Ut.disable)},onEnabled:ce=>{ar.getField1(ce).bind(Bn.getField).each(Ut.enable),ar.getField2(ce).bind(Bn.getField).each(Ut.enable),ar.getLock(ce).each(Ut.enable)}}),ea((()=>r.checkUiComponentContext("mode:design"))),on("size-input-toolbar-events2",[$e(v,((ce,ge)=>{let Re=ge.event.isField1,Ne=Re?ar.getField1(ce):ar.getField2(ce),Ae=Re?ar.getField2(ce):ar.getField1(ce),Le=Ne.map(xt.getValue).getOr(""),Ye=Ae.map(xt.getValue).getOr("");f=Ib(Le,Ye)})),$e(g5,(ce=>o.onInput(y(ce)))),...ue])])})},oR=(o,r,i)=>Bn.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...o.toArray(),r],fieldBehaviours:st([Ut.config({disabled:()=>i.checkUiComponentContext("mode:design").shouldDisable,onDisabled:l=>{(u=>{Mo(u.element).each((m=>{Fi(m,'[tabindex="-1"]').each((f=>{ct(f)}))}))})(l),Bn.getField(l).each(Ut.disable)},onEnabled:l=>{Bn.getField(l).each(Ut.enable)}})])}),gx=(o,r,i,l)=>{let u=Rt(Qe),m=y=>mx(y,l),f=o.label.map((y=>Bn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[xs(r.translate(y))]}))),v=Bn.parts.field({factory:Kf,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(o.min()),max:String(o.max())},data:o.initValue().toString(),fromInputValue:y=>(x=>{let A=parseFloat(x);return isNaN(A)?_.none():_.some(A)})(y).getOr(o.min()),toInputValue:y=>String(y),inputBehaviours:st([Ut.config({disabled:()=>r.checkUiComponentContext("mode:design").shouldDisable}),ea((()=>r.checkUiComponentContext("mode:design"))),Ft.config({mode:"special",onEnter:i,onLeft:(y,x)=>(x.cut(),_.none()),onRight:(y,x)=>(x.cut(),_.none())}),on("slider-events",[tg({onSetup:o.onSetup,getApi:m,onBeforeSetup:Ft.focusIn},u),Sk({getApi:m},u,l),$e(Pc(),(y=>{o.onInput(m(y))}))])])});return oR(f,v,r)},sR=(o,r,i,l)=>{let u=Rt(Qe),m=x=>mx(x,l),f=o.label.map((x=>Bn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[xs(r.translate(x))]}))),v={...o.placeholder.map((x=>({placeholder:r.translate(x)}))).getOr({})},y=Bn.parts.field({factory:Kf,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:v,data:o.initValue(),selectOnFocus:!0,inputBehaviours:st([Ut.config({disabled:()=>r.checkUiComponentContext("mode:design").shouldDisable}),ea((()=>r.checkUiComponentContext("mode:design"))),Ft.config({mode:"special",onEnter:i,onLeft:(x,A)=>(A.cut(),_.none()),onRight:(x,A)=>(A.cut(),_.none())}),on("input-events",[tg({onSetup:o.onSetup,getApi:x=>Fi(x.element,".tox-toolbar").bind((A=>xo(A,"button:enabled"))).fold((()=>mx(x,l)),(A=>mx(x,l,A))),onBeforeSetup:Ft.focusIn},u),Sk({getApi:m},u,l),$e(Pc(),(x=>{o.onInput(m(x))}))])])});return oR(f,y,r)},rR=(o,r,i)=>{let l=to(),u=go(o(i,(y=>f.findPrimary(y).orThunk((()=>v.findPrimary(y))).map((x=>(Nf(x),!0)))),l)),m=Xa(r.commands,(y=>y.align==="start")),f=$3(u,m.pass,i,l),v=$3(u,m.fail,i,l);return pn([{title:_.none(),label:_.none(),items:f.asSpecs()},{title:_.none(),label:_.none(),items:[u.asSpec()]},{title:_.none(),label:_.none(),items:v.asSpecs()}],(y=>y.items.length>0))},V3=(o,r)=>{switch(o.type){case"contextform":return rR(ut(sR,o),o,r);case"contextsliderform":return rR(ut(gx,o),o,r);case"contextsizeinputform":return rR(ut(q7,o),o,r)}},aR=(o,r,i)=>r.bottom-o.y>=i&&o.bottom-r.y>=i,Y2=o=>{let r=(i=>{let l=i.getBoundingClientRect();if(l.height<=0&&l.width<=0){let u=Mn(bt(i.startContainer),i.startOffset).element;return(oi(u)?zo(u):_.some(u)).filter(Dr).map((m=>m.dom.getBoundingClientRect())).getOr(l)}return l})(o.selection.getRng());if(o.inline){let i=fn();return wr(i.left+r.left,i.top+r.top,r.width,r.height)}{let i=yu(bt(o.getBody()));return wr(i.x+r.left,i.y+r.top,r.width,r.height)}},iR=(o,r,i,l=0)=>{let u=Zr(window),m=Br(bt(o.getContentAreaContainer())),f=WC(o)||jC(o)||vb(o),{x:v,width:y}=((x,A,E)=>{let O=Math.max(x.x+E,A.x);return{x:O,width:Math.min(x.right-E,A.right)-O}})(m,u,l);if(o.inline&&!f)return wr(v,u.y,y,u.height);{let x=r.header.isPositionedAtTop(),{y:A,bottom:E}=((O,B,I,X,W,K)=>{let V=bt(O.getContainer()),U=xo(V,".tox-editor-header").getOr(V),J=Br(U),ee=J.y>=B.bottom,ue=X&&!ee;if(O.inline&&ue)return{y:Math.max(J.bottom+K,I.y),bottom:I.bottom};if(O.inline&&!ue)return{y:I.y,bottom:Math.min(J.y-K,I.bottom)};let ce=W==="line"?Br(V):B;return ue?{y:Math.max(J.bottom+K,I.y),bottom:Math.min(ce.bottom-K,I.bottom)}:{y:Math.max(ce.y+K,I.y),bottom:Math.min(J.y-K,I.bottom)}})(o,m,u,x,i,l);return wr(v,A,y,E-A)}},lR={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},U3={maxHeightFunction:Fm(),maxWidthFunction:F0()},Z3=o=>o==="node",cR=(o,r,i,l,u)=>{let m=Y2(o),f=l.lastElement().exists((v=>wn(i,v)));return((v,y)=>{let x=v.selection.getRng(),A=Mn(bt(x.startContainer),x.startOffset);return x.startContainer===x.endContainer&&x.startOffset===x.endOffset-1&&wn(A.element,y)})(o,i)?f?I0:zc:f?((v,y)=>{let x=Hs(v,"position");q(v,"position",y);let A=aR(m,Br(r),-20)&&!l.isReposition()?Ey:I0;return x.each((E=>q(v,"position",E))),A})(r,l.getMode()):(l.getMode()==="fixed"?u.y+fn().top:u.y)+(Nr(r)+12)<=m.y?zc:Gh},cp=(o,r,i,l)=>{let u=f=>(v,y,x,A,E)=>({...cR(o,A,f,i,E)({...v,y:E.y,height:E.height},y,x,A,E),alwaysFit:!0}),m=f=>Z3(l)?[u(f)]:[];return r?{onLtr:f=>[Yr,Lr,Kr,Ta,Wa,ba].concat(m(f)),onRtl:f=>[Yr,Kr,Lr,Wa,Ta,ba].concat(m(f))}:{onLtr:f=>[ba,Yr,Ta,Lr,Wa,Kr].concat(m(f)),onRtl:f=>[ba,Yr,Wa,Kr,Ta,Lr].concat(m(f))}},up=(o,r)=>{let i=pn(r,(m=>m.predicate(o.dom))),{pass:l,fail:u}=Xa(i,(m=>m.type==="contexttoolbar"));return{contextToolbars:l,contextForms:u}},G7=(o,r)=>{let i={},l=[],u=[],m={},f={},v=rn(o);return Ot(v,(y=>{let x=o[y];x.type==="contextform"||x.type==="contextsliderform"||x.type==="contextsizeinputform"?((A,E)=>{let O=Ia(ss("ContextForm",Y8,E));i[A]=O,O.launch.map((B=>{m["form:"+A]={...E.launch,type:B.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{r(O)}}})),O.scope==="editor"?u.push(O):l.push(O),f[A]=O})(y,x):x.type==="contexttoolbar"&&((A,E)=>{var O;(O=E,ss("ContextToolbar",yk,O)).each((B=>{B.launch.isSome()&&(m["toolbar:"+A]={...E.launch,type:"button",onAction:()=>{r(B)}}),E.scope==="editor"?u.push(B):l.push(B),f[A]=B}))})(y,x)})),{forms:i,inNodeScope:l,inEditorScope:u,lookupTable:f,formNavigators:m}},W3="tox-pop--transition",uR=(o,r,i,l)=>{let u=l.backstage,m=u.shared,f=bi().deviceType.isTouch,v=to(),y=to(),x=to(),A=(ge=>{let Re=Rt([]);return{sketch:Ls.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:Ae=>{Re.set([]),Ls.getContent(Ae).each((Le=>{Un(Le.element,"visibility")})),$o(Ae.element,D3),Un(Ae.element,"width")},onHide:()=>{Re.set([]),ge.onHide()},inlineBehaviours:st([on("context-toolbar-events",[fd(Ig(),((Ae,Le)=>{Le.event.raw.propertyName==="width"&&($o(Ae.element,D3),Un(Ae.element,"width"))})),$e(O3,((Ae,Le)=>{let Ye=Ae.element;Un(Ye,"width");let Dt=hs(Ye),nn=Mo(Ae.element).isSome();Un(Ye,"left"),Un(Ye,"right"),Un(Ye,"max-width"),Ls.setContent(Ae,Le.event.contents),bs(Ye,D3);let sn=hs(Ye);q(Ye,"transition","none"),Ls.reposition(Ae),Un(Ye,"transition"),q(Ye,"width",Dt+"px"),Le.event.focus.fold((()=>{nn&&Z2(Ae)}),(Fn=>{qs(yn(Ae.element)).fold((()=>ct(Fn)),(fo=>{wn(fo,Fn)||ge.focusElement(Fn)}))})),setTimeout((()=>{q(Ae.element,"width",sn+"px")}),0)})),$e(HD,((Ae,Le)=>{Ls.getContent(Ae).each((Ye=>{Re.set(Re.get().concat([{bar:Ye,focus:qs(yn(Ae.element))}]))})),Wt(Ae,O3,{contents:Le.event.forwardContents,focus:_.none()})})),$e(ux,((Ae,Le)=>{ge.onBack(),Ge(Re.get()).each((Ye=>{Re.set(Re.get().slice(0,Re.get().length-1)),Wt(Ae,O3,{contents:Pu(Ye.bar),focus:Ye.focus})}))}))]),Ft.config({mode:"special",onEscape:Ae=>Ge(Re.get()).fold((()=>ge.onEscape()),(Le=>($n(Ae,ux),_.some(!0))))})]),lazySink:()=>Nn.value(ge.sink)}),inSubtoolbar:()=>Re.get().length>0}})({sink:i,onEscape:()=>(o.focus(),KO(o),_.some(!0)),onHide:()=>{KO(o)},onBack:()=>{(ge=>{ge.dispatch("ContextFormSlideBack")})(o)},focusElement:ge=>{o.getBody().contains(ge.dom)?o.focus():ct(ge)}}),E=qi(A.sketch),O=()=>{let ge=x.get().getOr("node"),Re=Z3(ge)?1:0;return iR(o,m,ge,Re)},B=()=>!(o.removed||f()&&u.isContextMenuOpen()),I=()=>{if(B()){let ge=O(),Re=Da(x.get(),"node")?((Ne,Ae)=>Ae.filter((Le=>gr(Le)&&Pi(Le))).map(yu).getOrThunk((()=>Y2(Ne))))(o,v.get()):Y2(o);return ge.height<=0||!aR(Re,ge,.01)}return!0},X=()=>{v.clear(),y.clear(),x.clear(),Ls.hide(E)},W=()=>{if(Ls.isOpen(E)){let ge=E.element;Un(ge,"display"),I()?q(ge,"display","none"):(y.set(0),Ls.reposition(E))}},K=ge=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[ge],behaviours:st([Ft.config({mode:"acyclic"}),on("pop-dialog-wrap-events",[as((Re=>{o.shortcuts.add("ctrl+F9","focus statusbar",(()=>Ft.focusIn(Re)))})),Ru((Re=>{o.shortcuts.remove("ctrl+F9")}))])])}),V=ge=>{let Re=J([ge]);Wt(E,HD,{forwardContents:K(Re)})},U=dr((()=>G7(r,V))),J=ge=>{let{buttons:Re}=o.ui.registry.getAll(),Ne={...Re,...U().formNavigators},Ae=lh(o)===Hu.scrolling?Hu.scrolling:Hu.default,Le=Vs(it(ge,(Ye=>{return Ye.type==="contexttoolbar"?((nn,sn)=>s0(o,{buttons:nn,toolbar:sn.items,allowToolbarGroups:!1},l.backstage,_.some(["form:","toolbar:"])))(Ne,(Dt=Ye,{...Dt,launch:Dt.launch.getOrUndefined(),items:Wn(Dt.items)?Dt.items:it(Dt.items,J8)})):((nn,sn)=>V3(nn,sn))(Ye,m.providers);var Dt})));return k3({type:Ae,uid:we("context-toolbar"),initGroups:Le,onEscape:_.none,cyclicKeying:!0,providers:m.providers})},ee=(ge,Re)=>{if(ce.cancel(),!B())return;let Ne=J(ge),Ae=ge[0].position,Le=((Dt,nn)=>{let sn=Dt==="node"?m.anchors.node(nn):m.anchors.cursor(),Fn=((fo,Zo,tn,Wo)=>Zo==="line"?{bubble:Hl(12,0,lR),layouts:{onLtr:()=>[Mp],onRtl:()=>[N0]},overrides:U3}:{bubble:Hl(0,12,lR,1/12),layouts:cp(fo,tn,Wo,Zo),overrides:U3})(o,Dt,f(),{lastElement:v.get,isReposition:()=>Da(y.get(),0),getMode:()=>Ki.getMode(i)});return Xn(sn,Fn)})(Ae,Re);x.set(Ae),y.set(1);let Ye=E.element;Un(Ye,"display"),(Dt=>Da(Ra(Dt,v.get(),wn),!0))(Re)||($o(Ye,W3),Ki.reset(i,E)),Ls.showWithinBounds(E,K(Ne),{anchor:Le,transition:{classes:[W3],mode:"placement"}},(()=>_.some(O()))),Re.fold(v.clear,v.set),I()&&q(Ye,"display","none")},ue=!1,ce=sl((()=>{!o.hasFocus()||o.removed||ue||(Js(E.element,W3)?ce.throttle():((ge,Re)=>{let Ne=bt(Re.getBody()),Ae=Ye=>wn(Ye,Ne),Le=bt(Re.selection.getNode());return(Ye=>!Ae(Ye)&&!vc(Ne,Ye))(Le)?_.none():((Ye,Dt,nn)=>{let sn=up(Ye,Dt);if(sn.contextForms.length>0)return _.some({elem:Ye,toolbars:[sn.contextForms[0]]});{let Fn=up(Ye,nn);if(Fn.contextForms.length>0)return _.some({elem:Ye,toolbars:[Fn.contextForms[0]]});if(sn.contextToolbars.length>0||Fn.contextToolbars.length>0){let fo=(Zo=>{if(Zo.length<=1)return Zo;{let tn=po=>Ho(Zo,(ya=>ya.position===po)),Wo=po=>pn(Zo,(ya=>ya.position===po)),cn=tn("selection"),vs=tn("node");if(cn||vs){if(vs&&cn){let po=Wo("node"),ya=it(Wo("selection"),(Io=>({...Io,position:"node"})));return po.concat(ya)}return Wo(cn?"selection":"node")}return Wo("line")}})(sn.contextToolbars.concat(Fn.contextToolbars));return _.some({elem:Ye,toolbars:fo})}return _.none()}})(Le,ge.inNodeScope,ge.inEditorScope).orThunk((()=>((Ye,Dt,nn)=>Ye(Dt)?_.none():nd(Dt,(sn=>{if(Dr(sn)){let{contextToolbars:Fn,contextForms:fo}=up(sn,nn.inNodeScope),Zo=fo.length>0?fo:(tn=>{if(tn.length<=1)return tn;{let Wo=cn=>kn(tn,(vs=>vs.position===cn));return Wo("selection").orThunk((()=>Wo("node"))).orThunk((()=>Wo("line"))).map((cn=>cn.position)).fold((()=>[]),(cn=>pn(tn,(vs=>vs.position===cn))))}})(Fn);return Zo.length>0?_.some({elem:sn,toolbars:Zo}):_.none()}return _.none()}),Ye))(Ae,Le,ge)))})(U(),o).fold(X,(ge=>{ee(ge.toolbars,_.some(ge.elem))})))}),17);o.on("init",(()=>{o.on("remove",X),o.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",W),o.on("click focus SetContent",ce.throttle),o.on("keyup",(ge=>{var Re;((Re=ge.keyCode)!==j2.ENTER&&Re!==j2.SPACEBAR||!A.inSubtoolbar())&&ce.throttle()})),o.on(F3,X),o.on("contexttoolbar-show",(ge=>{let Re=U();qt(Re.lookupTable,ge.toolbarKey).each((Ne=>{ee([Ne],Rs(ge.target!==o,ge.target)),Z2(E)}))})),o.on("focusout",(ge=>{s2.setEditorTimeout(o,(()=>{Mo(i.element).isNone()&&Mo(E.element).isNone()&&!o.hasFocus()&&X()}),0)})),o.on("SwitchMode",(()=>{o.mode.isReadOnly()&&X()})),o.on("DisabledStateChange",(ge=>{ge.state&&X()})),o.on("ExecCommand",(({command:ge})=>{ge.toLowerCase()==="toggleview"&&X()})),o.on("AfterProgressState",(ge=>{ge.state?X():o.hasFocus()&&ce.throttle()})),o.on("dragstart",(()=>{ue=!0})),o.on("dragend drop",(()=>{ue=!1})),o.on("NodeChange",(ge=>{A.inSubtoolbar()?(q(E.element,"transition","none"),W(),Un(E.element,"transition")):Mo(E.element).fold(ce.throttle,Qe)}))}))},dR=(o,r)=>{let i=()=>{let l=r.getOptions(o),u=r.getCurrent(o).map(r.hash),m=to();return it(l,(f=>({type:"togglemenuitem",text:r.display(f),onSetup:v=>{let y=A=>{A&&(m.on((E=>E.setActive(!1))),m.set(v)),v.setActive(A)};y(Da(u,r.hash(f)));let x=r.watcher(o,f,y);return()=>{m.clear(),x()}},onAction:()=>r.setCurrent(o,f)})))};o.ui.registry.addMenuButton(r.name,{tooltip:r.text,icon:r.icon,fetch:l=>l(i()),onSetup:r.onToolbarSetup}),o.ui.registry.addNestedMenuItem(r.name,{type:"nestedmenuitem",text:r.text,getSubmenuItems:i,onSetup:r.onMenuSetup})},mR=o=>{dR(o,(r=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:u_,hash:i=>(l=>ri(l,["fixed","relative","empty"]).map((({value:u,unit:m})=>u+m)))(i).getOr(i),display:ht,watcher:(i,l,u)=>i.formatter.formatChanged("lineheight",u,!1,{value:l}).unbind,getCurrent:i=>_.from(i.queryCommandValue("LineHeight")),setCurrent:(i,l)=>i.execCommand("LineHeight",!1,l),onToolbarSetup:wl(r),onMenuSetup:wl(r)}))(o)),(r=>_.from(A4(r)).map((i=>({name:"language",text:"Language",icon:"language",getOptions:ve(i),hash:l=>Hr(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,u,m)=>l.formatter.formatChanged("lang",m,!1,{value:u.code,customValue:u.customCode??null}).unbind,getCurrent:l=>{let u=bt(l.selection.getNode());return yf(u,(m=>_.some(m).filter(Dr).bind((f=>Zs(f,"lang").map((v=>({code:v,customCode:Zs(f,"data-mce-lang").getOrUndefined(),title:""})))))))},setCurrent:(l,u)=>l.execCommand("Lang",!1,u),onToolbarSetup:l=>{let u=ur();return l.setActive(r.formatter.match("lang",{},void 0,!0)),u.set(r.formatter.formatChanged("lang",l.setActive,!0)),Qo(u.clear,wl(r)(l))},onMenuSetup:wl(r)}))))(o).each((r=>dR(o,r)))},K7=o=>og(o,"NodeChange",(r=>{r.setEnabled(o.queryCommandState("outdent")&&o.selection.isEditable())})),gR=(o,r)=>i=>{i.setActive(r.get());let l=u=>{r.set(u.state),i.setActive(u.state)};return o.on("PastePlainTextToggle",l),Qo((()=>o.off("PastePlainTextToggle",l)),wl(o)(i))},j3=(o,r)=>()=>{o.execCommand("mceToggleFormat",!1,r)},Y7=o=>{(r=>{(i=>{lf.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],((l,u)=>{i.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onSetup:rm(i,l.name),onAction:j3(i,l.name),shortcut:l.shortcut})}));for(let l=1;l<=6;l++){let u="h"+l,m=`Access+${l}`;i.ui.registry.addToggleButton(u,{text:u.toUpperCase(),tooltip:"Heading "+l,onSetup:rm(i,u),onAction:j3(i,u),shortcut:m})}})(r),(i=>{lf.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],(l=>{i.ui.registry.addButton(l.name,{tooltip:l.text,icon:l.icon,onAction:Wl(i,l.action),shortcut:l.shortcut,context:l.context})})),lf.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],(l=>{i.ui.registry.addButton(l.name,{tooltip:l.text,icon:l.icon,onSetup:wl(i),onAction:Wl(i,l.action)})}))})(r),(i=>{lf.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(l=>{i.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onAction:Wl(i,l.action),onSetup:rm(i,l.name)})}))})(r)})(o),(r=>{lf.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],(i=>{r.ui.registry.addMenuItem(i.name,{text:i.text,icon:i.icon,shortcut:i.shortcut,onAction:Wl(r,i.action),context:i.context})})),lf.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],(i=>{r.ui.registry.addMenuItem(i.name,{text:i.text,icon:i.icon,shortcut:i.shortcut,onSetup:wl(r),onAction:Wl(r,i.action)})})),r.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:wl(r),onAction:j3(r,"code")})})(o)},fx=(o,r)=>og(o,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(i=>{i.setEnabled(!o.mode.isReadOnly()&&o.undoManager[r]())})),X7=o=>og(o,"VisualAid",(r=>{r.setActive(o.hasVisual)})),J7=(o,r)=>{(i=>{Ot([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(l=>{i.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onAction:Wl(i,l.cmd),onSetup:rm(i,l.name)})})),i.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:wl(i),onAction:Wl(i,"JustifyNone")})})(o),Y7(o),((i,l)=>{((u,m)=>{let f=rg(m,VD(u));u.ui.registry.addNestedMenuItem("align",{text:m.shared.providers.translate("Align"),onSetup:wl(u),getSubmenuItems:()=>f.items.validateItems(f.getStyleItems())})})(i,l),((u,m)=>{let f=rg(m,GD(u));u.ui.registry.addNestedMenuItem("fontfamily",{text:m.shared.providers.translate("Fonts"),onSetup:wl(u),getSubmenuItems:()=>f.items.validateItems(f.getStyleItems())})})(i,l),((u,m)=>{let f={type:"advanced",...m.styles},v=rg(m,XD(u,f));u.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:wl(u,(()=>v.getStyleItems().length>0)),getSubmenuItems:()=>v.items.validateItems(v.getStyleItems())})})(i,l),((u,m)=>{let f=rg(m,WD(u));u.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:wl(u),getSubmenuItems:()=>f.items.validateItems(f.getStyleItems())})})(i,l),((u,m)=>{let f=rg(m,KD(u));u.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:wl(u),getSubmenuItems:()=>f.items.validateItems(f.getStyleItems())})})(i,l)})(o,r),(i=>{(l=>{l.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:fx(l,"hasUndo"),onAction:Wl(l,"undo")}),l.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:fx(l,"hasRedo"),onAction:Wl(l,"redo")})})(i),(l=>{l.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:fx(l,"hasUndo"),onAction:Wl(l,"undo"),shortcut:"Meta+Z"}),l.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:fx(l,"hasRedo"),onAction:Wl(l,"redo"),shortcut:"Meta+Y"})})(i)})(o),(i=>{(v=>{v.addCommand("mceApplyTextcolor",((y,x)=>{((A,E,O)=>{A.undoManager.transact((()=>{A.focus(),A.formatter.apply(E,{value:O}),A.nodeChanged()}))})(v,y,x)})),v.addCommand("mceRemoveTextcolor",(y=>{((x,A)=>{x.undoManager.transact((()=>{x.focus(),x.formatter.remove(A,{value:null},void 0,!0),x.nodeChanged()}))})(v,y)}))})(i);let l=t5(i),u=vB(i),m=Rt(l),f=Rt(u);Fw(i,"forecolor","forecolor",m),Fw(i,"backcolor","hilitecolor",f),zk(i,"forecolor","forecolor","Text color",m),zk(i,"backcolor","hilitecolor","Background color",f)})(o),(i=>{(l=>{l.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Wl(l,"mceToggleVisualAid"),context:"any"})})(i),(l=>{l.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:X7(l),onAction:Wl(l,"mceToggleVisualAid"),context:"any"})})(i)})(o),(i=>{(l=>{l.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:K7(l),onAction:Wl(l,"outdent")}),l.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:wl(l,(()=>l.queryCommandState("indent"))),onAction:Wl(l,"indent")})})(i)})(o),mR(o),(i=>{let l=Rt(a_(i)),u=()=>i.execCommand("mceTogglePlainTextPaste");i.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:u,onSetup:gR(i,l)}),i.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:u,onSetup:gR(i,l)})})(o),(i=>{i.ui.registry.addContext("editable",(()=>i.selection.isEditable())),i.ui.registry.addContext("mode",(l=>i.mode.get()===l)),i.ui.registry.addContext("any",vn),i.ui.registry.addContext("formatting",(l=>i.formatter.canApply(l))),i.ui.registry.addContext("insert",(l=>i.schema.isValidChild(i.selection.getNode().tagName,l)))})(o)},Q7=o=>Wn(o)?o.split(/[ ,]/):o,fR=o=>r=>r.options.get(o),px=fR("contextmenu_never_use_native"),eP=fR("contextmenu_avoid_overlap"),pR=o=>{let r=o.ui.registry.getAll().contextMenus,i=o.options.get("contextmenu");return o.options.isSet("contextmenu")?i:pn(i,(l=>Sn(r,l)))},X2=(o,r)=>({type:"makeshift",x:o,y:r}),q3=o=>o.type==="longpress"||o.type.indexOf("touch")===0,tP=(o,r)=>r.type==="contextmenu"||r.type==="longpress"?o.inline?(i=>{if(q3(i)){let l=i.touches[0];return X2(l.pageX,l.pageY)}return X2(i.pageX,i.pageY)})(r):((i,l)=>{let u=r2.DOM.getPos(i);return((m,f,v)=>X2(m.x+f,m.y+v))(l,u.x,u.y)})(o.getContentAreaContainer(),(i=>{if(q3(i)){let l=i.touches[0];return X2(l.clientX,l.clientY)}return X2(i.clientX,i.clientY)})(r)):hR(o),hR=o=>({type:"selection",root:bt(o.selection.getNode())}),bR=(o,r,i)=>{switch(i){case"node":return(l=>({type:"node",node:_.some(bt(l.selection.getNode())),root:bt(l.getBody())}))(o);case"point":return tP(o,r);case"selection":return hR(o)}},vR=(o,r,i,l,u,m)=>{let f=i(),v=bR(o,r,m);Lb(f,nm.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:_.none()}).map((y=>{r.preventDefault(),Ls.showMenuAt(u,{anchor:v},{menu:{markers:np("normal")},data:y})}))},nP={onLtr:()=>[Yr,Lr,Kr,Ta,Wa,ba,zc,Gh,Ug,md,Xr,qh],onRtl:()=>[Yr,Kr,Lr,Wa,Ta,ba,zc,Gh,Xr,qh,Ug,md]},oP={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},sP=(o,r,i,l,u,m)=>{let f=bi(),v=f.os.isiOS(),y=f.os.isMacOS(),x=f.os.isAndroid(),A=f.deviceType.isTouch(),E=()=>{let O=i();((B,I,X,W,K,V,U)=>{let J=((ee,ue,ce)=>{let ge=bR(ee,ue,ce);return{bubble:Hl(0,ce==="point"?12:0,oP),layouts:nP,overrides:{maxWidthFunction:F0(),maxHeightFunction:Fm()},...ge}})(B,I,V);Lb(X,nm.CLOSE_ON_EXECUTE,W,{isHorizontalMenu:!0,search:_.none()}).map((ee=>{I.preventDefault();let ue=U?ja.HighlightMenuAndItem:ja.HighlightNone;Ls.showMenuWithinBounds(K,{anchor:J},{menu:{markers:np("normal"),highlightOnOpen:ue},data:ee,type:"horizontal"},(()=>_.some(iR(B,W.shared,V==="node"?"node":"selection")))),B.dispatch(F3)}))})(o,r,O,l,u,m,!(x||v||y&&A))};if((y||v)&&m!=="node"){let O=()=>{(B=>{let I=B.selection.getRng(),X=()=>{s2.setEditorTimeout(B,(()=>{B.selection.setRng(I)}),10),V()};B.once("touchend",X);let W=U=>{U.preventDefault(),U.stopImmediatePropagation()};B.on("mousedown",W,!0);let K=()=>V();B.once("longpresscancel",K);let V=()=>{B.off("touchend",X),B.off("longpresscancel",K),B.off("mousedown",W)}})(o),E()};((B,I)=>{let X=B.selection;if(X.isCollapsed()||I.touches.length<1)return!1;{let W=I.touches[0],K=X.getRng();return Ag(B.getWin(),Bl.domRange(K)).exists((V=>V.left<=W.clientX&&V.right>=W.clientX&&V.top<=W.clientY&&V.bottom>=W.clientY))}})(o,r)?O():(o.once("selectionchange",O),o.once("touchend",(()=>o.off("selectionchange",O))))}else E()},yR=o=>Wn(o)?o==="|":o.type==="separator",G3={type:"separator"},K3=o=>{let r=i=>({text:i.text,icon:i.icon,enabled:i.enabled,shortcut:i.shortcut});if(Wn(o))return o;switch(o.type){case"separator":return G3;case"submenu":return{type:"nestedmenuitem",...r(o),getSubmenuItems:()=>{let l=o.getSubmenuItems();return Wn(l)?l:it(l,K3)}};default:let i=o;return{type:"menuitem",...r(i),onAction:pt(i.onAction)}}},Y3=(o,r)=>{if(r.length===0)return o;let i=Ge(o).filter((l=>!yR(l))).fold((()=>[]),(l=>[G3]));return o.concat(i).concat(r).concat([G3])},CR=(o,r)=>!(i=>i.type==="longpress"||Sn(i,"touches"))(r)&&(r.button!==2||r.target===o.getBody()&&r.pointerType===""),wR=(o,r)=>CR(o,r)?o.selection.getStart(!0):r.target,rP=(o,r,i)=>{let l=bi().deviceType.isTouch,u=qi(Ls.sketch({dom:{tag:"div"},lazySink:r,onEscape:()=>o.focus(),onShow:()=>i.setContextMenuState(!0),onHide:()=>i.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:st([on("dismissContextMenu",[$e(Lc(),((v,y)=>{uo.close(v),o.focus()}))])])})),m=()=>Ls.hide(u),f=v=>{if(px(o)&&v.preventDefault(),((x,A)=>A.ctrlKey&&!px(x))(o,v)||(x=>pR(x).length===0)(o))return;let y=((x,A)=>{let E=eP(x),O=CR(x,A)?"selection":"point";if(ti(E)){let B=wR(x,A);return xm(bt(B),E)?"node":O}return O})(o,v);(l()?sP:vR)(o,v,(()=>{let x=wR(o,v),A=o.ui.registry.getAll(),E=pR(o);return((O,B,I)=>{let X=L(B,((W,K)=>qt(O,K.toLowerCase()).map((V=>{let U=V.update(I);if(Wn(U)&&ti(Gu(U)))return Y3(W,U.split(" "));if(lr(U)&&U.length>0){let J=it(U,K3);return Y3(W,J)}return W})).getOrThunk((()=>W.concat([K])))),[]);return X.length>0&&yR(X[X.length-1])&&X.pop(),X})(A.contextMenus,E,x)}),i,u,y)};o.on("init",(()=>{let v="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(l()?"":" ResizeWindow");o.on(v,m),o.on("longpress contextmenu",f)}))},xR=(o,r,i,l,u,m)=>o.fold((()=>Kp.snap({sensor:Jg(i-20,l-20),range:Qt(u,m),output:Jg(_.some(i),_.some(l)),extra:{td:r}})),(f=>{let v=i-20,y=l-20,x=f.element.dom.getBoundingClientRect();return Kp.snap({sensor:Jg(v,y),range:Qt(40,40),output:Jg(_.some(i-x.width/2),_.some(l-x.height/2)),extra:{td:r}})})),SR=(o,r,i)=>({getSnapPoints:o,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(l,u)=>{let m=u.td;((f,v)=>f.exists((y=>wn(y,v))))(r.get(),m)||(r.set(m),i(m))},mustSnap:!0}),X3=o=>go(la.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:st([Kp.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:o}),qf.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),$b=(o,r)=>{let i=Rt([]),l=Rt([]),u=Rt(!1),m=to(),f=to(),v=V=>{let U=yu(V);return xR(E.getOpt(r),V,U.x,U.y,U.width,U.height)},y=V=>{let U=yu(V);return xR(O.getOpt(r),V,U.right,U.bottom,U.width,U.height)},x=SR((()=>it(i.get(),(V=>v(V)))),m,(V=>{f.get().each((U=>{o.dispatch("TableSelectorChange",{start:V,finish:U})}))})),A=SR((()=>it(l.get(),(V=>y(V)))),f,(V=>{m.get().each((U=>{o.dispatch("TableSelectorChange",{start:U,finish:V})}))})),E=X3(x),O=X3(A),B=qi(E.asSpec()),I=qi(O.asSpec()),X=(V,U,J,ee)=>{let ue=J(U);Kp.snapTo(V,ue),((ce,ge)=>{let Re=ge.dom.getBoundingClientRect();Un(ce.element,"display");let Ne=Li(bt(o.getBody())).dom.innerHeight,Ae=Re[ee]<0,Le=((Ye,Dt)=>Ye[ee]>Dt)(Re,Ne);(Ae||Le)&&q(ce.element,"display","none")})(V,U)},W=V=>X(B,V,v,"top"),K=V=>X(I,V,y,"bottom");if(bi().deviceType.isTouch()){let V=U=>it(U,bt);o.on("TableSelectionChange",(U=>{u.get()||(Uf(r,B),Uf(r,I),u.set(!0));let J=bt(U.start),ee=bt(U.finish);m.set(J),f.set(ee),_.from(U.otherCells).each((ue=>{i.set(V(ue.upOrLeftCells)),l.set(V(ue.downOrRightCells)),W(J),K(ee)}))})),o.on("ResizeEditor ResizeWindow ScrollContent",(()=>{m.get().each(W),f.get().each(K)})),o.on("TableSelectionClear",(()=>{u.get()&&(Zf(B),Zf(I),u.set(!1)),m.clear(),f.clear()}))}},aP=(o,r,i)=>{let l=r.delimiter??"\u203A";return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:st([Ft.config({mode:"flow",selector:"div[role=button]"}),Ut.config({disabled:i.isDisabled}),ea((()=>i.checkUiComponentContext("any"))),ko.config({}),Cn.config({}),on("elementPathEvents",[as(((u,m)=>{o.shortcuts.add("alt+F11","focus statusbar elementpath",(()=>Ft.focusIn(u))),o.on("NodeChange",(f=>{let v=(x=>{let A=[],E=x.length;for(;E-- >0;){let B=x[E];if(B.nodeType===1&&(O=B).nodeName!=="BR"&&!O.getAttribute("data-mce-bogus")&&O.getAttribute("data-mce-type")!=="bookmark"){let I=tu(o,B);if(I.isDefaultPrevented()||A.push({name:I.name,element:B}),I.isPropagationStopped())break}}var O;return A})(f.parents),y=v.length>0?L(v,((x,A,E)=>{let O=((B,I,X)=>la.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":X}},components:[xs(B)],action:W=>{o.focus(),o.selection.select(I),o.nodeChanged()},buttonBehaviours:st([is.config({...i.tooltips.getConfig({tooltipText:i.translate(["Select the {0} element",I.nodeName.toLowerCase()]),onShow:(W,K)=>{((V,U)=>{let J=_.from(ds(V,"id")).getOrThunk((()=>{let ee=we("aria");return en(U,"id",ee),ee}));en(V,"aria-describedby",J)})(W.element,K.element)},onHide:W=>{var K;K=W.element,Bs(K,"aria-describedby")}})}),gh(i.isDisabled),ea((()=>i.checkUiComponentContext("any")))])}))(A.name,A.element,E);return E===0?x.concat([O]):x.concat([{dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[xs(` ${l} `)]},O])}),[]):[];Cn.set(u,y)}))}))])]),components:[]}};var uf;(function(o){o[o.None=0]="None",o[o.Both=1]="Both",o[o.Vertical=2]="Vertical"})(uf||(uf={}));let kR=o=>{let r=bt(o.getContainer());return{height:Nr(r),width:hs(r)}},J2=(o,r,i)=>{let l=bt(o.getContainer()),u=((m,f,v,y)=>{let x=zb(y.height+f.top,E4(m),T4(m));return v===uf.Both?{height:x,width:zb(y.width+f.left,zC(m),$C(m))}:{height:x}})(o,r,i,kR(o));return Ao(u,((m,f)=>{Yn(m)&&q(l,f,I3(m))})),(m=>{m.dispatch("ResizeEditor")})(o),u},nu=(o,r,i)=>{en(o.element,"aria-valuetext",((l,u)=>u===uf.Both?_i.translate(["Editor's height: {0} pixels, Editor's width: {1} pixels",l.height,l.width]):_i.translate(["Editor's height: {0} pixels",l.height]))(r,i))},Vb=(o,r,i,l,u)=>{let m=Qt(20*l,20*u),f=J2(o,m,i);return nu(r,f,i),_.some(!0)},ER=(o,r)=>{let i=()=>{let l=[],u=l_(o),m=s_(o),f=P4(o)||o.hasPlugin("wordcount");return m&&l.push(aP(o,{},r)),u&&l.push((()=>{let v=Ek("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[xs(_i.translate(["Press {0} for help",v]))]}})()),f&&l.push((()=>{let v=[];return o.hasPlugin("wordcount")&&v.push(((y,x)=>{let A=(E,O,B)=>Cn.set(E,[xs(x.translate(["{0} "+B,O[B]]))]);return la.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:st([gh(x.isDisabled),ea((()=>x.checkUiComponentContext("any"))),ko.config({}),Cn.config({}),xt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),on("wordcount-events",[Wd((E=>{let O=xt.getValue(E),B=O.mode==="words"?"characters":"words";xt.setValue(E,{mode:B,count:O.count}),A(E,O.count,B)})),as((E=>{y.on("wordCountUpdate",(O=>{let{mode:B}=xt.getValue(E);xt.setValue(E,{mode:B,count:O.wordCount}),A(E,O.wordCount,B)}))}))])]),eventOrder:{[Xe()]:["disabling","alloy.base.behaviour","wordcount-events"]}})})(o,r)),P4(o)&&v.push({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":o.translate(["Build with {0}","TinyMCE"])},innerHtml:o.translate(["Build with {0}",`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`.trim()])},behaviours:st([un.config({})])}]}),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:v}})()),l.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...(()=>{let v="tox-statusbar__text-container--flex-start",y="tox-statusbar__text-container--flex-end";if(u){let x="tox-statusbar__text-container-3-cols";return f||m?f&&!m?[x,y]:[x,v]:[x,"tox-statusbar__text-container--space-around"]}return[f&&!m?y:v]})()]},components:l}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{let l=i(),u=((m,f)=>{let v=(A=>{let E=r_(A);return E===!1?uf.None:E==="both"?uf.Both:uf.Vertical})(m);if(v===uf.None)return _.none();let y=v===uf.Both?_i.translate("Press the arrow keys to resize the editor."):_i.translate("Press the Up and Down arrow keys to resize the editor."),x=v===uf.Both?"tox-statusbar__resize-cursor-both":"tox-statusbar__resize-cursor-default";return _.some(zu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle",x],attributes:{"aria-label":f.translate(y),"data-mce-name":"resize-handle",role:"separator"},behaviours:[Kp.config({mode:"mouse",repositionTarget:!1,onDrag:(A,E,O)=>{let B=J2(m,O,v);nu(A,B,v)},blockerClass:"tox-blocker"}),Ft.config({mode:"special",onLeft:A=>Vb(m,A,v,-1,0),onRight:A=>Vb(m,A,v,1,0),onUp:A=>Vb(m,A,v,0,-1),onDown:A=>Vb(m,A,v,0,1)}),ko.config({}),un.config({}),is.config(f.tooltips.getConfig({tooltipText:f.translate("Resize")})),on("set-aria-valuetext",[as((A=>{let E=()=>{nu(A,kR(m),v)};m._skinLoaded?E():m.once("SkinLoaded",E)}))])],eventOrder:{[Vi()]:["add-focusable","set-aria-valuetext"]}},f.icons))})(o,r);return l.concat(u.toArray())})()}},TR=(o,r)=>r.get().getOrDie(`UI for ${o} has not been rendered`),iP=(o,r)=>{let i=o.inline,l=i?j7:U7,u=Xm(o)?g7:m7,m=(()=>{let ce=to(),ge=to(),Re=to();return{dialogUi:ce,popupUi:ge,mainUi:Re,getUiMotherships:()=>{let Ne=ce.get().map((Le=>Le.mothership)),Ae=ge.get().map((Le=>Le.mothership));return Ne.fold((()=>Ae.toArray()),(Le=>Ae.fold((()=>[Le]),(Ye=>wn(Le.element,Ye.element)?[Le]:[Le,Ye]))))},lazyGetInOuterOrDie:(Ne,Ae)=>()=>Re.get().bind((Le=>Ae(Le.outerContainer))).getOrDie(`Could not find ${Ne} element in OuterContainer`)}})(),f=to(),v=to(),y=to(),x=bi().deviceType.isTouch()?["tox-platform-touch"]:[],A=of(o),E=lh(o),O=go({dom:{tag:"div",classes:["tox-anchorbar"]}}),B=go({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),I=()=>m.mainUi.get().map((ce=>ce.outerContainer)).bind(es.getHeader),X=m.lazyGetInOuterOrDie("anchor bar",O.getOpt),W=m.lazyGetInOuterOrDie("bottom anchor bar",B.getOpt),K=m.lazyGetInOuterOrDie("toolbar",es.getToolbar),V=m.lazyGetInOuterOrDie("throbber",es.getThrobber),U=((ce,ge,Re,Ne)=>{let Ae=Rt(!1),Le=(cn=>{let vs=Rt(of(cn)?"bottom":"top");return{isPositionedAtTop:()=>vs.get()==="top",getDockingMode:vs.get,setDockingMode:vs.set}})(ge),Ye={icons:()=>ge.ui.registry.getAll().icons,menuItems:()=>ge.ui.registry.getAll().menuItems,translate:_i.translate,isDisabled:()=>!ge.ui.isEnabled(),getOption:ge.options.get,tooltips:e7(ce.dialog),checkUiComponentContext:cn=>{if(hb(ge))return{contextType:"disabled",shouldDisable:!0};let[vs,po=""]=cn.split(":"),ya=ge.ui.registry.getAll().contexts;return{contextType:vs,shouldDisable:!qt(ya,vs).fold((()=>qt(ya,"mode").map((Io=>Io("design"))).getOr(!1)),(Io=>po.charAt(0)==="!"?!Io(po.slice(1)):Io(po)))}}},Dt=pD(ge),nn=(cn=>{let vs=tl=>()=>cn.formatter.match(tl),po=tl=>()=>{let ql=cn.formatter.get(tl);return ql!==void 0?_.some({tag:ql.length>0&&(ql[0].inline||ql[0].block)||"div",styles:cn.dom.parseStyle(cn.formatter.getCssText(tl))}):_.none()},ya=Rt([]),Io=Rt([]),gc=Rt(!1);return cn.on("PreInit",(tl=>{let ql=aD(cn),dp=lD(cn,ql,vs,po);ya.set(dp)})),cn.on("addStyleModifications",(tl=>{let ql=lD(cn,tl.items,vs,po);Io.set(ql),gc.set(tl.replace)})),{getData:()=>{let tl=gc.get()?[]:ya.get(),ql=Io.get();return tl.concat(ql)}}})(ge),sn=(cn=>({colorPicker:KB(cn),hasCustomColors:YB(cn),getColors:XB(cn),getColorCols:JB(cn)}))(ge),Fn=(cn=>({isDraggableModal:QB(cn)}))(ge),fo={shared:{providers:Ye,anchors:oD(ge,Re,Ne,Le.isPositionedAtTop),header:Le},urlinput:Dt,styles:nn,colorinput:sn,dialog:Fn,isContextMenuOpen:()=>Ae.get(),setContextMenuState:cn=>Ae.set(cn)},Zo=cn=>_.none(),tn={...fo,shared:{...fo.shared,interpreter:cn=>nD(cn,{},tn,Zo),getSink:ce.popup}},Wo={...fo,shared:{...fo.shared,interpreter:cn=>nD(cn,{},Wo,Zo),getSink:ce.dialog}};return{popup:tn,dialog:Wo}})({popup:()=>Nn.fromOption(m.popupUi.get().map((ce=>ce.sink)),"(popup) UI has not been rendered"),dialog:()=>Nn.fromOption(m.dialogUi.get().map((ce=>ce.sink)),"UI has not been rendered")},o,X,W),J=()=>{let ce=(()=>{let fo={attributes:{[Kh]:A?Ud.BottomToTop:Ud.TopToBottom}},Zo=es.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:U.popup,onEscape:()=>{o.focus()}}),tn=es.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:U.popup.shared.getSink,providers:U.popup.shared.providers,onEscape:()=>{o.focus()},onToolbarToggled:ql=>{((dp,jb)=>{dp.dispatch("ToggleToolbarDrawer",{state:jb})})(o,ql)},type:E,lazyToolbar:K,lazyHeader:()=>I().getOrDie("Could not find header element"),...fo}),Wo=es.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:U.popup.shared.providers,onEscape:()=>{o.focus()},type:E}),cn=vb(o),vs=jC(o),po=WC(o),ya=i_(o),Io=cn||vs||po,gc=[(tl=ya,es.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:tl})),Zo];var tl;return es.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Io?[]:["tox-editor-header--empty"]),...fo},components:Vs([po?gc:[],cn?[Wo]:vs?[tn]:[],P1(o)?[]:[O.asSpec()]]),sticky:Xm(o),editor:o,sharedBackstage:U.popup.shared})})(),ge={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[es.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),es.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}})]},Re=es.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:U.popup}),Ne=es.parts.viewWrapper({backstage:U.popup}),Ae=B4(o)&&!i?_.some(ER(o,U.popup.shared.providers)):_.none(),Le=Vs([A?[]:[ce],i?[]:[ge],A?[ce]:[]]),Ye=es.parts.editorContainer({components:Vs([Le,i?[]:[B.asSpec()]])}),Dt=z4(o),nn={role:"application",..._i.isRtl()?{dir:"rtl"}:{},...Dt?{"aria-hidden":"true"}:{}},sn=qi(es.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(i?["tox-tinymce-inline"]:[]).concat(A?["tox-tinymce--toolbar-bottom"]:[]).concat(x),styles:{visibility:"hidden",...Dt?{opacity:"0",border:"0"}:{}},attributes:nn},components:[Ye,...i?[]:[Ne,...Ae.toArray()],Re],behaviours:st([ea((()=>U.popup.shared.providers.checkUiComponentContext("any"))),Ut.config({disableClass:"tox-tinymce--disabled"}),Ft.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Fn=w1(sn);return f.set(Fn),{mothership:Fn,outerContainer:sn}},ee=ce=>{let ge=I3((Ne=>(Ae=>{let Le=((nn,sn)=>{if(typeof sn=="number")return _.from(sn);let Fn=/^([0-9.]+)(pt|em|px)$/.exec(sn.trim());if(Fn){let fo=Fn[2],Zo=Number.parseFloat(Fn[1]);if(Number.isNaN(Zo)||Zo<0)return _.none();if(fo==="em")return _.from(Zo*Number.parseFloat(window.getComputedStyle(nn.dom).fontSize));if(fo==="pt")return _.from(.75*Zo);if(fo==="px")return _.from(Zo)}return _.none()})(bt(Ae.targetElm),FC(Ae)),Ye=E4(Ae),Dt=T4(Ae);return Le.map((nn=>zb(nn,Ye,Dt)))})(Ne).getOr(FC(Ne)))(o)),Re=I3((Ne=>Z7(Ne).getOr(HC(Ne)))(o));return o.inline||(Oc("div","width",Re)&&q(ce.element,"width",Re),Oc("div","height",ge)?q(ce.element,"height",ge):q(ce.element,"height","400px")),ge},ue=ce=>{let{mainUi:ge,popupUi:Re,uiMotherships:Ne}=ce;_s(O4(o),((tn,Wo)=>{o.ui.registry.addGroupToolbarButton(Wo,tn)}));let{buttons:Ae,menuItems:Le,contextToolbars:Ye,sidebars:Dt,views:nn}=o.ui.registry.getAll(),sn=qC(o),Fn={menuItems:Le,menus:d_(o),menubar:e_(o),toolbar:sn.getOrThunk((()=>B1(o))),allowToolbarGroups:E===Hu.floating,buttons:Ae,sidebar:Dt,views:nn};var fo;fo=ge.outerContainer,o.addShortcut("alt+F9","focus menubar",(()=>{es.focusMenubar(fo)})),o.addShortcut("alt+F10","focus toolbar",(()=>{es.focusToolbar(fo)})),o.addCommand("ToggleToolbarDrawer",((tn,Wo,cn)=>{Wo?.skipFocus?(console.warn(c7.skipFocus,new Error().stack),es.toggleToolbarDrawerWithoutFocusing(fo)):cn?.skip_focus?es.toggleToolbarDrawerWithoutFocusing(fo):es.toggleToolbarDrawer(fo)})),o.addQueryStateHandler("ToggleToolbarDrawer",(()=>es.isToolbarDrawerToggled(fo))),o.on("blur",(()=>{lh(o)===Hu.floating&&es.isToolbarDrawerToggled(fo)&&es.toggleToolbarDrawerWithoutFocusing(fo)})),((tn,Wo,cn)=>{let vs=(jn,ou)=>{Ot([Wo,...cn],(fc=>{fc.broadcastEvent(jn,ou)}))},po=(jn,ou)=>{Ot([Wo,...cn],(fc=>{fc.broadcastOn([jn],ou)}))},ya=jn=>po(pd(),{target:jn.target}),Io=jn=>{po(Vc(),{closedTooltip:()=>{jn.preventDefault()}})},gc=je(),tl=G(gc,"touchstart",ya),ql=G(gc,"touchmove",(jn=>vs(ld(),jn))),dp=G(gc,"touchend",(jn=>vs(cd(),jn))),jb=G(gc,"mousedown",ya),Cx=G(gc,"mouseup",(jn=>{jn.raw.button===0&&po(e1(),{target:jn.target})})),ig=jn=>po(pd(),{target:bt(jn.target)}),r0=jn=>{jn.button===0&&po(e1(),{target:bt(jn.target)})},Gl=()=>{Ot(tn.editorManager.get(),(jn=>{tn!==jn&&jn.dispatch("DismissPopups",{relatedTarget:tn})}))},qb=jn=>vs(Eu(),xe(jn)),Gb=jn=>{po(Ei(),{}),vs($i(),xe(jn))},mp=yn(bt(tn.getElement())),Kb=se(mp,"scroll",(jn=>{requestAnimationFrame((()=>{if(tn.getContainer()!=null){let ou=sf(tn,Wo.element).map((fc=>[fc.element,...fc.others])).getOr([]);Ho(ou,(fc=>wn(fc,jn.target)))&&(tn.dispatch("ElementScroll",{target:jn.target.dom}),vs(kf(),jn))}}))})),a0=()=>po(Ei(),{}),sy=jn=>{jn.state&&po(pd(),{target:bt(tn.getContainer())})},ry=jn=>{po(pd(),{target:bt(jn.relatedTarget.getContainer())})},Sh=jn=>tn.dispatch("focusin",jn),gp=jn=>tn.dispatch("focusout",jn);tn.on("PostRender",(()=>{tn.on("click",ig),tn.on("tap",ig),tn.on("mouseup",r0),tn.on("mousedown",Gl),tn.on("ScrollWindow",qb),tn.on("ResizeWindow",Gb),tn.on("ResizeEditor",a0),tn.on("AfterProgressState",sy),tn.on("DismissPopups",ry),tn.on("CloseActiveTooltips",Io),Ot([Wo,...cn],(jn=>{jn.element.dom.addEventListener("focusin",Sh),jn.element.dom.addEventListener("focusout",gp)}))})),tn.on("remove",(()=>{tn.off("click",ig),tn.off("tap",ig),tn.off("mouseup",r0),tn.off("mousedown",Gl),tn.off("ScrollWindow",qb),tn.off("ResizeWindow",Gb),tn.off("ResizeEditor",a0),tn.off("AfterProgressState",sy),tn.off("DismissPopups",ry),tn.off("CloseActiveTooltips",Io),Ot([Wo,...cn],(jn=>{jn.element.dom.removeEventListener("focusin",Sh),jn.element.dom.removeEventListener("focusout",gp)})),jb.unbind(),tl.unbind(),ql.unbind(),dp.unbind(),Cx.unbind(),Kb.unbind()})),tn.on("detach",(()=>{Ot([Wo,...cn],IN),Ot([Wo,...cn],(jn=>jn.destroy()))}))})(o,ge.mothership,Ne),u.setup(o,U.popup.shared,I),J7(o,U.popup),rP(o,U.popup.shared.getSink,U.popup),(tn=>{let{sidebars:Wo}=tn.ui.registry.getAll();Ot(rn(Wo),(cn=>{let vs=Wo[cn],po=()=>Da(_.from(tn.queryCommandValue("ToggleSidebar")),cn);tn.ui.registry.addToggleButton(cn,{icon:vs.icon,tooltip:vs.tooltip,onAction:ya=>{tn.execCommand("ToggleSidebar",!1,cn),ya.setActive(po())},onSetup:ya=>{ya.setActive(po());let Io=()=>ya.setActive(po());return tn.on("ToggleSidebar",Io),()=>{tn.off("ToggleSidebar",Io)}},context:"any"})}))})(o),b7(o,V,U.popup.shared),uR(o,Ye,Re.sink,{backstage:U.popup}),$b(o,Re.sink);let Zo={targetNode:o.getElement(),height:ee(ge.outerContainer)};return l.render(o,ce,Fn,U.popup,Zo)};return{popups:{backstage:U.popup,getMothership:()=>TR("popups",y)},dialogs:{backstage:U.dialog,getMothership:()=>TR("dialogs",v)},renderUI:()=>{let ce=J(),ge=(()=>{let Ae=GC(o),Le=wn(Ys(),Ae)&&ga(Ae,"display")==="grid",Ye={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(x),attributes:{..._i.isRtl()?{dir:"rtl"}:{}}},behaviours:st([Ki.config({useFixed:()=>u.isDocked(I)})])},Dt={dom:{styles:{width:document.body.clientWidth+"px"}},events:Lo([$e($i(),(Fn=>{q(Fn.element,"width",document.body.clientWidth+"px")}))])},nn=qi(Xn(Ye,Le?Dt:{})),sn=w1(nn);return v.set(sn),{sink:nn,mothership:sn}})(),Re=ch(o)?(()=>{let Ae={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(x),attributes:{..._i.isRtl()?{dir:"rtl"}:{}}},behaviours:st([Ki.config({useFixed:()=>u.isDocked(I),getBounds:()=>r.getPopupSinkBounds()})])},Le=qi(Ae),Ye=w1(Le);return y.set(Ye),{sink:Le,mothership:Ye}})():(Ae=>(y.set(Ae.mothership),Ae))(ge);m.dialogUi.set(ge),m.popupUi.set(Re),m.mainUi.set(ce);let Ne={popupUi:Re,dialogUi:ge,mainUi:ce,uiMotherships:m.getUiMotherships()};return ue(Ne)}}},AR=o=>{let r=[],i={};return Ao(o,((l,u)=>{l.fold((()=>{r.push(u)}),(m=>{i[u]=m}))})),r.length>0?Nn.error(r):Nn.value(i)},lP=(o,r,i,l)=>{let u=go(ab.sketch((f=>({dom:{tag:"div",classes:["tox-form"].concat(o.classes)},components:it(o.items,(v=>tD(f,v,r,i,l)))}))));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[u.asSpec()]}],behaviours:st([Ft.config({mode:"acyclic",useTabstopAt:ns(M2)}),(m=u,io.config({find:m.getOpt})),p5(u,{postprocess:f=>AR(f).fold((v=>(console.error(v),{})),ht)}),on("dialog-body-panel",[$e(pl(),((f,v)=>{f.getSystem().broadcastOn([Ww],{newFocus:_.some(v.event.target)})}))])])};var m},J3=(o,r)=>{q(o,"height",r+"px"),q(o,"flex-basis",r+"px")},Q2=(o,r,i)=>{Fi(o,'[role="dialog"]').each((l=>{xo(l,'[role="tablist"]').each((u=>{i.get().map((m=>(q(r,"height","0"),q(r,"flex-basis","0"),Math.min(m,((f,v,y)=>{let x=Ba(f).dom,A=Fi(f,".tox-dialog-wrap").getOr(f),E;E=ga(A,"position")==="fixed"?Math.max(x.clientHeight,window.innerHeight):Math.max(x.offsetHeight,x.scrollHeight);let O=Nr(v),B=v.dom.offsetLeft>=y.dom.offsetLeft+hs(y)?Math.max(Nr(y),O):O,I=parseInt(ga(f,"margin-top"),10)||0,X=parseInt(ga(f,"margin-bottom"),10)||0;return E-(Nr(f)+I+X-B)})(l,r,u))))).each((m=>{J3(r,m)}))}))}))},Q3=o=>xo(o,'[role="tabpanel"]'),_R="send-data-to-section",eE="send-data-to-view",cP=(o,r,i,l)=>{let u=Rt({}),m=A=>{let E=xt.getValue(A),O=AR(E).getOr({}),B=u.get(),I=Xn(B,O);u.set(I)},f=A=>{let E=u.get();xt.setValue(A,E)},v=Rt(null),y=it(o.tabs,(A=>({value:A.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[xs(i.shared.providers.translate(A.title))],view:()=>[ab.sketch((E=>({dom:{tag:"div",classes:["tox-form"]},components:it(A.items,(O=>tD(E,O,r,i,l))),formBehaviours:st([Ft.config({mode:"acyclic",useTabstopAt:ns(M2)}),on("TabView.form.events",[as(f),Ru(m)]),jc.config({channels:Rm([{key:_R,value:{onReceive:m}},{key:eE,value:{onReceive:f}}])})])})))]}))),x=(A=>{let E=to();return{extraEvents:[as((B=>{let I=B.element;Q3(I).each((X=>{q(X,"visibility","hidden"),B.getSystem().getByDom(X).toOptional().each((W=>{let K=((U,J,ee)=>it(U,((ue,ce)=>{Cn.set(ee,U[ce].view());let ge=J.dom.getBoundingClientRect();return Cn.set(ee,[]),ge.height})))(A,X,W);(U=>Lt(Ri(U,((J,ee)=>J>ee?-1:J<ee?1:0))))(K).fold(E.clear,E.set)})),Q2(I,X,E),Un(X,"visibility"),((W,K)=>{Lt(W).each((V=>Xc.showTab(K,V.value)))})(A,B),requestAnimationFrame((()=>{Q2(I,X,E)}))}))})),$e($i(),(B=>{let I=B.element;Q3(I).each((X=>{Q2(I,X,E)}))})),$e(Gk,((B,I)=>{let X=B.element;Q3(X).each((W=>{let K=qs(yn(W));q(W,"visibility","hidden");let V=Hs(W,"height").map((J=>parseInt(J,10)));Un(W,"height"),Un(W,"flex-basis");let U=W.dom.getBoundingClientRect().height;V.forall((J=>U>J))?(E.set(U),Q2(X,W,E)):V.each((J=>{J3(W,J)})),Un(W,"visibility"),K.each(ct)}))}))],selectFirst:!1}})(y);return Xc.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(A,E,O)=>{let B=xt.getValue(E);Wt(A,qk,{name:B,oldName:v.get()}),v.set(B)},tabs:y,components:[Xc.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[jA.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:st([ko.config({})])}),Xc.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:x.selectFirst,tabSectionBehaviours:st([on("tabpanel",x.extraEvents),Ft.config({mode:"acyclic"}),io.config({find:A=>Lt(Xc.getViewItems(A))}),bh(_.none(),(A=>(A.getSystem().broadcastOn([_R],{}),u.get())),((A,E)=>{u.set(E),A.getSystem().broadcastOn([eE],{})}))])})},tE=(o,r,i,l,u,m)=>({dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...i.map((f=>({id:f}))).getOr({}),...u?{"aria-live":"polite"}:{}}},components:[],behaviours:st([Yk(0),qc.config({channel:`${O5}-${r}`,updateState:(f,v)=>_.some({isTabPanel:()=>v.body.type==="tabpanel"}),renderComponents:f=>{let v=f.body;return v.type==="tabpanel"?[cP(v,f.initialData,l,m)]:[lP(v,f.initialData,l,m)]},initialData:o})])}),OR=M1.deviceType.isTouch(),nE=(o,r)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[o,r]}),DR=(o,r)=>va.parts.close(la.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":r.translate("Close")}},action:o,buttonBehaviours:st([ko.config({})])})),RR=()=>va.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),NR=(o,r)=>va.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Gf(`<p>${B_(r.translate(o))}</p>`)}]}]}),MR=o=>va.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:o}),BR=(o,r)=>[Xd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:o}),Xd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:r})],Ub=o=>{let r="tox-dialog",i=r+"-wrap",l=i+"__backdrop",u=r+"__disable-scroll";return va.sketch({lazySink:o.lazySink,onEscape:m=>(o.onEscape(m),_.some(!0)),useTabstopAt:m=>!M2(m),firstTabstop:o.firstTabstop,dom:{tag:"div",classes:[r].concat(o.extraClasses),styles:{position:"relative",...o.extraStyles}},components:[o.header,o.body,...o.footer.toArray()],parts:{blocker:{dom:Gf(`<div class="${i}"></div>`),components:[{dom:{tag:"div",classes:OR?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:i,modalBehaviours:st([un.config({}),on("dialog-events",o.dialogEvents.concat([fd(pl(),((m,f)=>{Xg.isBlocked(m)||Ft.focusIn(m)})),$e(Tu(),((m,f)=>{m.getSystem().broadcastOn([Ww],{newFocus:f.event.newFocus})}))])),on("scroll-lock",[as((()=>{bs(Ys(),u)})),Ru((()=>{$o(Ys(),u)}))]),...o.extraBehaviours]),eventOrder:{[Xe()]:["dialog-events"],[Vi()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[hl()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...o.eventOrder}})},ag=o=>la.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":o.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:st([ko.config({}),is.config(o.tooltips.getConfig({tooltipText:o.translate("Close")}))]),components:[zu("close",{tag:"span",classes:["tox-icon"]},o.icons)],action:r=>{$n(r,ph)}}),oE=(o,r,i,l)=>({dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...i.map((u=>({id:u}))).getOr({})}},components:[],behaviours:st([qc.config({channel:`${_5}-${r}`,initialData:o,renderComponents:u=>[xs(l.translate(u.title))]})])}),Vu=()=>({dom:Gf('<div class="tox-dialog__draghandle"></div>')}),PR=(o,r,i)=>((l,u,m)=>{let f=va.parts.title(oE(l,u,_.none(),m)),v=va.parts.draghandle(Vu()),y=va.parts.close(ag(m)),x=[f].concat(l.draggable?[v]:[]).concat([y]);return Xd.sketch({dom:Gf('<div class="tox-dialog__header"></div>'),components:x})})({title:i.shared.providers.translate(o),draggable:i.dialog.isDraggableModal()},r,i.shared.providers),ey=(o,r,i,l)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":i.translate(o)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${l.getOr(0)}px`,position:"absolute"}},behaviours:r,components:[{dom:Gf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),LR=(o,r,i)=>({onClose:()=>i.closeWindow(),onBlock:l=>{let u=xo(o().element,".tox-dialog__header").map((m=>Nr(m)));va.setBusy(o(),((m,f)=>ey(l.message,f,r,u)))},onUnblock:()=>{va.setIdle(o())}}),wh="tox-dialog--fullscreen",sE="tox-dialog--width-lg",ty="tox-dialog--width-md",Zb=o=>{switch(o){case"large":return _.some(sE);case"medium":return _.some(ty);default:return _.none()}},IR=(o,r)=>{let i=bt(r.element.dom);Js(i,wh)||(ka(i,[sE,ty]),Zb(o).each((l=>bs(i,l))))},FR=(o,r)=>{let i=bt(o.element.dom),l=vf(i),u=kn(l,(m=>m===sE||m===ty)).or(Zb(r));((m,f)=>{Ot(f,(v=>{((y,x)=>{let A=si(y)?y.dom.classList.toggle(x):((E,O)=>Ln(ul(E),O)?Sg(E,O):tc(E,O))(y,x);rr(y)})(m,v)}))})(i,[wh,...u.toArray()])},xh=(o,r,i)=>qi(Ub({...o,firstTabstop:1,lazySink:i.shared.getSink,extraBehaviours:[Vw({}),...o.extraBehaviours],onEscape:l=>{$n(l,ph)},dialogEvents:r,eventOrder:{[Je()]:[qc.name(),jc.name()],[Vi()]:["scroll-lock",qc.name(),"messages","dialog-events","alloy.base.behaviour"],[hl()]:["alloy.base.behaviour","dialog-events","messages",qc.name(),"scroll-lock"]}})),hx=(o,r={})=>it(o,(i=>i.type==="menu"?(l=>{let u=it(l.items,(m=>{let f=qt(r,m.name).getOr(Rt(!1));return{...m,storage:f}}));return{...l,items:u}})(i):i)),rE=o=>L(o,((r,i)=>i.type==="menu"?L(i.items,((l,u)=>(l[u.name]=u.storage,l)),r):r),{}),HR=(o,r)=>[z0(pl(),DB),o(N2,((i,l,u,m)=>{No(m.element)&&qs(yn(m.element)).each(Gn),r.onClose(),l.onClose()})),o(ph,((i,l,u,m)=>{l.onCancel(i),$n(m,N2)})),$e(jk,((i,l)=>r.onUnblock())),$e(Bb,((i,l)=>r.onBlock(l.event)))],bx=(o,r,i)=>{let l=(m,f)=>$e(m,((v,y)=>{u(v,((x,A)=>{f(o(),x,y.event,v)}))})),u=(m,f)=>{qc.getState(m).get().each((v=>{f(v.internalDialog,m)}))};return[...HR(l,r),l(af,((m,f)=>f.onSubmit(m))),l(jl,((m,f,v)=>{f.onChange(m,{name:v.name})})),l(sg,((m,f,v,y)=>{let x=()=>y.getSystem().isConnected()?Ft.focusIn(y):void 0,A=B=>Oh(B,"disabled")||Zs(B,"aria-disabled").exists((I=>I==="true")),E=yn(y.element),O=qs(E);f.onAction(m,{name:v.name,value:v.value}),qs(E).fold(x,(B=>{A(B)||O.exists((I=>vc(B,I)&&A(I)))?x():i().toOptional().filter((I=>!vc(I.element,B))).each(x)}))})),l(qk,((m,f,v)=>{f.onTabChange(m,{newTabName:v.name,oldTabName:v.oldName})})),Ru((m=>{let f=o();xt.setValue(m,f.getData())}))]},zR=(o,r)=>{let i=r.map((m=>m.footerButtons)).getOr([]),l=Xa(i,(m=>m.align==="start")),u=(m,f)=>Xd.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${m}`]},components:it(f,(v=>v.memento.asSpec()))});return[u("start",l.pass),u("end",l.fail)]},vx=(o,r,i)=>({dom:Gf('<div class="tox-dialog__footer"></div>'),components:[],behaviours:st([qc.config({channel:`${D5}-${r}`,initialData:o,updateState:(l,u)=>{let m=it(u.buttons,(f=>{let v=go(((y,x)=>Qw(y,y.type,x))(f,i));return{name:f.name,align:f.align,memento:v}}));return _.some({lookupByName:f=>((v,y,x)=>kn(y,(A=>A.name===x)).bind((A=>A.memento.getOpt(v))))(l,m,f),footerButtons:m})},renderComponents:zR})])}),aE=(o,r,i)=>va.parts.footer(vx(o,r,i)),ny=(o,r)=>{if(o.getRoot().getSystem().isConnected()){let i=io.getCurrent(o.getFormWrapper()).getOr(o.getFormWrapper());return ab.getField(i,r).orThunk((()=>o.getFooter().bind((u=>qc.getState(u).get())).bind((u=>u.lookupByName(r)))))}return _.none()},Wb=(o,r,i)=>{let l=m=>{let f=o.getRoot();f.getSystem().isConnected()&&m(f)},u={getData:()=>{let m=o.getRoot(),f=m.getSystem().isConnected()?o.getFormWrapper():m;return{...xt.getValue(f),..._s(i,(v=>v.get()))}},setData:m=>{l((f=>{let v=u.getData(),y=Xn(v,m),x=((E,O)=>{let B=E.getRoot();return qc.getState(B).get().map((I=>Ia(ss("data",I.dataValidator,O)))).getOr(O)})(o,y),A=o.getFormWrapper();xt.setValue(A,x),Ao(i,((E,O)=>{Sn(y,O)&&E.set(y[O])}))}))},setEnabled:(m,f)=>{ny(o,m).each(f?Ut.enable:Ut.disable)},focus:m=>{ny(o,m).each(un.focus)},block:m=>{if(!Wn(m))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l((f=>{Wt(f,Bb,{message:m})}))},unblock:()=>{l((m=>{$n(m,jk)}))},showTab:m=>{l((f=>{let v=o.getBody();qc.getState(v).get().exists((y=>y.isTabPanel()))&&io.getCurrent(v).each((y=>{Xc.showTab(y,m)}))}))},redial:m=>{l((f=>{let v=o.getId(),y=r(m),x=hx(y.internalDialog.buttons,i);f.getSystem().broadcastOn([`${Zw}-${v}`],y),f.getSystem().broadcastOn([`${_5}-${v}`],y.internalDialog),f.getSystem().broadcastOn([`${O5}-${v}`],y.internalDialog),f.getSystem().broadcastOn([`${D5}-${v}`],{...y.internalDialog,buttons:x}),u.setData(y.initialData)}))},close:()=>{l((m=>{$n(m,N2)}))},toggleFullscreen:o.toggleFullscreen};return u},$R=(o,r,i,l=!1,u)=>{let m=we("dialog"),f=we("dialog-label"),v=we("dialog-content"),y=o.internalDialog,x=Rt(y.size),A=Zb(x.get()).toArray(),E=go(((ee,ue,ce,ge)=>Xd.sketch({dom:Gf('<div class="tox-dialog__header"></div>'),components:[oE(ee,ue,_.some(ce),ge),Vu(),ag(ge)],containerBehaviours:st([Kp.config({mode:"mouse",blockerClass:"blocker",getTarget:Re=>Mr(Re,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(Re,Ne)=>{Re.getSystem().broadcastOn([Ei()],{target:Ne})}})])}))({title:y.title,draggable:!0},m,f,i.shared.providers)),O=go(((ee,ue,ce,ge,Re,Ne)=>tE(ee,ue,_.some(ce),ge,Re,Ne))({body:y.body,initialData:y.initialData},m,v,i,l,(ee=>ny(U,ee)))),B=hx(y.buttons),I=rE(B),X=Rs(B.length!==0,go(((ee,ue,ce)=>vx(ee,ue,ce))({buttons:B},m,i))),W=bx((()=>J),{onBlock:ee=>{Xg.block(V,((ue,ce)=>{let ge=E.getOpt(V).map((Re=>Nr(Re.element)));return ey(ee.message,ce,i.shared.providers,ge)}))},onUnblock:()=>{Xg.unblock(V)},onClose:()=>r.closeWindow()},i.shared.getSink),K=bi().os,V=qi({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...A],attributes:{role:"dialog",...K.isMacOS()?{"aria-label":y.title}:{"aria-labelledby":f}}},eventOrder:{[Je()]:[qc.name(),jc.name()],[Xe()]:["execute-on-form"],[Vi()]:["reflecting","execute-on-form"]},behaviours:st([Ft.config({mode:"cyclic",onEscape:ee=>($n(ee,N2),_.some(!0)),useTabstopAt:ee=>!M2(ee)&&(Ma(ee)!=="button"||ds(ee,"disabled")!=="disabled"),firstTabstop:1}),qc.config({channel:`${Zw}-${m}`,updateState:(ee,ue)=>(x.set(ue.internalDialog.size),IR(ue.internalDialog.size,ee),u(),_.some(ue)),initialData:o}),un.config({}),on("execute-on-form",W.concat([fd(pl(),((ee,ue)=>{Ft.focusIn(ee)})),$e(Tu(),((ee,ue)=>{ee.getSystem().broadcastOn([Ww],{newFocus:ue.event.newFocus})}))])),Xg.config({getRoot:()=>_.some(V)}),Cn.config({}),Vw({})]),components:[E.asSpec(),O.asSpec(),...X.map((ee=>ee.asSpec())).toArray()]}),U={getId:ve(m),getRoot:ve(V),getFooter:()=>X.map((ee=>ee.get(V))),getBody:()=>O.get(V),getFormWrapper:()=>{let ee=O.get(V);return io.getCurrent(ee).getOr(ee)},toggleFullscreen:()=>{FR(V,x.get())}},J=Wb(U,r.redial,I);return{dialog:V,instanceApi:J}};var iE=tinymce.util.Tools.resolve("tinymce.util.URI");let uP=["insertContent","setContent","execCommand","close","block","unblock"],VR=o=>nr(o)&&uP.indexOf(o.mceAction)!==-1,lE=(o,r,i,l)=>{let u=we("dialog"),m=PR(o.title,u,l),f=(K=>{let V={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[T5(_.none(),{dom:{tag:"iframe",attributes:{src:K.url}},behaviours:st([ko.config({}),un.config({})])})]}],behaviours:st([Ft.config({mode:"acyclic",useTabstopAt:ns(M2)})])};return va.parts.body(V)})(o),v=o.buttons.bind((K=>K.length===0?_.none():_.some(aE({buttons:K},u,l)))),y=((K,V)=>{let U=(ee,ue)=>$e(ee,((ce,ge)=>{J(ce,((Re,Ne)=>{ue(W,Re,ge.event,ce)}))})),J=(ee,ue)=>{qc.getState(ee).get().each((ce=>{ue(ce,ee)}))};return[...HR(U,V),U(sg,((ee,ue,ce)=>{ue.onAction(ee,{name:ce.name})}))]})(0,LR((()=>X),l.shared.providers,r)),x={...o.height.fold((()=>({})),(K=>({height:K+"px","max-height":K+"px"}))),...o.width.fold((()=>({})),(K=>({width:K+"px","max-width":K+"px"})))},A=o.width.isNone()&&o.height.isNone()?["tox-dialog--width-lg"]:[],E=new iE(o.url,{base_uri:new iE(window.location.href)}),O=`${E.protocol}://${E.host}${E.port?":"+E.port:""}`,B=ur(),I=[qc.config({channel:`${Zw}-${u}`,updateState:(K,V)=>_.some(V),initialData:o}),on("messages",[as((()=>{let K=G(bt(window),"message",(V=>{if(E.isSameOrigin(new iE(V.raw.origin))){let U=V.raw.data;VR(U)?((J,ee,ue)=>{switch(ue.mceAction){case"insertContent":J.insertContent(ue.content);break;case"setContent":J.setContent(ue.content);break;case"execCommand":let ce=!!Ar(ue.ui)&&ue.ui;J.execCommand(ue.cmd,ce,ue.value);break;case"close":ee.close();break;case"block":ee.block(ue.message);break;case"unblock":ee.unblock()}})(i,W,U):(J=>!VR(J)&&nr(J)&&Sn(J,"mceAction"))(U)&&o.onMessage(W,U)}}));B.set(K)})),Ru(B.clear)]),jc.config({channels:{[R5]:{onReceive:(K,V)=>{xo(K.element,"iframe").each((U=>{let J=U.dom.contentWindow;$t(J)&&J.postMessage(V,O)}))}}}})],X=xh({id:u,header:m,body:f,footer:v,extraClasses:A,extraBehaviours:I,extraStyles:x},y,l),W=(K=>{let V=U=>{K.getSystem().isConnected()&&U(K)};return{block:U=>{if(!Wn(U))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");V((J=>{Wt(J,Bb,{message:U})}))},unblock:()=>{V((U=>{$n(U,jk)}))},close:()=>{V((U=>{$n(U,N2)}))},sendMessage:U=>{V((J=>{J.getSystem().broadcastOn([R5],U)}))}}})(X);return{dialog:X,instanceApi:W}},UR=(o,r)=>Ia(ss("data",r,o)),yx=o=>xm(o,".tox-alert-dialog")||xm(o,".tox-confirm-dialog"),dP=(o,r,i,l)=>r&&i?[]:[$s.config({contextual:{lazyContext:()=>_.some(Br(bt(o.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition",onHide:l},modes:["top"],lazyViewport:u=>sf(o,u.element).map((m=>({bounds:Jf(m),optScrollEnv:_.some({currentScrollTop:m.element.dom.scrollTop,scrollElmTop:Ii(m.element).top})}))).getOrThunk((()=>({bounds:Wr(),optScrollEnv:_.none()})))})],oy=o=>{let r=o.editor,i=Xm(r),l=(y=>{let x=y.shared;return{open:(A,E)=>{let O=()=>{va.hide(W),E()},B=go(Qw({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:_.some("primary"),align:"end",enabled:!0,icon:_.none()},"cancel",y)),I=RR(),X=DR(O,x.providers),W=qi(Ub({lazySink:()=>x.getSink(),header:nE(I,X),body:NR(A,x.providers),footer:_.some(MR(BR([],[B.asSpec()]))),onEscape:O,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[$e(ph,O)],eventOrder:{}}));va.show(W);let K=B.get(W);un.focus(K)}}})(o.backstages.dialog),u=(y=>{let x=y.shared;return{open:(A,E)=>{let O=U=>{va.hide(K),E(U)},B=go(Qw({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:_.some("primary"),align:"end",enabled:!0,icon:_.none()},"submit",y)),I=Qw({context:"any",name:"no",text:"No",primary:!1,buttonType:_.some("secondary"),align:"end",enabled:!0,icon:_.none()},"cancel",y),X=RR(),W=DR((()=>O(!1)),x.providers),K=qi(Ub({lazySink:()=>x.getSink(),header:nE(X,W),body:NR(A,x.providers),footer:_.some(MR(BR([],[I,B.asSpec()]))),onEscape:()=>O(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[$e(ph,(()=>O(!1))),$e(af,(()=>O(!0)))],eventOrder:{}}));va.show(K);let V=B.get(K);un.focus(V)}}})(o.backstages.dialog),m=(y,x)=>mh.open(((A,E,O)=>{let B=E,I=((X,W,K)=>{let V=we("dialog"),U=X.internalDialog,J=PR(U.title,V,K),ee=Rt(U.size),ue=Zb(ee.get()).toArray(),ce=((sn,Fn,fo,Zo)=>{let tn=tE(sn,Fn,_.none(),fo,!1,Zo);return va.parts.body(tn)})({body:U.body,initialData:U.initialData},V,K,(sn=>ny(Dt,sn))),ge=hx(U.buttons),Re=rE(ge),Ne=Rs(ge.length!==0,aE({buttons:ge},V,K)),Ae=bx((()=>nn),LR((()=>Ye),K.shared.providers,W),K.shared.getSink),Le={id:V,header:J,body:ce,footer:Ne,extraClasses:ue,extraBehaviours:[qc.config({channel:`${Zw}-${V}`,updateState:(sn,Fn)=>(ee.set(Fn.internalDialog.size),IR(Fn.internalDialog.size,sn),_.some(Fn)),initialData:X})],extraStyles:{}},Ye=xh(Le,Ae,K),Dt={getId:ve(V),getRoot:ve(Ye),getBody:()=>va.getBody(Ye),getFooter:()=>va.getFooter(Ye),getFormWrapper:()=>{let sn=va.getBody(Ye);return io.getCurrent(sn).getOr(sn)},toggleFullscreen:()=>{FR(Ye,ee.get())}},nn=Wb(Dt,W.redial,Re);return{dialog:Ye,instanceApi:nn}})({dataValidator:O,initialData:B,internalDialog:A},{redial:mh.redial,closeWindow:()=>{va.hide(I.dialog),x(I.instanceApi)}},o.backstages.dialog);return va.show(I.dialog),I.instanceApi.setData(B),I.instanceApi}),y),f=(y,x,A,E)=>mh.open(((O,B,I)=>{let X=UR(B,I),W=to(),K=o.backstages.popup.shared.header.isPositionedAtTop(),V=()=>W.on((ue=>{Ls.reposition(ue),i&&K||$s.refresh(ue)})),U=$R({dataValidator:I,initialData:X,internalDialog:O},{redial:mh.redial,closeWindow:()=>{W.on(Ls.hide),r.off("ResizeEditor",V),r.off("ScrollWindow",J),W.clear(),A(U.instanceApi)}},o.backstages.popup,E.ariaAttrs,V),J=()=>U.dialog.getSystem().broadcastOn([Ei()],{target:U.dialog.element}),ee=qi(Ls.sketch({lazySink:o.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:E.persistent?{event:"doNotDismissYet"}:{},...K?{}:{fireRepositionEventInstead:{}},inlineBehaviours:st([on("window-manager-inline-events",[$e(Lc(),((ue,ce)=>{$n(U.dialog,ph)}))]),...dP(r,i,K,(()=>U.dialog.getSystem().broadcastOn([pd()],{target:U.dialog.element})))]),isExtraPart:(ue,ce)=>yx(ce)}));return W.set(ee),Ls.showWithinBounds(ee,Pu(U.dialog),{anchor:x},(()=>{let ue=r.inline?Ys():bt(r.getContainer()),ce=Br(ue);return _.some(ce)})),i&&K||($s.refresh(ee),r.on("ResizeEditor",V)),r.on("ScrollWindow",J),U.instanceApi.setData(X),Ft.focusIn(U.dialog),U.instanceApi}),y),v=(y,x,A,E)=>mh.open(((O,B,I)=>{let X=UR(B,I),W=to(),K=o.backstages.popup.shared.header.isPositionedAtTop(),V=()=>W.on((ee=>{Ls.reposition(ee),$s.refresh(ee)})),U=$R({dataValidator:I,initialData:X,internalDialog:O},{redial:mh.redial,closeWindow:()=>{W.on(Ls.hide),r.off("ResizeEditor ScrollWindow ElementScroll",V),W.clear(),A(U.instanceApi)}},o.backstages.popup,E.ariaAttrs,V),J=qi(Ls.sketch({lazySink:o.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:E.persistent?{event:"doNotDismissYet"}:{},...K?{}:{fireRepositionEventInstead:{}},inlineBehaviours:st([on("window-manager-inline-events",[$e(Lc(),((ee,ue)=>{$n(U.dialog,ph)}))]),$s.config({contextual:{lazyContext:()=>_.some(Br(bt(r.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:ee=>sf(r,ee.element).map((ue=>({bounds:Jf(ue),optScrollEnv:_.some({currentScrollTop:ue.element.dom.scrollTop,scrollElmTop:Ii(ue.element).top})}))).getOrThunk((()=>({bounds:Wr(),optScrollEnv:_.none()})))})]),isExtraPart:(ee,ue)=>yx(ue)}));return W.set(J),Ls.showWithinBounds(J,Pu(U.dialog),{anchor:x},(()=>o.backstages.popup.shared.getSink().toOptional().bind((ee=>{let ue=sf(r,ee.element).map((Re=>Jf(Re))).getOr(Wr()),ce=Br(bt(r.getContentAreaContainer())),ge=ml(ce,ue);return _.some(wr(ge.x,ge.y,ge.width,ge.height-15))})))),$s.refresh(J),r.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",V),U.instanceApi.setData(X),Ft.focusIn(U.dialog),U.instanceApi}),y);return{open:(y,x,A)=>{if(!Hr(x)){if(x.inline==="toolbar")return f(y,o.backstages.popup.shared.anchors.inlineDialog(),A,x);if(x.inline==="bottom")return v(y,o.backstages.popup.shared.anchors.inlineBottomDialog(),A,x);if(x.inline==="cursor")return f(y,o.backstages.popup.shared.anchors.cursor(),A,x)}return m(y,A)},openUrl:(y,x)=>((A,E)=>mh.openUrl((O=>{let B=lE(O,{closeWindow:()=>{va.hide(B.dialog),E(B.instanceApi)}},r,o.backstages.dialog);return va.show(B.dialog),B.instanceApi}),A))(y,x),alert:(y,x)=>{l.open(y,x)},close:y=>{y.close()},confirm:(y,x)=>{u.open(y,x)}}},mP=o=>{k4(o),(r=>{let i=r.options.register,l=m=>{return Ss(m,Wn)?{value:(f=m,Bw(f.map(((v,y)=>y%2==0?"#"+(x=>{return(A=x,ZO(A)?_.some({value:WO(A)}):_.none()).orThunk((()=>J1(x).map(el))).getOrThunk((()=>{let E=document.createElement("canvas");E.height=1,E.width=1;let O=E.getContext("2d");O.clearRect(0,0,E.width,E.height),O.fillStyle="#FFFFFF",O.fillStyle=x,O.fillRect(0,0,1,1);let B=O.getImageData(0,0,1,1).data,I=B[0],X=B[1],W=B[2],K=B[3];return el(ng(I,X,W,K))}));var A})(v).value:v)))),valid:!0}:{valid:!1,message:"Must be an array of strings."};var f},u=m=>Yn(m)&&m>0?{value:m,valid:!0}:{valid:!1,message:"Must be a positive number."};i("color_map",{processor:l,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),i("color_map_raw",{processor:m=>Ss(m,Wn)?{value:Bw(m),valid:!0}:{valid:!1,message:"Must be an array of strings."}}),i("color_map_background",{processor:l}),i("color_map_foreground",{processor:l}),i("color_cols",{processor:u,default:Pk(r)}),i("color_cols_foreground",{processor:u,default:JO(r,Nw)}),i("color_cols_background",{processor:u,default:JO(r,Mw)}),i("custom_colors",{processor:"boolean",default:!0}),i("color_default_foreground",{processor:"string",default:Nb}),i("color_default_background",{processor:"string",default:Nb})})(o),(r=>{let i=r.options.register;i("contextmenu_avoid_overlap",{processor:"string",default:""}),i("contextmenu_never_use_native",{processor:"boolean",default:!1}),i("contextmenu",{processor:l=>l===!1?{value:[],valid:!0}:Wn(l)||Ss(l,Wn)?{value:Q7(l),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})})(o)};UM.add("silver",(o=>{mP(o);let r=()=>Wr(),{dialogs:i,popups:l,renderUI:u}=iP(o,{getPopupSinkBounds:()=>r()});SB(o,l.backstage.shared);let m=oy({editor:o,backstages:{popup:l.backstage,dialog:i.backstage}}),f=to();return{renderUI:()=>{let v=u();return sf(o,l.getMothership().element).each((y=>{r=()=>Jf(y)})),v},getWindowManagerImpl:ve(m),getNotificationManagerImpl:()=>F_(o,{backstage:l.backstage},l.getMothership(),f),getPromotionElement:()=>xo(bt(o.getContainer()),".tox-promotion").map((v=>v.dom)).getOrNull()}}))})();(function(){"use strict";var Oi=tinymce.util.Tools.resolve("tinymce.ModelManager");let ol=g=>h=>(C=>{let k=typeof C;return C===null?"null":k==="object"&&Array.isArray(C)?"array":k==="object"&&(R=N=C,(F=String).prototype.isPrototypeOf(R)||N.constructor?.name===F.name)?"string":k;var R,N,F})(h)===g,Di=g=>h=>typeof h===g,Ka=g=>h=>g===h,vr=ol("string"),Wn=ol("object"),nr=ol("array"),Cs=Ka(null),lr=Di("boolean"),To=Ka(void 0),Ar=g=>!(h=>h==null)(g),Hr=Di("function"),Fs=Di("number"),$t=()=>{},jt=g=>()=>g,Yn=g=>g,Ss=(g,h)=>g===h;function Qe(g,...h){return(...C)=>{let k=h.concat(C);return g.apply(null,k)}}let pt=g=>h=>!g(h),At=g=>g(),ve=jt(!1),ht=jt(!0);class me{tag;value;static singletonNone=new me(!1);constructor(h,C){this.tag=h,this.value=C}static some(h){return new me(!0,h)}static none(){return me.singletonNone}fold(h,C){return this.tag?C(this.value):h()}isSome(){return this.tag}isNone(){return!this.tag}map(h){return this.tag?me.some(h(this.value)):me.none()}bind(h){return this.tag?h(this.value):me.none()}exists(h){return this.tag&&h(this.value)}forall(h){return!this.tag||h(this.value)}filter(h){return!this.tag||h(this.value)?this:me.none()}getOr(h){return this.tag?this.value:h}or(h){return this.tag?this:h}getOrThunk(h){return this.tag?this.value:h()}orThunk(h){return this.tag?this:h()}getOrDie(h){if(this.tag)return this.value;throw new Error(h??"Called getOrDie on None")}static from(h){return Ar(h)?me.some(h):me.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(h){this.tag&&h(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}let ut=Array.prototype.slice,ns=Array.prototype.indexOf,os=Array.prototype.push,Ve=(g,h)=>{return C=g,k=h,ns.call(C,k)>-1;var C,k},zt=(g,h)=>{for(let C=0,k=g.length;C<k;C++)if(h(g[C],C))return!0;return!1},vn=(g,h)=>{let C=[];for(let k=0;k<g;k++)C.push(h(k));return C},_=(g,h)=>{let C=g.length,k=new Array(C);for(let R=0;R<C;R++){let N=g[R];k[R]=h(N,R)}return k},wt=(g,h)=>{for(let C=0,k=g.length;C<k;C++)h(g[C],C)},ls=(g,h)=>{let C=[],k=[];for(let R=0,N=g.length;R<N;R++){let F=g[R];(h(F,R)?C:k).push(F)}return{pass:C,fail:k}},So=(g,h)=>{let C=[];for(let k=0,R=g.length;k<R;k++){let N=g[k];h(N,k)&&C.push(N)}return C},lt=(g,h,C)=>(((k,R)=>{for(let N=k.length-1;N>=0;N--)R(k[N],N)})(g,((k,R)=>{C=h(C,k,R)})),C),Ln=(g,h,C)=>(wt(g,((k,R)=>{C=h(C,k,R)})),C),Ho=(g,h)=>((C,k,R)=>{for(let N=0,F=C.length;N<F;N++){let $=C[N];if(k($,N))return me.some($);if(R($,N))break}return me.none()})(g,h,ve),_t=(g,h)=>{for(let C=0,k=g.length;C<k;C++)if(h(g[C],C))return me.some(C);return me.none()},Ya=g=>{let h=[];for(let C=0,k=g.length;C<k;++C){if(!nr(g[C]))throw new Error("Arr.flatten item "+C+" was not an array, input: "+g);os.apply(h,g[C])}return h},it=(g,h)=>Ya(_(g,h)),Ot=(g,h)=>{for(let C=0,k=g.length;C<k;++C)if(h(g[C],C)!==!0)return!1;return!0},Xa=(g,h)=>{let C={};for(let k=0,R=g.length;k<R;k++){let N=g[k];C[String(N)]=h(N,k)}return C},pn=(g,h)=>h>=0&&h<g.length?me.some(g[h]):me.none(),so=g=>pn(g,0),L=g=>pn(g,g.length-1),kn=(g,h)=>{for(let C=0;C<g.length;C++){let k=h(g[C],C);if(k.isSome())return k}return me.none()},Ja=Object.keys,Vs=Object.hasOwnProperty,vo=(g,h)=>{let C=Ja(g);for(let k=0,R=C.length;k<R;k++){let N=C[k];h(g[N],N)}},hi=(g,h)=>In(g,((C,k)=>({k,v:h(C,k)}))),In=(g,h)=>{let C={};return vo(g,((k,R)=>{let N=h(k,R);C[N.k]=N.v})),C},ro=(g,h)=>{let C=[];return vo(g,((k,R)=>{C.push(h(k,R))})),C},Kt=g=>ro(g,Yn),Pe=(g,h)=>Vs.call(g,h),Ri=g=>{if(!nr(g))throw new Error("cases must be an array");if(g.length===0)throw new Error("there must be at least one case");let h=[],C={};return wt(g,((k,R)=>{let N=Ja(k);if(N.length!==1)throw new Error("one and only one name per case");let F=N[0],$=k[F];if(C[F]!==void 0)throw new Error("duplicate key detected:"+F);if(F==="cata")throw new Error("cannot have a case named cata (sorry)");if(!nr($))throw new Error("case arguments must be an array");h.push(F),C[F]=(...Q)=>{let re=Q.length;if(re!==$.length)throw new Error("Wrong number of arguments to case "+F+". Expected "+$.length+" ("+$+"), got "+re);return{fold:(...pe)=>{if(pe.length!==g.length)throw new Error("Wrong number of arguments to fold. Expected "+g.length+", got "+pe.length);return pe[R].apply(null,Q)},match:pe=>{let ae=Ja(pe);if(h.length!==ae.length)throw new Error("Wrong number of arguments to match. Expected: "+h.join(",")+`
Actual: `+ae.join(","));if(!Ot(h,(de=>Ve(ae,de))))throw new Error("Not all branches were specified when using match. Specified: "+ae.join(", ")+`
Required: `+h.join(", "));return pe[F].apply(null,Q)},log:pe=>{console.log(pe,{constructors:h,constructor:F,params:Q})}}}})),C},cs=g=>{let h=g;return{get:()=>h,set:C=>{h=C}}},Lt=g=>g.slice(0).sort(),Ge=(g,h)=>{let C=So(h,(k=>!Ve(g,k)));C.length>0&&(k=>{throw new Error("Unsupported keys for object: "+Lt(k).join(", "))})(C)},dt=g=>((h,C)=>((k,R,N)=>{if(R.length===0)throw new Error("You must specify at least one required field.");return((F,$)=>{if(!nr($))throw new Error("The "+F+" fields must be an array. Was: "+$+".");wt($,(Q=>{if(!vr(Q))throw new Error("The value "+Q+" in the "+F+" fields was not a string.")}))})("required",R),(F=>{let $=Lt(F);Ho($,((Q,re)=>re<$.length-1&&Q===$[re+1])).each((Q=>{throw new Error("The field: "+Q+" occurs more than once in the combined fields: ["+$.join(", ")+"].")}))})(R),F=>{let $=Ja(F);Ot(R,(re=>Ve($,re)))||((re,pe)=>{throw new Error("All required keys ("+Lt(re).join(", ")+") were not specified. Specified keys were: "+Lt(pe).join(", ")+".")})(R,$),k(R,$);let Q=So(R,(re=>!N.validate(F[re],re)));return Q.length>0&&((re,pe)=>{throw new Error("All values need to be of type: "+pe+". Keys ("+Lt(re).join(", ")+") were not.")})(Q,N.label),F}})(h,C,{validate:Hr,label:"function"}))(Ge,g),Mt=g=>{let h=N=>N(g),C=jt(g),k=()=>R,R={tag:!0,inner:g,fold:(N,F)=>F(g),isValue:ht,isError:ve,map:N=>xn.value(N(g)),mapError:k,bind:h,exists:h,forall:h,getOr:C,or:k,getOrThunk:C,orThunk:k,getOrDie:C,each:N=>{N(g)},toOptional:()=>me.some(g)};return R},rn=g=>{let h=()=>C,C={tag:!1,inner:g,fold:(R,N)=>R(g),isValue:ve,isError:ht,map:h,mapError:R=>xn.error(R(g)),bind:h,exists:ve,forall:ht,getOr:Yn,or:Yn,getOrThunk:At,orThunk:At,getOrDie:(k=String(g),()=>{throw new Error(k)}),each:$t,toOptional:me.none};var k;return C},xn={value:Mt,error:rn,fromOption:(g,h)=>g.fold((()=>rn(h)),Mt)},Ao=typeof window<"u"?window:Function("return this;")(),_s=g=>{let h=g.replace(/\./g,"-");return{resolve:C=>h+"-"+C}},lu=(g,h,C=Ss)=>g.exists((k=>C(k,h))),cr=g=>{let h=[],C=k=>{h.push(k)};for(let k=0;k<g.length;k++)g[k].each(C);return h},Qa=(g,h)=>g?me.some(h):me.none(),kl=(g,h)=>((C,k)=>{let R=k??Ao;for(let N=0;N<C.length&&R!=null;++N)R=R[C[N]];return R})(g.split("."),h),Ni=()=>{let g=(h=>{let C=cs(me.none()),k=()=>C.get().each(h);return{clear:()=>{k(),C.set(me.none())},isSet:()=>C.get().isSome(),get:()=>C.get(),set:R=>{k(),C.set(me.some(R))}}})($t);return{...g,on:h=>g.get().each(h)}},El=(g,h,C)=>h===""||g.length>=h.length&&g.substr(C,C+h.length)===h,Os=(g,h,C=0,k)=>{let R=g.indexOf(h,C);return R!==-1&&(!!To(k)||R+h.length<=k)},qt=(g,h)=>El(g,h,0),Sn=(g,h)=>El(g,h,g.length-h.length),Ds=(g=>h=>h.replace(g,""))(/^\s+|\s+$/g),ks=g=>g.length>0,Rt=g=>{let h,C=!1;return(...k)=>(C||(C=!0,h=g.apply(null,k)),h)},na=["tfoot","thead","tbody","colgroup"],zr=(g,h,C)=>({element:g,rowspan:h,colspan:C}),qu=(g,h,C)=>({element:g,cells:h,section:C}),An=(g,h,C)=>({element:g,isNew:h,isLocked:C}),$r=(g,h,C,k)=>({element:g,cells:h,section:C,isNew:k}),oa=(g,h,C)=>{let k=g.cells,R=k.slice(0,h),N=k.slice(h),F=R.concat(C).concat(N);return Nn(g,F)},Tl=(g,h,C)=>oa(g,h,[C]),Al=(g,h,C)=>{g.cells[h]=C},Nn=(g,h)=>$r(g.element,h,g.section,g.isNew),us=(g,h)=>g.cells[h],Vr=(g,h)=>us(g,h).element,eo=g=>g.cells.length,_n=g=>{let h=ls(g,(C=>C.section==="colgroup"));return{rows:h.fail,cols:h.pass}},Yt=(g,h,C)=>{let k=_(g.cells,C);return $r(h(g.element),k,g.section,!0)},ei=g=>{if(g==null)throw new Error("Node cannot be null or undefined");return{dom:g}},we={fromHtml:(g,h)=>{let C=(h||document).createElement("div");if(C.innerHTML=g,!C.hasChildNodes()||C.childNodes.length>1){let k="HTML does not have a single root node";throw console.error(k,g),new Error(k)}return ei(C.childNodes[0])},fromTag:(g,h)=>{let C=(h||document).createElement(g);return ei(C)},fromText:(g,h)=>{let C=(h||document).createTextNode(g);return ei(C)},fromDom:ei,fromPoint:(g,h,C)=>me.from(g.dom.elementFromPoint(h,C)).map(ei)},mg=(g,h)=>{let C=g.document.createRange();return C.selectNode(h.dom),C},Xn=(g,h)=>{let C=g.document.createRange();return Us(C,h),C},Us=(g,h)=>g.selectNodeContents(h.dom),Da=(g,h,C)=>{let k=g.document.createRange();var R;return R=k,h.fold((N=>{R.setStartBefore(N.dom)}),((N,F)=>{R.setStart(N.dom,F)}),(N=>{R.setStartAfter(N.dom)})),((N,F)=>{F.fold(($=>{N.setEndBefore($.dom)}),(($,Q)=>{N.setEnd($.dom,Q)}),($=>{N.setEndAfter($.dom)}))})(k,C),k},Mi=(g,h,C,k,R)=>{let N=g.document.createRange();return N.setStart(h.dom,C),N.setEnd(k.dom,R),N},Ra=g=>({left:g.left,top:g.top,right:g.right,bottom:g.bottom,width:g.width,height:g.height}),or=Ri([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Rs=(g,h,C)=>h(we.fromDom(C.startContainer),C.startOffset,we.fromDom(C.endContainer),C.endOffset),gm=(g,h)=>{let C=((k,R)=>R.match({domRange:N=>({ltr:jt(N),rtl:me.none}),relative:(N,F)=>({ltr:Rt((()=>Da(k,N,F))),rtl:Rt((()=>me.some(Da(k,F,N))))}),exact:(N,F,$,Q)=>({ltr:Rt((()=>Mi(k,N,F,$,Q))),rtl:Rt((()=>me.some(Mi(k,$,Q,N,F))))})}))(g,h);return((k,R)=>{let N=R.ltr();return N.collapsed?R.rtl().filter((F=>F.collapsed===!1)).map((F=>or.rtl(we.fromDom(F.endContainer),F.endOffset,we.fromDom(F.startContainer),F.startOffset))).getOrThunk((()=>Rs(0,or.ltr,N))):Rs(0,or.ltr,N)})(0,C)},_l=(g,h)=>gm(g,h).match({ltr:(C,k,R,N)=>{let F=g.document.createRange();return F.setStart(C.dom,k),F.setEnd(R.dom,N),F},rtl:(C,k,R,N)=>{let F=g.document.createRange();return F.setStart(R.dom,N),F.setEnd(C.dom,k),F}});or.ltr,or.rtl;let ur=(g,h)=>{let C=g.dom;if(C.nodeType!==1)return!1;{let k=C;if(k.matches!==void 0)return k.matches(h);if(k.msMatchesSelector!==void 0)return k.msMatchesSelector(h);if(k.webkitMatchesSelector!==void 0)return k.webkitMatchesSelector(h);if(k.mozMatchesSelector!==void 0)return k.mozMatchesSelector(h);throw new Error("Browser lacks native selectors")}},to=g=>g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11||g.childElementCount===0,cu=(g,h)=>{let C=h===void 0?document:h.dom;return to(C)?me.none():me.from(C.querySelector(g)).map(we.fromDom)},yo=(g,h)=>g.dom===h.dom,_r=(g,h)=>{let C=g.dom,k=h.dom;return C!==k&&C.contains(k)},uu=ur,bc=()=>Gu(0,0),Gu=(g,h)=>({major:g,minor:h}),ti={nu:Gu,detect:(g,h)=>{let C=String(h).toLowerCase();return g.length===0?bc():((k,R)=>{let N=(($,Q)=>{for(let re=0;re<$.length;re++){let pe=$[re];if(pe.test(Q))return pe}})(k,R);if(!N)return{major:0,minor:0};let F=$=>Number(R.replace(N,"$"+$));return Gu(F(1),F(2))})(g,C)},unknown:bc},Ur=(g,h)=>{let C=String(h).toLowerCase();return Ho(g,(k=>k.search(C)))},sl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,dr=g=>h=>Os(h,g),Ol=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:g=>Os(g,"edge/")&&Os(g,"chrome")&&Os(g,"safari")&&Os(g,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,sl],search:g=>Os(g,"chrome")&&!Os(g,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:g=>Os(g,"msie")||Os(g,"trident")},{name:"Opera",versionRegexes:[sl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:dr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:dr("firefox")},{name:"Safari",versionRegexes:[sl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:g=>(Os(g,"safari")||Os(g,"mobile/"))&&Os(g,"applewebkit")}],sr=[{name:"Windows",search:dr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:g=>Os(g,"iphone")||Os(g,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:dr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:dr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:dr("linux"),versionRegexes:[]},{name:"Solaris",search:dr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:dr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:dr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],rl={browsers:jt(Ol),oses:jt(sr)},fm="Edge",bt="Chromium",pm="Opera",Od="Firefox",du="Safari",mu=g=>{let h=g.current,C=g.version,k=R=>()=>h===R;return{current:h,version:C,isEdge:k(fm),isChromium:k(bt),isIE:k("IE"),isOpera:k(pm),isFirefox:k(Od),isSafari:k(du)}},gg=()=>mu({current:void 0,version:ti.unknown()}),Ca=mu,Ku=(jt(fm),jt(bt),jt("IE"),jt(pm),jt(Od),jt(du),"Windows"),Xl="Android",Dd="Linux",mr="macOS",wn="Solaris",vc="FreeBSD",yc="ChromeOS",wa=g=>{let h=g.current,C=g.version,k=R=>()=>h===R;return{current:h,version:C,isWindows:k(Ku),isiOS:k("iOS"),isAndroid:k(Xl),isMacOS:k(mr),isLinux:k(Dd),isSolaris:k(wn),isFreeBSD:k(vc),isChromeOS:k(yc)}},Jl=()=>wa({current:void 0,version:ti.unknown()}),fg=wa,Na=(jt(Ku),jt("iOS"),jt(Xl),jt(Dd),jt(mr),jt(wn),jt(vc),jt(yc),g=>window.matchMedia(g).matches),xa=Rt((()=>((g,h,C)=>{let k=rl.browsers(),R=rl.oses(),N=h.bind((Q=>((re,pe)=>kn(pe.brands,(ae=>{let de=ae.brand.toLowerCase();return Ho(re,(le=>de===le.brand?.toLowerCase())).map((le=>({current:le.name,version:ti.nu(parseInt(ae.version,10),0)})))})))(k,Q))).orThunk((()=>((Q,re)=>Ur(Q,re).map((pe=>{let ae=ti.detect(pe.versionRegexes,re);return{current:pe.name,version:ae}})))(k,g))).fold(gg,Ca),F=((Q,re)=>Ur(Q,re).map((pe=>{let ae=ti.detect(pe.versionRegexes,re);return{current:pe.name,version:ae}})))(R,g).fold(Jl,fg),$=((Q,re,pe,ae)=>{let de=Q.isiOS()&&/ipad/i.test(pe)===!0,le=Q.isiOS()&&!de,Se=Q.isiOS()||Q.isAndroid(),ye=Se||ae("(pointer:coarse)"),Ue=de||!le&&Se&&ae("(min-device-width:768px)"),We=le||Se&&!Ue,nt=re.isSafari()&&Q.isiOS()&&/safari/i.test(pe)===!1,rt=!We&&!Ue&&!nt;return{isiPad:jt(de),isiPhone:jt(le),isTablet:jt(Ue),isPhone:jt(We),isTouch:jt(ye),isAndroid:Q.isAndroid,isiOS:Q.isiOS,isWebView:jt(nt),isDesktop:jt(rt)}})(F,N,g,C);return{browser:N,os:F,deviceType:$}})(window.navigator.userAgent,me.from(window.navigator.userAgentData),Na))),Rd=()=>xa(),Cc=Object.getPrototypeOf,Dl=g=>{let h=kl("ownerDocument.defaultView",g);return Wn(g)&&((C=>((k,R)=>{let N=((F,$)=>kl(F,$))(k,R);if(N==null)throw new Error(k+" not available on this browser");return N})("HTMLElement",C))(h).prototype.isPrototypeOf(g)||/^HTML\w*Element$/.test(Cc(g).constructor.name))},ps=g=>g.dom.nodeName.toLowerCase(),ni=g=>g.dom.nodeType,Rl=g=>h=>ni(h)===g,ws=g=>ni(g)===8||ps(g)==="#comment",Yu=g=>js(g)&&Dl(g.dom),js=Rl(1),Bi=Rl(3),pg=Rl(9),Nd=Rl(11),yr=g=>h=>js(h)&&ps(h)===g,Xu=g=>we.fromDom(g.dom.ownerDocument),wc=g=>pg(g)?g:Xu(g),al=g=>me.from(g.dom.parentNode).map(we.fromDom),xc=g=>me.from(g.dom.parentElement).map(we.fromDom),hg=(g,h)=>{let C=Hr(h)?h:ve,k=g.dom,R=[];for(;k.parentNode!==null&&k.parentNode!==void 0;){let N=k.parentNode,F=we.fromDom(N);if(R.push(F),C(F)===!0)break;k=N}return R},Sc=g=>me.from(g.dom.previousSibling).map(we.fromDom),Ju=g=>me.from(g.dom.nextSibling).map(we.fromDom),Or=g=>_(g.dom.childNodes,we.fromDom),kc=(g,h)=>{let C=g.dom.childNodes;return me.from(C[h]).map(we.fromDom)},Qu=g=>Nd(g)&&Ar(g.dom.host),bi=g=>we.fromDom(g.dom.getRootNode()),Md=g=>we.fromDom(g.dom.host),Ql=g=>{let h=we.fromDom(($=>{if(Ar($.target)){let Q=we.fromDom($.target);if(js(Q)&&Ar(Q.dom.shadowRoot)&&$.composed&&$.composedPath){let re=$.composedPath();if(re)return so(re)}}return me.from($.target)})(g).getOr(g.target)),C=()=>g.stopPropagation(),k=()=>g.preventDefault(),R=(N=k,F=C,(...$)=>N(F.apply(null,$)));var N,F;return(($,Q,re,pe,ae,de,le)=>({target:$,x:Q,y:re,stop:pe,prevent:ae,kill:de,raw:le}))(h,g.clientX,g.clientY,C,k,R,g)},Ma=(g,h,C,k)=>{g.dom.removeEventListener(h,C,k)},il=ht,Pi=(g,h,C)=>((k,R,N,F)=>(($,Q,re,pe,ae)=>{let de=((le,Se)=>ye=>{le(ye)&&Se(Ql(ye))})(re,pe);return $.dom.addEventListener(Q,de,ae),{unbind:Qe(Ma,$,Q,de,ae)}})(k,R,N,F,!1))(g,h,il,C),Dr=Ql,oi=(g,h)=>{al(g).each((C=>{C.dom.insertBefore(h.dom,g.dom)}))},Ec=(g,h)=>{Ju(g).fold((()=>{al(g).each((C=>{_o(C,h)}))}),(C=>{oi(C,h)}))},Tc=(g,h)=>{(k=>kc(k,0))(g).fold((()=>{_o(g,h)}),(k=>{g.dom.insertBefore(h.dom,k.dom)}))},_o=(g,h)=>{g.dom.appendChild(h.dom)},sa=(g,h)=>{oi(g,h),_o(h,g)},ed=(g,h)=>{wt(h,((C,k)=>{let R=k===0?g:h[k-1];Ec(R,C)}))},Ba=(g,h)=>{wt(h,(C=>{_o(g,C)}))},Li=(g,h,C)=>{if(!(vr(C)||lr(C)||Fs(C)))throw console.error("Invalid call to Attribute.set. Key ",h,":: Value ",C,":: Element ",g),new Error("Attribute value was not simple");g.setAttribute(h,C+"")},zo=(g,h,C)=>{Li(g.dom,h,C)},Rr=(g,h)=>{let C=g.dom;vo(h,((k,R)=>{Li(C,R,k)}))},ll=(g,h)=>{let C=g.dom.getAttribute(h);return C===null?void 0:C},z=(g,h)=>me.from(ll(g,h)),te=(g,h)=>{g.dom.removeAttribute(h)},fe=g=>Ln(g.dom.attributes,((h,C)=>(h[C.name]=C.value,h)),{}),Be=g=>{g.dom.textContent="",wt(Or(g),(h=>{ot(h)}))},ot=g=>{let h=g.dom;h.parentNode!==null&&h.parentNode.removeChild(h)},Bt=g=>{let h=Or(g);h.length>0&&ed(g,h),ot(g)},Mn=(g,h)=>we.fromDom(g.dom.cloneNode(h)),mo=g=>Mn(g,!1),yn=g=>Mn(g,!0),Ns=(g,h)=>{let C=we.fromTag(h),k=fe(g);return Rr(C,k),C},Go=g=>g.style!==void 0&&Hr(g.style.getPropertyValue),ma=g=>{let h=Bi(g)?g.dom.parentNode:g.dom;if(h==null||h.ownerDocument===null)return!1;let C=h.ownerDocument;return(N=>{let F=bi(N);return Qu(F)?me.some(F):me.none()})(we.fromDom(h)).fold((()=>C.body.contains(h)),(k=ma,R=Md,N=>k(R(N))));var k,R},gu=(g,h,C)=>{if(!vr(C))throw console.error("Invalid call to CSS.set. Property ",h,":: Value ",C,":: Element ",g),new Error("CSS value must be a string: "+C);Go(g)&&g.style.setProperty(h,C)},Ms=(g,h,C)=>{let k=g.dom;gu(k,h,C)},Ac=(g,h)=>{let C=g.dom;vo(h,((k,R)=>{gu(C,R,k)}))},ec=(g,h)=>{let C=g.dom,k=window.getComputedStyle(C).getPropertyValue(h);return k!==""||ma(g)?k:G(C,h)},G=(g,h)=>Go(g)?g.style.getPropertyValue(h):"",se=(g,h)=>{let C=g.dom,k=G(C,h);return me.from(k).filter((R=>R.length>0))},xe=(g,h)=>{((C,k)=>{Go(C)&&C.style.removeProperty(k)})(g.dom,h),lu(z(g,"style").map(Ds),"")&&te(g,"style")},je=(g,h)=>{let C=R=>{let N=h(R);if(N<=0||N===null){let F=ec(R,g);return parseFloat(F)||0}return N},k=(R,N)=>Ln(N,((F,$)=>{let Q=ec(R,$),re=Q===void 0?0:parseInt(Q,10);return isNaN(re)?F:F+re}),0);return{set:(R,N)=>{if(!Fs(N)&&!N.match(/^[0-9]+$/))throw new Error(g+".set accepts only positive integer values. Value was "+N);let F=R.dom;Go(F)&&(F.style[g]=N+"px")},get:C,getOuter:C,aggregate:k,max:(R,N,F)=>{let $=k(R,F);return N>$?N-$:0}}},ct=(g,h,C)=>((k,R)=>(N=>{let F=parseFloat(N);return isNaN(F)?me.none():me.some(F)})(k).getOr(R))(ec(g,h),C),Gn=je("height",(g=>{let h=g.dom;return ma(g)?h.getBoundingClientRect().height:h.offsetHeight})),No=g=>Gn.get(g),qs=g=>Gn.getOuter(g),Mo=je("width",(g=>{let h=g.dom;return ma(g)?h.getBoundingClientRect().width:h.offsetWidth})),Gs=g=>Mo.get(g),Nl=g=>Mo.getOuter(g),ra=g=>((h,C)=>{let k=h.dom,R=k.getBoundingClientRect().width||k.offsetWidth;return C==="border-box"?R:((N,F,$,Q)=>F-ct(N,`padding-${$}`,0)-ct(N,`padding-${Q}`,0)-ct(N,`border-${$}-width`,0)-ct(N,`border-${Q}-width`,0))(h,R,"left","right")})(g,"content-box"),Ks=(g,h)=>({left:g,top:h,translate:(C,k)=>Ks(g+C,h+k)}),Cr=Ks,cl=(g,h)=>g!==void 0?g:h!==void 0?h:0,en=g=>{let h=g.dom.ownerDocument,C=h.body,k=h.defaultView,R=h.documentElement;if(C===g.dom)return Cr(C.offsetLeft,C.offsetTop);let N=cl(k?.pageYOffset,R.scrollTop),F=cl(k?.pageXOffset,R.scrollLeft),$=cl(R.clientTop,C.clientTop),Q=cl(R.clientLeft,C.clientLeft);return En(g).translate(F-Q,N-$)},En=g=>{let h=g.dom,C=h.ownerDocument.body;return C===h?Cr(C.offsetLeft,C.offsetTop):ma(g)?(k=>{let R=k.getBoundingClientRect();return Cr(R.left,R.top)})(h):Cr(0,0)},ds=(g=>{let h=C=>g(C)?me.from(C.dom.nodeValue):me.none();return{get:C=>{if(!g(C))throw new Error("Can only get text value of a text node");return h(C).getOr("")},getOption:h,set:(C,k)=>{if(!g(C))throw new Error("Can only set raw text value of a text node");C.dom.nodeValue=k}}})(Bi),Zs=g=>ds.get(g),Oh=g=>ds.getOption(g),Bs=(g,h)=>ds.set(g,h),yp=(g,h)=>C=>_c(C)==="rtl"?h:g,_c=g=>ec(g,"direction")==="rtl"?"rtl":"ltr";var Dh=(g,h,C,k,R)=>g(C,k)?me.some(C):Hr(R)&&R(C)?me.none():h(C,k,R);let gf=(g,h,C)=>{let k=g.dom,R=Hr(C)?C:ve;for(;k.parentNode;){k=k.parentNode;let N=we.fromDom(k);if(h(N))return me.some(N);if(R(N))break}return me.none()},bg=(g,h,C)=>Dh(((k,R)=>R(k)),gf,g,h,C),vg=(g,h,C)=>gf(g,(k=>ur(k,h)),C),et=(g,h)=>(C=>Ho(C.dom.childNodes,(k=>{return R=we.fromDom(k),ur(R,h);var R})).map(we.fromDom))(g),gr=(g,h)=>cu(h,g),Ys=(g,h,C)=>Dh(((k,R)=>ur(k,R)),vg,g,h,C),m0=g=>g.dom.classList!==void 0,hm=(g,h)=>((C,k,R)=>{let N=((F,$)=>{let Q=ll(F,$);return Q===void 0||Q===""?[]:Q.split(" ")})(C,k).concat([R]);return zo(C,k,N.join(" ")),!0})(g,"class",h),yg=(g,h)=>{m0(g)?g.dom.classList.add(h):hm(g,h)},q=(g,h)=>m0(g)&&g.dom.classList.contains(h),Bd=g=>Ys(g,"[contenteditable]"),td=(g,h=!1)=>ma(g)?g.dom.isContentEditable:Bd(g).fold(jt(h),(C=>ga(C)==="true")),ga=g=>g.dom.contentEditable,ff=(g,h)=>{let C=[];return wt(Or(g),(k=>{h(k)&&(C=C.concat([k])),C=C.concat(ff(k,h))})),C},Hs=(g,h,C)=>((k,R,N)=>So(hg(k,N),(F=>ur(F,h))))(g,0,C),bm=(g,h)=>(C=>So(Or(C),(k=>ur(k,h))))(g),Oc=(g,h)=>((C,k)=>{let R=k===void 0?document:k.dom;return to(R)?[]:_(R.querySelectorAll(C),we.fromDom)})(h,g),Un=g=>ps(g)==="img"?1:Oh(g).fold((()=>Or(g).length),(h=>h.length)),pf=["img","br"],Cg=g=>Oh(g).filter((h=>h.trim().length!==0||h.indexOf("\xA0")>-1)).isSome()||Ve(pf,ps(g))||(h=>Yu(h)&&ll(h,"contenteditable")==="false")(g),wg=g=>((h,C)=>{let k=R=>{for(let N=0;N<R.childNodes.length;N++){let F=we.fromDom(R.childNodes[N]);if(C(F))return me.some(F);let $=k(R.childNodes[N]);if($.isSome())return $}return me.none()};return k(h.dom)})(g,Cg),Nr=g=>Ml(g,Cg),Ml=(g,h)=>{let C=k=>{let R=Or(k);for(let N=R.length-1;N>=0;N--){let F=R[N];if(h(F))return me.some(F);let $=C(F);if($.isSome())return $}return me.none()};return C(g)},vm=(g,h,C,k)=>({start:g,soffset:h,finish:C,foffset:k}),Pa=Ri([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),hs={before:Pa.before,on:Pa.on,after:Pa.after,cata:(g,h,C,k)=>g.fold(h,C,k),getStart:g=>g.fold(Yn,Yn,Yn)},fu=Ri([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Pd={domRange:fu.domRange,relative:fu.relative,exact:fu.exact,exactFromRange:g=>fu.exact(g.start,g.soffset,g.finish,g.foffset),getWin:g=>{let h=(C=>C.match({domRange:k=>we.fromDom(k.startContainer),relative:(k,R)=>hs.getStart(k),exact:(k,R,N,F)=>k}))(g);return we.fromDom(wc(h).dom.defaultView)},range:vm},Qt=(g,h)=>{let C=ps(g);return C==="input"?hs.after(g):Ve(["br","img"],C)?h===0?hs.before(g):hs.after(g):hs.on(g,h)},La=g=>me.from(g.getSelection()),Ii=(g,h)=>{La(g).each((C=>{C.removeAllRanges(),C.addRange(h)}))},ym=(g,h,C,k,R)=>{let N=Mi(g,h,C,k,R);Ii(g,N)},fn=(g,h)=>gm(g,h).match({ltr:(C,k,R,N)=>{ym(g,C,k,R,N)},rtl:(C,k,R,N)=>{La(g).each((F=>{if(F.setBaseAndExtent)F.setBaseAndExtent(C.dom,k,R.dom,N);else if(F.extend)try{(($,Q,re,pe,ae,de)=>{Q.collapse(re.dom,pe),Q.extend(ae.dom,de)})(0,F,C,k,R,N)}catch{ym(g,R,N,C,k)}else ym(g,R,N,C,k)}))}}),hf=(g,h,C,k,R)=>{let N=((F,$,Q,re)=>{let pe=Qt(F,$),ae=Qt(Q,re);return Pd.relative(pe,ae)})(h,C,k,R);fn(g,N)},bf=(g,h,C)=>{let k=((R,N)=>{let F=R.fold(hs.before,Qt,hs.after),$=N.fold(hs.before,Qt,hs.after);return Pd.relative(F,$)})(h,C);fn(g,k)},xg=g=>{if(g.rangeCount>0){let h=g.getRangeAt(0),C=g.getRangeAt(g.rangeCount-1);return me.some(vm(we.fromDom(h.startContainer),h.startOffset,we.fromDom(C.endContainer),C.endOffset))}return me.none()},Cm=g=>{if(g.anchorNode===null||g.focusNode===null)return xg(g);{let h=we.fromDom(g.anchorNode),C=we.fromDom(g.focusNode);return((k,R,N,F)=>{let $=((re,pe,ae,de)=>{let le=Xu(re).dom.createRange();return le.setStart(re.dom,pe),le.setEnd(ae.dom,de),le})(k,R,N,F),Q=yo(k,N)&&R===F;return $.collapsed&&!Q})(h,g.anchorOffset,C,g.focusOffset)?me.some(vm(h,g.anchorOffset,C,g.focusOffset)):xg(g)}},Xs=(g,h,C=!0)=>{let k=(C?Xn:mg)(g,h);Ii(g,k)},Sa=g=>(h=>La(h).filter((C=>C.rangeCount>0)).bind(Cm))(g).map((h=>Pd.exact(h.start,h.soffset,h.finish,h.foffset))),g0=(g,h,C)=>((k,R,N)=>((F,$,Q)=>F.caretPositionFromPoint?((re,pe,ae)=>me.from(re.caretPositionFromPoint?.(pe,ae)).bind((de=>{if(de.offsetNode===null)return me.none();let le=re.createRange();return le.setStart(de.offsetNode,de.offset),le.collapse(),me.some(le)})))(F,$,Q):F.caretRangeFromPoint?((re,pe,ae)=>me.from(re.caretRangeFromPoint?.(pe,ae)))(F,$,Q):me.none())(k.document,R,N).map((F=>vm(we.fromDom(F.startContainer),F.startOffset,we.fromDom(F.endContainer),F.endOffset))))(g,h,C),f0={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},pu=(()=>{let g="[0-9]+",h="[eE][+-]?"+g,C=R=>`(?:${R})?`,k=["Infinity",g+"\\."+C(g)+C(h),"\\."+g+C(h),g+C(h)].join("|");return new RegExp(`^([+-]?(?:${k}))(.*)$`)})(),Fi=g=>_(g,jt(0)),hu=(g,h,C,k,R)=>R(g.slice(0,h)).concat(k).concat(R(g.slice(C))),Cp=g=>(h,C,k,R)=>{if(g(k)){let N=Math.max(R,h[C]-Math.abs(k)),F=Math.abs(N-h[C]);return k>=0?F:-F}return k},xo=Cp((g=>g<0)),Mr=Cp(ht),Ld=()=>{let g=(C,k,R,N)=>{let F=(100+R)/100,$=Math.max(N,(C[k]+R)/F);return _(C,((Q,re)=>(re===k?$:Q/F)-Q))},h=(C,k,R,N,F,$)=>$?g(C,k,N,F):((Q,re,pe,ae,de)=>{let le=xo(Q,re,ae,de);return hu(Q,re,pe+1,[le,0],Fi)})(C,k,R,N,F);return{resizeTable:(C,k)=>C(k),clampTableDelta:xo,calcLeftEdgeDeltas:h,calcMiddleDeltas:(C,k,R,N,F,$,Q)=>h(C,R,N,F,$,Q),calcRightEdgeDeltas:(C,k,R,N,F,$)=>{if($)return g(C,R,N,F);{let Q=xo(C,R,N,F);return Fi(C.slice(0,R)).concat([Q])}},calcRedestributedWidths:(C,k,R,N)=>{if(N){let F=(k+R)/k,$=_(C,(Q=>Q/F));return{delta:100*F-100,newSizes:$}}return{delta:R,newSizes:C}}}},bu=()=>{let g=(h,C,k,R,N)=>{let F=Mr(h,R>=0?k:C,R,N);return hu(h,C,k+1,[F,-F],Fi)};return{resizeTable:(h,C,k)=>{k&&h(C)},clampTableDelta:(h,C,k,R,N)=>{if(N){if(k>=0)return k;{let F=Ln(h,(($,Q)=>$+Q-R),0);return Math.max(-F,k)}}return xo(h,C,k,R)},calcLeftEdgeDeltas:g,calcMiddleDeltas:(h,C,k,R,N,F)=>g(h,k,R,N,F),calcRightEdgeDeltas:(h,C,k,R,N,F)=>{if(F)return Fi(h);{let $=R/h.length;return _(h,jt($))}},calcRedestributedWidths:(h,C,k,R)=>({delta:0,newSizes:h})}},si=(g,h,C=0)=>z(g,h).map((k=>parseInt(k,10))).getOr(C),ul=(g,h)=>si(g,h,1),tc=g=>yr("col")(g)?si(g,"span",1)>1:ul(g,"colspan")>1,Sg=(g,h)=>parseInt(ec(g,h),10),bs=jt(10),rr=jt(10),$o=(g,h)=>Js(g,h,ht),Js=(g,h,C)=>it(Or(g),(k=>ur(k,h)?C(k)?[k]:[]:Js(k,h,C))),dl=(g,h)=>((C,k,R=ve)=>R(k)?me.none():Ve(C,ps(k))?me.some(k):vg(k,C.join(","),(N=>ur(N,"table")||R(N))))(["td","th"],g,h),ka=g=>$o(g,"th,td"),vf=g=>ur(g,"colgroup")?bm(g,"col"):it(kg(g),(h=>bm(h,"col"))),Bo=(g,h)=>Ys(g,"table",h),Hi=g=>$o(g,"tr"),kg=g=>Bo(g).fold(jt([]),(h=>bm(h,"colgroup"))),aa=yr("th"),wm=g=>Ot(g,(h=>aa(h.element))),xm=(g,h)=>g&&h?"sectionCells":g?"section":"cells",Eg=g=>{let h=g.section==="thead",C=lu(nd(g.cells),"th");return g.section==="tfoot"?{type:"footer"}:h||C?{type:"header",subType:xm(h,C)}:{type:"body"}},nd=g=>{let h=So(g,(C=>aa(C.element)));return h.length===0?me.some("td"):h.length===g.length?me.some("th"):me.none()},yf=(g,h)=>_(g,(C=>{if(ps(C)==="colgroup"){let k=_(vf(C),(R=>{let N=si(R,"span",1);return zr(R,1,N)}));return qu(C,k,"colgroup")}{let k=_(ka(C),(R=>{let N=si(R,"rowspan",1),F=si(R,"colspan",1);return zr(R,N,F)}));return qu(C,k,h(C))}})),wp=g=>al(g).map((h=>{let C=ps(h);return(k=>Ve(na,k))(C)?C:"tbody"})).getOr("tbody"),vu=g=>{let h=Hi(g),C=[...kg(g),...h];return yf(C,wp)},Tg="data-snooker-locked-cols",xp=g=>z(g,Tg).bind((h=>me.from(h.match(/\d+/g)))).map((h=>Xa(h,ht))),Bl=g=>{let h=Ln(_n(g).rows,((k,R)=>(wt(R.cells,((N,F)=>{N.isLocked&&(k[F]=!0)})),k)),{}),C=ro(h,((k,R)=>parseInt(R,10)));return(k=>{let R=ut.call(k,0);return R.sort(void 0),R})(C)},Sp=(g,h)=>g+","+h,Cf=(g,h)=>{let C=it(g.all,(k=>k.cells));return So(C,h)},Ag=g=>{let h={},C=[],k=so(g).map((de=>de.element)).bind(Bo).bind(xp).getOr({}),R=0,N=0,F=0,{pass:$,fail:Q}=ls(g,(de=>de.section==="colgroup"));wt(Q,(de=>{let le=[];wt(de.cells,(Se=>{let ye=0;for(;h[Sp(F,ye)]!==void 0;)ye++;let Ue=((nt,rt)=>Pe(nt,rt)&&nt[rt]!==void 0&&nt[rt]!==null)(k,ye.toString()),We=((nt,rt,at,mt,vt,Ht)=>({element:nt,rowspan:rt,colspan:at,row:mt,column:vt,isLocked:Ht}))(Se.element,Se.rowspan,Se.colspan,F,ye,Ue);for(let nt=0;nt<Se.colspan;nt++)for(let rt=0;rt<Se.rowspan;rt++){let at=ye+nt,mt=Sp(F+rt,at);h[mt]=We,N=Math.max(N,at+1)}le.push(We)})),R++,C.push(qu(de.element,le,de.section)),F++}));let{columns:re,colgroups:pe}=L($).map((de=>{let le=(ye=>{let Ue={},We=0;return wt(ye.cells,(nt=>{let rt=nt.colspan;vn(rt,(at=>{let mt=We+at;Ue[mt]=((vt,Ht,ln)=>({element:vt,colspan:Ht,column:ln}))(nt.element,rt,mt)})),We+=rt})),Ue})(de);return{colgroups:[((ye,Ue)=>({element:ye,columns:Ue}))(de.element,Kt(le))],columns:le}})).getOrThunk((()=>({colgroups:[],columns:{}})));return{grid:((de,le)=>({rows:de,columns:le}))(R,N),access:h,all:C,columns:re,colgroups:pe}},ia=g=>{let h=vu(g);return Ag(h)},_g=Ag,ri=(g,h,C)=>me.from(g.access[Sp(h,C)]),Og=(g,h,C)=>{let k=Cf(g,(R=>C(h,R.element)));return k.length>0?me.some(k[0]):me.none()},Zr=Cf,Pl=g=>it(g.all,(h=>h.cells)),od=g=>Kt(g.columns),Oo=g=>Ja(g.columns).length>0,wr=(g,h)=>me.from(g.columns[h]),Br=(g,h,C)=>An(C(g.element,h),!0,g.isLocked),yu=(g,h)=>g.section!==h?$r(g.element,g.cells,h,g.isNew):g,ml=()=>({transformRow:yu,transformCell:(g,h,C)=>{let k=C(g.element,h),R=ps(k)!=="td"?(N=>{let F=Ns(N,"td");Ec(N,F);let $=Or(N);return Ba(F,$),ot(N),F})(k):k;return An(R,g.isNew,g.isLocked)}}),Wr=()=>({transformRow:yu,transformCell:Br}),Pr=()=>({transformRow:(g,h)=>yu(g,h==="thead"?"tbody":h),transformCell:Br}),Ea=ml,ai=Wr,xr=Pr,Sm=()=>({transformRow:Yn,transformCell:Br}),Ws=(g,h=ht)=>{let C=g.grid,k=vn(C.columns,Yn),R=vn(C.rows,Yn);return _(k,(N=>kp((()=>it(R,(F=>ri(g,F,N).filter(($=>$.column===N)).toArray()))),(F=>F.colspan===1&&h(F.element)),(()=>ri(g,0,N)))))},kp=(g,h,C)=>{let k=g();return Ho(k,h).orThunk((()=>me.from(k[0]).orThunk(C))).map((R=>R.element))},Ll=g=>{let h=g.grid,C=vn(h.rows,Yn),k=vn(h.columns,Yn);return _(C,(R=>kp((()=>it(k,(N=>ri(g,R,N).filter((F=>F.row===R)).fold(jt([]),(F=>[F]))))),(N=>N.rowspan===1),(()=>ri(g,R,0)))))},vi=(g,h)=>({row:g,y:h}),Ko=(g,h)=>({col:g,x:h}),yi=g=>en(g).left+Nl(g),km=g=>en(g).left,ii=(g,h)=>Ko(g,km(h)),wf=(g,h)=>Ko(g,yi(h)),gl=g=>en(g).top,Em=(g,h)=>vi(g,gl(h)),Ep=(g,h)=>vi(g,gl(h)+qs(h)),ms=(g,h,C)=>{if(C.length===0)return[];let k=_(C.slice(1),((N,F)=>N.map(($=>g(F,$))))),R=C[C.length-1].map((N=>h(C.length-1,N)));return k.concat([R])},sd={delta:Yn,positions:g=>ms(Em,Ep,g),edge:gl},Cu=yp({delta:Yn,edge:km,positions:g=>ms(ii,wf,g)},{delta:g=>-g,edge:yi,positions:g=>ms(wf,ii,g)}),Tm={delta:(g,h)=>Cu(h).delta(g,h),positions:(g,h)=>Cu(h).positions(g,h),edge:g=>Cu(g).edge(g)},Dg=/(\d+(\.\d+)?)%/,wu=/(\d+(\.\d+)?)px|em/,Rg=yr("col"),Tp=yr("tr"),Am=(g,h,C)=>{let k=xc(g).getOrThunk((()=>(R=>{let N=R.dom.body;if(N==null)throw new Error("Body is not available yet");return we.fromDom(N)})(Xu(g))));return h(g)/C(k)*100},_m=(g,h)=>{Ms(g,"width",h+"px")},fl=(g,h)=>{Ms(g,"width",h+"%")},xf=(g,h)=>{Ms(g,"height",h+"px")},Id=g=>{let h=(C=>{return ct(k=C,"height",k.dom.offsetHeight)+"px";var k})(g);return h?((C,k,R,N)=>{let F=parseFloat(C);return Sn(C,"%")&&ps(k)!=="table"?(($,Q,re,pe)=>{let ae=Bo($).map((de=>{let le=re(de);return Math.floor(Q/100*le)})).getOr(Q);return pe($,ae),ae})(k,F,R,N):F})(h,g,No,xf):No(g)},Om=(g,h)=>se(g,h).orThunk((()=>z(g,h).map((C=>C+"px")))),Dc=g=>Om(g,"width"),fa=g=>Am(g,Gs,ra),Jt=g=>{return Rg(g)?Math.round(Gs(g)):ct(h=g,"width",h.dom.offsetWidth);var h},Il=g=>Tp(g)?No(g):((h,C,k)=>k(h)/ul(h,"rowspan"))(g,0,Id),rd=(g,h,C)=>{Ms(g,"width",h+C)},Ng=g=>Am(g,Gs,ra)+"%",xu=jt(Dg),Dm=yr("col"),Fd=g=>Dc(g).getOrThunk((()=>Jt(g)+"px")),p0=g=>{return(h=g,Om(h,"height")).getOrThunk((()=>Il(g)+"px"));var h},ss=(g,h,C,k,R,N)=>g.filter(k).fold((()=>N(((F,$)=>{if($<0||$>=F.length-1)return me.none();let Q=F[$].fold((()=>{let pe=(ae=>{let de=ut.call(ae,0);return de.reverse(),de})(F.slice(0,$));return kn(pe,((ae,de)=>ae.map((le=>({value:le,delta:de+1})))))}),(pe=>me.some({value:pe,delta:0}))),re=F[$+1].fold((()=>{let pe=F.slice($+1);return kn(pe,((ae,de)=>ae.map((le=>({value:le,delta:de+1})))))}),(pe=>me.some({value:pe,delta:1})));return Q.bind((pe=>re.map((ae=>{let de=ae.delta+pe.delta;return Math.abs(ae.value-pe.value)/de}))))})(C,h))),(F=>R(F))),Ia=(g,h,C,k)=>{let R=Ws(g),N=Oo(g)?(Q=>_(od(Q),(re=>me.from(re.element))))(g):R,F=[me.some(Tm.edge(h))].concat(_(Tm.positions(R,h),(Q=>Q.map((re=>re.x))))),$=pt(tc);return _(N,((Q,re)=>ss(Q,re,F,$,(pe=>{if((de=>{let le=Rd().browser,Se=le.isChromium()||le.isFirefox();return!Dm(de)||Se})(pe))return C(pe);{let de=(ae=R[re])!=null?Yn(ae):me.none();return ss(de,re,F,$,(le=>k(me.some(Math.round(Gs(le))))),k)}var ae}),k)))},li=g=>g.map((h=>h+"px")).getOr(""),Rc=(g,h,C)=>Ia(g,h,Jt,(k=>k.getOrThunk(C.minCellWidth))),pa=(g,h,C,k)=>{let R=Ll(g),N=_(g.all,($=>me.some($.element))),F=[me.some(sd.edge(h))].concat(_(sd.positions(R,h),($=>$.map((Q=>Q.y)))));return _(N,(($,Q)=>ss($,Q,F,ht,C,k)))},Nc=(g,h)=>()=>ma(g)?h(g):parseFloat(se(g,"width").getOr("0")),Sr=g=>{let h=Nc(g,(k=>parseFloat(Ng(k)))),C=Nc(g,Gs);return{width:h,pixelWidth:C,getWidths:(k,R)=>((N,F,$)=>Ia(N,F,fa,(Q=>Q.fold((()=>$.minCellWidth()),(re=>re/$.pixelWidth()*100)))))(k,g,R),getCellDelta:k=>k/C()*100,singleColumnWidth:(k,R)=>[100-k],minCellWidth:()=>bs()/C()*100,setElementWidth:fl,adjustTableWidth:k=>{let R=h();fl(g,R+k/100*R)},isRelative:!0,label:"percent"}},kr=g=>{let h=Nc(g,Gs);return{width:h,pixelWidth:h,getWidths:(C,k)=>Rc(C,g,k),getCellDelta:Yn,singleColumnWidth:(C,k)=>[Math.max(bs(),C+k)-C],minCellWidth:bs,setElementWidth:_m,adjustTableWidth:C=>{let k=h()+C;_m(g,k)},isRelative:!1,label:"pixel"}},Hd=g=>Dc(g).fold((()=>(h=>{let C=Nc(h,Gs),k=jt(0);return{width:C,pixelWidth:C,getWidths:(R,N)=>Rc(R,h,N),getCellDelta:k,singleColumnWidth:jt([0]),minCellWidth:k,setElementWidth:$t,adjustTableWidth:$t,isRelative:!0,label:"none"}})(g)),(h=>((C,k)=>xu().exec(k)!==null?Sr(C):kr(C))(g,h))),Ke=kr,Ci=Sr,Mg=(g,h,C,k)=>{C===k?te(g,h):zo(g,h,C)},fr=(g,h,C)=>{L(bm(g,h)).fold((()=>Tc(g,C)),(k=>Ec(k,C)))},Fl=(g,h)=>{let C=[],k=[],R=de=>_(de,(le=>{le.isNew&&C.push(le.element);let Se=le.element;return Be(Se),wt(le.cells,(ye=>{ye.isNew&&k.push(ye.element),Mg(ye.element,"colspan",ye.colspan,1),Mg(ye.element,"rowspan",ye.rowspan,1),_o(Se,ye.element)})),Se})),N=de=>it(de,(le=>_(le.cells,(Se=>(Mg(Se.element,"span",Se.colspan,1),Se.element))))),F=(de,le)=>{let Se=((Ue,We)=>{let nt=et(Ue,We).getOrThunk((()=>{let rt=we.fromTag(We,Xu(Ue).dom);return We==="thead"?fr(Ue,"caption,colgroup",rt):We==="colgroup"?fr(Ue,"caption",rt):_o(Ue,rt),rt}));return Be(nt),nt})(g,le),ye=(le==="colgroup"?N:R)(de);Ba(Se,ye)},$=(de,le)=>{de.length>0?F(de,le):(Se=>{et(g,Se).each(ot)})(le)},Q=[],re=[],pe=[],ae=[];return wt(h,(de=>{switch(de.section){case"thead":Q.push(de);break;case"tbody":re.push(de);break;case"tfoot":pe.push(de);break;case"colgroup":ae.push(de)}})),$(ae,"colgroup"),$(Q,"thead"),$(re,"tbody"),$(pe,"tfoot"),{newRows:C,newCells:k}},jr=(g,h)=>{if(g.length===0)return 0;let C=g[0];return _t(g,(k=>!h(C.element,k.element))).getOr(g.length)},ha=(g,h)=>{let C=_(g,(k=>_(k.cells,ve)));return _(g,((k,R)=>{let N=it(k.cells,((F,$)=>{if(C[R][$]===!1){let de=((le,Se,ye,Ue)=>{let We=((mt,vt)=>mt[vt])(le,Se),nt=We.section==="colgroup",rt=jr(We.cells.slice(ye),Ue),at=nt?1:jr(((mt,vt)=>_(mt,(Ht=>us(Ht,vt))))(le.slice(Se),ye),Ue);return{colspan:rt,rowspan:at}})(g,R,$,h);return((le,Se,ye,Ue)=>{for(let We=le;We<le+ye;We++)for(let nt=Se;nt<Se+Ue;nt++)C[We][nt]=!0})(R,$,de.rowspan,de.colspan),[(Q=F.element,re=de.rowspan,pe=de.colspan,ae=F.isNew,{element:Q,rowspan:re,colspan:pe,isNew:ae})]}return[];var Q,re,pe,ae}));return((F,$,Q,re)=>({element:F,cells:$,section:Q,isNew:re}))(k.element,N,k.section,k.isNew)}))},Bg=(g,h,C)=>{let k=[];wt(g.colgroups,(R=>{let N=[];for(let F=0;F<g.grid.columns;F++){let $=wr(g,F).map((Q=>An(Q.element,C,!1))).getOrThunk((()=>An(h.colGap(),!0,!1)));N.push($)}k.push($r(R.element,N,"colgroup",C))}));for(let R=0;R<g.grid.rows;R++){let N=[];for(let Q=0;Q<g.grid.columns;Q++){let re=ri(g,R,Q).map((pe=>An(pe.element,C,pe.isLocked))).getOrThunk((()=>An(h.gap(),!0,!1)));N.push(re)}let F=g.all[R],$=$r(F.element,N,F.section,C);k.push($)}return k},Fa=g=>ha(g,yo),no=(g,h)=>kn(g.all,(C=>Ho(C.cells,(k=>yo(h,k.element))))),Ha=(g,h,C)=>{let k=_(h.selection,(N=>dl(N).bind((F=>no(g,F))).filter(C))),R=cr(k);return Qa(R.length>0,R)},Qs=(g,h,C,k,R,N,F,$,Q)=>{let re=ia(N),pe=me.from(Q?.section).getOrThunk(Sm);return h(re,F).map((ae=>{let de=((ye,Ue)=>Bg(ye,Ue,!1))(re,$),le=g(de,ae,yo,R($),pe),Se=Bl(le.grid);return{info:ae,grid:Fa(le.grid),cursor:le.cursor,lockedColumns:Se}})).bind((ae=>{let de=Fl(N,ae.grid),le=me.from(Q?.sizing).getOrThunk((()=>Hd(N))),Se=me.from(Q?.resize).getOrThunk(bu);return C(N,ae.grid,ae.info,{sizing:le,resize:Se,section:pe}),k(N),te(N,Tg),ae.lockedColumns.length>0&&zo(N,Tg,ae.lockedColumns.join(",")),me.some({cursor:ae.cursor,newRows:de.newRows,newCells:de.newCells})}))},Po=(g,h)=>dl(h.element).bind((C=>no(g,C).map((k=>({...k,generators:h.generators,clipboard:h.clipboard}))))),zd=(g,h)=>Ha(g,h,ht).map((C=>({cells:C,generators:h.generators,clipboard:h.clipboard}))),qr=(g,h)=>Ha(g,h,ht),ad=(g,h)=>Ha(g,h,(C=>!C.isLocked)),ci=(g,h)=>Ot(h,(C=>((k,R)=>no(k,R).exists((N=>!N.isLocked)))(g,C))),Te=(g,h)=>((C,k)=>k.mergable)(0,h).filter((C=>ci(g,C.cells))),za=(g,h)=>((C,k)=>k.unmergable)(0,h).filter((C=>ci(g,C))),Mc={...Ri([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},Yo=(g,h,C)=>{let k=((R,N)=>Oo(R)?((F,$)=>{let Q=od(F);return _(Q,((re,pe)=>({element:re.element,width:$[pe],colspan:re.colspan})))})(R,N):((F,$)=>{let Q=Pl(F);return _(Q,(re=>{let pe=((ae,de,le)=>{let Se=0;for(let ye=ae;ye<de;ye++)Se+=le[ye]!==void 0?le[ye]:0;return Se})(re.column,re.column+re.colspan,$);return{element:re.element,width:pe,colspan:re.colspan}}))})(R,N))(g,h);wt(k,(R=>{C.setElementWidth(R.element,R.width)}))},nc=(g,h,C,k,R)=>{let N=ia(g),F=R.getCellDelta(h),$=R.getWidths(N,R),Q=C===N.grid.columns-1,re=k.clampTableDelta($,C,F,R.minCellWidth(),Q),pe=((de,le,Se,ye,Ue)=>{let We=de.slice(0),nt=((at,mt)=>at.length===0?Mc.none():at.length===1?Mc.only(0):mt===0?Mc.left(0,1):mt===at.length-1?Mc.right(mt-1,mt):mt>0&&mt<at.length-1?Mc.middle(mt-1,mt,mt+1):Mc.none())(de,le),rt=jt(_(We,jt(0)));return nt.fold(rt,(at=>ye.singleColumnWidth(We[at],Se)),((at,mt)=>Ue.calcLeftEdgeDeltas(We,at,mt,Se,ye.minCellWidth(),ye.isRelative)),((at,mt,vt)=>Ue.calcMiddleDeltas(We,at,mt,vt,Se,ye.minCellWidth(),ye.isRelative)),((at,mt)=>Ue.calcRightEdgeDeltas(We,at,mt,Se,ye.minCellWidth(),ye.isRelative)))})($,C,re,R,k),ae=_(pe,((de,le)=>de+$[le]));Yo(N,ae,R),k.resizeTable(R.adjustTableWidth,re,Q)},Gr=(g,h,C)=>{let k=ia(g),R=((Q,re)=>pa(Q,re,Il,(pe=>pe.getOrThunk(rr))))(k,g),N=_(R,((Q,re)=>C===re?Math.max(h+Q,rr()):Q)),F=((Q,re)=>_(Q.all,((pe,ae)=>({element:pe.element,height:re[ae]}))))(k,N);wt(F,(Q=>{xf(Q.element,Q.height)})),wt(Pl(k),(Q=>{(re=>{xe(re,"height")})(Q.element)}));let $=lt(N,((Q,re)=>Q+re),0);xf(g,$)},rs=(g,h)=>{tc(g)||(k=>Dc(k).bind((R=>{return N=R,F=["fixed","relative","empty"],me.from(pu.exec(N)).bind(($=>{let Q=Number($[1]),re=$[2];return((pe,ae)=>zt(ae,(de=>zt(f0[de],(le=>pe===le)))))(re,F)?me.some({value:Q,unit:re}):me.none()}));var N,F})))(g).each((k=>{let R=k.value/2;rd(g,R,k.unit),rd(h,R,k.unit)}))},Su=(g,h,C)=>{let k=si(g,h,1);C===1||k<=1?te(g,h):zo(g,h,Math.min(C,k))},Ap=(g,h)=>C=>{let k=C.column+C.colspan-1,R=C.column;return k>=g&&R<h},wi=(g,h,C)=>{let k=g[C].element,R=we.fromTag("td");_o(R,we.fromTag("br")),(h?_o:Tc)(k,R)},Rm=yr("col"),Er=yr("colgroup"),oc=g=>ps(g)==="tr"||Er(g),Sf=g=>({element:g,colspan:si(g,"colspan",1),rowspan:si(g,"rowspan",1)}),Bc=g=>z(g,"scope").map((h=>h.substr(0,3))),sc=(g,h=Sf)=>{let C=R=>{if(oc(R))return Er((N={element:R}).element)?g.colgroup(N):g.row(N);{let F=R,$=(Q=>Rm(Q.element)?g.col(Q):g.cell(Q))(h(F));return k=me.some({item:F,replacement:$}),$}var N},k=me.none();return{getOrInit:(R,N)=>k.fold((()=>C(R)),(F=>N(R,F.item)?F.replacement:C(R)))}},gs=g=>h=>{let C=[],k=R=>{let N=g==="td"?{scope:null}:{},F=h.replace(R,g,N);return C.push({item:R,sub:F}),F};return{replaceOrInit:(R,N)=>{if(oc(R)||Rm(R))return R;{let F=R;return(($,Q)=>Ho(C,(re=>Q(re.item,$))))(F,N).fold((()=>k(F)),($=>N(R,$.item)?$.sub:k(F)))}}}},Nm=g=>({unmerge:h=>{let C=Bc(h);return C.each((k=>zo(h,"scope",k))),()=>{let k=g.cell({element:h,colspan:1,rowspan:1});return xe(k,"width"),xe(h,"width"),C.each((R=>zo(k,"scope",R))),k}},merge:h=>(xe(h[0],"width"),(()=>{let C=cr(_(h,Bc));if(C.length===0)return me.none();{let k=C[0],R=["row","col"];return zt(C,(N=>N!==k&&Ve(R,N)))?me.none():me.from(k)}})().fold((()=>te(h[0],"scope")),(C=>zo(h[0],"scope",C+"group"))),jt(h[0]))}),id=Ri([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Pg=(g,h,C)=>{let k=C.substring(0,C.length-g.length),R=parseFloat(k);return k===R.toString()?h(R):id.invalid(C)},xi={...id,from:g=>Sn(g,"%")?Pg("%",id.percent,g):Sn(g,"px")?Pg("px",id.pixels,g):id.invalid(g)},pl=(g,h,C)=>{let k=xi.from(C),R=Ot(g,(N=>N==="0px"))?((N,F)=>{let $=N.fold((()=>jt("")),(Q=>jt(Q/F+"px")),(()=>jt(100/F+"%")));return vn(F,$)})(k,g.length):((N,F,$)=>N.fold((()=>F),(Q=>((re,pe,ae)=>{let de=ae/pe;return _(re,(le=>xi.from(le).fold((()=>le),(Se=>Se*de+"px"),(Se=>Se/100*ae+"px"))))})(F,$,Q)),(Q=>((re,pe)=>_(re,(ae=>xi.from(ae).fold((()=>ae),(de=>de/pe*100+"%"),(de=>de+"%")))))(F,$))))(k,g,h);return h0(R)},Lg=(g,h)=>g.length===0?h:lt(g,((C,k)=>xi.from(k).fold(jt(0),Yn,Yn)+C),0),zi=(g,h)=>xi.from(g).fold(jt(g),(C=>C+h+"px"),(C=>C+h+"%")),h0=g=>{if(g.length===0)return g;let h=lt(g,((k,R)=>{let N=xi.from(R).fold((()=>({value:R,remainder:0})),(F=>($=>{let Q=Math.floor($);return{value:Q+"px",remainder:$-Q}})(F)),(F=>({value:F+"%",remainder:0})));return{output:[N.value].concat(k.output),remainder:k.remainder+N.remainder}}),{output:[],remainder:0}),C=h.output;return C.slice(0,C.length-1).concat([zi(C[C.length-1],Math.round(h.remainder))])},Pc=xi.from,$d=(g,h,C)=>{let k=ia(g),R=k.all,N=Pl(k),F=od(k);h.each(($=>{let Q=Pc($).fold(jt("px"),jt("px"),jt("%")),re=Gs(g),pe=((de,le)=>Ia(de,le,Fd,li))(k,g),ae=pl(pe,re,$);Oo(k)?((de,le,Se)=>{wt(le,((ye,Ue)=>{let We=Lg([de[Ue]],bs());Ms(ye.element,"width",We+Se)}))})(ae,F,Q):((de,le,Se)=>{wt(le,(ye=>{let Ue=de.slice(ye.column,ye.colspan+ye.column),We=Lg(Ue,bs());Ms(ye.element,"width",We+Se)}))})(ae,N,Q),Ms(g,"width",$)})),C.each(($=>{let Q=No(g),re=((pe,ae)=>pa(pe,ae,p0,li))(k,g);((pe,ae,de)=>{wt(de,(le=>{xe(le.element,"height")})),wt(ae,((le,Se)=>{Ms(le.element,"height",pe[Se])}))})(pl(re,Q,$),R,N),Ms(g,"height",$)}))},ku=g=>Dc(g).exists((h=>Dg.test(h))),b0=g=>Dc(g).exists((h=>wu.test(h))),Ig=g=>Dc(g).isNone();var rv=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],w=()=>({up:jt({selector:vg,closest:Ys,predicate:gf,all:hg}),down:jt({selector:Oc,predicate:ff}),styles:jt({get:ec,getRaw:se,set:Ms,remove:xe}),attrs:jt({get:ll,set:zo,remove:te,copyTo:(g,h)=>{let C=fe(g);Rr(h,C)}}),insert:jt({before:oi,after:Ec,afterAll:ed,append:_o,appendAll:Ba,prepend:Tc,wrap:sa}),remove:jt({unwrap:Bt,remove:ot}),create:jt({nu:we.fromTag,clone:g=>we.fromDom(g.dom.cloneNode(!1)),text:we.fromText}),query:jt({comparePosition:(g,h)=>g.dom.compareDocumentPosition(h.dom),prevSibling:Sc,nextSibling:Ju}),property:jt({children:Or,name:ps,parent:al,document:g=>wc(g).dom,isText:Bi,isComment:ws,isElement:js,isSpecial:g=>{let h=ps(g);return Ve(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],h)},getLanguage:g=>js(g)?z(g,"lang"):me.none(),getText:Zs,setText:Bs,isBoundary:g=>!!js(g)&&(ps(g)==="body"||Ve(rv,ps(g))),isEmptyTag:g=>!!js(g)&&Ve(["br","img","hr","input"],ps(g)),isNonEditable:g=>js(g)&&ll(g,"contenteditable")==="false"}),eq:yo,is:uu});let T=(g,h)=>({item:g,mode:h}),H=(g,h,C,k=j)=>g.property().parent(h).map((R=>T(R,k))),j=(g,h,C,k=ie)=>C.sibling(g,h).map((R=>T(R,k))),ie=(g,h,C,k=ie)=>{let R=g.property().children(h);return C.first(R).map((N=>T(N,k)))},Oe=[{current:H,next:j,fallback:me.none()},{current:j,next:ie,fallback:me.some(H)},{current:ie,next:ie,fallback:me.some(j)}],Je=(g,h,C,k,R=Oe)=>Ho(R,(N=>N.current===C)).bind((N=>N.current(g,h,k,N.next).orThunk((()=>N.fallback.bind((F=>Je(g,h,F,k))))))),Xe=(g,h,C,k,R,N)=>Je(g,h,k,R).bind((F=>N(F.item)?me.none():C(F.item)?me.some(F.item):Xe(g,F.item,C,F.mode,R,N))),kt=(g,h)=>({element:g,offset:h}),Zt=(g,h,C)=>g.property().isText(h)&&g.property().getText(h).trim().length===0||g.property().isComment(h)?C(h).bind((k=>Zt(g,k,C).orThunk((()=>me.some(k))))):me.none(),lo=(g,h)=>g.property().isText(h)?g.property().getText(h).length:g.property().children(h).length,Do=(g,h)=>{let C=Zt(g,h,g.query().prevSibling).getOr(h);if(g.property().isText(C))return kt(C,lo(g,C));let k=g.property().children(C);return k.length>0?Do(g,k[k.length-1]):kt(C,lo(g,C))},Es=Do,Si=w(),ld=g=>h=>g.property().children(h).length===0,cd=(g,h,C,k)=>Xe(g,h,C,j,{sibling:(R,N)=>R.query().prevSibling(N),first:R=>R.length>0?me.some(R[R.length-1]):me.none()},k),Eu=(g,h,C,k)=>Xe(g,h,C,j,{sibling:(R,N)=>R.query().nextSibling(N),first:R=>R.length>0?me.some(R[0]):me.none()},k),$i=w(),Vi=(g,h)=>((C,k,R)=>cd(C,k,ld(C),R))($i,g,h),hl=(g,h)=>((C,k,R)=>Eu(C,k,ld(C),R))($i,g,h),Lc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],_p=(g,h,C,k)=>{let R=h(g,C);return lt(k,((N,F)=>{let $=h(g,F);return Tu(g,N,$)}),R)},Tu=(g,h,C)=>h.bind((k=>C.filter(Qe(g.eq,k)))),Mm=w(),kf=(g,h)=>((C,k,R)=>R.length>0?((N,F,$,Q)=>Q(N,F,$[0],$.slice(1)))(C,k,R,_p):me.none())(Mm,((C,k)=>g(k)),h),Op=w(),ao=g=>((h,C)=>{let k=h.property().name(C);return Ve(Lc,k)})(Op,g),Ps=g=>((h,C)=>{let k=h.property().name(C);return Ve(["ol","ul"],k)})(Op,g),$a=g=>{let h=yr("br"),C=R=>Nr(R).bind((N=>{let F=Ju(N).map(($=>!!ao($)||!!((Q,re)=>Ve(["br","img","hr","input"],Q.property().name(re)))(Op,$)&&ps($)!=="img")).getOr(!1);return al(N).map(($=>{return F===!0||ps(Q=$)==="li"||gf(Q,Ps).isSome()||h(N)||ao($)&&!yo(R,$)?[]:[we.fromTag("br")];var Q}))})).getOr([]),k=(()=>{let R=it(g,(N=>{let F=Or(N);return($=>Ot($,(Q=>h(Q)||Bi(Q)&&Zs(Q).trim().length===0)))(F)?[]:F.concat(C(N))}));return R.length===0?[we.fromTag("br")]:R})();Be(g[0]),Ba(g[0],k)},pr=g=>{te(g,"width"),te(g,"height")},Ic=g=>{let h=Ng(g);$d(g,me.some(h),me.none()),pr(g)},er=g=>{let h=(C=>Gs(C)+"px")(g);$d(g,me.some(h),me.none()),pr(g)},Ef=g=>{xe(g,"width");let h=vf(g),C=h.length>0?h:ka(g);wt(C,(k=>{xe(k,"width"),pr(k)})),pr(g)},Fc={scope:["row","col"]},av=g=>()=>{let h=we.fromTag("td",g.dom);return _o(h,we.fromTag("br",g.dom)),h},v0=g=>()=>we.fromTag("col",g.dom),Rh=g=>()=>we.fromTag("colgroup",g.dom),gy=g=>()=>we.fromTag("tr",g.dom),fy=(g,h,C)=>{let k=((R,N)=>{let F=Ns(R,N),$=Or(yn(R));return Ba(F,$),F})(g,h);return vo(C,((R,N)=>{R===null?te(k,N):zo(k,N,R)})),k},Bm=g=>g,Au=(g,h,C)=>{let k=(R,N)=>{((F,$)=>{let Q=F.dom,re=$.dom;Go(Q)&&Go(re)&&(re.style.cssText=Q.style.cssText)})(R.element,N),xe(N,"height"),R.colspan!==1&&xe(N,"width")};return{col:R=>{let N=we.fromTag(ps(R.element),h.dom);return k(R,N),g(R.element,N),N},colgroup:Rh(h),row:gy(h),cell:R=>{let N=we.fromTag(ps(R.element),h.dom),F=C.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),$=F.length>0?((Q,re,pe)=>wg(Q).map((ae=>{let de=pe.join(","),le=Hs(ae,de,(Se=>yo(Se,Q)));return lt(le,((Se,ye)=>{let Ue=mo(ye);return _o(Se,Ue),Ue}),re)})).getOr(re))(R.element,N,F):N;return _o($,we.fromTag("br")),k(R,N),((Q,re)=>{vo(Fc,((pe,ae)=>z(Q,ae).filter((de=>Ve(pe,de))).each((de=>zo(re,ae,de)))))})(R.element,N),g(R.element,N),N},replace:fy,colGap:v0(h),gap:av(h)}},It=g=>({col:v0(g),colgroup:Rh(g),row:gy(g),cell:av(g),replace:Bm,colGap:v0(g),gap:av(g)}),Rn=g=>ia(g).grid,bl=(g,h,C,k)=>{let R=_n(g).rows,N=!0;for(let F=0;F<R.length;F++)for(let $=0;$<eo(R[0]);$++){let Q=R[F],re=us(Q,$),pe=C(re.element,h);pe&&!N?Al(Q,$,An(k(),!0,re.isLocked)):pe&&(N=!1)}return g},_u=(g,h)=>({rowDelta:0,colDelta:eo(g[0])-eo(h[0])}),rc=(g,h)=>({rowDelta:g.length-h.length,colDelta:0}),Xo=(g,h,C,k)=>{let R=h.section==="colgroup"?C.col:C.cell;return vn(g,(N=>An(R(),!0,k(N))))},py=(g,h,C,k)=>{let R=g[g.length-1];return g.concat(vn(h,(()=>{let N=R.section==="colgroup"?C.colgroup:C.row,F=Yt(R,N,Yn),$=Xo(F.cells.length,F,C,(Q=>Pe(k,Q.toString())));return Nn(F,$)})))},Fg=(g,h,C,k)=>_(g,(R=>{let N=Xo(h,R,C,ve);return oa(R,k,N)})),Tf=(g,h,C)=>{let k=h.colDelta<0?Fg:Yn,R=h.rowDelta<0?py:Yn,N=Bl(g),F=eo(g[0]),$=zt(N,(pe=>pe===F-1)),Q=k(g,Math.abs(h.colDelta),C,$?F-1:F),re=Bl(Q);return R(Q,Math.abs(h.rowDelta),C,Xa(re,ht))},Ou=(g,h,C,k)=>{let R=Qe(k,us(g[h],C).element),N=g[h];return g.length>1&&eo(N)>1&&(C>0&&R(Vr(N,C-1))||C<N.cells.length-1&&R(Vr(N,C+1))||h>0&&R(Vr(g[h-1],C))||h<g.length-1&&R(Vr(g[h+1],C)))},y0=(g,h,C)=>So(C,(k=>k>=g.column&&k<=eo(h[0])+g.column)),Nh=(g,h,C,k,R)=>{((re,pe,ae,de)=>{pe>0&&pe<re[0].cells.length&&wt(re,(le=>{let Se=le.cells[pe-1],ye=0,Ue=de();for(;le.cells.length>pe+ye&&ae(Se.element,le.cells[pe+ye].element);)Al(le,pe+ye,An(Ue,!0,le.cells[pe+ye].isLocked)),ye++}))})(h,g,R,k.cell);let N=rc(C,h),F=Tf(C,N,k),$=rc(h,F),Q=Tf(h,$,k);return _(Q,((re,pe)=>oa(re,g,F[pe].cells)))},tt=(g,h,C,k,R)=>{((nt,rt,at,mt)=>{let vt=_n(nt).rows;if(rt>0&&rt<vt.length){let Ht=((ln,ho)=>Ln(ln,((Tn,On)=>zt(Tn,(Dn=>ho(Dn.element,On.element)))?Tn:Tn.concat([On])),[]))(vt[rt-1].cells,at);wt(Ht,(ln=>{let ho=me.none();for(let Tn=rt;Tn<vt.length;Tn++)for(let On=0;On<eo(vt[0]);On++){let Dn=vt[Tn],Ro=us(Dn,On);at(Ro.element,ln.element)&&(ho.isNone()&&(ho=me.some(mt())),ho.each((Ir=>{Al(Dn,On,An(Ir,!0,Ro.isLocked))})))}}))}})(h,g,R,k.cell);let N=Bl(h),F=_u(h,C),$={...F,colDelta:F.colDelta-N.length},Q=Tf(h,$,k),{cols:re,rows:pe}=_n(Q),ae=Bl(Q),de=_u(C,h),le={...de,colDelta:de.colDelta+ae.length},Se=(Ue=k,We=ae,_(C,(nt=>Ln(We,((rt,at)=>{let mt=Xo(1,nt,Ue,ht)[0];return Tl(rt,at,mt)}),nt)))),ye=Tf(Se,le,k);var Ue,We;return[...re,...pe.slice(0,g),...ye,...pe.slice(g,pe.length)]},iv=(g,h,C,k,R)=>{let{rows:N,cols:F}=_n(g),$=N.slice(0,h),Q=N.slice(h);return[...F,...$,((re,pe,ae,de)=>Yt(re,(le=>de(le,ae)),pe))(N[C],((re,pe)=>h>0&&h<N.length&&k(Vr(N[h-1],pe),Vr(N[h],pe))?us(N[h],pe):An(R(re.element,k),!0,re.isLocked)),k,R),...Q]},Mh=(g,h,C,k,R)=>_(g,(N=>{let F=h>0&&h<eo(N)&&k(Vr(N,h-1),Vr(N,h)),$=((Q,re,pe,ae,de,le,Se)=>{if(pe!=="colgroup"&&ae)return us(Q,re);{let ye=us(Q,de);return An(Se(ye.element,le),!0,!1)}})(N,h,N.section,F,C,k,R);return Tl(N,h,$)})),ud=(g,h,C,k)=>((R,N,F,$)=>Vr(R[N],F)!==void 0&&N>0&&$(Vr(R[N-1],F),Vr(R[N],F)))(g,h,C,k)||((R,N,F)=>N>0&&F(Vr(R,N-1),Vr(R,N)))(g[h],C,k),Af=(g,h,C,k)=>{let R=N=>(F=>F==="row"?($=>ul($,"rowspan")>1)(h):tc(h))(N)?`${N}group`:N;return g?aa(h)?R(C):null:k&&aa(h)?R(C==="row"?"col":"row"):null},Bh=(g,h,C)=>An(C(g.element,h),!0,g.isLocked),zs=(g,h,C,k,R,N,F)=>_(g,(($,Q)=>(re=>{let pe=re.cells,ae=_(pe,((de,le)=>{if((Se=>zt(h,(ye=>C(Se.element,ye.element))))(de)){let Se=F(de,Q,le)?R(de,C,k):de;return N(Se,Q,le).each((ye=>{var Ue,We;Ue=Se.element,We={scope:me.from(ye)},vo(We,((nt,rt)=>{nt.fold((()=>{te(Ue,rt)}),(at=>{Li(Ue.dom,rt,at)}))}))})),Se}return de}));return $r(re.element,ae,re.section,re.isNew)})($))),C0=(g,h,C)=>it(g,((k,R)=>ud(g,R,h,C)?[]:[us(k,h)])),Ph=(g,h,C,k,R)=>{let N=_n(g).rows,F=it(h,(pe=>C0(N,pe,k))),$=_(N,(pe=>wm(pe.cells))),Q=((pe,ae)=>Ot(ae,Yn)&&wm(pe)?ht:(de,le,Se)=>!(ps(de.element)==="th"&&ae[le]))(F,$);return zs(g,F,k,R,Bh,((pe,ae)=>(de,le)=>me.some(Af(pe,de.element,"row",ae[le])))(C,$),Q)},Ui=(g,h,C,k)=>{let R=_n(g).rows,N=_(h,(F=>us(R[F.row],F.column)));return zs(g,N,C,k,Bh,me.none,ht)},Vo=g=>Ln(g,((h,C)=>zt(h,(k=>k.column===C.column))?h:h.concat([C])),[]).sort(((h,C)=>h.column-C.column)),_f=g=>td(g,!0),Of=g=>{ka(g).length===0&&ot(g)},w0=(g,h)=>({grid:g,cursor:h}),Va=(g,h,C)=>{let k=((R,N,F)=>{let $=_n(R).rows;return me.from($[N]?.cells[F]?.element).filter(_f).orThunk((()=>(Q=>kn(Q,(re=>kn(re.cells,(pe=>{let ae=pe.element;return Qa(_f(ae),ae)})))))($)))})(g,h,C);return w0(g,k)},Zi=g=>Ln(g,((h,C)=>zt(h,(k=>k.row===C.row))?h:h.concat([C])),[]).sort(((h,C)=>h.row-C.row)),x0=(g,h,C,k)=>{let R=h[0].row,N=Zi(h),F=lt(N,(($,Q)=>({grid:iv($.grid,R,Q.row+$.delta,C,k.getOrInit),delta:$.delta+1})),{grid:g,delta:0}).grid;return Va(F,R,h[0].column)},lv=(g,h,C,k)=>{let R=Zi(h),N=R[R.length-1],F=N.row+N.rowspan,$=lt(R,((Q,re)=>iv(Q,F,re.row,C,k.getOrInit)),g);return Va($,F,h[0].column)},$x=(g,h,C,k)=>{let R=h.details,N=Vo(R),F=N[0].column,$=lt(N,((Q,re)=>({grid:Mh(Q.grid,F,re.column+Q.delta,C,k.getOrInit),delta:Q.delta+1})),{grid:g,delta:0}).grid;return Va($,R[0].row,F)},hy=(g,h,C,k)=>{let R=h.details,N=R[R.length-1],F=N.column+N.colspan,$=Vo(R),Q=lt($,((re,pe)=>Mh(re,F,pe.column,C,k.getOrInit)),g);return Va(Q,R[0].row,F)},S0=(g,h,C,k)=>{let R=Vo(h),N=_(R,($=>$.column)),F=Ph(g,N,!0,C,k.replaceOrInit);return Va(F,h[0].row,h[0].column)},cv=(g,h,C,k)=>{let R=Ui(g,h,C,k.replaceOrInit);return Va(R,h[0].row,h[0].column)},k0=(g,h,C,k)=>{let R=Vo(h),N=_(R,($=>$.column)),F=Ph(g,N,!1,C,k.replaceOrInit);return Va(F,h[0].row,h[0].column)},Wi=(g,h,C,k)=>{let R=Ui(g,h,C,k.replaceOrInit);return Va(R,h[0].row,h[0].column)},Hc=(g,h)=>(C,k,R,N,F)=>{let $=Zi(k),Q=_($,(pe=>pe.row)),re=((pe,ae,de,le,Se,ye,Ue)=>{let{cols:We,rows:nt}=_n(pe),rt=nt[ae[0]],at=it(ae,(Tn=>((On,Dn,Ro)=>{let Ir=On[Dn];return it(Ir.cells,((di,_a)=>ud(On,Dn,_a,Ro)?[]:[di]))})(nt,Tn,Se))),mt=_(rt.cells,((Tn,On)=>wm(C0(nt,On,Se)))),vt=[...nt];wt(ae,(Tn=>{vt[Tn]=Ue.transformRow(nt[Tn],de)}));let Ht=[...We,...vt],ln=((Tn,On)=>Ot(On,Yn)&&wm(Tn.cells)?ht:(Dn,Ro,Ir)=>!(ps(Dn.element)==="th"&&On[Ir]))(rt,mt),ho=((Tn,On)=>(Dn,Ro,Ir)=>me.some(Af(Tn,Dn.element,"col",On[Ir])))(le,mt);return zs(Ht,at,Se,ye,Ue.transformCell,ho,ln)})(C,Q,g,h,R,N.replaceOrInit,F);return Va(re,k[0].row,k[0].column)},Du=Hc("thead",!0),E0=Hc("tbody",!1),uv=Hc("tfoot",!1),Vx=(g,h,C,k)=>{let R=Vo(h.details),N=(($,Q)=>it($,(re=>{let pe=re.cells,ae=lt(Q,((de,le)=>le>=0&&le<de.length?de.slice(0,le).concat(de.slice(le+1)):de),pe);return ae.length>0?[$r(re.element,ae,re.section,re.isNew)]:[]})))(g,_(R,($=>$.column))),F=N.length>0?N[0].cells.length-1:0;return Va(N,R[0].row,Math.min(R[0].column,F))},Lh=(g,h,C,k)=>{let R=Zi(h),N=(($,Q,re)=>{let{rows:pe,cols:ae}=_n($);return[...ae,...pe.slice(0,Q),...pe.slice(re+1)]})(g,R[0].row,R[R.length-1].row),F=Math.max(_n(N).rows.length-1,0);return Va(N,Math.min(h[0].row,F),h[0].column)},dd=(g,h,C,k)=>{let R=h.cells;$a(R);let N=((F,$,Q,re)=>{let pe=_n(F).rows;if(pe.length===0)return F;for(let ae=$.startRow;ae<=$.finishRow;ae++)for(let de=$.startCol;de<=$.finishCol;de++){let le=pe[ae],Se=us(le,de).isLocked;Al(le,de,An(re(),!1,Se))}return F})(g,h.bounds,0,k.merge(R));return w0(N,me.from(R[0]))},ki=(g,h,C,k)=>{let R=lt(h,((N,F)=>bl(N,F,C,k.unmerge(F))),g);return w0(R,me.from(h[0]))},T0=(g,h,C,k)=>{let R=(($,Q)=>{let re=ia($);return Bg(re,Q,!0)})(h.clipboard,h.generators);var N,F;return(($,Q,re,pe,ae)=>{let de=Bl(Q),le=((We,nt,rt)=>{let at=eo(nt[0]),mt=_n(nt).cols.length+We.row,vt=vn(at-We.column,(Ht=>Ht+We.column));return{row:mt,column:Ho(vt,(Ht=>Ot(rt,(ln=>ln!==Ht)))).getOr(at-1)}})($,Q,de),Se=_n(re).rows,ye=y0(le,Se,de);return((We,nt,rt)=>{if(We.row>=nt.length||We.column>eo(nt[0]))return xn.error("invalid start address out of table bounds, row: "+We.row+", column: "+We.column);let at=nt.slice(We.row),mt=at[0].cells.slice(We.column),vt=eo(rt[0]),Ht=rt.length;return xn.value({rowDelta:at.length-Ht,colDelta:mt.length-vt})})(le,Q,Se).map((We=>{let nt={...We,colDelta:We.colDelta-ye.length},rt=Tf(Q,nt,pe),at=Bl(rt),mt=y0(le,Se,at);return((vt,Ht,ln,ho,Tn,On)=>{let Dn=vt.row,Ro=vt.column,Ir=Dn+ln.length,di=Ro+eo(ln[0])+On.length,_a=Xa(On,ht);for(let $l=Dn;$l<Ir;$l++){let Ft=0;for(let mi=Ro;mi<di;mi++){if(_a[mi]){Ft++;continue}Ou(Ht,$l,mi,Tn)&&bl(Ht,Vr(Ht[$l],mi),Tn,ho.cell);let Zm=mi-Ro-Ft,m1=us(ln[$l-Dn],Zm),vd=m1.element,g1=ho.replace(vd);Al(Ht[$l],mi,An(g1,!0,m1.isLocked))}}return Ht})(le,rt,Se,pe,ae,mt)}))})((N=h.row,F=h.column,{row:N,column:F}),g,R,h.generators,C).fold((()=>w0(g,me.some(h.element))),($=>Va($,h.row,h.column)))},Dp=(g,h,C)=>{let k=((N,F)=>yf(N,(()=>F)))(g,C.section),R=_g(k);return Bg(R,h,!0)},Hg=(g,h,C,k)=>{let R=_n(g).rows,N=h.cells[0].column,F=R[h.cells[0].row],$=Dp(h.clipboard,h.generators,F),Q=Nh(N,g,$,h.generators,C);return Va(Q,h.cells[0].row,h.cells[0].column)},Ih=(g,h,C,k)=>{let R=_n(g).rows,N=h.cells[h.cells.length-1].column+h.cells[h.cells.length-1].colspan,F=R[h.cells[0].row],$=Dp(h.clipboard,h.generators,F),Q=Nh(N,g,$,h.generators,C);return Va(Q,h.cells[0].row,N)},A0=(g,h,C,k)=>{let R=_n(g).rows,N=h.cells[0].row,F=R[N],$=Dp(h.clipboard,h.generators,F),Q=tt(N,g,$,h.generators,C);return Va(Q,h.cells[0].row,h.cells[0].column)},fs=(g,h,C,k)=>{let R=_n(g).rows,N=h.cells[h.cells.length-1].row+h.cells[h.cells.length-1].rowspan,F=R[h.cells[0].row],$=Dp(h.clipboard,h.generators,F),Q=tt(N,g,$,h.generators,C);return Va(Q,N,h.cells[0].column)},zg=(g,h,C,k)=>((R,N,F,$)=>{let Q=_g(N),re=$.getWidths(Q,$);Yo(Q,re,$)})(0,h,0,k.sizing),Df=(g,h,C,k)=>((R,N,F,$,Q)=>{let re=_g(N),pe=$.getWidths(re,$),ae=$.pixelWidth(),{newSizes:de,delta:le}=Q.calcRedestributedWidths(pe,ae,F.pixelDelta,$.isRelative);Yo(re,de,$),$.adjustTableWidth(le)})(0,h,C,k.sizing,k.resize),dv=(g,h)=>zt(h,(C=>C.column===0&&C.isLocked)),Fh=(g,h)=>zt(h,(C=>C.column+C.colspan>=g.grid.columns&&C.isLocked)),Hh=(g,h)=>{let C=Ws(g),k=Vo(h);return Ln(k,((R,N)=>R+C[N.column].map(Nl).getOr(0)),0)},_0=g=>(h,C)=>qr(h,C).filter((k=>!(g?dv:Fh)(h,k))).map((k=>({details:k,pixelDelta:Hh(h,k)}))),O0=(g,h)=>ad(g,h).map((C=>({details:C,pixelDelta:-Hh(g,C)}))),by=g=>(h,C)=>zd(h,C).filter((k=>!(g?dv:Fh)(h,k.cells))),mv=gs("th"),Hl=gs("td"),Rp=(g,h,C,k)=>Qs(x0,qr,$t,$t,sc,g,h,C,k),Ua=(g,h,C,k)=>Qs(lv,qr,$t,$t,sc,g,h,C,k),$g=(g,h,C,k)=>Qs($x,_0(!0),Df,$t,sc,g,h,C,k),Np=(g,h,C,k)=>Qs(hy,_0(!1),Df,$t,sc,g,h,C,k),zh=(g,h,C,k)=>Qs(Vx,O0,Df,Of,sc,g,h,C,k),$h=(g,h,C,k)=>Qs(Lh,qr,$t,Of,sc,g,h,C,k),Pm=(g,h,C,k)=>Qs(S0,ad,$t,$t,mv,g,h,C,k),vy=(g,h,C,k)=>Qs(k0,ad,$t,$t,Hl,g,h,C,k),D0=(g,h,C,k)=>Qs(Du,qr,$t,$t,mv,g,h,C,k),yy=(g,h,C,k)=>Qs(E0,qr,$t,$t,Hl,g,h,C,k),gv=(g,h,C,k)=>Qs(uv,qr,$t,$t,Hl,g,h,C,k),Za=(g,h,C,k)=>Qs(cv,ad,$t,$t,mv,g,h,C,k),Lm=(g,h,C,k)=>Qs(Wi,ad,$t,$t,Hl,g,h,C,k),Cy=(g,h,C,k)=>Qs(dd,Te,zg,$t,Nm,g,h,C,k),wy=(g,h,C,k)=>Qs(ki,za,zg,$t,Nm,g,h,C,k),fv=(g,h,C,k)=>Qs(T0,Po,zg,$t,sc,g,h,C,k),xy=(g,h,C,k)=>Qs(Hg,by(!0),$t,$t,sc,g,h,C,k),R0=(g,h,C,k)=>Qs(Ih,by(!1),$t,$t,sc,g,h,C,k),Sy=(g,h,C,k)=>Qs(A0,zd,$t,$t,sc,g,h,C,k),Lr=(g,h,C,k)=>Qs(fs,zd,$t,$t,sc,g,h,C,k),Kr=(g,h)=>{let C=ia(g);return qr(C,h).bind((k=>{let R=k[k.length-1],N=k[0].column,F=R.column+R.colspan,$=Ya(_(C.all,(Q=>So(Q.cells,(re=>re.column>=N&&re.column<F)))));return nd($)})).getOr("")},Ta=(g,h)=>{let C=ia(g);return qr(C,h).bind(nd).getOr("")},Wa=(g,h)=>{let C=ia(g);return qr(C,h).bind((k=>{let R=k[k.length-1],N=k[0].row,F=R.row+R.rowspan;return($=>{let Q=_($,(ae=>Eg(ae).type)),re=Ve(Q,"header"),pe=Ve(Q,"footer");if(re||pe){let ae=Ve(Q,"body");return!re||ae||pe?re||ae||!pe?me.none():me.some("footer"):me.some("header")}return me.some("body")})(C.all.slice(N,F))})).getOr("")},ba=(g,h)=>{let C=h.column,k=h.column+h.colspan-1,R=h.row,N=h.row+h.rowspan-1;return C<=g.finishCol&&k>=g.startCol&&R<=g.finishRow&&N>=g.startRow},Yr=(g,h)=>h.column>=g.startCol&&h.column+h.colspan-1<=g.finishCol&&h.row>=g.startRow&&h.row+h.rowspan-1<=g.finishRow,Mp=(g,h,C)=>{let k=Og(g,h,yo),R=Og(g,C,yo);return k.bind((N=>R.map((F=>{return $=N,Q=F,{startRow:Math.min($.row,Q.row),startCol:Math.min($.column,Q.column),finishRow:Math.max($.row+$.rowspan-1,Q.row+Q.rowspan-1),finishCol:Math.max($.column+$.colspan-1,Q.column+Q.colspan-1)};var $,Q}))))},N0=(g,h,C)=>Mp(g,h,C).map((k=>{let R=Zr(g,Qe(ba,k));return _(R,(N=>N.element))})),Bp=(g,h)=>Og(g,h,((C,k)=>_r(k,C))).map((C=>C.element)),Vh=(g,h,C)=>{let k=Uh(g);return N0(k,h,C)},M0=(g,h,C,k,R)=>{let N=Uh(g),F=yo(g,C)?me.some(h):Bp(N,h),$=yo(g,R)?me.some(k):Bp(N,k);return F.bind((Q=>$.bind((re=>N0(N,Q,re)))))},Uh=ia,pv={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Vd=(g,h,C,k)=>vn(g,(R=>((N,F,$,Q)=>{let re=we.fromTag("tr");for(let pe=0;pe<N;pe++){let ae=we.fromTag(Q<F||pe<$?"th":"td");pe<$&&zo(ae,"scope","row"),Q<F&&zo(ae,"scope","col"),_o(ae,we.fromTag("br")),_o(re,ae)}return re})(h,C,k,R))),ac=g=>{let h=[];return{bind:C=>{if(C===void 0)throw new Error("Event bind error: undefined handler");h.push(C)},unbind:C=>{h=So(h,(k=>k!==C))},trigger:(...C)=>{let k={};wt(g,((R,N)=>{k[R]=C[N]})),wt(h,(R=>{R(k)}))}}},Vg=g=>({registry:hi(g,(h=>({bind:h.bind,unbind:h.unbind}))),trigger:hi(g,(h=>h.trigger))}),Im=dt(["compare","extract","mutate","sink"]),Zh=dt(["element","start","stop","destroy"]),hv=dt(["forceDrop","drop","move","delayDrop"]),bv=()=>{let g=(()=>{let k=Vg({move:ac(["info"])});return{onEvent:$t,reset:$t,events:k.registry}})(),h=(()=>{let k=me.none(),R=Vg({move:ac(["info"])});return{onEvent:(N,F)=>{F.extract(N).each(($=>{((re,pe)=>{let ae=k.map((de=>re.compare(de,pe)));return k=me.some(pe),ae})(F,$).each((re=>{R.trigger.move(re)}))}))},reset:()=>{k=me.none()},events:R.registry}})(),C=g;return{on:()=>{C.reset(),C=h},off:()=>{C.reset(),C=g},isOn:()=>C===h,onEvent:(k,R)=>{C.onEvent(k,R)},events:h.events}},Wh=_s("ephox-dragster").resolve;var jh=Im({compare:(g,h)=>Cr(h.left-g.left,h.top-g.top),extract:g=>me.some(Cr(g.x,g.y)),sink:(g,h)=>{let C=($=>{let Q={layerClass:Wh("blocker"),...$},re=we.fromTag("div");return zo(re,"role","presentation"),zo(re,"data-mce-bogus","all"),Ac(re,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),yg(re,Wh("blocker")),yg(re,Q.layerClass),{element:jt(re),destroy:()=>{ot(re)}}})(h),k=Pi(C.element(),"mousedown",g.forceDrop),R=Pi(C.element(),"mouseup",g.drop),N=Pi(C.element(),"mousemove",g.move),F=Pi(C.element(),"mouseout",g.delayDrop);return Zh({element:C.element,start:$=>{_o($,C.element())},stop:()=>{ot(C.element())},destroy:()=>{C.destroy(),R.unbind(),N.unbind(),F.unbind(),k.unbind()}})},mutate:(g,h)=>{g.mutate(h.left,h.top)}});let B0=_s("ephox-snooker").resolve,qh=B0("resizer-bar"),md=B0("resizer-rows"),Xr=B0("resizer-cols"),Ug=g=>{let h=Oc(g.parent(),"."+qh);wt(h,ot)},zc=(g,h,C)=>{let k=g.origin();wt(h,(R=>{R.each((N=>{let F=C(k,N);yg(F,qh),_o(g.parent(),F)}))}))},Gh=(g,h,C,k,R)=>{let N=en(C),F=h.isResizable,$=k.length>0?sd.positions(k,C):[],Q=$.length>0?((ae,de)=>it(ae.all,((le,Se)=>de(le.element)?[Se]:[])))(g,F):[];((ae,de,le,Se)=>{zc(ae,de,((ye,Ue)=>{let We=((nt,rt,at,mt)=>{let vt=we.fromTag("div");return Ac(vt,{position:"absolute",left:rt+"px",top:at-3.5+"px",height:"7px",width:mt+"px"}),Rr(vt,{"data-mce-bogus":"all","data-row":nt,role:"presentation"}),vt})(Ue.row,le.left-ye.left,Ue.y-ye.top,Se);return yg(We,md),We}))})(h,So($,((ae,de)=>zt(Q,(le=>de===le)))),N,Nl(C));let re=R.length>0?Tm.positions(R,C):[],pe=re.length>0?((ae,de)=>{let le=[];return vn(ae.grid.columns,(Se=>{wr(ae,Se).map((ye=>ye.element)).forall(de)&&le.push(Se)})),So(le,(Se=>{let ye=Zr(ae,(Ue=>Ue.column===Se));return Ot(ye,(Ue=>de(Ue.element)))}))})(g,F):[];((ae,de,le,Se)=>{zc(ae,de,((ye,Ue)=>{let We=((nt,rt,at,mt,vt)=>{let Ht=we.fromTag("div");return Ac(Ht,{position:"absolute",left:rt-3.5+"px",top:at+"px",height:vt+"px",width:"7px"}),Rr(Ht,{"data-mce-bogus":"all","data-column":nt,role:"presentation"}),Ht})(Ue.col,Ue.x-ye.left,le.top-ye.top,0,Se);return yg(We,Xr),We}))})(h,So(re,((ae,de)=>zt(pe,(le=>de===le)))),N,qs(C))},P0=(g,h)=>{if(Ug(g),g.isResizable(h)){let C=ia(h),k=Ll(C),R=Ws(C);Gh(C,g,h,k,R)}},L0=(g,h)=>{let C=Oc(g.parent(),"."+qh);wt(C,h)},ky=g=>{L0(g,(h=>{Ms(h,"display","none")}))},I0=g=>{L0(g,(h=>{Ms(h,"display","block")}))},Ux=B0("resizer-bar-dragging"),Ey=g=>{let h=(()=>{let ae=Vg({drag:ac(["xDelta","yDelta","target"])}),de=me.none(),le=(()=>{let Se=Vg({drag:ac(["xDelta","yDelta"])});return{mutate:(ye,Ue)=>{Se.trigger.drag(ye,Ue)},events:Se.registry}})();return le.events.drag.bind((Se=>{de.each((ye=>{ae.trigger.drag(Se.xDelta,Se.yDelta,ye)}))})),{assign:Se=>{de=me.some(Se)},get:()=>de,mutate:le.mutate,events:ae.registry}})(),C=((ae,de={})=>((le,Se,ye)=>{let Ue=!1,We=Vg({start:ac([]),stop:ac([])}),nt=bv(),rt=()=>{vt.stop(),nt.isOn()&&(nt.off(),We.trigger.stop())},at=(Ht=>{let ln=null,ho=()=>{Cs(ln)||(clearTimeout(ln),ln=null)};return{cancel:ho,throttle:(...Tn)=>{ho(),ln=setTimeout((()=>{ln=null,Ht.apply(null,Tn)}),200)}}})(rt);nt.events.move.bind((Ht=>{Se.mutate(le,Ht.info)}));let mt=Ht=>(...ln)=>{Ue&&Ht.apply(null,ln)},vt=Se.sink(hv({forceDrop:rt,drop:mt(rt),move:mt((Ht=>{at.cancel(),nt.onEvent(Ht,Se)})),delayDrop:mt(at.throttle)}),ye);return{element:vt.element,go:Ht=>{vt.start(Ht),nt.on(),We.trigger.start()},on:()=>{Ue=!0},off:()=>{Ue=!1},isActive:()=>Ue,destroy:()=>{vt.destroy()},events:We.registry}})(ae,de.mode??jh,de))(h,{}),k=me.none(),R=(ae,de)=>me.from(ll(ae,de));h.events.drag.bind((ae=>{R(ae.target,"data-row").each((de=>{let le=Sg(ae.target,"top");Ms(ae.target,"top",le+ae.yDelta+"px")})),R(ae.target,"data-column").each((de=>{let le=Sg(ae.target,"left");Ms(ae.target,"left",le+ae.xDelta+"px")}))}));let N=(ae,de)=>Sg(ae,de)-si(ae,"data-initial-"+de,0);C.events.stop.bind((()=>{h.get().each((ae=>{k.each((de=>{R(ae,"data-row").each((le=>{let Se=N(ae,"top");te(ae,"data-initial-top"),pe.trigger.adjustHeight(de,Se,parseInt(le,10))})),R(ae,"data-column").each((le=>{let Se=N(ae,"left");te(ae,"data-initial-left"),pe.trigger.adjustWidth(de,Se,parseInt(le,10))})),P0(g,de)}))}))}));let F=(ae,de)=>{pe.trigger.startAdjust(),h.assign(ae),zo(ae,"data-initial-"+de,Sg(ae,de)),yg(ae,Ux),Ms(ae,"opacity","0.2"),C.go(g.dragContainer())},$=Pi(g.parent(),"mousedown",(ae=>{var de;de=ae.target,q(de,md)&&F(ae.target,"top"),(le=>q(le,Xr))(ae.target)&&F(ae.target,"left")})),Q=ae=>yo(ae,g.view()),re=Pi(g.view(),"mouseover",(ae=>{var de;(de=ae.target,Ys(de,"table",Q).filter(td)).fold((()=>{ma(ae.target)&&!(le=>q(le,"ephox-snooker-resizer-bar")||q(le,"ephox-dragster-blocker"))(ae.target)&&Ug(g)}),(le=>{C.isActive()&&(k=me.some(le),P0(g,le))}))})),pe=Vg({adjustHeight:ac(["table","delta","row"]),adjustWidth:ac(["table","delta","column"]),startAdjust:ac([])});return{destroy:()=>{$.unbind(),re.unbind(),C.destroy(),Ug(g)},refresh:ae=>{P0(g,ae)},on:C.on,off:C.off,hideBars:Qe(ky,g),showBars:Qe(I0,g),events:pe.registry}},Zg=g=>h=>h.options.get(g),vv="100%",Fm=g=>{let h=g.dom,C=h.getParent(g.selection.getStart(),h.isBlock)??g.getBody();return ra(we.fromDom(C))+"px"},F0=g=>me.from(g.options.get("table_clone_elements")),Ud=Zg("table_header_type"),Kh=Zg("table_column_resizing"),Ty=g=>Kh(g)==="preservetable",ja=g=>Kh(g)==="resizetable",ji=Zg("table_sizing_mode"),hr=g=>ji(g)==="relative",Rf=g=>ji(g)==="fixed",gd=g=>ji(g)==="responsive",$n=Zg("table_resize_bars"),Wt=Zg("table_style_by_css"),Nf=Zg("table_merge_content_on_paste"),Zd=g=>{let h=g.options,C=h.get("table_default_attributes");return h.isSet("table_default_attributes")?C:((k,R)=>gd(k)||Wt(k)?R:Rf(k)?{...R,width:Fm(k)}:{...R,width:vv})(g,C)},yv=Zg("table_use_colgroups"),Yh=g=>we.fromDom(g.getBody()),Lo=g=>h=>yo(h,Yh(g)),Wg=g=>{te(g,"data-mce-style");let h=C=>te(C,"data-mce-style");wt(ka(g),h),wt(vf(g),h),wt(Hi(g),h)},Xh=g=>we.fromDom(g.selection.getStart()),$e=g=>g.getBoundingClientRect().width,H0=g=>g.getBoundingClientRect().height,Pp=g=>(h,C)=>{let k=h.dom.getStyle(C,g)||h.dom.getAttrib(C,g);return me.from(k).filter(ks)},Lp=Pp("width"),z0=Pp("height"),Hm=g=>bg(g,yr("table")).exists(td),Mf=g=>vg(g,"table"),fd=(g,h,C)=>{let k=R=>N=>C!==void 0&&C(N)||yo(N,R);return yo(g,h)?me.some({boxes:me.some([g]),start:g,finish:h}):Mf(g).bind((R=>Mf(h).bind((N=>{if(yo(R,N))return me.some({boxes:Vh(R,g,h),start:g,finish:h});if(_r(R,N)){let F=Hs(h,"td,th",k(R)),$=F.length>0?F[F.length-1]:h;return me.some({boxes:M0(R,g,R,h,N),start:g,finish:$})}if(_r(N,R)){let F=Hs(g,"td,th",k(N)),$=F.length>0?F[F.length-1]:g;return me.some({boxes:M0(N,g,R,h,N),start:g,finish:$})}return((F,$)=>((Q,re,pe,ae=ve)=>{let de=[re].concat(Q.up().all(re)),le=[pe].concat(Q.up().all(pe)),Se=nt=>_t(nt,ae).fold((()=>nt),(rt=>nt.slice(0,rt+1))),ye=Se(de),Ue=Se(le),We=Ho(ye,(nt=>zt(Ue,((rt,at)=>Qe(rt.eq,at))(Q,nt))));return{firstpath:ye,secondpath:Ue,shared:We}})(Mm,F,$,void 0))(g,h).shared.bind((F=>Ys(F,"table",C).bind(($=>{let Q=Hs(h,"td,th",k($)),re=Q.length>0?Q[Q.length-1]:h,pe=Hs(g,"td,th",k($)),ae=pe.length>0?pe[pe.length-1]:g;return me.some({boxes:M0($,g,R,h,N),start:ae,finish:re})}))))}))))},as=(g,h)=>{let C=Oc(g,h);return C.length>0?me.some(C):me.none()},Ru=(g,h,C)=>gr(g,h).bind((k=>gr(g,C).bind((R=>kf(Mf,[k,R]).map((N=>({first:k,last:R,table:N}))))))),Ay=(g,h,C,k,R)=>((N,F)=>Ho(N,($=>ur($,F))))(g,R).bind((N=>((F,$,Q)=>Bo(F).bind((re=>((pe,ae,de,le)=>Og(pe,ae,yo).bind((Se=>{let ye=de>0?Se.row+Se.rowspan-1:Se.row,Ue=le>0?Se.column+Se.colspan-1:Se.column;return ri(pe,ye+de,Ue+le).map((We=>We.element))})))(Uh(re),F,$,Q))))(N,h,C).bind((F=>(($,Q)=>vg($,"table").bind((re=>gr(re,Q).bind((pe=>fd(pe,$).bind((ae=>ae.boxes.map((de=>({boxes:de,start:ae.start,finish:ae.finish}))))))))))(F,k))))),Wd=(g,h)=>as(g,h),Nu=(g,h,C)=>Ru(g,h,C).bind((k=>{let R=Q=>yo(g,Q),N="thead,tfoot,tbody,table",F=vg(k.first,N,R),$=vg(k.last,N,R);return F.bind((Q=>$.bind((re=>yo(Q,re)?((pe,ae,de)=>((le,Se,ye)=>Mp(le,Se,ye).bind((Ue=>((We,nt)=>{let rt=!0,at=Qe(Yr,nt);for(let mt=nt.startRow;mt<=nt.finishRow;mt++)for(let vt=nt.startCol;vt<=nt.finishCol;vt++)rt=rt&&ri(We,mt,vt).exists(at);return rt?me.some(nt):me.none()})(le,Ue))))(Uh(pe),ae,de))(k.table,k.first,k.last):me.none()))))})),Ip=Yn,Zx=g=>{let h=(C,k)=>z(C,k).exists((R=>parseInt(R,10)>1));return g.length>0&&Ot(g,(C=>h(C,"rowspan")||h(C,"colspan")))?me.some(g):me.none()},_y=(g,h,C)=>h.length<=1?me.none():Nu(g,C.firstSelectedSelector,C.lastSelectedSelector).map((k=>({bounds:k,cells:h}))),st=(g,h)=>({selection:g,kill:h}),$0=()=>({tag:"none"}),Aa=g=>({tag:"multiple",elements:g}),Jh=g=>({tag:"single",element:g}),Cv=(g,h,C,k)=>({start:hs.on(g,h),finish:hs.on(C,k)}),jg=(g,h)=>{let C=_l(g,h);return vm(we.fromDom(C.startContainer),C.startOffset,we.fromDom(C.endContainer),C.endOffset)},on=Cv,wv=(g,h,C,k,R)=>yo(C,k)?me.none():fd(C,k,h).bind((N=>{let F=N.boxes.getOr([]);return F.length>1?(R(g,F,N.start,N.finish),me.some(st(me.some(on(C,0,C,Un(C))),!0))):me.none()})),Fp=Ri([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Wx=g=>Ys(g,"tr"),jd={...Fp,verify:(g,h,C,k,R,N,F)=>Ys(k,"td,th",F).bind(($=>Ys(h,"td,th",F).map((Q=>yo($,Q)?yo(k,$)&&Un($)===R?N(Q):Fp.none("in same cell"):kf(Wx,[$,Q]).fold((()=>((re,pe,ae)=>{let de=re.getRect(pe),le=re.getRect(ae);return le.right>de.left&&le.left<de.right})(g,Q,$)?Fp.success():N(Q)),(re=>N(Q))))))).getOr(Fp.none("default")),cata:(g,h,C,k,R)=>g.fold(h,C,k,R)},un=yr("br"),qg=(g,h,C)=>h(g,C).bind((k=>Bi(k)&&Zs(k).trim().length===0?qg(k,h,C):me.some(k))),qd=(g,h,C,k)=>((R,N)=>kc(R,N).filter(un).orThunk((()=>kc(R,N-1).filter(un))))(h,C).bind((R=>k.traverse(R).fold((()=>qg(R,k.gather,g).map(k.relative)),(N=>(F=>al(F).bind(($=>{let Q=Or($);return((re,pe)=>_t(re,Qe(yo,pe)))(Q,F).map((re=>((pe,ae,de,le)=>({parent:pe,children:ae,element:de,index:le}))($,Q,F,re)))})))(N).map((F=>hs.on(F.parent,F.index))))))),$c=(g,h)=>({left:g.left,top:g.top+h,right:g.right,bottom:g.bottom+h}),Gg=(g,h)=>({left:g.left,top:g.top-h,right:g.right,bottom:g.bottom-h}),vl=(g,h,C)=>({left:g.left+h,top:g.top+C,right:g.right+h,bottom:g.bottom+C}),Co=g=>({left:g.left,top:g.top,right:g.right,bottom:g.bottom}),Hp=(g,h)=>me.some(g.getRect(h)),Qh=(g,h,C)=>js(h)?Hp(g,h).map(Co):Bi(h)?((k,R,N)=>N>=0&&N<Un(R)?k.getRangedRect(R,N,R,N+1):N>0?k.getRangedRect(R,N-1,R,N):me.none())(g,h,C).map(Co):me.none(),Bf=(g,h)=>js(h)?Hp(g,h).map(Co):Bi(h)?g.getRangedRect(h,0,h,Un(h)).map(Co):me.none(),Vc=Ri([{none:[]},{retry:["caret"]}]),pd=(g,h,C)=>bg(h,ao).fold(ve,(k=>Bf(g,k).exists((R=>((N,F)=>N.left<F.left||Math.abs(F.right-N.left)<1||N.left>F.right)(C,R))))),Ei={point:g=>g.bottom,adjuster:(g,h,C,k,R)=>{let N=$c(R,5);return Math.abs(C.bottom-k.bottom)<1||C.top>R.bottom?Vc.retry(N):C.top===R.bottom?Vc.retry($c(R,1)):pd(g,h,R)?Vc.retry(vl(N,5,0)):Vc.none()},move:$c,gather:hl},e1=(g,h,C,k,R)=>R===0?me.some(k):((N,F,$)=>N.elementFromPoint(F,$).filter((Q=>ps(Q)==="table")).isSome())(g,k.left,h.point(k))?((N,F,$,Q,re)=>e1(N,F,$,F.move(Q,5),re))(g,h,C,k,R-1):g.situsFromPoint(k.left,h.point(k)).bind((N=>N.start.fold(me.none,(F=>Bf(g,F).bind(($=>h.adjuster(g,F,$,C,k).fold(me.none,(Q=>e1(g,h,C,Q,R-1))))).orThunk((()=>me.some(k)))),me.none))),Oy=(g,h,C)=>{let k=g.move(C,5),R=e1(h,g,C,k,100).getOr(k);return((N,F,$)=>N.point(F)>$.getInnerHeight()?me.some(N.point(F)-$.getInnerHeight()):N.point(F)<0?me.some(-N.point(F)):me.none())(g,R,h).fold((()=>h.situsFromPoint(R.left,g.point(R))),(N=>(h.scrollBy(0,N),h.situsFromPoint(R.left,g.point(R)-N))))},xv={tryUp:Qe(Oy,{point:g=>g.top,adjuster:(g,h,C,k,R)=>{let N=Gg(R,5);return Math.abs(C.top-k.top)<1||C.bottom<R.top?Vc.retry(N):C.bottom===R.top?Vc.retry(Gg(R,1)):pd(g,h,R)?Vc.retry(vl(N,5,0)):Vc.none()},move:Gg,gather:Vi}),tryDown:Qe(Oy,Ei),getJumpSize:jt(5)},t1=(g,h,C)=>g.getSelection().bind((k=>((R,N,F,$)=>(un(N)?((re,pe,ae)=>ae.traverse(pe).orThunk((()=>qg(pe,ae.gather,re))).map(ae.relative))(R,N,$):qd(R,N,F,$)).map((re=>({start:re,finish:re}))))(h,k.finish,k.foffset,C).fold((()=>me.some(kt(k.finish,k.foffset))),(R=>{let N=g.fromSitus(R);return F=jd.verify(g,k.finish,k.foffset,N.finish,N.foffset,C.failure,h),jd.cata(F,($=>me.none()),(()=>me.none()),($=>me.some(kt($,0))),($=>me.some(kt($,Un($)))));var F})))),n1=(g,h,C,k,R,N)=>N===0?me.none():zp(g,h,C,k,R).bind((F=>{let $=g.fromSitus(F),Q=jd.verify(g,C,k,$.finish,$.foffset,R.failure,h);return jd.cata(Q,(()=>me.none()),(()=>me.some(F)),(re=>yo(C,re)&&k===0?Kn(g,C,k,Gg,R):n1(g,h,re,0,R,N-1)),(re=>yo(C,re)&&k===Un(re)?Kn(g,C,k,$c,R):n1(g,h,re,Un(re),R,N-1)))})),Kn=(g,h,C,k,R)=>Qh(g,h,C).bind((N=>hd(g,R,k(N,xv.getJumpSize())))),hd=(g,h,C)=>{let k=Rd().browser;return k.isChromium()||k.isSafari()||k.isFirefox()?h.retry(g,C):me.none()},zp=(g,h,C,k,R)=>Qh(g,C,k).bind((N=>hd(g,R,N))),jx=(g,h,C,k,R)=>Ys(k,"td,th",h).bind((N=>Ys(N,"table",h).bind((F=>(($,Q)=>gf($,(re=>al(re).exists((pe=>yo(pe,Q)))),void 0).isSome())(R,F)?(($,Q,re)=>t1($,Q,re).bind((pe=>n1($,Q,pe.element,pe.offset,re,20).map($.fromSitus))))(g,h,C).bind(($=>Ys($.finish,"td,th",h).map((Q=>({start:N,finish:Q,range:$}))))):me.none())))),o1=(g,h,C,k,R,N)=>N(k,h).orThunk((()=>jx(g,h,C,k,R).map((F=>{let $=F.range;return st(me.some(on($.start,$.soffset,$.finish,$.foffset)),!0)})))),co=(g,h)=>Ys(g,"tr",h).bind((C=>Ys(C,"table",h).bind((k=>{let R=Oc(k,"tr");return yo(C,R[0])?((N,F,$)=>cd($i,N,(Q=>Nr(Q).isSome()),$))(k,0,h).map((N=>{let F=Un(N);return st(me.some(on(N,F,N,F)),!0)})):me.none()})))),qx=(g,h)=>Ys(g,"tr",h).bind((C=>Ys(C,"table",h).bind((k=>{let R=Oc(k,"tr");return yo(C,R[R.length-1])?((N,F,$)=>Eu($i,N,(Q=>wg(Q).isSome()),$))(k,0,h).map((N=>st(me.some(on(N,0,N,0)),!0))):me.none()})))),s1=(g,h,C,k,R,N,F)=>jx(g,C,k,R,N).bind(($=>wv(h,C,$.start,$.finish,F))),ic=(g,h)=>Ys(g,"td,th",h),ui=g=>xc(g).exists(td),Pf={traverse:Ju,gather:hl,relative:hs.before,retry:xv.tryDown,failure:jd.failedDown},zm={traverse:Sc,gather:Vi,relative:hs.before,retry:xv.tryUp,failure:jd.failedUp},Mu=g=>h=>h===g,Lf=Mu(38),Kg=Mu(40),Vn=g=>g>=37&&g<=40,Sv={isBackward:Mu(37),isForward:Mu(39)},V0={isBackward:Mu(39),isForward:Mu(37)},kv=g=>({elementFromPoint:(h,C)=>we.fromPoint(we.fromDom(g.document),h,C),getRect:h=>h.dom.getBoundingClientRect(),getRangedRect:(h,C,k,R)=>{let N=Pd.exact(h,C,k,R);return((F,$)=>(Q=>{let re=Q.getClientRects(),pe=re.length>0?re[0]:Q.getBoundingClientRect();return pe.width>0||pe.height>0?me.some(pe).map(Ra):me.none()})(_l(F,$)))(g,N)},getSelection:()=>Sa(g).map((h=>jg(g,h))),fromSitus:h=>{let C=Pd.relative(h.start,h.finish);return jg(g,C)},situsFromPoint:(h,C)=>g0(g,h,C).map((k=>Cv(k.start,k.soffset,k.finish,k.foffset))),clearSelection:()=>{(h=>{La(h).each((C=>C.removeAllRanges()))})(g)},collapseSelection:(h=!1)=>{Sa(g).each((C=>C.fold((k=>k.collapse(h)),((k,R)=>{let N=h?k:R;bf(g,N,N)}),((k,R,N,F)=>{let $=h?k:N,Q=h?R:F;hf(g,$,Q,$,Q)}))))},setSelection:h=>{hf(g,h.start,h.soffset,h.finish,h.foffset)},setRelativeSelection:(h,C)=>{bf(g,h,C)},selectNode:h=>{Xs(g,h,!1)},selectContents:h=>{Xs(g,h)},getInnerHeight:()=>g.innerHeight,getScrollY:()=>(h=>{let C=h!==void 0?h.dom:document,k=C.body.scrollLeft||C.documentElement.scrollLeft,R=C.body.scrollTop||C.documentElement.scrollTop;return Cr(k,R)})(we.fromDom(g.document)).top,scrollBy:(h,C)=>{((k,R,N)=>{let F=(N!==void 0?N.dom:document).defaultView;F&&F.scrollBy(k,R)})(h,C,we.fromDom(g.document))}}),Uc=(g,h)=>({rows:g,cols:h}),U0=g=>bg(g,Yu).exists(td),Z0=(g,h)=>U0(g)||U0(h),W0="data-mce-selected",Yg="data-mce-first-selected",If="data-mce-last-selected",Ff="["+W0+"]",Zc={selected:W0,selectedSelector:"td["+W0+"],th["+W0+"]",firstSelected:Yg,firstSelectedSelector:"td["+Yg+"],th["+Yg+"]",lastSelected:If,lastSelectedSelector:"td["+If+"],th["+If+"]"},r1=(g,h,C)=>({element:C,mergable:_y(h,g,Zc),unmergable:Zx(g),selection:Ip(g)}),Dy=g=>(h,C)=>{let k=ps(h),R=k==="col"||k==="colgroup"?Bo(N=h).bind((F=>Wd(F,Zc.firstSelectedSelector))).fold(jt(N),(F=>F[0])):h;var N;return Ys(R,g,C)},Ry=Dy("th,td,caption"),Ev=Dy("th,td"),bd=g=>{return h=g.model.table.getSelectedCells(),_(h,we.fromDom);var h},Tv=(g,h)=>{g.on("BeforeGetContent",(C=>{let k=R=>{C.preventDefault(),(N=>Bo(N[0]).map((F=>{let $=((Q,re)=>{let pe=rt=>ur(rt.element,re),ae=yn(Q),de=vu(ae),le=Hd(Q),Se=_g(de),ye=((rt,at)=>{let mt=rt.grid.columns,vt=rt.grid.rows,Ht=mt,ln=0,ho=0,Tn=[],On=[];return vo(rt.access,(Dn=>{if(Tn.push(Dn),at(Dn)){On.push(Dn);let Ro=Dn.row,Ir=Ro+Dn.rowspan-1,di=Dn.column,_a=di+Dn.colspan-1;Ro<vt?vt=Ro:Ir>ln&&(ln=Ir),di<Ht?Ht=di:_a>ho&&(ho=_a)}})),((Dn,Ro,Ir,di,_a,$l)=>({minRow:Dn,minCol:Ro,maxRow:Ir,maxCol:di,allCells:_a,selectedCells:$l}))(vt,Ht,ln,ho,Tn,On)})(Se,pe),Ue="th:not("+re+"),td:not("+re+")",We=Js(ae,"th,td",(rt=>ur(rt,Ue)));wt(We,ot),((rt,at,mt,vt)=>{let Ht=So(rt,(Tn=>Tn.section!=="colgroup")),ln=at.grid.columns,ho=at.grid.rows;for(let Tn=0;Tn<ho;Tn++){let On=!1;for(let Dn=0;Dn<ln;Dn++)Tn<mt.minRow||Tn>mt.maxRow||Dn<mt.minCol||Dn>mt.maxCol||(ri(at,Tn,Dn).filter(vt).isNone()?wi(Ht,On,Tn):On=!0)}})(de,Se,ye,pe);let nt=((rt,at,mt,vt)=>{if(vt.minCol===0&&at.grid.columns===vt.maxCol+1)return 0;let Ht=Rc(at,rt,mt),ln=Ln(Ht,((On,Dn)=>On+Dn),0),ho=Ln(Ht.slice(vt.minCol,vt.maxCol+1),((On,Dn)=>On+Dn),0),Tn=ho/ln*mt.pixelWidth()-mt.pixelWidth();return mt.getCellDelta(Tn)})(Q,ia(Q),le,ye);return((rt,at,mt,vt)=>{vo(mt.columns,(ln=>{(ln.column<at.minCol||ln.column>at.maxCol)&&ot(ln.element)}));let Ht=So($o(rt,"tr"),(ln=>ln.dom.childElementCount===0));wt(Ht,ot),at.minCol!==at.maxCol&&at.minRow!==at.maxRow||wt($o(rt,"th,td"),(ln=>{te(ln,"rowspan"),te(ln,"colspan")})),te(rt,Tg),te(rt,"data-snooker-col-series"),Hd(rt).adjustTableWidth(vt)})(ae,ye,Se,nt),ae})(F,Ff);return Wg($),[$]})))(R).each((N=>{let F=C.format==="text"?(($,Q)=>{let re=$.getDoc(),pe=bi(we.fromDom($.getBody())),ae=we.fromTag("div",re);zo(ae,"data-mce-bogus","all"),Ac(ae,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});let de=(Se=>Qu(Se)?Se:we.fromDom(wc(Se).dom.body))(pe);Ba(ae,Q),_o(de,ae);let le=ae.dom.innerText;return ot(ae),le})(g,N):(($,Q)=>_(Q,(re=>$.selection.serializer.serialize(re.dom,{}))).join(""))(g,N);C.content=F}))};if(C.selection===!0){let R=(N=>So(bd(N),(F=>ur(F,Zc.selectedSelector))))(g);R.length>=1&&k(R)}})),g.on("BeforeSetContent",(C=>{if(C.selection===!0&&C.paste===!0){let k=bd(g);so(k).each((R=>{Bo(R).each((N=>{let F=So((Q=>{let re=document.createElement("div");return re.innerHTML=Q,Or(we.fromDom(re))})(C.content),(Q=>ps(Q)!=="meta")),$=yr("table");if(Nf(g)&&F.length===1&&$(F[0])){C.preventDefault();let Q=we.fromDom(g.getDoc()),re=It(Q),pe=((ae,de,le)=>({element:ae,clipboard:de,generators:le}))(R,F[0],re);h.pasteCells(N,pe).each((()=>{g.focus()}))}}))}))}}))},$m=(g,h)=>g.dispatch("NewRow",{node:h}),j0=(g,h)=>g.dispatch("NewCell",{node:h}),zl=(g,h,C)=>{g.dispatch("TableModified",{...C,table:h})},$p={structure:!1,style:!0},Jr={structure:!0,style:!1},Vm={structure:!0,style:!0},Av=(g,h)=>hr(g)?Ci(h):Rf(g)?Ke(h):Hd(h),Vp=(g,h,C)=>{let k=pe=>ps(Yh(pe))==="table",R=F0(g),N=ja(g)?$t:rs,F=pe=>{switch(Ud(g)){case"section":return Ea();case"sectionCells":return ai();case"cells":return xr();default:return((ae,de)=>{var le;switch((le=ia(ae),kn(le.all,(Se=>{let ye=Eg(Se);return ye.type==="header"?me.from(ye.subType):me.none()}))).getOr(de)){case"section":return ml();case"sectionCells":return Wr();case"cells":return Pr()}})(pe,"section")}},$=(pe,ae,de,le)=>(Se,ye,Ue=!1)=>{Wg(Se);let We=we.fromDom(g.getDoc()),nt=Au(de,We,R),rt={sizing:Av(g,Se),resize:ja(g)?Ld():bu(),section:F(Se)};return ae(Se)?pe(Se,ye,nt,rt).bind((at=>{h.refresh(Se.dom),wt(at.newRows,(vt=>{$m(g,vt.dom)})),wt(at.newCells,(vt=>{j0(g,vt.dom)}));let mt=((vt,Ht)=>Ht.cursor.fold((()=>{let ln=ka(vt);return so(ln).filter(ma).map((ho=>{C.clearSelectedCells(vt.dom);let Tn=g.dom.createRng();return Tn.selectNode(ho.dom),g.selection.setRng(Tn),zo(ho,"data-mce-selected","1"),Tn}))}),(ln=>{let ho=Es(Si,ln),Tn=g.dom.createRng();return Tn.setStart(ho.element.dom,ho.offset),Tn.setEnd(ho.element.dom,ho.offset),g.selection.setRng(Tn),C.clearSelectedCells(vt.dom),me.some(Tn)})))(Se,at);return ma(Se)&&(Wg(Se),Ue||zl(g,Se.dom,le)),mt.map((vt=>({rng:vt,effect:le})))})):me.none()},Q=$($h,(pe=>!k(g)||Rn(pe).rows>1),$t,Jr),re=$(zh,(pe=>!k(g)||Rn(pe).columns>1),$t,Jr);return{deleteRow:Q,deleteColumn:re,insertRowsBefore:$(Rp,ht,$t,Jr),insertRowsAfter:$(Ua,ht,$t,Jr),insertColumnsBefore:$($g,ht,N,Jr),insertColumnsAfter:$(Np,ht,N,Jr),mergeCells:$(Cy,ht,$t,Jr),unmergeCells:$(wy,ht,$t,Jr),pasteColsBefore:$(xy,ht,$t,Jr),pasteColsAfter:$(R0,ht,$t,Jr),pasteRowsBefore:$(Sy,ht,$t,Jr),pasteRowsAfter:$(Lr,ht,$t,Jr),pasteCells:$(fv,ht,$t,Vm),makeCellsHeader:$(Za,ht,$t,Jr),unmakeCellsHeader:$(Lm,ht,$t,Jr),makeColumnsHeader:$(Pm,ht,$t,Jr),unmakeColumnsHeader:$(vy,ht,$t,Jr),makeRowsHeader:$(D0,ht,$t,Jr),makeRowsBody:$(yy,ht,$t,Jr),makeRowsFooter:$(gv,ht,$t,Jr),getTableRowType:Wa,getTableCellType:Ta,getTableColType:Kr}},a1=(g,h)=>{g.selection.select(h.dom,!0),g.selection.collapse(!0)},Ny=(g,h,C,k,R)=>{let N=($=>{let Q=$.options,re=Q.get("table_default_styles");return Q.isSet("table_default_styles")?re:((pe,ae)=>gd(pe)||!Wt(pe)?ae:Rf(pe)?{...ae,width:Fm(pe)}:{...ae,width:vv})($,re)})(g),F={styles:N,attributes:Zd(g),colGroups:yv(g)};return g.undoManager.ignore((()=>{let $=((re,pe,ae,de,le,Se=pv)=>{let ye=we.fromTag("table"),Ue=le!=="cells";Ac(ye,Se.styles),Rr(ye,Se.attributes),Se.colGroups&&_o(ye,(at=>{let mt=we.fromTag("colgroup");return vn(at,(()=>_o(mt,we.fromTag("col")))),mt})(pe));let We=Math.min(re,ae);if(Ue&&ae>0){let at=we.fromTag("thead");_o(ye,at);let mt=Vd(ae,pe,le==="sectionCells"?We:0,de);Ba(at,mt)}let nt=we.fromTag("tbody");_o(ye,nt);let rt=Vd(Ue?re-We:re,pe,Ue?0:ae,de);return Ba(nt,rt),ye})(C,h,R,k,Ud(g),F);zo($,"data-mce-id","__mce");let Q=(re=>{let pe=we.fromTag("div"),ae=we.fromDom(re.dom.cloneNode(!0));return _o(pe,ae),(de=>de.dom.innerHTML)(pe)})($);g.insertContent(Q),g.addVisual()})),gr(Yh(g),'table[data-mce-id="__mce"]').map(($=>(Rf(g)?er($):gd(g)?Ef($):(hr(g)||(Q=>vr(Q)&&Q.indexOf("%")!==-1)(N.width))&&Ic($),Wg($),te($,"data-mce-id"),((Q,re)=>{wt(Oc(re,"tr"),(pe=>{$m(Q,pe.dom),wt(Oc(pe,"th,td"),(ae=>{j0(Q,ae.dom)}))}))})(g,$),((Q,re)=>{gr(re,"td,th").each(Qe(a1,Q))})(g,$),$.dom))).getOrNull()};var i1=tinymce.util.Tools.resolve("tinymce.FakeClipboard");let Hf="x-tinymce/dom-table-",Gd=Hf+"rows",Up=Hf+"columns",Qr=g=>{let h=i1.FakeClipboardItem(g);i1.write([h])},zf=g=>{let h=i1.read()??[];return kn(h,(C=>me.from(C.getType(g))))},yl=g=>{zf(g).isSome()&&i1.clear()},My=g=>{g.fold(Zp,(h=>Qr({[Gd]:h})))},By=()=>zf(Gd),Zp=()=>yl(Gd),$f=g=>{g.fold(lc,(h=>Qr({[Up]:h})))},Um=()=>zf(Up),lc=()=>yl(Up),l1=g=>Ry(Xh(g),Lo(g)).filter(Hm),q0=(g,h)=>{let C=Lo(g),k=ae=>Bo(ae,C),R=ae=>(de=>Ev(Xh(de),Lo(de)).filter(Hm))(g).bind((de=>k(de).map((le=>ae(le,de))))),N=ae=>{g.focus()},F=(ae,de=!1)=>R(((le,Se)=>{let ye=r1(bd(g),le,Se);ae(le,ye,de).each(N)})),$=()=>R(((ae,de)=>((le,Se,ye)=>{let Ue=ia(le);return qr(Ue,Se).bind((We=>{let nt=Bg(Ue,ye,!1),rt=_n(nt).rows.slice(We[0].row,We[We.length-1].row+We[We.length-1].rowspan),at=it(rt,(vt=>{let Ht=So(vt.cells,(ln=>!ln.isLocked));return Ht.length>0?[{...vt,cells:Ht}]:[]})),mt=Fa(at);return Qa(mt.length>0,mt)})).map((We=>_(We,(nt=>{let rt=mo(nt.element);return wt(nt.cells,(at=>{let mt=yn(at.element);Mg(mt,"colspan",at.colspan,1),Mg(mt,"rowspan",at.rowspan,1),_o(rt,mt)})),rt}))))})(ae,r1(bd(g),ae,de),Au($t,we.fromDom(g.getDoc()),me.none())))),Q=()=>R(((ae,de)=>((le,Se)=>{let ye=ia(le);return ad(ye,Se).map((Ue=>{let We=Ue[Ue.length-1],nt=Ue[0].column,rt=We.column+We.colspan,at=((vt,Ht,ln)=>{if(Oo(vt)){let ho=So(od(vt),Ap(Ht,ln)),Tn=_(ho,(Dn=>{let Ro=yn(Dn.element);return Su(Ro,"span",ln-Ht),Ro})),On=we.fromTag("colgroup");return Ba(On,Tn),[On]}return[]})(ye,nt,rt),mt=((vt,Ht,ln)=>_(vt.all,(ho=>{let Tn=So(ho.cells,Ap(Ht,ln)),On=_(Tn,(Ro=>{let Ir=yn(Ro.element);return Su(Ir,"colspan",ln-Ht),Ir})),Dn=we.fromTag("tr");return Ba(Dn,On),Dn})))(ye,nt,rt);return[...at,...mt]}))})(ae,r1(bd(g),ae,de)))),re=(ae,de)=>de().each((le=>{let Se=_(le,(ye=>yn(ye)));R(((ye,Ue)=>{let We=It(we.fromDom(g.getDoc())),nt=((rt,at,mt,vt)=>({selection:Ip(rt),clipboard:mt,generators:vt}))(bd(g),0,Se,We);ae(ye,nt).each(N)}))})),pe=ae=>(de,le)=>((Se,ye)=>Pe(Se,ye)?me.from(Se[ye]):me.none())(le,"type").each((Se=>{F(ae(Se),le.no_events)}));vo({mceTableSplitCells:()=>F(h.unmergeCells),mceTableMergeCells:()=>F(h.mergeCells),mceTableInsertRowBefore:()=>F(h.insertRowsBefore),mceTableInsertRowAfter:()=>F(h.insertRowsAfter),mceTableInsertColBefore:()=>F(h.insertColumnsBefore),mceTableInsertColAfter:()=>F(h.insertColumnsAfter),mceTableDeleteCol:()=>F(h.deleteColumn),mceTableDeleteRow:()=>F(h.deleteRow),mceTableCutCol:()=>Q().each((ae=>{$f(ae),F(h.deleteColumn)})),mceTableCutRow:()=>$().each((ae=>{My(ae),F(h.deleteRow)})),mceTableCopyCol:()=>Q().each((ae=>$f(ae))),mceTableCopyRow:()=>$().each((ae=>My(ae))),mceTablePasteColBefore:()=>re(h.pasteColsBefore,Um),mceTablePasteColAfter:()=>re(h.pasteColsAfter,Um),mceTablePasteRowBefore:()=>re(h.pasteRowsBefore,By),mceTablePasteRowAfter:()=>re(h.pasteRowsAfter,By),mceTableDelete:()=>l1(g).each((ae=>{Bo(ae,C).filter(pt(C)).each((de=>{let le=we.fromText("");if(Ec(de,le),ot(de),g.dom.isEmpty(g.getBody()))g.setContent(""),g.selection.setCursorLocation();else{let Se=g.dom.createRng();Se.setStart(le.dom,0),Se.setEnd(le.dom,0),g.selection.setRng(Se),g.nodeChanged()}}))})),mceTableCellToggleClass:(ae,de)=>{R((le=>{let Se=bd(g),ye=Ot(Se,(We=>g.formatter.match("tablecellclass",{value:de},We.dom))),Ue=ye?g.formatter.remove:g.formatter.apply;wt(Se,(We=>Ue("tablecellclass",{value:de},We.dom))),zl(g,le.dom,$p)}))},mceTableToggleClass:(ae,de)=>{R((le=>{g.formatter.toggle("tableclass",{value:de},le.dom),zl(g,le.dom,$p)}))},mceTableToggleCaption:()=>{l1(g).each((ae=>{Bo(ae,C).each((de=>{et(de,"caption").fold((()=>{let le=we.fromTag("caption");_o(le,we.fromText("Caption")),((Se,ye)=>{kc(Se,0).fold((()=>{_o(Se,ye)}),(Ue=>{oi(Ue,ye)}))})(de,le),g.selection.setCursorLocation(le.dom,0)}),(le=>{yr("caption")(ae)&&cu("td",de).each((Se=>g.selection.setCursorLocation(Se.dom,0))),ot(le)})),zl(g,de.dom,Jr)}))}))},mceTableSizingMode:(ae,de)=>(le=>l1(g).each((Se=>{gd(g)||Rf(g)||hr(g)||Bo(Se,C).each((ye=>{le!=="relative"||ku(ye)?le!=="fixed"||b0(ye)?le!=="responsive"||Ig(ye)||Ef(ye):er(ye):Ic(ye),Wg(ye),zl(g,ye.dom,Jr)}))})))(de),mceTableCellType:pe((ae=>ae==="th"?h.makeCellsHeader:h.unmakeCellsHeader)),mceTableColType:pe((ae=>ae==="th"?h.makeColumnsHeader:h.unmakeColumnsHeader)),mceTableRowType:pe((ae=>{switch(ae){case"header":return h.makeRowsHeader;case"footer":return h.makeRowsFooter;default:return h.makeRowsBody}}))},((ae,de)=>g.addCommand(de,ae))),g.addCommand("mceInsertTable",((ae,de)=>{((le,Se,ye,Ue={})=>{let We=nt=>Fs(nt)&&nt>0;if(We(Se)&&We(ye)){let nt=Ue.headerRows||0,rt=Ue.headerColumns||0;return Ny(le,ye,Se,rt,nt)}console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")})(g,de.rows,de.columns,de.options)})),g.addCommand("mceTableApplyCellStyle",((ae,de)=>{let le=Ue=>"tablecell"+Ue.toLowerCase().replace("-","");if(!Wn(de))return;let Se=So(bd(g),Hm);if(Se.length===0)return;let ye=((Ue,We)=>{let nt={};return((rt,at,mt,vt)=>{vo(rt,((Ht,ln)=>{(at(Ht,ln)?mt:vt)(Ht,ln)}))})(Ue,We,(rt=>(at,mt)=>{rt[mt]=at})(nt),$t),nt})(de,((Ue,We)=>g.formatter.has(le(We))&&vr(Ue)));(Ue=>{for(let We in Ue)if(Vs.call(Ue,We))return!1;return!0})(ye)||(vo(ye,((Ue,We)=>{let nt=le(We);wt(Se,(rt=>{Ue===""?g.formatter.remove(nt,{value:null},rt.dom,!0):g.formatter.apply(nt,{value:Ue},rt.dom)}))})),k(Se[0]).each((Ue=>zl(g,Ue.dom,$p))))}))},c1=g=>!q(we.fromDom(g.target),"ephox-snooker-resizer-bar"),u1=(g,h)=>{let C=(R=Zc.selectedSelector,{get:()=>Wd(we.fromDom(g.getBody()),R).fold((()=>Ev(Xh(g),Lo(g)).fold($0,Jh)),Aa)}),k=((N,F,$)=>{let Q=de=>{te(de,N.selected),te(de,N.firstSelected),te(de,N.lastSelected)},re=de=>{zo(de,N.selected,"1")},pe=de=>{ae(de),$()},ae=de=>{let le=Oc(de,`${N.selectedSelector},${N.firstSelectedSelector},${N.lastSelectedSelector}`);wt(le,Q)};return{clearBeforeUpdate:ae,clear:pe,selectRange:(de,le,Se,ye)=>{pe(de),wt(le,re),zo(Se,N.firstSelected,"1"),zo(ye,N.lastSelected,"1"),F(le,Se,ye)},selectedSelector:N.selectedSelector,firstSelectedSelector:N.firstSelectedSelector,lastSelectedSelector:N.lastSelectedSelector}})(Zc,((N,F,$)=>{Bo(F).each((Q=>{let re=_(N,(le=>le.dom)),pe=F0(g),ae=Au($t,we.fromDom(g.getDoc()),pe),de=((le,Se,ye)=>{let Ue=ia(le);return qr(Ue,Se).map((We=>{let nt=Bg(Ue,ye,!1),{rows:rt}=_n(nt),at=((vt,Ht)=>{let ln=vt.slice(0,Ht[Ht.length-1].row+1),ho=Fa(ln);return it(ho,(Tn=>{let On=Tn.cells.slice(0,Ht[Ht.length-1].column+1);return _(On,(Dn=>Dn.element))}))})(rt,We),mt=((vt,Ht)=>{let ln=vt.slice(Ht[0].row+Ht[0].rowspan-1,vt.length),ho=Fa(ln);return it(ho,(Tn=>{let On=Tn.cells.slice(Ht[0].column+Ht[0].colspan-1,Tn.cells.length);return _(On,(Dn=>Dn.element))}))})(rt,We);return{upOrLeftCells:at,downOrRightCells:mt}}))})(Q,{selection:bd(g)},ae).map((le=>hi(le,(Se=>_(Se,(ye=>ye.dom)))))).getOrUndefined();((le,Se,ye,Ue,We)=>{le.dispatch("TableSelectionChange",{cells:Se,start:ye,finish:Ue,otherCells:We})})(g,re,F.dom,$.dom,de)}))}),(()=>(N=>{N.dispatch("TableSelectionClear")})(g)));var R;return g.on("init",(N=>{let F=g.getWin(),$=Yh(g),Q=Lo(g),re=((ye,Ue,We,nt)=>{let rt=((at,mt,vt,Ht)=>{let ln=Ni(),ho=ln.clear,Tn=On=>{ln.on((Dn=>{Ht.clearBeforeUpdate(mt),ic(On.target,vt).each((Ro=>{fd(Dn,Ro,vt).each((Ir=>{let di=Ir.boxes.getOr([]);if(di.length===1){let _a=di[0],$l=ga(_a)==="false",Ft=lu(Bd(On.target),_a,yo);$l&&Ft&&Ht.selectRange(mt,di,_a,_a)}else di.length>1&&(Ht.selectRange(mt,di,Ir.start,Ir.finish),at.selectContents(Ro))}))}))}))};return{clearstate:ho,mousedown:On=>{Ht.clear(mt),ic(On.target,vt).filter(ui).each(ln.set)},mouseover:On=>{Tn(On)},mouseup:On=>{Tn(On),ho()}}})(kv(ye),Ue,We,nt);return{clearstate:rt.clearstate,mousedown:rt.mousedown,mouseover:rt.mouseover,mouseup:rt.mouseup}})(F,$,Q,k),pe=((ye,Ue,We,nt)=>{let rt=kv(ye),at=()=>(nt.clear(Ue),me.none());return{keydown:(mt,vt,Ht,ln,ho,Tn)=>{let On=mt.raw,Dn=On.which,Ro=On.shiftKey===!0;return as(Ue,nt.selectedSelector).fold((()=>(Vn(Dn)&&!Ro&&nt.clearBeforeUpdate(Ue),Vn(Dn)&&Ro&&!Z0(vt,ln)?me.none:Kg(Dn)&&Ro?Qe(s1,rt,Ue,We,Pf,ln,vt,nt.selectRange):Lf(Dn)&&Ro?Qe(s1,rt,Ue,We,zm,ln,vt,nt.selectRange):Kg(Dn)?Qe(o1,rt,We,Pf,ln,vt,qx):Lf(Dn)?Qe(o1,rt,We,zm,ln,vt,co):me.none)),(di=>{let _a=$l=>()=>kn($l,(mi=>((Zm,m1,vd,g1,Bu)=>Ay(g1,Zm,m1,Bu.firstSelectedSelector,Bu.lastSelectedSelector).map((Kd=>(Bu.clearBeforeUpdate(vd),Bu.selectRange(vd,Kd.boxes,Kd.start,Kd.finish),Kd.boxes))))(mi.rows,mi.cols,Ue,di,nt))).fold((()=>Ru(Ue,nt.firstSelectedSelector,nt.lastSelectedSelector).map((mi=>{let Zm=Kg(Dn)||Tn.isForward(Dn)?hs.after:hs.before;return rt.setRelativeSelection(hs.on(mi.first,0),Zm(mi.table)),nt.clear(Ue),st(me.none(),!0)}))),(mi=>me.some(st(me.none(),!0))));return Vn(Dn)&&Ro&&!Z0(vt,ln)?me.none:Kg(Dn)&&Ro?_a([Uc(1,0)]):Lf(Dn)&&Ro?_a([Uc(-1,0)]):Tn.isBackward(Dn)&&Ro?_a([Uc(0,-1),Uc(-1,0)]):Tn.isForward(Dn)&&Ro?_a([Uc(0,1),Uc(1,0)]):Vn(Dn)&&!Ro?at:me.none}))()},keyup:(mt,vt,Ht,ln,ho)=>as(Ue,nt.selectedSelector).fold((()=>{let Tn=mt.raw,On=Tn.which;return Tn.shiftKey===!0&&Vn(On)&&Z0(vt,ln)?((Dn,Ro,Ir,di,_a,$l,Ft)=>yo(Ir,_a)&&di===$l?me.none():Ys(Ir,"td,th",Ro).bind((mi=>Ys(_a,"td,th",Ro).bind((Zm=>wv(Dn,Ro,mi,Zm,Ft))))))(Ue,We,vt,Ht,ln,ho,nt.selectRange):me.none()}),me.none)}})(F,$,Q,k),ae=((ye,Ue,We,nt)=>{let rt=kv(ye);return(at,mt)=>{nt.clearBeforeUpdate(Ue),fd(at,mt,We).each((vt=>{let Ht=vt.boxes.getOr([]);nt.selectRange(Ue,Ht,vt.start,vt.finish),rt.selectContents(mt),rt.collapseSelection()}))}})(F,$,Q,k);g.on("TableSelectorChange",(ye=>ae(ye.start,ye.finish)));let de=(ye,Ue)=>{(We=>We.raw.shiftKey===!0)(ye)&&(Ue.kill&&ye.kill(),Ue.selection.each((We=>{let nt=Pd.relative(We.start,We.finish),rt=_l(F,nt);g.selection.setRng(rt)})))},le=ye=>ye.button===0,Se=(()=>{let ye=cs(we.fromDom($)),Ue=cs(0);return{touchEnd:We=>{let nt=we.fromDom(We.target);if(yr("td")(nt)||yr("th")(nt)){let rt=ye.get(),at=Ue.get();yo(rt,nt)&&We.timeStamp-at<300&&(We.preventDefault(),ae(nt,nt))}ye.set(nt),Ue.set(We.timeStamp)}}})();g.on("dragstart",(ye=>{re.clearstate()})),g.on("mousedown",(ye=>{le(ye)&&c1(ye)&&re.mousedown(Dr(ye))})),g.on("mouseover",(ye=>{var Ue;((Ue=ye).buttons===void 0||1&Ue.buttons)&&c1(ye)&&re.mouseover(Dr(ye))})),g.on("mouseup",(ye=>{le(ye)&&c1(ye)&&re.mouseup(Dr(ye))})),g.on("touchend",Se.touchEnd),g.on("keyup",(ye=>{let Ue=Dr(ye);if(Ue.raw.shiftKey&&Vn(Ue.raw.which)){let We=g.selection.getRng(),nt=we.fromDom(We.startContainer),rt=we.fromDom(We.endContainer);pe.keyup(Ue,nt,We.startOffset,rt,We.endOffset).each((at=>{de(Ue,at)}))}})),g.on("keydown",(ye=>{let Ue=Dr(ye);h.hide();let We=g.selection.getRng(),nt=we.fromDom(We.startContainer),rt=we.fromDom(We.endContainer),at=yp(Sv,V0)(we.fromDom(g.selection.getStart()));pe.keydown(Ue,nt,We.startOffset,rt,We.endOffset,at).each((mt=>{de(Ue,mt)})),h.show()})),g.on("NodeChange",(()=>{let ye=g.selection,Ue=we.fromDom(ye.getStart()),We=we.fromDom(ye.getEnd());kf(Bo,[Ue,We]).fold((()=>k.clear($)),$t)}))})),g.on("PreInit",(()=>{g.serializer.addTempAttr(Zc.firstSelected),g.serializer.addTempAttr(Zc.lastSelected)})),{getSelectedCells:()=>((N,F)=>{switch(N.tag){case"none":return F();case"single":return($=>[$.dom])(N.element);case"multiple":return($=>_($,(Q=>Q.dom)))(N.elements)}})(C.get(),jt([])),clearSelectedCells:N=>k.clear(we.fromDom(N))}},Py=g=>Ar(g)&&g.nodeName==="TABLE",Vf="bar-",d1=g=>ll(g,"data-mce-resize")!=="false",Ly=g=>{let h=Ni(),C=Ni(),k=Ni(),R,N,F,$,Q=le=>Av(g,le),re=()=>Ty(g)?bu():Ld(),pe=(le,Se,ye,Ue)=>{let We=(at=>{return qt(mt=at,"corner-")?(vt=>vt.substring(7))(mt):mt;var mt})(Se),nt=Sn(We,"e"),rt=qt(We,"n");if(N===""&&Ic(le),$===""&&(at=>{let mt=(vt=>No(vt)+"px")(at);$d(at,me.none(),me.some(mt)),pr(at)})(le),ye!==R&&N!==""){Ms(le,"width",N);let at=re(),mt=Q(le),vt=Ty(g)||nt?(Ht=>Rn(Ht).columns)(le)-1:0;nc(le,ye-R,vt,at,mt)}else if((at=>/^(\d+(\.\d+)?)%$/.test(at))(N)){let at=parseFloat(N.replace("%",""));Ms(le,"width",ye*at/R+"%")}if((at=>/^(\d+(\.\d+)?)px$/.test(at))(N)&&(at=>{let mt=ia(at);Oo(mt)||wt(ka(at),(vt=>{let Ht=ec(vt,"width");Ms(vt,"width",Ht),te(vt,"width")}))})(le),Ue!==F&&$!==""){Ms(le,"height",$);let at=rt?0:(mt=>Rn(mt).rows)(le)-1;Gr(le,Ue-F,at)}};g.on("init",(()=>{let le=((Se,ye)=>((Ue,We)=>({parent:jt(Ue),view:jt(Ue),dragContainer:jt(Ue),origin:()=>en(Ue),isResizable:We}))(we.fromDom(Se.getBody()),ye))(g,d1);if(k.set(le),(Se=>{let ye=Se.options.get("object_resizing");return Ve(ye.split(","),"table")})(g)&&$n(g)){let Se=((ye,Ue,We)=>{let nt=sd,rt=Tm,at=Ey(ye),mt=Vg({beforeResize:ac(["table","type"]),afterResize:ac(["table","type"]),startDrag:ac([])});return at.events.adjustHeight.bind((vt=>{let Ht=vt.table;mt.trigger.beforeResize(Ht,"row");let ln=nt.delta(vt.delta,Ht);Gr(Ht,ln,vt.row),mt.trigger.afterResize(Ht,"row")})),at.events.startAdjust.bind((vt=>{mt.trigger.startDrag()})),at.events.adjustWidth.bind((vt=>{let Ht=vt.table;mt.trigger.beforeResize(Ht,"col");let ln=rt.delta(vt.delta,Ht),ho=We(Ht);nc(Ht,ln,vt.column,Ue,ho),mt.trigger.afterResize(Ht,"col")})),{on:at.on,off:at.off,refreshBars:at.refresh,hideBars:at.hideBars,showBars:at.showBars,destroy:at.destroy,events:mt.registry}})(le,re(),Q);g.mode.isReadOnly()||Se.on(),Se.events.startDrag.bind((ye=>{h.set(g.selection.getRng())})),Se.events.beforeResize.bind((ye=>{let Ue=ye.table.dom;((We,nt,rt,at,mt)=>{We.dispatch("ObjectResizeStart",{target:nt,width:rt,height:at,origin:mt})})(g,Ue,$e(Ue),H0(Ue),Vf+ye.type)})),Se.events.afterResize.bind((ye=>{let Ue=ye.table,We=Ue.dom;Wg(Ue),h.on((nt=>{g.selection.setRng(nt),g.focus()})),((nt,rt,at,mt,vt)=>{nt.dispatch("ObjectResized",{target:rt,width:at,height:mt,origin:vt})})(g,We,$e(We),H0(We),Vf+ye.type),g.undoManager.add()})),C.set(Se)}})),g.on("ObjectResizeStart",(le=>{let Se=le.target;if(Py(Se)&&!g.mode.isReadOnly()){let ye=we.fromDom(Se);wt(g.dom.select(".mce-clonedresizable"),(Ue=>{g.dom.addClass(Ue,"mce-"+Kh(g)+"-columns")})),!b0(ye)&&Rf(g)?er(ye):!ku(ye)&&hr(g)&&Ic(ye),Ig(ye)&&qt(le.origin,Vf)&&Ic(ye),R=le.width,N=gd(g)?"":Lp(g,Se).getOr(""),F=le.height,$=z0(g,Se).getOr("")}})),g.on("ObjectResized",(le=>{let Se=le.target;if(Py(Se)){let ye=we.fromDom(Se),Ue=le.origin;(We=>qt(We,"corner-"))(Ue)&&pe(ye,Ue,le.width,le.height),Wg(ye),zl(g,ye.dom,$p)}}));let ae=()=>{C.on((le=>{le.on(),le.showBars()}))},de=()=>{C.on((le=>{le.off(),le.hideBars()}))};return g.on("DisabledStateChange",(le=>{le.state?de():ae()})),g.on("SwitchMode",(()=>{g.mode.isReadOnly()?de():ae()})),g.on("dragstart dragend",(le=>{le.type==="dragstart"?de():ae()})),g.on("remove",(()=>{C.on((le=>{le.destroy()}))})),{refresh:le=>{C.on((Se=>Se.refreshBars(we.fromDom(le))))},hide:()=>{C.on((le=>le.hideBars()))},show:()=>{C.on((le=>le.showBars()))}}},_v=g=>{(R=>{let N=R.options.register;N("table_clone_elements",{processor:"string[]"}),N("table_use_colgroups",{processor:"boolean",default:!0}),N("table_header_type",{processor:F=>{let $=Ve(["section","cells","sectionCells","auto"],F);return $?{value:F,valid:$}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),N("table_sizing_mode",{processor:"string",default:"auto"}),N("table_default_attributes",{processor:"object",default:{border:"1"}}),N("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),N("table_column_resizing",{processor:F=>{let $=Ve(["preservetable","resizetable"],F);return $?{value:F,valid:$}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),N("table_resize_bars",{processor:"boolean",default:!0}),N("table_style_by_css",{processor:"boolean",default:!0}),N("table_merge_content_on_paste",{processor:"boolean",default:!0})})(g);let h=Ly(g),C=u1(g,h),k=Vp(g,h,C);return q0(g,k),((R,N)=>{let F=Lo(R),$=Q=>Ev(Xh(R)).bind((re=>Bo(re,F).map((pe=>{let ae=r1(bd(R),pe,re);return Q(pe,ae)})))).getOr("");vo({mceTableRowType:()=>$(N.getTableRowType),mceTableCellType:()=>$(N.getTableCellType),mceTableColType:()=>$(N.getTableColType)},((Q,re)=>R.addQueryValueHandler(re,Q)))})(g,k),Tv(g,k),{getSelectedCells:C.getSelectedCells,clearSelectedCells:C.clearSelectedCells}};Oi.add("dom",(g=>({table:_v(g)})))})();sz();rz();az();iz();lz();window.customElements.get("tinymce-editor")||window.customElements.define("tinymce-editor",class extends HTMLElement{#e=[];connectedCallback(){let Oi=this.querySelector("textarea"),ol=JSON.parse(this.dataset.config);Oi.id=`tinymce-${Math.random().toString(36).substring(2,15)}`,setTimeout(async()=>this.#e=await cz.default.init({...ol,selector:`#${Oi.id}`}),1)}disconnectedCallback(){this.#e.forEach(Oi=>{Oi.remove()})}});
/*! Bundled license information:

tinymce/tinymce.js:
  (*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE *)
*/
//# sourceMappingURL=TinyMceEditor.js.map
