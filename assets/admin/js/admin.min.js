$(function(){yii.confirm=function(t,n,o){var i=$(this);bootbox.confirm(t,function(t){if(t)if(i.data("ajax")){var e=$(i.data("target")),a=i.data("ajax");$.ajax({url:i.attr("href"),method:i.data("method")||"post",params:i.data("params"),success:function(){e.length&&("remove"===a?e.remove():"success"===a&&e.toggleClass("bg-success"))}})}else n&&n();else o&&o()})},$("[data-form-toggle]").change(function(){var l=$(this),s=l.find("option:selected");l.data("targets")&&$(l.data("targets")).each(function(){this.show()}),l.data("targets",[]),$.each(l.data("form-toggle"),function(t,e){var a,n,o,i=$.isArray(e[0])?e[0]:[e[0]],r=$.isArray(e[1])?e[1]:[e[1]];for(n=String(s.length?(a=String(i[0]).match(/^data-([\w-]+)/))?s.data(a[1]):l.val():l.prop("checked")?l.val():0),t=0;t<i.length;t++)if(String(i[t])===n){for(o=0;o<r.length;o++)l.data("targets").push($(r[o].match(/^[.#]/)?r[o]:".field-"+r[o]).hide());break}})}).filter(":visible").trigger("change"),$("[data-form-target]").change(function(){var t=$(this),e=t.find("option:selected").data("value"),a=t.data("form-target");$(a.match(/^[.#]/)?a:"#"+a).html(e)}).filter(":visible").trigger("change"),$.fn.signupForm=function(){return $(this).on("beforeValidate",function(){var e=$("#token");e.val()||($("#tz").val(jstz.determine().name()),$("#honeypot").val(""),$.get(e.data("url"),function(t){e.val(t)}))})},window.hasOwnProperty("CKEDITOR")&&CKEDITOR.on("dialogDefinition",function(t){var e=t.data.name,a=t.data.definition;if("link"===e){var n=a.getContents("info"),o=n.get("url"),i=a.getContents("target"),r=i.get("linkTargetType");n.remove("protocol"),n.remove("emailOptions"),n.remove("telOptions"),n.remove("anchorOptions"),n.remove("browse"),n.get("linkType").style="display: none",o.onKeyUp=function(t){},o.setup=function(t){this.allowOnChange=!1,t.url&&this.setValue(("string"==typeof t.url.protocol?t.url.protocol:"")+t.url.url),this.allowOnChange=!0},o.commit=function(t){t.url={protocol:"",url:this.getValue()}},r.items=[r.items[0],r.items[3]],i.remove("linkTargetName"),i.remove("popupFeatures"),i.elements[0].widths=["100%"]}}),Skeleton.initContent()});var Skeleton={initContent:function(t){var e=$(t||"body");e.find('[data-toggle="tooltip"]').tooltip(),$.hasOwnProperty("timeago")&&e.find(".timeago").timeago(),e.find(".sortable").each(function(){var t=$(this);t.sortable({clientOptions:{handle:".sortable-handle",axis:"y"},helper:function(t,e){var a=e.children(),n=e.clone();return n.children().each(function(t){$(this).width(a.eq(t).outerWidth())}),n},update:function(){$.post(t.data("sort-url"),$(this).sortable("serialize"))}})})},replaceWithAjax:function(e,t){var a=this,n=$(e);t=$.extend({url:document.location.href},"string"==typeof t?{url:t}:t||{}),$.ajax(t).done(function(t){a.initContent(n.html($("<div>").html(t).find(e).html()))})}};