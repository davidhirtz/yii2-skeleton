$(function(){yii.confirm=function(t,n,i){var r=$(this);bootbox.confirm(t,function(t){if(t)if(r.data("ajax")){var a=$(r.data("target")),e=r.data("ajax");$.ajax({url:r.attr("href"),method:r.data("method")||"post",params:r.data("params"),success:function(){a.length&&("remove"===e?a.remove():"success"===e&&a.toggleClass("bg-success"))}})}else n&&n();else i&&i()})},$("[data-form-toggle]").change(function(){var s=$(this),l=s.find("option:selected");s.data("targets")&&$(s.data("targets")).each(function(){this.show()}),s.data("targets",[]),$.each(s.data("form-toggle"),function(t,a){var e,n,i,r=$.isArray(a[0])?a[0]:[a[0]],o=$.isArray(a[1])?a[1]:[a[1]];for(n=String(l.length?(e=String(r[0]).match(/^data-([\w-]+)/))?l.data(e[1]):s.val():s.prop("checked")?s.val():0),t=0;t<r.length;t++)if(String(r[t])===n){for(i=0;i<o.length;i++)s.data("targets").push($(o[i].match(/^[.#]/)?o[i]:".field-"+o[i]).hide());break}})}).filter(":visible").trigger("change"),$("[data-form-target]").change(function(){var t,a=$(this),e=a.find("option:selected").data("value"),n=a.data("form-target");for($.isArray(e)||(e=[e]),$.isArray(n)||(n=[n]),t=0;t<n.length;t++)$(n[t].match(/^[.#]/)?n[t]:"#"+n[t]).html(e[t])}).filter(":visible").trigger("change"),$.fn.signupForm=function(){return $(this).on("beforeValidate",function(){var a=$("#token");a.val()||($("#tz").val(jstz.determine().name()),$("#honeypot").val(""),$.get(a.data("url"),function(t){a.val(t)}))})},Skeleton.initContent()});var Skeleton={initContent:function(t){var a=$(t||"body");a.find('[data-toggle="tooltip"]').tooltip(),$.hasOwnProperty("timeago")&&a.find(".timeago").timeago(),this.hasJUI()&&a.find(".sortable").each(function(){var t=$(this);t.sortable({axis:"y",handle:".sortable-handle",helper:function(t,a){var e=a.children(),n=a.clone();return n.children().each(function(t){$(this).width(e.eq(t).outerWidth())}),n},update:function(){$.post(t.data("sort-url"),$(this).sortable("serialize"))}})})},replaceWithAjax:function(a,t){var e=this,n=$(a);t=$.extend({url:document.location.href},"string"==typeof t?{url:t}:t||{}),$.ajax(t).done(function(t){e.initContent(n.html($("<div>").html(t).find(a).html()))})},hasJUI:function(){return $.hasOwnProperty("ui")}};