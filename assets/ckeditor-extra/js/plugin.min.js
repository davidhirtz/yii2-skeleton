CKEDITOR.plugins.add("extra",{init:function(n){var e=CKEDITOR.buttons;for(var t=0;t<e.length;t++)!function(t){var e=new CKEDITOR.style(t.definition);n.attachStyleStateChange(e,function(e){n.readOnly||n.getCommand(t.command).setState(e)}),n.addCommand(t.command,new CKEDITOR.styleCommand(e)),n.ui.addButton(t.name,{label:t.label,command:t.command,icon:t.icon})}(e[t]);CKEDITOR.remove("buttons")}}),CKEDITOR.on("dialogDefinition",function(e){var t,n,o,a;"link"===e.data.name&&(n=(t=(e=e.data.definition).getContents("info")).get("url"),o=t.get("linkType"),a=(e=e.getContents("target")).get("linkTargetType"),t.remove("protocol"),t.remove("browse"),o.setup=function(e){"anchor"===e.type&&(e.url={protocol:"",url:"#"+e.anchor.name},e.type="url"),this.setValue(e.type||"url")},o.items=[o.items[0],o.items[2],o.items[3]],t.remove("anchorOptions"),n.onKeyUp=function(e){},n.setup=function(e){this.allowOnChange=!1,e.url&&this.setValue(("string"==typeof e.url.protocol?e.url.protocol:"")+e.url.url),this.allowOnChange=!0},n.commit=function(e){e.url={protocol:"",url:this.getValue()}},a.items=[a.items[0],a.items[3]],e.elements[0].widths=["100%"],e.remove("popupFeatures"),e.get("linkTargetName").style="display: none")}),CKEDITOR.on("instanceReady",function(e){e.editor.dataProcessor.writer.selfClosingEnd=">",e.editor.dataProcessor.writer.setRules("p",{breakBeforeOpen:!1,breakAfterClose:!1})});